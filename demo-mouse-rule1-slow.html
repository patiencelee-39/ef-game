<!--
  ============================================================
  ğŸ“„ æª”æ¡ˆåç¨±ï¼šdemo-mouse-rule1-slow.html
  ğŸ“ ç”¨é€”ï¼šå°è€é¼ éŠæˆ²å ´ Rule1 çš„ Go/NoGo ç¤ºç¯„å‹•ç•«ï¼ˆæ…¢ç‰ˆ Bï¼‰
  ğŸ¯ ç›®æ¨™å°è±¡ï¼š4-6 æ­²å­¸å‰å¹¼å…’ï¼ˆå«è½æå…’ï¼‰
  ğŸ® éŠæˆ²è¦å‰‡ï¼š
     - çœ‹åˆ°ğŸ§€èµ·å¸ â†’ æŒ‰æŒ‰éˆ•ï¼ˆGoï¼‰
     - çœ‹åˆ°ğŸ˜ºè²“å’ª â†’ ä¸è¦æŒ‰ï¼ˆNoGoï¼‰
  
  ğŸ“ å°æ‡‰éŠæˆ²æª”æ¡ˆï¼šindex-0204v14.html ç¬¬ä¸€å›åˆ
  
  â±ï¸ ç‰ˆæœ¬ï¼šæ…¢ç‰ˆ Bï¼ˆ~22 ç§’å¾ªç’°ï¼‰ï¼Œé©åˆåˆæ¬¡æ•™å­¸
  ğŸ¤š æ‰‹æŒ‡ç‰ˆæœ¬ï¼šFingerTap.svgï¼ˆGo é»æ“Šç”¨ï¼‰
  ğŸ–ï¸ é˜»æ­¢æ‰‹ï¼šHandStop.svgï¼ˆNoGo æ™‚æ¨é–‹ FingerTapï¼‰
  ğŸ”„ æ–æ‰‹å¹…åº¦ï¼šå¤§å¹…åº¦ Â±45Â°
  
  ğŸ« ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³» | åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ²ç ”ç©¶å°ˆæ¡ˆ
  ============================================================

  ã€å‹•ç•«è¨­è¨ˆèªªæ˜ã€‘

  â—† Go ç¤ºç¯„ï¼ˆèµ·å¸ï¼‰æµç¨‹ï¼š
    1. èµ·å¸ç¬é–“å‡ºç¾ï¼ˆç„¡å‹•ç•«ï¼Œèˆ‡éŠæˆ²ä¸€è‡´ï¼‰
    2. FingerTap å¾å³å´å¤§å¹…ç§»å…¥ï¼ŒæŒ‡å‘æŒ‰éˆ• â†’ åœç•™ â†’ é€€å‡ºï¼ˆÃ—3 æ¬¡ï¼‰
    3. FingerTap ç§»å…¥ä¸¦é»æ“ŠæŒ‰éˆ•ï¼ˆæŒ‰éˆ•ä¸‹å£“+ç™¼å…‰ï¼‰ï¼ˆÃ—3 æ¬¡ï¼‰
    4. ç¶ è‰²å‹¾å‹¾ âœ… å½ˆå‡ºï¼ˆÃ—3 æ¬¡ï¼‰
    5. æ¸…å ´

  â—† NoGo ç¤ºç¯„ï¼ˆè²“å’ªï¼‰æµç¨‹ï¼š
    1. è²“å’ªç¬é–“å‡ºç¾ï¼ˆç„¡å‹•ç•«ï¼Œèˆ‡éŠæˆ²ä¸€è‡´ï¼‰
    2. FingerTap å¾å³å´ç§»å…¥æº–å‚™æŒ‰ â†’
       HandStop å¾å·¦å´è¡å…¥ï¼Œæ¨é–‹ FingerTapï¼ŒåŒæ™‚ Â±45Â° æ–æ‰‹ï¼ˆÃ—3 æ¬¡ï¼‰
    3. ç¶ è‰²å‹¾å‹¾ âœ… å½ˆå‡ºï¼ˆÃ—3 æ¬¡ï¼‰
    4. æ¸…å ´
-->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ç¤ºç¯„å‹•ç•« - å°è€é¼ å ´ Rule1ï¼ˆæ…¢ç‰ˆï¼‰</title>

  <style>
    /* 
      ============================================================
      ğŸ¨ CSS è®Šæ•¸å®šç¾©
      - é›†ä¸­ç®¡ç†æ‰€æœ‰é¡è‰²èˆ‡å°ºå¯¸ï¼Œæ–¹ä¾¿çµ±ä¸€ä¿®æ”¹
      - èˆ‡éŠæˆ²ä¸»ç¨‹å¼ (index-0204v14.html) ä¿æŒä¸€è‡´
      ============================================================
    */
    :root {
      --bg-color: #2c3e50;       /* éŠæˆ²å®¹å™¨èƒŒæ™¯ï¼ˆèˆ‡éŠæˆ²ä¸€è‡´ï¼‰ */
      --game-bg: #34495e;        /* game-area èƒŒæ™¯è‰² */
      --text-color: #ecf0f1;     /* æ–‡å­—è‰² */
      --primary-color: #3498db;  /* æŒ‰éˆ•è— */
      --primary-dark: #2980b9;   /* æŒ‰éˆ•æ·±è— */
      --success-color: #2ecc71;  /* æ­£ç¢ºç¶  */
      --wall-color: #E0CCB8;     /* è€é¼ æ´ç‰†å£ */
      --floor-color: #95a5a6;    /* è€é¼ æ´åœ°æ¿ */
      --baseboard-color: #bdc3c7;/* è¸¢è…³æ¿ */
      --hole-color: #1a252f;     /* æ´å£æ·±è‰² */
    }

    /* 
      [æ–°æ‰‹æ•™å­¸] å…¨åŸŸé‡ç½®
      box-sizing: border-box è®“ padding ä¸æœƒæ’å¤§å…ƒç´ 
    */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Microsoft JhengHei', 'PingFang TC', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
    }

    /* 
      ============================================================
      ğŸ“¦ éŠæˆ²å®¹å™¨
      - æ¨¡æ“¬ index-0204v14.html çš„ .game-area æ¨£å¼
      - å›ºå®šå¯¬é«˜æ¯”ï¼Œç¢ºä¿å‹•ç•«åœ¨ä¸åŒè£ç½®ä¸Šä¸€è‡´
      ============================================================
    */
    .demo-container {
      background-color: var(--game-bg);
      border-radius: 15px;
      width: 100%;
      max-width: 420px;
      min-height: 580px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* 
      ============================================================
      ğŸ­ åˆºæ¿€ç‰©å®¹å™¨ï¼ˆèˆ‡éŠæˆ²ä¸€è‡´ï¼‰
      - 300Ã—400px çš„å›ºå®šå€åŸŸ
      - å…§å«è€é¼ æ´èƒŒæ™¯ + åˆºæ¿€ç‰©
      ============================================================
    */
    .stimulus-container {
      position: relative;
      width: 300px;
      height: 400px;
      margin: 10px auto 0;
    }

    /* è€é¼ æ´èƒŒæ™¯å±¤ */
    .background-layer {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1;
      top: 0;
      left: 0;
    }

    /* 
      åˆºæ¿€ç‰©ï¼ˆèµ·å¸/è²“å’ªï¼‰
      - 120Ã—120pxï¼Œèˆ‡éŠæˆ²ä¸€è‡´
      - bottom: 50pxï¼Œå›ºå®šåœ¨åœ°æ¿ä¸Šæ–¹
      - ä½¿ç”¨ left:50% + translateX(-50%) æ°´å¹³ç½®ä¸­
    */
    .stimulus {
      position: absolute;
      z-index: 10;
      width: 120px;
      height: 120px;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0; /* é è¨­éš±è—ï¼Œç”± JS æ§åˆ¶ç¬é–“å‡ºç¾ */
    }

    .stimulus svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
    }

    /* 
      ============================================================
      ğŸ”˜ æŒ‰éˆ•å€ï¼ˆæ¨¡æ“¬éŠæˆ²æŒ‰éˆ•ï¼Œèˆ‡éŠæˆ² CSS å®Œå…¨ä¸€è‡´ï¼‰
      ============================================================
    */
    .controls-area {
      width: 100%;
      display: flex;
      justify-content: center;
      padding: 10px 0 15px;
    }

    .btn-key {
      width: 200px;
      height: 120px;
      border: none;
      border-radius: 15px;
      font-size: 2.5em;
      color: white;
      cursor: default; /* ç¤ºç¯„å‹•ç•«ä¸­æŒ‰éˆ•ä¸å¯é» */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      transition: transform 0.1s, box-shadow 0.1s;
      position: relative;
    }

    /* æŒ‰éˆ•è¢«ã€ŒæŒ‰ä¸‹ã€çš„ç‹€æ…‹ */
    .btn-key.pressed {
      transform: translateY(4px);
      box-shadow: none;
    }

    /* æŒ‰éˆ•ç™¼å…‰æ•ˆæœ */
    .btn-key.glow {
      box-shadow: 0 0 20px rgba(52, 152, 219, 0.8),
                  0 0 40px rgba(46, 204, 113, 0.4);
    }

    .key-hint {
      font-size: 1rem;
      opacity: 0.8;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .btn-label {
      font-size: 1.5rem;
      font-weight: bold;
    }

    /* 
      ============================================================
      ğŸ¤š æ‰‹çš„åœ–å±¤
      - æ‰€æœ‰æ‰‹çš„ SVG éƒ½æ”¾åœ¨é€™å€‹çµ•å°å®šä½çš„å®¹å™¨è£¡
      - z-index: 50 ç¢ºä¿é¡¯ç¤ºåœ¨æœ€ä¸Šå±¤
      ============================================================
    */
    .hand-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 50;
      pointer-events: none; /* ä¸æ“‹ä½å…¶ä»–äº’å‹• */
      overflow: visible;
    }

    /* 
      é€šç”¨æ‰‹çš„æ¨£å¼
      - é è¨­åœ¨ç•«é¢å³å´å¤–é¢ï¼ˆä¸å¯è¦‹ï¼‰
      - ä½¿ç”¨ transform æ§åˆ¶ä½ç½®å’Œæ—‹è½‰
    */
    .hand {
      position: absolute;
      width: 80px;
      height: 80px;
      opacity: 0;
      /* 
        [æ–°æ‰‹æ•™å­¸] will-change æç¤º
        å‘Šè¨´ç€è¦½å™¨é€™äº›å±¬æ€§å³å°‡è®ŠåŒ–ï¼Œé å…ˆåˆ†é… GPU è³‡æºå„ªåŒ–æ•ˆèƒ½
      */
      will-change: transform, opacity;
    }

    /* FingerTap æ‰‹æŒ‡ - å¾å³å´é€²å…¥ */
    .hand-finger {
      right: -100px;  /* ç•«é¢å³å´å¤– */
      bottom: 160px;  /* èˆ‡æŒ‰éˆ•åŒé«˜ */
    }

    /* HandStop é˜»æ­¢æ‰‹ - å¾å·¦å´é€²å…¥ */
    .hand-stop {
      left: -100px;   /* ç•«é¢å·¦å´å¤– */
      bottom: 200px;  /* ç•¥é«˜æ–¼æŒ‰éˆ• */
    }

    .hand svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.3));
    }

    /* 
      ============================================================
      âœ… ç¶ è‰²å‹¾å‹¾å›é¥‹
      - é¡¯ç¤ºåœ¨åˆºæ¿€ç‰©æ­£ä¸Šæ–¹
      - ä½¿ç”¨ popIn å‹•ç•«å½ˆå‡º
      ============================================================
    */
    .checkmark {
      position: absolute;
      z-index: 20;
      font-size: 60px;
      bottom: 175px; /* åˆºæ¿€ç‰©ä¸Šæ–¹ */
      left: 50%;
      transform: translateX(-50%) scale(0);
      opacity: 0;
      will-change: transform, opacity;
    }

    /* popIn å‹•ç•«ï¼šscale 0 â†’ 1.3 â†’ 1 */
    @keyframes popIn {
      0%   { transform: translateX(-50%) scale(0);   opacity: 0; }
      50%  { transform: translateX(-50%) scale(1.3); opacity: 1; }
      100% { transform: translateX(-50%) scale(1);   opacity: 1; }
    }

    /* æ·¡å‡ºå‹•ç•« */
    @keyframes fadeOut {
      0%   { opacity: 1; }
      100% { opacity: 0; }
    }

    .checkmark.show {
      animation: popIn 0.3s ease-out forwards;
    }

    .checkmark.hide {
      animation: fadeOut 0.2s ease-out forwards;
    }

    /* 
      ============================================================
      ğŸ”„ æ–æ‰‹å‹•ç•«ï¼ˆå¤§å¹…åº¦ Â±45Â°ï¼‰
      - transform-origin è¨­åœ¨æ‰‹è…•ä½ç½®ï¼ˆåº•éƒ¨ä¸­å¤®ï¼‰
      - å·¦å³ä¾†å›æ“ºå‹• 4 æ¬¡
      ============================================================
    */
    @keyframes shakeHand {
      0%    { transform: translate(0, 0) rotate(0deg); }
      12.5% { transform: translate(-5px, -10px) rotate(-45deg); }
      25%   { transform: translate(5px, -10px) rotate(45deg); }
      37.5% { transform: translate(-5px, -10px) rotate(-45deg); }
      50%   { transform: translate(5px, -10px) rotate(45deg); }
      62.5% { transform: translate(-5px, -10px) rotate(-45deg); }
      75%   { transform: translate(5px, -10px) rotate(45deg); }
      87.5% { transform: translate(-5px, -10px) rotate(-45deg); }
      100%  { transform: translate(0, 0) rotate(0deg); }
    }

    /* 
      ============================================================
      ğŸ“Š åº•éƒ¨é€²åº¦æŒ‡ç¤ºå™¨
      ============================================================
    */
    .progress-bar {
      width: 90%;
      height: 4px;
      background: rgba(255,255,255,0.1);
      border-radius: 2px;
      margin: 5px auto 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: 2px;
      transition: width 0.3s linear;
    }

    .progress-fill.go { background: var(--success-color); }
    .progress-fill.nogo { background: #e74c3c; }

    .phase-label {
      font-size: 0.75rem;
      color: rgba(255,255,255,0.4);
      margin-bottom: 8px;
      min-height: 1.2em;
    }
  </style>
</head>

<body>
  <!-- 
    ============================================================
    ğŸ–¼ï¸ HTML çµæ§‹
    æ¨¡æ“¬ index-0204v14.html çš„éŠæˆ²ç•«é¢ä½ˆå±€
    ============================================================
  -->
  <div class="demo-container" id="demoContainer">

    <!-- åˆºæ¿€ç‰©å®¹å™¨ï¼ˆè€é¼ æ´å ´æ™¯ + èµ·å¸/è²“å’ªï¼‰ -->
    <div class="stimulus-container">

      <!-- è€é¼ æ´èƒŒæ™¯ï¼ˆèˆ‡éŠæˆ²å®Œå…¨ä¸€è‡´çš„ SVGï¼‰ -->
      <div class="background-layer" id="bgLayer"></div>

      <!-- èµ·å¸åˆºæ¿€ç‰© -->
      <div class="stimulus" id="cheeseStimulus"></div>

      <!-- è²“å’ªåˆºæ¿€ç‰© -->
      <div class="stimulus" id="catStimulus"></div>

      <!-- ç¶ è‰²å‹¾å‹¾ -->
      <div class="checkmark" id="checkmark">âœ…</div>

      <!-- æ‰‹çš„åœ–å±¤ -->
      <div class="hand-layer">
        <!-- FingerTap é»æ“Šæ‰‹ï¼ˆå¾å³å´é€²å‡ºï¼‰ -->
        <div class="hand hand-finger" id="handFinger"></div>
        <!-- HandStop é˜»æ­¢æ‰‹ï¼ˆå¾å·¦å´é€²å‡ºï¼‰ -->
        <div class="hand hand-stop" id="handStop"></div>
      </div>
    </div>

    <!-- æŒ‰éˆ•å€ï¼ˆæ¨¡æ“¬éŠæˆ²æŒ‰éˆ•ï¼‰ -->
    <div class="controls-area">
      <div class="btn-key" id="actionBtn">
        <span class="key-hint">æŒ‰ç©ºç™½éµ(æˆ–é»æ­¤)</span>
        <span class="btn-label">è’é›†èµ·å¸</span>
      </div>
    </div>

    <!-- é€²åº¦æŒ‡ç¤º -->
    <div class="phase-label" id="phaseLabel"></div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
  </div>

  <script>
    /*
      ============================================================
      ğŸ“œ JavaScript å‹•ç•«æ§åˆ¶å™¨
      
      [æ–°æ‰‹æ•™å­¸] æ•´é«”æ¶æ§‹èªªæ˜ï¼š
      é€™æ®µç¨‹å¼ç¢¼ä½¿ç”¨ã€Œæ™‚é–“è»¸æ’ç¨‹ã€çš„æ–¹å¼æ§åˆ¶å‹•ç•«ï¼š
      1. å®šç¾©æ¯å€‹å‹•ä½œçš„é–‹å§‹æ™‚é–“å’ŒæŒçºŒæ™‚é–“
      2. ä½¿ç”¨ setTimeout åœ¨æŒ‡å®šæ™‚é–“è§¸ç™¼å‹•ä½œ
      3. æ¯æ¬¡å¾ªç’°å‰æ¸…é™¤æ‰€æœ‰è¨ˆæ™‚å™¨ï¼Œç¢ºä¿ä¹¾æ·¨é‡ç½®
      
      æ™‚é–“è»¸çµæ§‹ï¼ˆæ…¢ç‰ˆ Bï¼Œç´„ 22 ç§’ï¼‰ï¼š
      â”Œâ”€ Go ç¤ºç¯„ï¼ˆèµ·å¸ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ 0ms      èµ·å¸ç¬é–“å‡ºç¾                        â”‚
      â”‚ 400ms    æ‰‹ç§»å…¥æŒ‡å‘æŒ‰éˆ• Ã—3ï¼ˆæ¯æ¬¡ 2100msï¼‰     â”‚
      â”‚ 6700ms   æ‰‹é»æ“ŠæŒ‰éˆ• Ã—3ï¼ˆæ¯æ¬¡ 1200msï¼‰        â”‚
      â”‚ 10300ms  âœ… å‹¾å‹¾ Ã—3ï¼ˆæ¯æ¬¡ 1000msï¼‰           â”‚
      â”‚ 13300ms  æ¸…å ´                                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”Œâ”€ NoGo ç¤ºç¯„ï¼ˆè²“å’ªï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ 14100ms  è²“å’ªç¬é–“å‡ºç¾                        â”‚
      â”‚ 14600ms  æ‰‹ç§»å…¥â†’HandStopæ¨é–‹ Ã—3ï¼ˆæ¯æ¬¡1500msï¼‰ â”‚
      â”‚ 19100ms  âœ… å‹¾å‹¾ Ã—3ï¼ˆæ¯æ¬¡ 1000msï¼‰           â”‚
      â”‚ 22100ms  æ¸…å ´                                â”‚
      â”‚ 23000ms  â†© å¾ªç’°å› 0ms                       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      ============================================================
    */

    // ===== SVG ç´ æå®šç¾©ï¼ˆç›´æ¥åµŒå…¥ï¼Œç„¡å¤–éƒ¨è¼‰å…¥ï¼‰ =====

    /*
      [æ–°æ‰‹æ•™å­¸] ç‚ºä»€éº¼è¦æŠŠ SVG æ”¾åœ¨ JavaScript è£¡ï¼Ÿ
      å› ç‚ºæˆ‘å€‘éœ€è¦åœ¨ä¸åŒæ™‚æ©Ÿå‹•æ…‹æ’å…¥/ç§»é™¤é€™äº›åœ–å½¢ï¼Œ
      æ”¾åœ¨ JS å¸¸æ•¸è£¡å¯ä»¥éš¨æ™‚ç”¨ element.innerHTML = SVG ä¾†é¡¯ç¤ºã€‚
    */

    /** è€é¼ æ´èƒŒæ™¯ï¼ˆèˆ‡éŠæˆ²ç¨‹å¼ç¢¼å®Œå…¨ä¸€è‡´ï¼‰ */
    const SVG_MOUSE_HOLE = `<svg viewBox="0 0 300 400" xmlns="http://www.w3.org/2000/svg">
      <rect x="0" y="0" width="300" height="350" fill="#E0CCB8"/>
      <rect x="0" y="335" width="300" height="15" fill="#bdc3c7"/>
      <rect x="0" y="350" width="300" height="50" fill="#95a5a6"/>
      <path d="M 110 350 L 110 300 A 40 40 0 0 1 190 300 L 190 350 Z" fill="#1a252f"/>
    </svg>`;

    /** èµ·å¸ SVGï¼ˆå®Œæ•´ path dataï¼Œèˆ‡éŠæˆ²ä¸€è‡´ï¼‰ */
    const SVG_CHEESE = `<svg viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
      <path d="M48.18 68.45L6.7 69.95s-2.63-2.63-2.25-3.57S39.18 38.6 40.49 38.79s4.32 3.38 6.76 2.25c2.44-1.13 0-7.7.75-8.63c.75-.94 27.59-15.39 29.28-16.14c1.69-.75 3.19-2.44 6.57-1.69s11.83 2.25 21.02 8.45s18.77 13.33 18.02 17.27c-.75 3.94-74.71 28.15-74.71 28.15z" fill="#ffe265"/>
      <path d="M19.46 115.57c9.2-1.13 94.98-19.52 98.55-20.08c3.57-.56 5.82-3.94 5.82-7.7s-.94-47.49-.94-47.49s-4.13 1.31-9.01 2.44C109 43.86 69.01 53.62 53.25 57.19S12.33 67.33 9.51 67.33s-5.07-.94-5.07-.94s.75 39.04.94 41.86c.19 2.82 1.5 6.19 4.69 7.13s5.27.69 9.39.19z" fill="#feb502"/>
      <path d="M74.97 25.56c0 2.4 2.44 3.99 6.48 3.87c4.41-.13 5.63-2.75 5.49-4.43c-.14-1.69-2.17-3.17-6.19-3.1c-3.73.07-5.78 1.55-5.78 3.66z" fill="#ff8b0d"/>
      <path d="M29.92 55.48c-6.5 2.19-5.77 7.88-3.87 9.15c1.9 1.27 4.43 1.2 7.39.14s4.84-2.27 5.14-4.25c.28-1.88-2.18-7.23-8.66-5.04z" fill="#ed6b31"/>
      <path d="M88.98 39.22c-4.36.2-9.18 3.33-10.98 6.34c-1.9 3.17-2.04 6.9 2.32 9.22c4.36 2.32 19.78-3.59 19.01-9.01c-.77-5.43-5.77-6.76-10.35-6.55z" fill="#ed6b31"/>
      <path d="M73.85 83.07s6.19-4.58 6.19-7.81c0-3.24-2.67-10.89-14.01-11.47c-10.63-.55-17.18 13.94-10.21 21.4c6.97 7.46 11.19 4.08 13.8 3.38c2.61-.71 4.23-5.5 4.23-5.5z" fill="#ed6b31"/>
      <path d="M43.23 96.09s6.15-3.85 1.43-8.07c-3.32-2.97-7.76-1.63-10.02.68c-2.89 2.96-2.11 7.67.56 9.78c2.68 2.12 8.03-2.39 8.03-2.39z" fill="#ed6b31"/>
      <path d="M22.39 78.78s-.7-2.21-3.21-3.1c-2.82-1-7.03 2.51-5.23 6.26c1.62 3.38 5.21 2.39 5.21 2.39l3.23-5.55z" fill="#ed6b31"/>
      <path d="M112.42 82.01c.61-.66 4.6-3.54 4.6-5.73c0-2.18-6.01-8.92-13.68-3.85s-3.66 12.74-1.55 14.01c2.11 1.27 7.96-1.54 10.63-4.43z" fill="#ed6b31"/>
      <path d="M30.86 58.93c-4.27 1.48-5.88 4.5-4.81 5.7c1.13 1.27 3.59 2.11 7.88.56c3.32-1.2 5-3.21 4.72-5c-.2-1.3-3.92-2.6-7.79-1.26z" fill="#ff8b0d"/>
      <path d="M16.62 78.63c-1.87 2.34-.35 5 1.41 5.63c1.76.63 4.86-1.27 4.65-4.43c-.22-3.17-4.37-3.31-6.06-1.2z" fill="#ff8b0d"/>
      <path d="M38.37 91.38c-4.02 3.26-4.13 6.45-2.58 7.53c1.08.76 5.06 2.34 8.7-.35c2.7-1.99 2.75-6.17 1.9-8.17c-.71-1.7-4.64-1.76-8.02.99z" fill="#ff8b0d"/>
      <path d="M62.77 73.61c-5.38 5.23-6.66 13.72-1.38 15.72c4.65 1.76 11.33.7 15.27-4.15c4.14-5.1 4.58-10.73 1.92-14.05c-3.18-3.99-11.65-1.55-15.81 2.48z" fill="#ff8b0d"/>
      <path d="M87.22 44.43c-7.04 2.39-11.19 7.46-7.6 10c3.59 2.53 7.32 2.16 11.4.77c4.63-1.57 8.17-5.21 8.31-8.66c.11-2.83-5.91-4.22-12.11-2.11z" fill="#ff8b0d"/>
      <path d="M106.02 76.8c-4.79 3.9-6.19 7.81-4.22 9.64s6.69 2.67 11.05-.35c4.53-3.14 4.86-6.7 4.36-9.57c-.56-3.23-6.27-3.73-11.19.28z" fill="#ff8b0d"/>
    </svg>`;

    /** è²“å’ª SVGï¼ˆå®Œæ•´ path dataï¼Œèˆ‡éŠæˆ²ä¸€è‡´ï¼‰ */
    const SVG_CAT = `<svg viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
      <path fill="#292F33" d="M10.478 22.439s.702 2.281-.337 7.993c-.186 1.025-.46 2.072-.599 2.93c-1.757 0-1.851 2.002-1.478 2.002h2.094c1.337 0 2.971-3.334 3.854-7.961s-3.534-4.964-3.534-4.964zm13.042 3.702s2.272 1.22 2.188 4.081c-.033 1.131-.249 2.091-.355 3.024c-1.832 0-1.839 1.985-1.305 1.985h1.856c.923 0 3.001-3.158 3.379-7.281c.379-4.122-5.763-1.809-5.763-1.809z"/>
      <path fill="#292F33" d="M36 8.447C36 3.525 31.859 1 27 1a1 1 0 1 0 0 2c1.804 0 6.717.934 6.717 5.447c0 2.881-1.567 5.462-3.77 5.982c-.164-.073-.345-.104-.509-.192c-7.239-3.917-13.457.902-15.226-.29c-1.752-1.182-.539-3.255-2.824-5.243c-.33-1.841-1.073-4.477-1.794-4.477c-.549 0-1.265 1.825-1.74 3.656c-.591-1.381-1.363-2.756-1.86-2.756c-.64 0-1.278 2.273-1.594 4.235c-1.68 1.147-2.906 2.809-2.906 4.765c0 2.7 4.05 3.357 5.4 3.411c1.35.054 3.023 3.562 3.585 5.072c1.242 4.367 2.051 8.699 2.698 11.183c-1.649 0-1.804 2.111-1.348 2.111c.713 0 1.953-.003 2.225 0c1.381.014 2.026-4.706 2.026-8.849c0-.212-.011-.627-.011-.627s1.93.505 6.038-.208c2.444-.424 5.03.849 5.746 3.163c.527 1.704 1.399 3.305 1.868 4.484c-1.589 0-1.545 2.037-1.084 2.037c.787 0 1.801.014 2.183 0c1.468-.055.643-7.574 1.03-10.097s1.267-5.578-.229-8.797C34.857 15.236 36 11.505 36 8.447z"/>
      <circle fill="#C3C914" cx="5.994" cy="11.768" r=".9"/>
      <path fill="#66757F" d="M2.984 12.86c-.677.423-.677 1.777-1.015 1.777S.954 13.841.954 12.86c-.001-.981 2.862-.52 2.03 0zm3.594 1.483c-.041.026-.09.036-.142.026c-.018-.004-1.548-.241-2.545.146c-.129.05-.341-.023-.413-.191s.023-.365.152-.415c1.44-.569 2.857-.234 2.934-.218c.139.029.195.19.188.372c-.004.114-.104.235-.174.28zm-.472 2.339a.186.186 0 0 1-.141-.031c-.015-.01-1.331-.83-2.402-.853c-.138-.003-.305-.154-.305-.341c0-.186.165-.335.304-.333c1.552.024 2.724.891 2.789.937c.117.082.104.255.027.424c-.049.107-.189.182-.272.197z"/>
      <path d="M7.854 7.881s.372-.039.859.033c.217-.46.585-.887.585-.887s.281.668.386 1.179c.025.12.218.117.322.189c0 0 .038-3.463-.863-3.836c.001-.002-.755 1.124-1.289 3.322zM4.399 9.36s.384-.267.883-.574c.217-.624.568-1.333.568-1.333s.307.602.345.81c.21-.114.21-.106.403-.19c0 0-.114-2.286-1.099-2.527c0 0-.732 1.372-1.1 3.814z" fill="#7F676D"/>
      <path fill="#66757F" d="M18.45 23.644c-2.649.57-2.38 2.782-2.38 2.782s1.93.505 6.038-.208a5.542 5.542 0 0 1 3.107.377c-1.607-3.047-4.315-3.479-6.765-2.951z"/>
      <path fill="#292F33" d="M5.976 10.982s.333.347.319.778c-.014.43-.25.833-.25.833s-.292-.347-.319-.826c-.027-.48.25-.785.25-.785z"/>
    </svg>`;

    /** 
     * FingerTap æ‰‹æŒ‡ SVGï¼ˆåªå– state-idle éœæ…‹åœ–å½¢ï¼Œç§»é™¤å…§å»ºå‹•ç•«ï¼‰
     * [æ–°æ‰‹æ•™å­¸] æˆ‘å€‘åªéœ€è¦æ‰‹æŒ‡çš„éœæ…‹å¤–è§€ï¼Œå‹•ç•«ç”± JS æ§åˆ¶
     */
    const SVG_FINGER_TAP = `<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
      <path style="fill:#FDC794;" d="M427.677,326.621V220.69c0-16.772-14.124-35.31-30.897-35.31s-30.897,17.655-30.897,35.31V52.966c0-16.772-14.124-35.31-30.897-35.31c-16.772,0-30.897,18.538-30.897,35.31v185.379V35.31c0-16.772-14.124-35.31-30.897-35.31c-16.772,0-30.897,17.655-30.897,35.31v35.31c0-16.772-14.124-35.31-30.897-35.31s-30.897,17.655-30.897,35.31v211.862c0-24.717-21.186-74.152-44.138-97.103l0,0c-19.421-19.421-74.152-6.179-44.138,35.31c21.186,29.131,35.31,90.924,35.31,123.586c0,78.566,61.793,105.931,61.793,105.931v60.91h211.862v-60.91l0,0C429.442,411.366,427.677,414.014,427.677,326.621"/>
      <g>
        <path style="fill:#F9A671;" d="M304.091,440.497h-26.483c-5.297,0-8.828-3.531-8.828-8.828s3.531-8.828,8.828-8.828h26.483c5.297,0,8.828,3.531,8.828,8.828S309.387,440.497,304.091,440.497z"/>
        <path style="fill:#F9A671;" d="M312.918,475.807H268.78c-5.297,0-8.828-3.531-8.828-8.828s3.531-8.828,8.828-8.828h44.138c5.297,0,8.828,3.531,8.828,8.828S318.215,475.807,312.918,475.807z"/>
        <path style="fill:#F9A671;" d="M242.297,184.497c-5.297,0-8.828-3.531-8.828-8.828V60.91c0-5.297,3.531-8.828,8.828-8.828s8.828,3.531,8.828,8.828v114.759C251.125,180.966,247.594,184.497,242.297,184.497z"/>
        <path style="fill:#F9A671;" d="M304.091,184.497c-5.297,0-8.828-3.531-8.828-8.828V43.255c0-5.297,3.531-8.828,8.828-8.828c5.297,0,8.828,3.531,8.828,8.828v132.414C312.918,180.966,309.387,184.497,304.091,184.497z"/>
        <path style="fill:#F9A671;" d="M365.884,263.945c-5.297,0-8.828-3.531-8.828-8.828v-44.138c0-5.297,3.531-8.828,8.828-8.828c5.297,0,8.828,3.531,8.828,8.828v44.138C374.711,260.414,371.18,263.945,365.884,263.945z"/>
      </g>
    </svg>`;

    /** 
     * HandStop é˜»æ­¢æ‰‹ SVGï¼ˆå¼µé–‹æ‰‹æŒï¼Œè¡¨ç¤ºã€Œåœï¼ã€ï¼‰
     */
    const SVG_HAND_STOP = `<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
      <g transform="translate(-1)">
        <path style="fill:#FDC794;" d="M402.635,450.207c28.248-37.959,26.483-36.193,26.483-123.586V145.655c0-16.772-14.124-30.897-30.897-30.897s-30.897,14.124-30.897,30.897V256V48.552c0-16.772-14.124-30.897-30.897-30.897c-16.772,0-30.897,14.124-30.897,30.897v189.793V30.897C305.532,14.124,291.408,0,274.635,0s-30.897,14.124-30.897,30.897v198.621V66.207c0-16.772-14.124-30.897-30.897-30.897s-30.897,14.124-30.897,30.897v216.276c0-24.717-21.186-74.152-44.138-97.103l0,0c-19.421-19.421-74.152-6.179-44.138,35.31c21.186,29.131,35.31,90.924,35.31,123.586c0,78.566,61.793,105.931,61.793,105.931v35.31c0,15.007,11.476,26.483,26.483,26.483h158.897c15.007,0,26.483-11.476,26.483-26.483V450.207z"/>
        <g>
          <path style="fill:#F9A671;" d="M216.373,459.034h-26.483c-5.297,0-8.828-3.531-8.828-8.828c0-5.297,3.531-8.828,8.828-8.828h26.483c5.297,0,8.828,3.531,8.828,8.828C225.201,455.503,221.67,459.034,216.373,459.034z"/>
          <path style="fill:#F9A671;" d="M401.753,459.034H384.98c-5.297,0-8.828-3.531-8.828-8.828c0-5.297,3.531-8.828,8.828-8.828h16.772c5.297,0,8.828,3.531,8.828,8.828C410.58,455.503,407.049,459.034,401.753,459.034z"/>
          <path style="fill:#F9A671;" d="M243.739,238.345c-5.297,0-8.828-3.531-8.828-8.828V61.793c0-5.297,3.531-8.828,8.828-8.828s8.828,3.531,8.828,8.828v167.724C252.566,234.814,249.035,238.345,243.739,238.345z"/>
          <path style="fill:#F9A671;" d="M305.532,238.345c-5.297,0-8.828-3.531-8.828-8.828V44.138c0-5.297,3.531-8.828,8.828-8.828c5.297,0,8.828,3.531,8.828,8.828v185.379C314.36,234.814,310.828,238.345,305.532,238.345z"/>
          <path style="fill:#F9A671;" d="M367.325,264.828c-5.297,0-8.828-3.531-8.828-8.828V123.586c0-5.297,3.531-8.828,8.828-8.828s8.828,3.531,8.828,8.828V256C376.153,261.297,372.622,264.828,367.325,264.828z"/>
        </g>
      </g>
    </svg>`;


    // ===== DOM å…ƒç´ å¿«å– =====
    const DOM = {
      bgLayer:     document.getElementById('bgLayer'),
      cheese:      document.getElementById('cheeseStimulus'),
      cat:         document.getElementById('catStimulus'),
      checkmark:   document.getElementById('checkmark'),
      handFinger:  document.getElementById('handFinger'),
      handStop:    document.getElementById('handStop'),
      btn:         document.getElementById('actionBtn'),
      phaseLabel:  document.getElementById('phaseLabel'),
      progressFill:document.getElementById('progressFill'),
    };


    // ===== è¨ˆæ™‚å™¨ç®¡ç† =====

    /** 
     * [æ–°æ‰‹æ•™å­¸] è¨ˆæ™‚å™¨é™£åˆ—
     * æ¯æ¬¡ä½¿ç”¨ setTimeout æ™‚ï¼ŒæŠŠ ID å­˜å…¥é€™å€‹é™£åˆ—ã€‚
     * å¾ªç’°é‡ç½®æ™‚ï¼Œç”¨ clearAllTimers() ä¸€æ¬¡æ¸…é™¤å…¨éƒ¨ï¼Œ
     * é¿å…ä¸Šä¸€è¼ªçš„å‹•ä½œã€Œæ®˜ç•™ã€åˆ°ä¸‹ä¸€è¼ªã€‚
     */
    let timers = [];

    /** å®‰å…¨çš„ setTimeout åŒ…è£ï¼Œè‡ªå‹•è¨˜éŒ„è¨ˆæ™‚å™¨ ID */
    function schedule(fn, delay) {
      const id = setTimeout(fn, delay);
      timers.push(id);
      return id;
    }

    /** æ¸…é™¤æ‰€æœ‰å·²æ’ç¨‹çš„è¨ˆæ™‚å™¨ */
    function clearAllTimers() {
      timers.forEach(id => clearTimeout(id));
      timers = [];
    }


    // ===== å‹•ç•«å·¥å…·å‡½æ•¸ =====

    /**
     * ç§»å‹•æ‰‹æŒ‡åˆ°æŒ‡å®šä½ç½®
     * @param {HTMLElement} hand - æ‰‹çš„ DOM å…ƒç´ 
     * @param {string} position - CSS ä½ç½®å€¼ï¼ˆç”¨ transform æ§åˆ¶ï¼‰
     * @param {number} duration - éæ¸¡æ™‚é–“ï¼ˆmsï¼‰
     * @param {string} easing - ç·©å‹•å‡½æ•¸
     */
    function moveHand(hand, position, duration, easing = 'cubic-bezier(0.4, 0, 0.2, 1)') {
      hand.style.transition = `all ${duration}ms ${easing}`;
      Object.assign(hand.style, position);
    }

    /**
     * é‡ç½®æ‰‹çš„ä½ç½®åˆ°ç•«é¢å¤–
     * @param {HTMLElement} hand - æ‰‹çš„ DOM å…ƒç´ 
     * @param {string} side - 'right' æˆ– 'left'ï¼Œæ±ºå®šéš±è—åœ¨å“ªä¸€å´
     */
    function resetHand(hand, side) {
      hand.style.transition = 'none';
      hand.style.opacity = '0';
      if (side === 'right') {
        hand.style.right = '-100px';
        hand.style.left = 'auto';
      } else {
        hand.style.left = '-100px';
        hand.style.right = 'auto';
      }
      hand.style.transform = 'rotate(0deg)';
    }

    /** é¡¯ç¤ºç¶ è‰²å‹¾å‹¾ï¼ˆpopIn å½ˆå‡ºï¼‰ */
    function showCheckmark() {
      DOM.checkmark.className = 'checkmark show';
    }

    /** éš±è—ç¶ è‰²å‹¾å‹¾ï¼ˆæ·¡å‡ºï¼‰ */
    function hideCheckmark() {
      DOM.checkmark.className = 'checkmark hide';
    }

    /** é‡ç½®å‹¾å‹¾åˆ°åˆå§‹ç‹€æ…‹ */
    function resetCheckmark() {
      DOM.checkmark.className = 'checkmark';
      DOM.checkmark.style.opacity = '0';
      DOM.checkmark.style.transform = 'translateX(-50%) scale(0)';
    }

    /** æŒ‰éˆ•æŒ‰ä¸‹æ•ˆæœ */
    function pressButton() {
      DOM.btn.classList.add('pressed', 'glow');
    }

    /** æŒ‰éˆ•æ¢å¾© */
    function releaseButton() {
      DOM.btn.classList.remove('pressed', 'glow');
    }

    /** 
     * æ›´æ–°é€²åº¦æ¢
     * @param {number} percent - 0~100
     * @param {string} type - 'go' æˆ– 'nogo'
     */
    function updateProgress(percent, type) {
      DOM.progressFill.className = `progress-fill ${type}`;
      DOM.progressFill.style.width = `${percent}%`;
    }

    /**
     * å®Œå…¨é‡ç½®æ‰€æœ‰è¦–è¦ºç‹€æ…‹
     * [æ–°æ‰‹æ•™å­¸] æ¯æ¬¡å¾ªç’°é–‹å§‹å‰å‘¼å«ï¼Œç¢ºä¿ç•«é¢ä¹¾æ·¨
     */
    function resetAll() {
      // éš±è—åˆºæ¿€ç‰©
      DOM.cheese.style.opacity = '0';
      DOM.cat.style.opacity = '0';
      
      // é‡ç½®æ‰‹
      resetHand(DOM.handFinger, 'right');
      resetHand(DOM.handStop, 'left');

      // é‡ç½®å‹¾å‹¾
      resetCheckmark();

      // é‡ç½®æŒ‰éˆ•
      releaseButton();

      // é‡ç½®é€²åº¦æ¢
      updateProgress(0, 'go');

      // æ¸…é™¤éšæ®µæ¨™ç±¤
      DOM.phaseLabel.textContent = '';
    }


    // ===== ä¸»è¦å‹•ç•«æµç¨‹ =====

    /** 
     * ç¸½å¾ªç’°æ™‚é•·ï¼ˆmsï¼‰
     * æ…¢ç‰ˆ B ç´„ 23 ç§’
     */
    const TOTAL_CYCLE = 23000;

    /**
     * =============================================
     * ğŸ§€ Go ç¤ºç¯„ï¼ˆèµ·å¸ï¼‰
     * =============================================
     * æ™‚é–“è»¸ï¼š0ms ~ 14100ms
     */
    function playGo() {
      DOM.phaseLabel.textContent = 'â”€â”€ ç¤ºç¯„ 1/2ï¼šçœ‹åˆ°èµ·å¸è¦æŒ‰ï¼â”€â”€';
      updateProgress(0, 'go');

      // â”€â”€â”€ éšæ®µ 1ï¼šèµ·å¸ç¬é–“å‡ºç¾ï¼ˆ0msï¼‰â”€â”€â”€
      DOM.cheese.innerHTML = SVG_CHEESE;
      DOM.cheese.style.opacity = '1'; // ç„¡å‹•ç•«ï¼Œç›´æ¥å‡ºç¾

      // â”€â”€â”€ éšæ®µ 2ï¼šæ‰‹æŒ‡ç§»å…¥ç§»å‡º Ã—3ï¼ˆ400ms é–‹å§‹ï¼‰â”€â”€â”€
      // æ¯æ¬¡å¾ªç’°ï¼šç§»å…¥ 800ms â†’ åœç•™ 700ms â†’ é€€å‡º 600ms = 2100ms
      for (let i = 0; i < 3; i++) {
        const baseTime = 400 + (i * 2100);

        // æ‰‹æŒ‡å‡ºç¾ + å¾å³å´ç§»å…¥
        schedule(() => {
          resetHand(DOM.handFinger, 'right');
          DOM.handFinger.innerHTML = SVG_FINGER_TAP;

          // å…ˆè®“å…ƒç´ å°±ä½ï¼ˆä¸‹ä¸€å¹€æ‰é–‹å§‹å‹•ç•«ï¼‰
          requestAnimationFrame(() => {
            DOM.handFinger.style.opacity = '1';
            moveHand(DOM.handFinger, {
              right: '110px',     /* ç§»åˆ°æŒ‰éˆ•ä¸Šæ–¹é™„è¿‘ */
              bottom: '130px',
            }, 800);
          });
        }, baseTime);

        // åœç•™ 700ms å¾Œé€€å‡º
        schedule(() => {
          moveHand(DOM.handFinger, {
            right: '-100px',
          }, 600);
        }, baseTime + 1500);

        // æ·¡å‡º
        schedule(() => {
          DOM.handFinger.style.opacity = '0';
        }, baseTime + 2000);

        // æ›´æ–°é€²åº¦
        schedule(() => {
          updateProgress(((baseTime + 2100) / 14100) * 50, 'go');
        }, baseTime + 2100);
      }

      // â”€â”€â”€ éšæ®µ 3ï¼šæ‰‹æŒ‡é»æ“ŠæŒ‰éˆ• Ã—3ï¼ˆ6700ms é–‹å§‹ï¼‰â”€â”€â”€
      // æ¯æ¬¡å¾ªç’°ï¼šç§»å…¥ 500ms â†’ æº–å‚™ 200ms â†’ é»æ“Š 300ms â†’ å›å½ˆ â†’ é€€å‡º = 1200ms
      for (let i = 0; i < 3; i++) {
        const baseTime = 6700 + (i * 1200);

        // æ‰‹æŒ‡ç§»å…¥åˆ°æŒ‰éˆ•æ­£ä¸Šæ–¹
        schedule(() => {
          resetHand(DOM.handFinger, 'right');
          DOM.handFinger.innerHTML = SVG_FINGER_TAP;
          requestAnimationFrame(() => {
            DOM.handFinger.style.opacity = '1';
            moveHand(DOM.handFinger, {
              right: '110px',
              bottom: '110px', /* æ›´è²¼è¿‘æŒ‰éˆ• */
            }, 400);
          });
        }, baseTime);

        // æŒ‰ä¸‹ï¼šæ‰‹æŒ‡ä¸‹å£“ + æŒ‰éˆ•ä¸‹å£“ + ç™¼å…‰
        schedule(() => {
          DOM.handFinger.style.transition = 'all 150ms ease-in';
          DOM.handFinger.style.bottom = '95px'; /* ä¸‹å£“ 15px */
          pressButton();
        }, baseTime + 500);

        // å›å½ˆ
        schedule(() => {
          DOM.handFinger.style.transition = 'all 150ms ease-out';
          DOM.handFinger.style.bottom = '110px';
          releaseButton();
        }, baseTime + 750);

        // æ‰‹æŒ‡é€€å‡º
        schedule(() => {
          moveHand(DOM.handFinger, { right: '-100px' }, 300);
        }, baseTime + 900);

        schedule(() => {
          DOM.handFinger.style.opacity = '0';
        }, baseTime + 1150);
      }

      // â”€â”€â”€ éšæ®µ 4ï¼šç¶ è‰²å‹¾å‹¾ Ã—3ï¼ˆ10300ms é–‹å§‹ï¼‰â”€â”€â”€
      // æ¯æ¬¡ï¼špopIn 300ms â†’ åœç•™ 500ms â†’ fadeOut 200ms = 1000ms
      for (let i = 0; i < 3; i++) {
        const baseTime = 10300 + (i * 1000);

        schedule(() => showCheckmark(), baseTime);
        schedule(() => hideCheckmark(), baseTime + 800);
        schedule(() => resetCheckmark(), baseTime + 1000);
      }

      // â”€â”€â”€ éšæ®µ 5ï¼šæ¸…å ´ï¼ˆ13300msï¼‰â”€â”€â”€
      schedule(() => {
        DOM.cheese.style.transition = 'opacity 0.3s';
        DOM.cheese.style.opacity = '0';
        updateProgress(50, 'go');
      }, 13300);

      // éæ¸¡ç©ºç™½
      schedule(() => {
        DOM.cheese.style.transition = 'none';
        DOM.cheese.innerHTML = '';
        resetHand(DOM.handFinger, 'right');
        resetCheckmark();
      }, 13800);
    }


    /**
     * =============================================
     * ğŸ˜º NoGo ç¤ºç¯„ï¼ˆè²“å’ªï¼‰
     * =============================================
     * æ™‚é–“è»¸ï¼š14100ms ~ 23000ms
     * 
     * ã€é—œéµè¨­è¨ˆã€‘HandStop æ¨é–‹ FingerTap çš„æ©Ÿåˆ¶ï¼š
     * 1. FingerTap å¾å³å´ç§»å…¥ï¼Œæº–å‚™è¦æŒ‰æŒ‰éˆ•
     * 2. åœ¨ FingerTap é‚„æ²’ç¢°åˆ°æŒ‰éˆ•æ™‚ï¼ŒHandStop å¾å·¦å´è¡å…¥
     * 3. HandStop æ¨è‘— FingerTap å¾€å³é€€å‡º
     * 4. HandStop åŒæ™‚åš Â±45Â° æ–æ‰‹å‹•ç•«
     * 5. HandStop é€€å‡º
     */
    function playNoGo() {
      DOM.phaseLabel.textContent = 'â”€â”€ ç¤ºç¯„ 2/2ï¼šçœ‹åˆ°è²“å’ªä¸è¦æŒ‰ï¼â”€â”€';

      // â”€â”€â”€ éšæ®µ 1ï¼šè²“å’ªç¬é–“å‡ºç¾ï¼ˆ14100msï¼‰â”€â”€â”€
      schedule(() => {
        DOM.cat.innerHTML = SVG_CAT;
        DOM.cat.style.opacity = '1'; // ç„¡å‹•ç•«ï¼Œç›´æ¥å‡ºç¾
      }, 14100);

      // â”€â”€â”€ éšæ®µ 2ï¼šFingerTapç§»å…¥ â†’ HandStopæ¨é–‹ Ã—3ï¼ˆ14600ms é–‹å§‹ï¼‰â”€â”€â”€
      // æ¯æ¬¡å¾ªç’°ç´„ 1500ms
      for (let i = 0; i < 3; i++) {
        const baseTime = 14600 + (i * 1500);

        // Step A: FingerTap å¾å³å´ç§»å…¥ï¼ˆçœ‹èµ·ä¾†è¦å»æŒ‰æŒ‰éˆ•ï¼‰
        schedule(() => {
          resetHand(DOM.handFinger, 'right');
          DOM.handFinger.innerHTML = SVG_FINGER_TAP;
          requestAnimationFrame(() => {
            DOM.handFinger.style.opacity = '1';
            moveHand(DOM.handFinger, {
              right: '130px',   /* ç§»å‘æŒ‰éˆ•ä½†é‚„æ²’ç¢°åˆ° */
              bottom: '130px',
            }, 500, 'cubic-bezier(0.6, 0, 0.4, 1)');
          });
        }, baseTime);

        // Step B: HandStop å¾å·¦å´è¡å…¥ï¼åŒæ™‚é–‹å§‹æ–æ‰‹
        schedule(() => {
          resetHand(DOM.handStop, 'left');
          DOM.handStop.innerHTML = SVG_HAND_STOP;
          DOM.handStop.style.transformOrigin = 'center bottom'; /* æ–æ‰‹çš„æ—‹è½‰ä¸­å¿ƒåœ¨æ‰‹è…• */

          requestAnimationFrame(() => {
            DOM.handStop.style.opacity = '1';
            /* HandStop è¡åˆ°ç•«é¢ä¸­å¤®ï¼Œæ“‹ä½æŒ‰éˆ• */
            moveHand(DOM.handStop, {
              left: '120px',
              bottom: '140px',
            }, 300, 'cubic-bezier(0.2, 0, 0, 1)');

            /* åŒæ™‚å•Ÿå‹•æ–æ‰‹å‹•ç•«ï¼ˆÂ±45Â°ï¼Œå¤§å¹…åº¦ï¼‰ */
            DOM.handStop.style.animation = 'shakeHand 0.8s ease-in-out 1';
          });

          /* åŒæ™‚ï¼šFingerTap è¢«æ¨å¾€å³å´é€€å‡º */
          moveHand(DOM.handFinger, {
            right: '-100px',
            bottom: '130px',
          }, 400, 'cubic-bezier(0, 0, 0.6, 1)');
        }, baseTime + 450);

        // Step C: FingerTap å®Œå…¨æ¶ˆå¤±
        schedule(() => {
          DOM.handFinger.style.opacity = '0';
        }, baseTime + 800);

        // Step D: HandStop æ–å®Œæ‰‹å¾Œé€€å‡ºï¼ˆå¾€å·¦é€€å›ï¼‰
        schedule(() => {
          DOM.handStop.style.animation = 'none';
          moveHand(DOM.handStop, {
            left: '-100px',
          }, 400);
        }, baseTime + 1100);

        // Step E: HandStop å®Œå…¨æ¶ˆå¤±
        schedule(() => {
          DOM.handStop.style.opacity = '0';
          resetHand(DOM.handStop, 'left');
        }, baseTime + 1450);

        // æ›´æ–°é€²åº¦
        schedule(() => {
          updateProgress(50 + ((baseTime - 14100 + 1500) / 8900) * 50, 'nogo');
        }, baseTime + 1500);
      }

      // â”€â”€â”€ éšæ®µ 3ï¼šç¶ è‰²å‹¾å‹¾ Ã—3ï¼ˆ19100ms é–‹å§‹ï¼‰â”€â”€â”€
      for (let i = 0; i < 3; i++) {
        const baseTime = 19100 + (i * 1000);

        schedule(() => showCheckmark(), baseTime);
        schedule(() => hideCheckmark(), baseTime + 800);
        schedule(() => resetCheckmark(), baseTime + 1000);
      }

      // â”€â”€â”€ éšæ®µ 4ï¼šæ¸…å ´ï¼ˆ22100msï¼‰â”€â”€â”€
      schedule(() => {
        DOM.cat.style.transition = 'opacity 0.3s';
        DOM.cat.style.opacity = '0';
        updateProgress(100, 'nogo');
      }, 22100);

      schedule(() => {
        DOM.cat.style.transition = 'none';
        DOM.cat.innerHTML = '';
        resetHand(DOM.handFinger, 'right');
        resetHand(DOM.handStop, 'left');
        resetCheckmark();
      }, 22600);
    }


    /**
     * =============================================
     * ğŸ”„ ä¸»å¾ªç’°æ§åˆ¶å™¨
     * =============================================
     * è² è²¬ï¼š
     * 1. æ¸…é™¤ä¸Šä¸€è¼ªçš„æ‰€æœ‰è¨ˆæ™‚å™¨
     * 2. é‡ç½®æ‰€æœ‰è¦–è¦ºç‹€æ…‹
     * 3. å•Ÿå‹• Go + NoGo ç¤ºç¯„
     * 4. åœ¨çµæŸæ™‚æ’ç¨‹ä¸‹ä¸€æ¬¡å¾ªç’°
     */
    function startCycle() {
      clearAllTimers();
      resetAll();

      // å•Ÿå‹• Go ç¤ºç¯„
      playGo();

      // å•Ÿå‹• NoGo ç¤ºç¯„ï¼ˆå·²å…§å«å»¶é²ï¼Œæœƒåœ¨ Go çµæŸå¾Œæ¥çºŒï¼‰
      playNoGo();

      // æ’ç¨‹ä¸‹ä¸€æ¬¡å¾ªç’°
      schedule(() => startCycle(), TOTAL_CYCLE);
    }


    // ===== åˆå§‹åŒ– =====

    /**
     * [æ–°æ‰‹æ•™å­¸] é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
     * 1. è¼‰å…¥è€é¼ æ´èƒŒæ™¯
     * 2. åˆå§‹åŒ–æ‰‹çš„ SVG
     * 3. é–‹å§‹å‹•ç•«å¾ªç’°
     */
    function init() {
      // è¼‰å…¥è€é¼ æ´èƒŒæ™¯
      DOM.bgLayer.innerHTML = SVG_MOUSE_HOLE;

      // é è¼‰æ‰‹æŒ‡ SVG
      DOM.handFinger.innerHTML = SVG_FINGER_TAP;
      DOM.handStop.innerHTML = SVG_HAND_STOP;

      // é–‹å§‹ç¬¬ä¸€æ¬¡å¾ªç’°
      startCycle();
    }

    // ç­‰ DOM å°±ç·’å¾Œåˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
