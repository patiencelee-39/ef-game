<!DOCTYPE html>

<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>è½éšœEFè¨“ç·´éŠæˆ² - è€é¼ è’é›†èµ·å¸ç‰ˆ</title>

    <meta
      name="description"
      content="ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»é–‹ç™¼çš„åŸ·è¡ŒåŠŸèƒ½èªçŸ¥è¨“ç·´å·¥å…· - æ¡ç”¨Go/No-Goå…¸ç¯„è¨­è¨ˆ"
    />
    <meta name="author" content="ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»ç ”ç©¶åœ˜éšŠ" />
    <meta
      name="keywords"
      content="åŸ·è¡ŒåŠŸèƒ½, èªçŸ¥è¨“ç·´, è½éšœæ•™è‚², ä¸­åŸå¤§å­¸, Go-NoGo, æŠ‘åˆ¶æ§åˆ¶"
    />

    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;"
    />

    <style>
      /* === [è‰¯å¥½å¯¦è¸] CSS è®Šæ•¸ (Variables) ===
         :root ä»£è¡¨ç¶²é çš„æ ¹ç›®éŒ„ã€‚æˆ‘å€‘æŠŠæ‰€æœ‰é¡è‰²éƒ½å–åå­—ä¸¦å®šç¾©åœ¨é€™è£¡ï¼Œå°±åƒæ˜¯èª¿è‰²ç›¤ã€‚
         â˜… [æ•™å­¸ï¼šå¦‚ä½•ä¿®æ”¹é¡è‰²]
         å¦‚æœä½ æƒ³æŠŠèƒŒæ™¯æ”¹æˆé»‘è‰²ï¼Œåªè¦æŠŠ --bg-color å¾Œé¢çš„ #2c3e50 æ”¹æˆ #000000 å³å¯ã€‚
         å¥½è™•æ˜¯æ”¹ä¸€å€‹åœ°æ–¹ï¼Œæ•´å€‹ç¶²ç«™éƒ½æœƒä¸€èµ·è®Šï¼Œä¸ç”¨ä¸€è¡Œä¸€è¡Œæ‰¾ã€‚
      */
      :root {
        --bg-color: #2c3e50; /* èƒŒæ™¯è‰²ï¼šæ·±è—ç° */
        --text-color: #ecf0f1; /* æ–‡å­—è‰²ï¼šç±³ç™½ */
        --primary-color: #3498db; /* ä¸»è¦æŒ‰éˆ•è—è‰² */
        --success-color: #2ecc71; /* ç­”å°æ™‚çš„ç¶ è‰² */
        --error-color: #e74c3c; /* ç­”éŒ¯æ™‚çš„ç´…è‰² */
        --accent-yellow: #f1c40f; /* èµ·å¸çš„é»ƒè‰² */
        --round1-color: #e67e22; /* ç¬¬ä¸€å›ä»£è¡¨è‰² (æ©˜è‰²) */
        --round2-color: #9b59b6; /* ç¬¬äºŒå›ä»£è¡¨è‰² (ç´«è‰²) */
        --practice-color: #1abc9c; /* ç·´ç¿’æ¨¡å¼ä»£è¡¨è‰² (é’è‰²) */
      }

      /* body æ˜¯ç¶²é çš„ã€Œèº«é«”ã€ï¼Œè¨­å®šå…¨åŸŸçš„åŸºç¤æ¨£å¼ */
      body {
        font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif; /* è¨­å®šå­—é«”ï¼Œæ²’æœ‰å¾®è»Ÿæ­£é»‘é«”å°±ç”¨ç³»çµ±é è¨­ */
        background-color: var(--bg-color); /* ä½¿ç”¨ä¸Šé¢å®šç¾©çš„è®Šæ•¸ */
        color: var(--text-color);
        text-align: center; /* è®“æ‰€æœ‰æ–‡å­—ç½®ä¸­ */
        margin: 0; /* å»é™¤ç€è¦½å™¨é è¨­çš„é‚Šé‚Šç©ºç™½ */
        padding: 10px; /* [èª¿æ•´] ç¶²é å…§éƒ¨ç•™ç™½ç¸®å°ï¼ŒæŠŠç©ºé–“ç•™çµ¦å…§å®¹ */

        /* Flexbox æ’ç‰ˆï¼šé€™æ˜¯ä¸€ç¨®å¾ˆå¼·å¤§çš„æ’ç‰ˆæ¨¡å¼ï¼Œå¯ä»¥è®“æ±è¥¿ä¹–ä¹–æ’å¥½ */
        display: flex;
        flex-direction: column; /* å…§å®¹ç”±ä¸Šå¾€ä¸‹å‚ç›´æ’åˆ— */
        align-items: center; /* å…§å®¹å·¦å³ç½®ä¸­å°é½Š */
        min-height: 100vh; /* æœ€å°é«˜åº¦è¨­ç‚ºè¦–çª—é«˜åº¦çš„ 100% (vh = viewport height) */

        /* å„ªåŒ–è§¸æ§è¢å¹•çš„é»æ“Šåæ‡‰ï¼Œé¿å…å»¶é² */
        touch-action: manipulation;

        /* box-sizing: border-box; 
           é€™å€‹è¨­å®šå¾ˆé‡è¦ï¼å®ƒè®“ padding (å…§è·) åŒ…å«åœ¨å¯¬åº¦è¨ˆç®—å…§ã€‚
           å¦‚æœæ²’æœ‰é€™è¡Œï¼Œè¨­å®š width: 100% å†åŠ  paddingï¼Œç¶²é å°±æœƒçˆ†ç‰ˆå‡ºç¾æ²è»¸ã€‚
        */
        box-sizing: border-box;
      }

      /* === ä¸»è¦éŠæˆ²å€åŸŸ (ä¿®æ­£ç‰ˆ) === */
      .game-area {
        background-color: #34495e;
        border-radius: 15px; /* è®“æ¡†æ¡†è®Šåœ“è§’ */
        padding: 20px;
        width: 100%; /* å¯¬åº¦ä½”æ»¿çˆ¶å®¹å™¨ */
        max-width: 600px; /* ä½†æœ€å¤§ä¸è¶…é 600px (é¿å…åœ¨é›»è…¦è¢å¹•ä¸Šå¤ªå¯¬) */
        margin: 10px auto; /* ä¸Šä¸‹è·é›¢ 10pxï¼Œå·¦å³è‡ªå‹• (auto) ç½®ä¸­ */

        /* [RWD ä¿®æ­£é‡é»] 
           é€™è£¡ä¸ç”¨å›ºå®š height (ä¾‹å¦‚ 600px)ï¼Œè€Œæ˜¯ç”¨ min-height (æœ€å°é«˜åº¦)ã€‚
           é€™æ¨£å…§å®¹å°‘æ™‚ä¿æŒ 500px é«˜ï¼Œå…§å®¹å¤šæ™‚ç›’å­æœƒè‡ªå‹•é•·é«˜ï¼Œæ–‡å­—å°±ä¸æœƒè¢«åˆ‡æ‰ã€‚
        */
        min-height: 500px;
        height: auto;

        border: 5px solid transparent; /* é ç•™ 5px çš„é€æ˜é‚Šæ¡†ï¼Œçµ¦å›é¥‹å‹•ç•«(é–ƒç´…/é–ƒç¶ )ç”¨ */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); /* é™°å½±æ•ˆæœï¼šè®“æ¡†æ¡†çœ‹èµ·ä¾†æµ®èµ·ä¾† */

        display: flex;
        flex-direction: column; /* å…§å®¹å‚ç›´æ’åˆ— */
        justify-content: space-between; /* å…§å®¹åˆ†æ•£å°é½Š (é ­é ‚å¤©ã€è…³è¸©åœ°ï¼Œä¸­é–“ç•™ç™½) */
        align-items: center;
        position: relative; /* ç›¸å°å®šä½ï¼šè®“è£¡é¢çš„çµ•å°å®šä½å…ƒç´ ä»¥å®ƒç‚ºåŸºæº– */
        box-sizing: border-box; /* ç¢ºä¿ padding ç®—åœ¨å¯¬åº¦å…§ */
      }

      /* === [æ–°å¢] åˆºæ¿€ç‰©å®¹å™¨ï¼šè€é¼ æ´ + èµ·å¸/è²“å’ª === */
      .stimulus-container {
        position: relative;
        width: 300px;
        height: 300px;
        margin: 20px auto;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* [æ–°å¢] èƒŒæ™¯å±¤ */
      .background-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      /* ç¢ºä¿åˆºæ¿€ç‰©åœ¨èƒŒæ™¯ä¸Šæ–¹ */
      .stimulus {
        position: relative;
        z-index: 10;
        width: 200px;
        height: 200px;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: transform 0.1s;
      }

      /* ç•¶åœ–æ¡ˆåŠ ä¸Š pop é€™å€‹ class æ™‚ï¼Œæœƒæ”¾å¤§ 1.2 å€ */
      .stimulus.pop {
        transform: scale(1.2);
      }

      /* SVG åœ–ç‰‡çµ±ä¸€æ¨£å¼ */
      .stimulus svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
      }

      /* æŒ‰éˆ•å€å®¹å™¨ */
      .controls-area {
        width: 100%;
        display: flex;
        justify-content: center; /* ç½®ä¸­é¡¯ç¤ºå–®ä¸€æŒ‰éˆ• */
        padding-bottom: 10px;
        gap: 15px;
      }

      /* æŒ‰éµæ¨£å¼ */
      .btn-key {
        width: 200px; /* å›ºå®šå¯¬åº¦ */
        height: 120px; /* é›»è…¦ç‰ˆé«˜åº¦ */
        border: none; /* å»æ‰é‚Šæ¡† */
        border-radius: 15px;
        font-size: 2.5em; /* é›»è…¦ç‰ˆå­—é«”å¤§å° */
        color: white;
        cursor: pointer; /* æ»‘é¼ ç§»ä¸Šå»è®Šæ‰‹æŒ‡ */
        display: flex;
        flex-direction: column; /* è£¡é¢çš„åœ–æ¡ˆå’Œæ–‡å­—å‚ç›´æ’åˆ— */
        justify-content: center;
        align-items: center;
        transition: transform 0.1s, opacity 0.3s; /* å‹•ç•«è¨­å®š */
        box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2); /* æŒ‰éˆ•ä¸‹æ–¹çš„ç«‹é«”é™°å½± */
        -webkit-tap-highlight-color: transparent; /* æ‰‹æ©Ÿé»æ“Šæ™‚ä¸è¦å‡ºç¾é è¨­è—è‰²æ¡†æ¡† */
        touch-action: none; /* [ä¿®æ­£] é˜²æ­¢æ‰‹æ©Ÿé€£é»æ™‚è§¸ç™¼ç¸®æ”¾æˆ–æ²å‹• */
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      }

      /* ç•¶æŒ‰éˆ•è¢«æŒ‰ä¸‹ (active) æ™‚çš„ç‰¹æ•ˆ */
      .btn-key:active,
      .btn-key.active-key {
        transform: translateY(4px); /* æŒ‰éˆ•å¾€ä¸‹ç§» 4pxï¼Œçœ‹èµ·ä¾†åƒè¢«å£“ä¸‹å» */
        box-shadow: none; /* é™°å½±æ¶ˆå¤±ï¼Œé…åˆå¾€ä¸‹ç§»çš„æ•ˆæœ */
      }

      /* ç¦ç”¨æŒ‰éˆ•çš„æ¨£å¼ (ä¾‹å¦‚ç¬¬äºŒå›ä¸èƒ½æŒ‰çš„æ™‚å€™) */
      .btn-disabled {
        background-color: #7f8c8d; /* ç°è‰² */
        opacity: 0.3; /* è®ŠåŠé€æ˜ */
        pointer-events: none; /* è®“å®ƒç„¡æ³•è¢«é»æ“Š */
      }

      /* æŒ‰éµä¸Šçš„æç¤ºæ–‡å­— (ä¾‹å¦‚ï¼šæŒ‰ç©ºç™½éµ) */
      .key-hint {
        font-size: 1rem; /* ä½¿ç”¨ rem (ç›¸å°å–®ä½) æ¯”è¼ƒå¥½æ§åˆ¶ */
        opacity: 0.8; /* ç¨å¾®é€æ˜ */
        margin-bottom: 5px;
        font-weight: bold;
      }

      /* === [RWD æ‰‹æ©Ÿç‰ˆå„ªåŒ–æ ¸å¿ƒ] === 
         @media æŸ¥è©¢ï¼šé€™æ˜¯éŸ¿æ‡‰å¼è¨­è¨ˆçš„éˆé­‚ã€‚
         æ„æ€ï¼šç•¶è¢å¹•å¯¬åº¦å°æ–¼ 600px æ™‚ (é€šå¸¸æ˜¯æ‰‹æ©Ÿç›´æ‹¿)ï¼ŒåŸ·è¡Œå¤§æ‹¬è™Ÿå…§çš„ CSS è¨­å®šã€‚
         é€™è®“æˆ‘å€‘å¯ä»¥åœ¨åŒä¸€ä»½æª”æ¡ˆè£¡ï¼ŒåŒæ™‚ç…§é¡§é›»è…¦å’Œæ‰‹æ©Ÿç‰ˆé¢ã€‚
      */
      @media (max-width: 600px) {
        body {
          padding: 5px; /* æ‰‹æ©Ÿç•«é¢å°ï¼Œé‚Šè·ç¸®å°ä¸€é» */
        }

        .game-area {
          min-height: 80vh; /* æ‰‹æ©Ÿç‰ˆé«˜åº¦ä½”è¢å¹• 80% */
          padding: 15px;
        }

        /* ç¸®å°åˆºæ¿€ç‰©å®¹å™¨ */
        .stimulus-container {
          width: 250px;
          height: 250px;
        }

        .stimulus {
          width: 150px;
          height: 150px;
        }

        /* ç¸®å°æŒ‰éˆ• */
        .btn-key {
          width: 150px;
          height: 100px; /* æ‰‹æ©Ÿç‰ˆæŒ‰éˆ•çŸ®ä¸€é» */
          font-size: 2em; /* æ‰‹æ©Ÿç‰ˆç¬¦è™Ÿå°ä¸€é» */
        }

        .key-hint {
          font-size: 0.8rem;
        }

        /* èª¿æ•´èªªæ˜æ–‡å­—å¤§å° */
        .landing-info {
          padding: 15px;
        }
        .landing-info h3 {
          font-size: 1.2em;
        }
        .landing-info p {
          font-size: 0.9em;
        }

        /* èª¿æ•´è¦å‰‡åœ–ç¤º */
        .rule-icon {
          font-size: 2.5em;
        }

        /* [èª¿æ•´] æ‰‹æ©Ÿç‰ˆæŒ‰éˆ•å­—é«”å¾®èª¿ */
        .btn {
          font-size: 1.1em; /* ç¨å¾®å°ä¸€é»é»ç¢ºä¿ä¸æœƒçˆ†ç‰ˆ */
        }
      }

      /* --- ä»¥ä¸‹ä¿æŒåŸæœ‰æ¨£å¼ (é€šç”¨è¨­å®š) --- */

      /* é¦–é èªªæ˜å€å¡Š */
      .landing-info {
        background: rgba(255, 255, 255, 0.1); /* åŠé€æ˜èƒŒæ™¯ */
        padding: 30px;
        border-radius: 15px;
        max-width: 600px;
        margin-bottom: 20px;
        text-align: left; /* æ–‡å­—é å·¦ */
        border-left: 5px solid var(--primary-color); /* å·¦é‚ŠåŠ ä¸€æ¢è—è‰²è£é£¾ç·š */
      }
      .landing-info h3 {
        margin-top: 0;
        color: var(--primary-color);
      }
      .landing-info p {
        line-height: 1.6; /* è¡Œé«˜ï¼Œè®“æ–‡å­—å¥½è®€ */
        opacity: 0.9;
      }

      /* è¦å‰‡èªªæ˜å®¹å™¨ (ä¸¦æ’é¡¯ç¤º) */
      .tutorial-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        width: 100%;
        max-width: 400px;
      }

      /* è¦å‰‡å°æ¡†æ¡† */
      .rule-box {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        width: 100%;
        border: 2px solid rgba(255, 255, 255, 0.1);
        gap: 15px;
      }

      .rule-box.cheese-box {
        background: rgba(254, 181, 2, 0.2);
      }

      .rule-box.cat-box {
        background: rgba(231, 76, 60, 0.2);
      }

      .rule-icon-large {
        font-size: 3em;
      }

      .rule-arrow {
        font-size: 2em;
        color: #bdc3c7;
      }

      .rule-text {
        font-size: 1.3em;
        font-weight: bold;
      }

      /* å›åˆæ¨™ç±¤ (å¦‚ï¼šç¬¬ä¸€å›) */
      .round-label {
        position: absolute; /* çµ•å°å®šä½ï¼šå¯ä»¥ç–Šåœ¨çˆ¶å…ƒç´ ä¸Šæ–¹ */
        top: 10px;
        left: 50%;
        transform: translateX(-50%); /* æ°´å¹³ç½®ä¸­ä¿®æ­£ */
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: bold;
        z-index: 10; /* ç¢ºä¿æµ®åœ¨æœ€ä¸Šå±¤ */
        white-space: nowrap; /* ç¢ºä¿æ–‡å­—ä¸æ›è¡Œ */
      }
      .round-practice {
        background-color: var(--practice-color);
      }
      .round1-badge {
        background-color: var(--round1-color);
      }
      .round2-badge {
        background-color: var(--round2-color);
      }

      /* é€²åº¦æ¢èƒŒæ™¯ */
      .progress-container {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        overflow: hidden; /* ç¢ºä¿è£¡é¢çš„æ¢ä¸æœƒè·‘å‡ºåœ“è§’å¤– */
        margin-top: 10px;
      }
      /* é€²åº¦æ¢æœ¬é«” */
      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #3498db, #2ecc71); /* é¡è‰²æ¼¸å±¤ */
        border-radius: 10px;
        transition: width 0.3s ease; /* å¯¬åº¦æ”¹è®Šæ™‚è¦æœ‰æ»‘å‹•å‹•ç•« */
        width: 0%; /* ä¸€é–‹å§‹æ˜¯ 0% */
      }

      /* å›é¥‹å‹•ç•« Class (JS æœƒå‹•æ…‹åŠ å…¥é€™äº› class) */
      .feedback-success {
        animation: pulse-green 0.3s ease-out; /* åŸ·è¡Œ pulse-green å‹•ç•« */
        border-color: var(--success-color) !important;
      }
      .feedback-error {
        animation: shake-red 0.2s ease-in-out; /* åŸ·è¡Œ shake-red å‹•ç•« */
        border-color: var(--error-color) !important;
      }

      /* @keyframes å®šç¾©å‹•ç•«çš„é—œéµå½±æ ¼ (Keyframes) */
      /* ç¶ è‰²è„ˆè¡å‹•ç•« (ç­”å°) */
      @keyframes pulse-green {
        0% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7);
        }
        50% {
          transform: scale(1.02);
          box-shadow: 0 0 0 15px rgba(46, 204, 113, 0);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(46, 204, 113, 0);
        }
      }
      /* ç´…è‰²éœ‡å‹•å‹•ç•« (ç­”éŒ¯) - å·¦å³æ™ƒå‹• */
      @keyframes shake-red {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-15px); /* å¾€å·¦ç§» */
        }
        75% {
          transform: translateX(15px); /* å¾€å³ç§» */
        }
      }

      /* åœ–æ¡ˆçš„æ­£ç¢º/éŒ¯èª¤å‹•ç•« */
      @keyframes pulse-correct {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.3);
          filter: brightness(1.5);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes shake-error {
        0%,
        100% {
          transform: translateX(0) rotate(0deg);
        }
        25% {
          transform: translateX(-10px) rotate(-5deg);
        }
        75% {
          transform: translateX(10px) rotate(5deg);
        }
      }

      .correct-flash {
        animation: pulse-correct 0.5s ease-out;
        filter: drop-shadow(0 0 20px #2ecc71);
      }
      .error-flash {
        animation: shake-error 0.4s ease-in-out;
        filter: drop-shadow(0 0 20px #e74c3c);
      }

      /* [è‰¯å¥½å¯¦è¸] ç”¨ class ä¾†æ§åˆ¶é¡¯ç¤º/éš±è—ï¼Œæ¯”ç›´æ¥æ”¹ style.display æ›´å¥½ç®¡ç† */
      .hidden {
        display: none !important;
      }
      /* ç•«é¢å±¤ï¼Œç”¨ä¾†åˆ‡æ›ä¸åŒçš„éŠæˆ²éšæ®µ (æ­¡è¿é ã€éŠæˆ²ä¸­ã€çµæœé ) */
      .screen-layer {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      /* === é€šç”¨æŒ‰éˆ• (ä¿®æ”¹ç‰ˆ) === 
         é€™è£¡æˆ‘å€‘ä½¿ç”¨äº†ç™¾åˆ†æ¯”å¯¬åº¦ï¼Œè®“æŒ‰éˆ•åœ¨ä¸åŒè¢å¹•ä¸Šéƒ½èƒ½é©æ‡‰ã€‚
      */
      .btn {
        background-color: var(--primary-color);
        color: white;
        border: none;

        /* [ä¿®æ”¹] å¯¬åº¦è¨­å®š */
        width: 90%; /* ä½”æ»¿çˆ¶å®¹å™¨çš„ 90%ï¼Œç¢ºä¿åœ¨æ‰‹æ©Ÿä¸Šå¤ å¯¬ */
        max-width: 400px; /* è¨­å®šæœ€å¤§å¯¬åº¦ï¼Œé¿å…åœ¨é›»è…¦è¢å¹•ä¸Šè®Šå¤ªé•· */

        /* [ä¿®æ”¹] å…§è·èˆ‡æ–‡å­— */
        padding: 12px 0; /* ä¸Šä¸‹ç•™ç™½ï¼Œå·¦å³å› ç‚ºå¤ å¯¬æ‰€ä»¥è¨­ç‚º 0 æˆ–è‡ªå‹• */
        font-size: 1.2em;
        white-space: nowrap; /* â˜… é—œéµï¼šå¼·åˆ¶æ–‡å­—ä¸æ›è¡Œï¼Œè§£æ±ºæŒ‰éˆ•æ–‡å­—æŠ˜è¡Œå•é¡Œ */

        border-radius: 50px; /* åœ“è§’ */
        cursor: pointer;
        margin-top: 15px;
        box-sizing: border-box; /* ç¢ºä¿å¯¬åº¦åŒ…å«æ¡†ç·šå’Œå…§è· */
      }

      /* æ–‡å­—é–ƒçˆå‹•ç•« */
      .blink-text {
        animation: blink 1.5s infinite;
      }
      @keyframes blink {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
        100% {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ğŸ§  åŸ·è¡ŒåŠŸèƒ½èªçŸ¥è¨“ç·´</h1>
      <p style="opacity: 0.7; font-size: 0.8em">
        ä¸­åŸå¤§å­¸ç‰¹æ•™ç³» | è€é¼ è’é›†èµ·å¸ç‰ˆ v3.0
      </p>
    </header>

    <main class="game-area" id="gameContainer">
      <!-- é¦–é  -->
      <div id="landingPage" class="screen-layer">
        <div class="landing-info">
          <h3>ğŸ« é—œæ–¼æœ¬ç ”ç©¶å·¥å…·</h3>
          <p>
            æœ¬å·¥å…·ç”±
            <a
              href="https://special.cycu.edu.tw/"
              target="_blank"
              style="color: var(--primary-color); text-decoration: underline"
            >
              ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»
            </a>
            é–‹ç™¼ï¼Œæ—¨åœ¨å”åŠ©è½éšœå­¸ç«¥é€²è¡Œã€ŒåŸ·è¡ŒåŠŸèƒ½ã€çš„è¨“ç·´èˆ‡è©•ä¼°ã€‚
          </p>
          <p>
            <strong>ğŸ® éŠæˆ²ä¸»é¡Œï¼š</strong
            ><br />ç¬¬ä¸€å›åˆï¼šå¹«åŠ©è€é¼ è’é›†èµ·å¸ï¼<br />ç¬¬äºŒå›åˆï¼šæ•é­šéŠæˆ²ï¼
          </p>
          <hr
            style="
              border: 0;
              border-top: 1px solid rgba(255, 255, 255, 0.2);
              margin: 15px 0;
            "
          />

          <p><strong>ğŸ”’ éš±ç§æ¬Šè²æ˜ï¼š</strong></p>
          <p>
            æœ¬æ¸¬é©—ç‚ºç´”å‰ç«¯é‹ä½œï¼Œæ‚¨çš„åæ‡‰æ™‚é–“èˆ‡æ­£ç¢ºç‡æ•¸æ“š<b>åƒ…æš«å­˜æ–¼ç€è¦½å™¨ä¸­ï¼Œé é¢é—œé–‰å³æ¶ˆå¤±</b>ï¼Œæˆ‘å€‘ä¸æœƒå°‡ä»»ä½•å€‹äººè³‡æ–™ä¸Šå‚³è‡³ä¼ºæœå™¨ã€‚
          </p>
          <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8">
            ğŸ“§ å°ˆæ¡ˆè¯çµ¡äººï¼šç ”ç©¶åœ˜éšŠ (
            <a
              href="https://github.com/patiencelee-39/ef-training-game"
              target="_blank"
              style="color: var(--accent-yellow)"
              >GitHub</a
            >
            )
          </p>
        </div>
        <div style="margin-bottom: 15px; width: 90%; max-width: 400px">
          <label
            for="playerId"
            style="display: block; margin-bottom: 5px; opacity: 0.8"
          >
            è«‹è¼¸å…¥åº§è™Ÿ+å§“åï¼š
          </label>
          <input
            type="text"
            id="playerId"
            placeholder="ä¾‹å¦‚ï¼š01ç‹å°æ˜"
            style="
              padding: 10px;
              width: 100%;
              border-radius: 10px;
              border: 2px solid var(--primary-color);
              background: rgba(255, 255, 255, 0.9);
              font-size: 1.1em;
              box-sizing: border-box;
              text-align: center;
            "
          />
        </div>
        <button class="btn" onclick="game.showTutorial()">
          ğŸ‘‰ é€²å…¥æ¸¬é©—èªªæ˜
        </button>
        <br />
        <small
          ><a href="privacy.html" style="color: #bdc3c7"
            >è©³ç´°éš±ç§æ¬Šæ”¿ç­–</a
          ></small
        >
        <div style="margin-top: 30px; font-size: 0.7em; opacity: 0.5">
          &copy; 2026 CYCU. All Rights Reserved.
        </div>
      </div>

      <!-- éŠæˆ²èªªæ˜é  -->
      <div id="introScreen" class="screen-layer hidden">
        <h2>ğŸ® éŠæˆ²èªªæ˜</h2>

        <p style="margin-bottom: 20px; color: #bdc3c7; font-size: 1.1em">
          ä½ æ˜¯ä¸€éš»è°æ˜çš„å°è€é¼ ï¼<br />
          ç•¶æ´å£çš„é–€æ‰“é–‹æ™‚...
        </p>

        <div class="tutorial-container">
          <div class="rule-box cheese-box">
            <span class="rule-icon-large">ğŸ§€</span>
            <span class="rule-arrow">â†’</span>
            <span class="rule-text">å¿«æŒ‰ç©ºç™½éµï¼</span>
          </div>

          <div class="rule-box cat-box">
            <span class="rule-icon-large">ğŸ±</span>
            <span class="rule-arrow">â†’</span>
            <span class="rule-text" style="color: var(--error-color)"
              >ä¸è¦æŒ‰ï¼</span
            >
          </div>
        </div>

        <button class="btn blink-text" onclick="game.startPractice()">
          âŒ¨ï¸ æŒ‰ç©ºç™½éµ(æˆ–é»æ­¤)é–‹å§‹ç·´ç¿’
        </button>
        <h4>ç·´ç¿’æ¨¡å¼ä¸è¨ˆåˆ†</h4>
      </div>

      <!-- ç·´ç¿’çµæŸé  -->
      <div id="practiceEndScreen" class="screen-layer hidden">
        <h2>ğŸ‘ ç·´ç¿’å®Œæˆï¼</h2>
        <p>åšå¾—å¾ˆæ£’ï¼çŸ¥é“æ€éº¼ç©äº†å—ï¼Ÿ</p>
        <p>æ¥ä¸‹ä¾†è¦<b>æ­£å¼é–‹å§‹</b>å›‰ï¼</p>
        <div style="margin-top: 20px; width: 100%; text-align: center">
          <button class="btn blink-text" onclick="game.startRound1()">
            âŒ¨ï¸ æŒ‰ç©ºç™½éµ(æˆ–é»æ­¤)é–‹å§‹æ­£å¼æ¸¬é©—
          </button>
          <h4>å¾ç¾åœ¨é–‹å§‹æœƒè¨ˆåˆ†å–”</h4>
        </div>
      </div>

      <!-- ç¬¬äºŒå›åˆç·´ç¿’èªªæ˜é  -->
      <div id="round2PracticeScreen" class="screen-layer hidden">
        <h2>ğŸ® ç¬¬äºŒå›åˆï¼šæ•é­šéŠæˆ²ï¼</h2>

        <p style="margin-bottom: 20px; color: #bdc3c7; font-size: 1.1em">
          ä½ æ˜¯ä¸€å€‹æ¼å¤«ï¼<br />
          ç•¶æµ·ä¸­å‡ºç¾ç”Ÿç‰©æ™‚...
        </p>

        <div class="tutorial-container">
          <div class="rule-box" style="background: rgba(255, 165, 0, 0.2)">
            <span style="font-size: 3em">ğŸŸ</span>
            <span class="rule-arrow">â†’</span>
            <span class="rule-text">å¿«æŒ‰ç©ºç™½éµï¼</span>
          </div>

          <div class="rule-box" style="background: rgba(231, 76, 60, 0.2)">
            <span style="font-size: 3em">ğŸ¦ˆ</span>
            <span class="rule-arrow">â†’</span>
            <span class="rule-text" style="color: var(--error-color)"
              >ä¸è¦æŒ‰ï¼</span
            >
          </div>
        </div>

        <button class="btn blink-text" onclick="game.startRound2Practice()">
          âŒ¨ï¸ æŒ‰ç©ºç™½éµ(æˆ–é»æ­¤)é–‹å§‹ç·´ç¿’
        </button>
        <h4>ç·´ç¿’æ¨¡å¼ä¸è¨ˆåˆ†</h4>
      </div>

      <!-- ç¬¬äºŒå›åˆç·´ç¿’çµæŸé  -->
      <div id="round2PracticeEndScreen" class="screen-layer hidden">
        <h2>ğŸ‘ ç·´ç¿’å®Œæˆï¼</h2>
        <p>åšå¾—å¾ˆæ£’ï¼æº–å‚™å¥½æ­£å¼æŒ‘æˆ°äº†å—ï¼Ÿ</p>
        <p>æ¥ä¸‹ä¾†è¦<b>æ­£å¼é–‹å§‹ç¬¬äºŒå›åˆ</b>å›‰ï¼</p>
        <div style="margin-top: 20px; width: 100%; text-align: center">
          <button class="btn blink-text" onclick="game.startRound2()">
            âŒ¨ï¸ æŒ‰ç©ºç™½éµ(æˆ–é»æ­¤)é–‹å§‹æ­£å¼æ¸¬é©—
          </button>
          <h4>å¾ç¾åœ¨é–‹å§‹æœƒè¨ˆåˆ†å–”</h4>
        </div>
      </div>

      <!-- éŠæˆ²é€²è¡Œç•«é¢ -->
      <div
        id="playScreen"
        class="hidden"
        style="
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        "
      >
        <div style="width: 100%">
          <div id="roundLabel" class="round-label round1-badge">ç¬¬ä¸€å›</div>
          <div
            style="
              margin-top: 25px;
              display: flex;
              justify-content: space-between;
              padding: 0 10px;
            "
          >
            <span
              >é€²åº¦: <span id="currentTrialDisplay">0</span>/<span
                id="totalTrialDisplay"
                >10</span
              ></span
            >
          </div>
          <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
          </div>
        </div>

        <!-- åˆºæ¿€ç‰©é¡¯ç¤ºå€ -->
        <div class="stimulus-container">
          <!-- [ä¿®æ”¹] èƒŒæ™¯å®¹å™¨ï¼ˆå‹•æ…‹åˆ‡æ›è€é¼ æ´æˆ–æµ·æ´‹ï¼‰ -->
          <div class="background-layer" id="backgroundLayer"></div>

          <!-- åˆºæ¿€ç‰©å®¹å™¨ -->
          <div class="stimulus" id="stimulusBox"></div>
        </div>

        <!-- æŒ‰éˆ•æ§åˆ¶å€ï¼šåªé¡¯ç¤ºä¸€å€‹ç©ºç™½éµæŒ‰éˆ• -->
        <div class="controls-area">
          <button
            id="btnSpace"
            class="btn-key"
            onpointerdown="game.handleInput('Space')"
          >
            <span class="key-hint">æŒ‰ç©ºç™½éµ</span>
            <span>è’é›†èµ·å¸</span>
          </button>
        </div>
      </div>

      <!-- çµæœé é¢ -->
      <div id="resultScreen" class="screen-layer hidden">
        <h2>ğŸ‰ å…¨éƒ¨å®Œæˆï¼</h2>
        <div
          style="
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            width: 100%;
            box-sizing: border-box;
          "
        >
          <p>
            ç­”å°é¡Œæ•¸ï¼š<span
              id="scoreDisplay"
              style="color: var(--success-color); font-size: 1.5em"
              >0</span
            >
          </p>
          <p>å¹³å‡é€Ÿåº¦ï¼š<span id="avgTimeDisplay">0ms</span></p>
        </div>
        <button class="btn" onclick="location.reload()">ğŸ”„ å›åˆ°é¦–é </button>
        <button
          class="btn"
          onclick="game.exportData()"
          style="background-color: #7f8c8d"
        >
          ğŸ“¥ åŒ¯å‡ºè³‡æ–™
        </button>
      </div>
    </main>

    <script>
      /* === [è‰¯å¥½å¯¦è¸] è¨­å®šæª” (Configuration Object) ===
         åŸå‰‡ï¼šé¿å…åœ¨ç¨‹å¼ç¢¼ä¸­æ•£è½ã€Œé­”æ³•æ•¸å­—ã€(Magic Numbers)ã€‚
         æˆ‘å€‘æŠŠæ‰€æœ‰éœ€è¦èª¿æ•´çš„åƒæ•¸éƒ½æ”¾åœ¨é€™è£¡ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚
         åƒè€ƒä¾†æºï¼šã€Šç¨‹å¼ç¢¼è‰¯å¥½å¯¦è¸å®Œæ•´æŒ‡å—ã€‹ç¬¬ 1.3 ç¯€ å¸¸æ•¸å‘½å
         â˜… [æ•™å­¸ï¼šå¦‚ä½•èª¿æ•´é›£åº¦]
         å¦‚æœä½ è¦ºå¾—éŠæˆ²å¤ªå¿«ï¼ŒæŠŠ stimulusDuration (åœ–æ¡ˆå‡ºç¾æ™‚é–“) æ”¹å¤§ä¸€é»ã€‚
         isiMin/Max æ˜¯å…©é¡Œä¹‹é–“çš„ä¼‘æ¯æ™‚é–“ï¼Œæ”¹å¤§å°±æœƒè®Šæ…¢ã€‚
      */
      const CONFIG = {
        practiceTrials: 2, // ç·´ç¿’é¡Œæ•¸
        round1Trials: 2, // ç¬¬ä¸€å›é¡Œæ•¸ï¼ˆæ–‡ç»å»ºè­°è‡³å°‘20é¡Œï¼‰
        round2Trials: 5, // [æ–°å¢] ç¬¬äºŒå›é¡Œæ•¸
        round2PracticeTrials: 5, // [æ–°å¢] ç¬¬äºŒå›ç·´ç¿’é¡Œæ•¸
        stimulusDuration: 2000, // [ä¿®æ”¹] åˆºæ¿€å‘ˆç¾æ™‚é–“ 2000ms (ç·´ç¿’ç”¨è¼ƒé•·æ™‚é–“)
        isiMin: 800, // å…©é¡Œä¹‹é–“æœ€å¿«ä¼‘æ¯å¹¾æ¯«ç§’
        isiMax: 1200, // å…©é¡Œä¹‹é–“æœ€æ…¢ä¼‘æ¯å¹¾æ¯«ç§’
        goRatio: 0.75, // [ä¿®æ”¹] Goåˆºæ¿€æ¯”ä¾‹ 75%ï¼ˆæ–‡ç»æ¨™æº–ï¼‰
        debugMode: true, // [æ–°å¢] é™¤éŒ¯æ¨¡å¼ï¼šåœ¨ Console é¡¯ç¤ºè³‡è¨Š
      };

      /* === [æ–°å¢] SVG ç´ æè³‡æº === */
      const SVG_ASSETS = {
        // èµ·å¸ SVGï¼ˆGo åˆºæ¿€ï¼‰- ä¾†è‡ª cheese3_svg.txt
        cheese: `<?xml version="1.0" encoding="utf-8"?>
<svg width="200px" height="200px" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
<path d="M48.18 68.45L6.7 69.95s-2.63-2.63-2.25-3.57S39.18 38.6 40.49 38.79s4.32 3.38 6.76 2.25c2.44-1.13 0-7.7.75-8.63c.75-.94 27.59-15.39 29.28-16.14c1.69-.75 3.19-2.44 6.57-1.69s11.83 2.25 21.02 8.45s18.77 13.33 18.02 17.27c-.75 3.94-74.71 28.15-74.71 28.15z" fill="#ffe265"></path>
<path d="M19.46 115.57c9.2-1.13 94.98-19.52 98.55-20.08c3.57-.56 5.82-3.94 5.82-7.7s-.94-47.49-.94-47.49s-4.13 1.31-9.01 2.44C109 43.86 69.01 53.62 53.25 57.19S12.33 67.33 9.51 67.33s-5.07-.94-5.07-.94s.75 39.04.94 41.86c.19 2.82 1.5 6.19 4.69 7.13s5.27.69 9.39.19z" fill="#feb502"></path>
<path d="M74.97 25.56c0 2.4 2.44 3.99 6.48 3.87c4.41-.13 5.63-2.75 5.49-4.43c-.14-1.69-2.17-3.17-6.19-3.1c-3.73.07-5.78 1.55-5.78 3.66z" fill="#ff8b0d"></path>
<path d="M29.92 55.48c-6.5 2.19-5.77 7.88-3.87 9.15c1.9 1.27 4.43 1.2 7.39.14s4.84-2.27 5.14-4.25c.28-1.88-2.18-7.23-8.66-5.04z" fill="#ed6b31"></path>
<path d="M88.98 39.22c-4.36.2-9.18 3.33-10.98 6.34c-1.9 3.17-2.04 6.9 2.32 9.22c4.36 2.32 19.78-3.59 19.01-9.01c-.77-5.43-5.77-6.76-10.35-6.55z" fill="#ed6b31"></path>
<path d="M73.85 83.07s6.19-4.58 6.19-7.81c0-3.24-2.67-10.89-14.01-11.47c-10.63-.55-17.18 13.94-10.21 21.4c6.97 7.46 11.19 4.08 13.8 3.38c2.61-.71 4.23-5.5 4.23-5.5z" fill="#ed6b31"></path>
<path d="M43.23 96.09s6.15-3.85 1.43-8.07c-3.32-2.97-7.76-1.63-10.02.68c-2.89 2.96-2.11 7.67.56 9.78c2.68 2.12 8.03-2.39 8.03-2.39z" fill="#ed6b31"></path>
<path d="M22.39 78.78s-.7-2.21-3.21-3.1c-2.82-1-7.03 2.51-5.23 6.26c1.62 3.38 5.21 2.39 5.21 2.39l3.23-5.55z" fill="#ed6b31"></path>
<path d="M112.42 82.01c.61-.66 4.6-3.54 4.6-5.73c0-2.18-6.01-8.92-13.68-3.85s-3.66 12.74-1.55 14.01c2.11 1.27 7.96-1.54 10.63-4.43z" fill="#ed6b31"></path>
</svg>`,

        // è²“å’ª SVGï¼ˆNo-Go åˆºæ¿€ï¼‰- ä¾†è‡ª cat2_svg.txt
        cat: `<?xml version="1.0" encoding="utf-8"?>
<svg width="200px" height="200px" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
<path fill="#292F33" d="M10.478 22.439s.702 2.281-.337 7.993c-.186 1.025-.46 2.072-.599 2.93c-1.757 0-1.851 2.002-1.478 2.002h2.094c1.337 0 2.971-3.334 3.854-7.961s-3.534-4.964-3.534-4.964zm13.042 3.702s2.272 1.22 2.188 4.081c-.033 1.131-.249 2.091-.355 3.024c-1.832 0-1.839 1.985-1.305 1.985h1.856c.923 0 3.001-3.158 3.379-7.281c.379-4.122-5.763-1.809-5.763-1.809z"></path>
<path fill="#292F33" d="M36 8.447C36 3.525 31.859 1 27 1a1 1 0 1 0 0 2c1.804 0 6.717.934 6.717 5.447c0 2.881-1.567 5.462-3.77 5.982c-.164-.073-.345-.104-.509-.192c-7.239-3.917-13.457.902-15.226-.29c-1.752-1.182-.539-3.255-2.824-5.243c-.33-1.841-1.073-4.477-1.794-4.477c-.549 0-1.265 1.825-1.74 3.656c-.591-1.381-1.363-2.756-1.86-2.756c-.64 0-1.278 2.273-1.594 4.235c-1.68 1.147-2.906 2.809-2.906 4.765c0 2.7 4.05 3.357 5.4 3.411c1.35.054 3.023 3.562 3.585 5.072c1.242 4.367 2.051 8.699 2.698 11.183c-1.649 0-1.804 2.111-1.348 2.111c.713 0 1.953-.003 2.225 0c1.381.014 2.026-4.706 2.026-8.849c0-.212-.011-.627-.011-.627s1.93.505 6.038-.208c2.444-.424 5.03.849 5.746 3.163c.527 1.704 1.399 3.305 1.868 4.484c-1.589 0-1.545 2.037-1.084 2.037c.787 0 1.801.014 2.183 0c1.468-.055.643-7.574 1.03-10.097s1.267-5.578-.229-8.797C34.857 15.236 36 11.505 36 8.447z"></path>
<circle fill="#C3C914" cx="5.994" cy="11.768" r=".9"></circle>
<path fill="#66757F" d="M2.984 12.86c-.677.423-.677 1.777-1.015 1.777S.954 13.841.954 12.86c-.001-.981 2.862-.52 2.03 0zm3.594 1.483c-.041.026-.09.036-.142.026c-.018-.004-1.548-.241-2.545.146c-.129.05-.341-.023-.413-.191s.023-.365.152-.415c1.44-.569 2.857-.234 2.934-.218c.139.029.195.19.188.372c-.004.114-.104.235-.174.28z"></path>
<path fill="#292F33" d="M5.976 10.982s.333.347.319.778c-.014.43-.25.833-.25.833s-.292-.347-.319-.826c-.027-.48.25-.785.25-.785z"></path>
</svg>`,

        // è€é¼ æ´ SVG - ä¾†è‡ª é–‹é–€å‹•ç•«2_svg.txt
        mouseHole: `<svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
<style>
:root {
  --wall-color: #E0CCB8;
  --floor-color: #95a5a6;
  --baseboard-color: #bdc3c7;
}
.wall { fill: var(--wall-color); }
.floor { fill: var(--floor-color); }
.baseboard { fill: var(--baseboard-color); }
.hole {
  fill: #1a252f;
  transform-box: fill-box;
  transform-origin: bottom center;
  animation: openHole 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
@keyframes openHole {
  0% { transform: scaleY(0); opacity: 0; }
  100% { transform: scaleY(1); opacity: 1; }
}
</style>
<rect x="0" y="0" width="300" height="250" class="wall" />
<rect x="0" y="250" width="300" height="50" class="floor" />
<rect x="0" y="235" width="300" height="15" class="baseboard" />
<path class="hole" d="M 110 250 L 110 200 A 40 40 0 0 1 190 200 L 190 250 Z" />
</svg>`,
      };

      /* === [æ–°å¢] ç¬¬äºŒå›åˆ SVG ç´ æè³‡æº === */
      const SVG_ASSETS_ROUND2 = {
        // é­š SVGï¼ˆæ©˜é»ƒè‰² Go åˆºæ¿€ï¼‰
        fish: `<?xml version="1.0" encoding="utf-8"?>
<svg width="200px" height="200px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path fill="#FFA500" d="M315.441 375.133c29.222 39.684 23.023 38.75 42.477 49.205c40.166 21.585-35.655 36.476-69.779 20.388c-34.134-16.08-49.581-55.064-34.495-87.066c15.078-32.002 39.42-12.909 61.797 17.473m185.879 6.456l-2.598-3.253s-.542-.678-1.545-1.838c-.994-1.198-2.545-2.711-4.255-4.896c-.444-.528-.889-1.1-1.385-1.649c-.474-.573-1.01-1.107-1.477-1.785c-.956-1.333-2.041-2.651-3.155-4.066a128.536 128.536 0 0 0-3.291-4.678c-1.055-1.702-2.192-3.427-3.322-5.204c-2.109-3.721-4.384-7.562-6.229-11.847c-.451-1.078-1.046-2.064-1.423-3.194a75.261 75.261 0 0 0-1.333-3.299c-.248-.534-.422-1.114-.602-1.687c-.196-.565-.392-1.137-.587-1.709c-.392-1.13-.837-2.253-1.123-3.442c-.339-1.168-.656-2.343-1.04-3.502c-.293-1.183-.534-2.395-.836-3.586c-.143-.602-.331-1.182-.444-1.792l-.302-1.838l-.354-1.823c-.12-.61-.279-1.204-.309-1.838c-.12-1.242-.316-2.47-.489-3.712c-.038-.287-.12-.648-.12-.889l-.023-.701c-.022-.467-.06-.934-.106-1.4c-.045-.467-.105-.927-.165-1.394l-.03-.173l-.007-.084l-.007-.173l-.015-.715l-.045-1.423l-.139-4.564l.003-.046l.007-.234l.023-.474l.03-.949l.052-1.898c.03-.633-.023-1.272.045-1.898l.174-1.883l.15-1.876c.03-.633.053-1.258.174-1.876c.173-1.235.369-2.462.489-3.712c.03-.625.188-1.228.309-1.831l.354-1.831l.302-1.83c.113-.61.302-1.191.444-1.793c.302-1.19.542-2.402.836-3.593c.384-1.152.701-2.327 1.04-3.502c.286-1.19.731-2.305 1.123-3.442c.196-.572.392-1.137.587-1.702c.18-.573.354-1.152.602-1.687a78.403 78.403 0 0 0 1.333-3.299c.377-1.13.972-2.116 1.423-3.193c1.845-4.286 4.12-8.135 6.229-11.847c1.13-1.785 2.267-3.503 3.322-5.212a120.672 120.672 0 0 0 3.291-4.67c1.114-1.416 2.199-2.734 3.155-4.067c.512-.708.881-1.137 1.288-1.664c.399-.497.76-1.025 1.122-1.507l1.032-1.416c.075-.113.158-.226.234-.339c.135-.128.271-.256.399-.383c.264-.249.519-.49.76-.724c.987-.918 1.8-1.732 2.47-2.395a88.219 88.219 0 0 0 2.012-2.064c4.285-4.661 6.62-11.192 5.739-17.962c-1.59-12.149-12.721-20.705-24.869-19.116c0 0-1.002.136-2.847.445a98.54 98.54 0 0 0-3.382.625c-.331.06-.678.128-1.032.196c-.174.037-.354.074-.542.105c-.226.075-.46.151-.693.234c-.949.324-1.95.67-3.013 1.04c-1.062.383-2.199.768-3.374 1.227c-1.152.451-2.485.941-3.577 1.439c-2.32.994-4.783 2.184-7.464 3.45c-2.583 1.385-5.295 2.967-8.164 4.677c-2.756 1.838-5.656 3.834-8.594 6.048c-5.717 4.594-11.764 9.979-17.217 16.585c-1.192 1.339-2.321 2.76-3.43 4.217c-18.948-61.637-55.38-97.798-97.567-125.726C243.856 48.11 193.567 53.683 157.694 81.67c-35.88 27.988-32.234 96.849-32.234 96.849l283.366 57.231l-.12.2c-1.182 1.996-2.425 3.999-3.427 6.145c-1.047 2.125-2.124 4.263-3.141 6.455c-.941 2.214-1.831 4.481-2.727 6.763c-.429 1.153-.896 2.298-1.281 3.465c-.369 1.175-.737 2.357-1.107 3.54c-.347 1.198-.701 2.388-1.055 3.585c-.346 1.198-.723 2.395-.964 3.623c-.565 2.447-1.055 4.918-1.567 7.396c-.542 2.47-.746 4.994-1.092 7.51l-.452 3.781c-.158 1.265-.166 2.531-.241 3.803l-.158 3.804l-.067 1.906l-.038.949l-.016.482l-.007.234v.12c.007.64-.03-1.258.023 1.461l.241 5.709l.06 1.423l.038.708l.007.188l.03.264l.053.534l.459 4.271l.512 4.256l.287 2.116c.105.701.241 1.258.361 1.898c.512 2.478 1.001 4.948 1.567 7.388c.241 1.228.618 2.425.964 3.631c.354 1.197.708 2.388 1.055 3.577c.37 1.19.738 2.365 1.107 3.548c.384 1.167.851 2.312 1.281 3.457c.896 2.289 1.785 4.549 2.727 6.77c1.017 2.184 2.093 4.331 3.141 6.455c1.001 2.147 2.244 4.142 3.427 6.146c1.205 1.98 2.32 3.984 3.645 5.829c2.606 3.713 5.144 7.321 7.999 10.53c5.453 6.605 11.501 11.99 17.217 16.584c2.937 2.215 5.837 4.211 8.594 6.048c2.869 1.71 5.581 3.291 8.164 4.678c2.681 1.258 5.144 2.455 7.464 3.441c2.312 1.002 4.534 1.733 6.5 2.411c.987.331 1.913.64 2.794.934c.866.309 1.74.467 2.515.678c1.567.406 2.907.708 3.992.941c2.161.474 3.314.678 3.314.678c5.807.979 12.072-.406 17.036-4.368c9.247-7.382 10.761-20.857 3.38-30.106z"></path>
<path fill="#FFD700" d="M440.024 284.917c0 45.996-97.158 153.524-217.016 153.524c-85.566 0-159.564-35.037-194.902-85.935c-2.493-3.586.271-8.458 4.625-8.082c4.722.415 10.469.867 15.982 1.168c6.997.392 10.153-8.601 4.459-12.683c-10.876-7.803-25.05-17.684-34.344-23.085c-7.584-4.42-12.465-12.381-12.766-21.156A119.552 119.552 0 0 1 6 284.917c0-84.79 97.157-153.523 217.007-153.523c119.859-.001 217.017 107.528 217.017 153.523"></path>
<path fill="#2B3B47" d="M85.367 231.356c9.151 0 16.577 7.411 16.577 16.592v20.374c0 9.165-7.426 16.592-16.577 16.592c-9.166 0-16.592-7.427-16.592-16.592v-20.374c0-9.181 7.426-16.592 16.592-16.592"></path>
<path fill="#FF8C00" d="M225.435 374.209c-4.791 6.726-10.673 1.431-8.27-6.477c5.566-18.301 10.122-47.637 10.122-80.693c0-33.064-4.556-62.391-10.122-80.693c-2.403-7.908 3.479-13.202 8.27-6.477c12.351 17.33 21.253 49.882 21.253 87.171c0 37.295-8.902 69.84-21.253 87.169m58.089-24.374c8.894-12.487 15.311-35.933 15.311-62.798c0-26.865-6.417-50.312-15.311-62.799c-3.458-4.843-7.691-1.024-5.958 4.67c4.014 13.188 7.29 34.313 7.29 58.129c0 23.815-3.276 44.948-7.29 58.136c-1.733 5.695 2.5 9.513 5.958 4.662"></path>
</svg>`,

        // é¯Šé­š SVGï¼ˆè—ç°è‰² No-Go åˆºæ¿€ï¼‰
        shark: `<?xml version="1.0" encoding="utf-8"?>
<svg width="200px" height="200px" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
<path d="M30.77 22.75c-15.51 7.17-26.7 18.4-26.61 21.12c.05 1.41.77 3.94 2.82 6.1c1.21 1.28 4.43 3.61 6.69 3.75c2.25.14 18.51-10.7 18.51-10.7l16.19-2.25l9.85 23.51s3.24 4.65 7.74 8.45s8.87 5.07 9.85 4.22s-1.9-6.55-2.11-8.02c-.28-1.96-1.13-6.76 3.66-6.05s13.66 4.22 13.66 9.43s-3.52 10.98-13.51 10.98s-24.07-3.24-30.55-2.96c-6.48.28-12.25.84-18.16 3.24c-4.38 1.77-9.29 5.07-9.15 5.49c.14.42 5.63 2.25 12.11 3.1s19.01.7 21.12 3.8c2.11 3.1 2.67 7.56 1.97 14.17s-.42 12.01-.28 12.01c.14 0 5.67-3.16 8.45-8.02c4.5-7.88 4.5-17.46 6.19-19.43c1.69-1.97 8.69-2.51 14.36-3.24c5.82-.75 38.86-2.11 38.86-35.05c0-26.47-25.2-32.38-25.76-32.94c-.56-.56-1.48-4.7.42-8.45c1.5-2.96 4.04-7.46 3.24-8.59c-.99-1.4-10.14.14-16.89 3.66s-11 8.02-11 8.02s-25.97-2.61-41.67 4.65z" fill="#6B7F8C"></path>
<path d="M34.71 36.82c5.13-2.27 13.53-4.11 19.85-4.5c11.33-.7 20.98.63 20.98.63s4.12 8.59 7.46 12.88c5.84 7.5 14.25 13.3 15.38 11.68c.94-1.35.18-8.45-1.3-12.81c-.73-2.15-3.1-7.88-3.1-7.88s10.28.84 16.19 9.29c5.91 8.45 8.3 26.33-4.65 33.93c-11.26 6.62-17.6 5.63-17.6 5.63s6.75-7.46 5.68-12.72c-1.13-5.54-3.57-7.04-7.79-7.84c-2.67-.5-25.58 0-31.63-.14s-15.16-.56-21.45-2.49c-3.01-.92-5.16-2.35-5.16-2.35l.14-5.07s-5.16 1.03-8.12.75s-7.13-1.97-7.41-2.39c-.28-.42 3.33-3.58 6.34-5.91c3.76-2.9 10.14-8.01 16.19-10.69z" fill="#A8B8C4"></path>
<path d="M47.52 43.91c0 1.43-1.69 1.36-3.14 1.36c-1.44 0-2.39.09-3.05.56c-.66.47-.18 3.74-6.19 9.2c-3.57 3.24-6.95 5.4-7.51 5.21c-.56-.19-1.64-2.96-1.88-3.99c-2.39.7-7.77-.37-6.95-.56c2.77-.66 6.91-2.56 9.67-4.65c1.92-1.45 5.61-4.35 6.76-5.12c.99-.66 3.85-2.77 5.12-2.91c2.05-.22 7.17-.65 7.17.9z" fill="#ff2b25"></path>
<path d="M39.64 36.07c0 2.33-2.16 4.32-4.83 4.04c-2.29-.24-4.18-1.89-4.18-4.22s1.82-4.43 4.13-4.5c3.72-.13 4.88 2.35 4.88 4.68z" fill="#2f2f2f"></path>
<path d="M29.5 53.76c.89-.75-.89-2.82-.89-2.82l-2.16 1.43c0 .01 1.84 2.42 3.05 1.39z" fill="#fffefd"></path>
<path d="M34.66 49.96c.89-.75-.94-3-.94-3l-2.3 1.78c.01 0 2.03 2.25 3.24 1.22z" fill="#fffefd"></path>
<path d="M37.01 48.7c-.76.89 1.41 2.91 1.41 2.91s1.8-2.38 1.6-2.53c-.19-.15-1.98-1.59-3.01-.38z" fill="#fffefd"></path>
<path d="M33.12 52.59c-.76.89.99 3.19 1.29 3.1s1.99-1.88 1.99-1.88s-2.26-2.43-3.28-1.22z" fill="#fffefd"></path>
<path d="M65.17 25.42c-1.13.75-.38 2.35.28 3.66s1.08 2.51 1.15 4.29c.06 1.6-.35 4.48-.54 5.47c-.17.91-.78 2.9.56 3.24c1.69.42 2.16-.89 2.53-2.16c.49-1.65.74-5.01.66-6.71c-.19-3.64-1.41-5.82-1.97-6.66s-1.57-1.87-2.67-1.13z" fill="#4A5F6D"></path>
<path d="M73.38 27.67c-.75.6 0 2.39.33 3.19c.33.8.49 1.92.49 3.07c0 .8-.16 2.65-.26 3.68c-.14 1.54-.06 2.46 1.08 2.67c1.78.33 1.85-2.06 2.02-3.05c.13-.79.25-3.39.15-4.61c-.09-1.22-.67-2.99-1.37-4.07c-.57-.85-1.5-1.63-2.44-.88z" fill="#4A5F6D"></path>
<path d="M57.66 24.72c-1.54.79.14 3.43.56 4.32s1.03 2.86.99 4.93c-.05 2.06-.21 4.18-.56 5.33c-.31 1-1.22 2.7-.52 3.4c1.03 1.03 2.69-.04 3.26-1.71c.84-2.46 1.06-4.48.96-7.67c-.12-4.29-2.39-9.78-4.69-8.6z" fill="#4A5F6D"></path>
<path d="M28.89 56.3c-.76.89.89 2.96.89 2.96l2.3-1.6s-2.16-2.57-3.19-1.36z" fill="#fffefd"></path>
<path d="M38.84 46.3c.87-.78-.61-2.44-.61-2.44s-2.11 1.27-2.02 1.41c.21.3 1.69 1.88 2.63 1.03z" fill="#fffefd"></path>
</svg>`,

        // æµ·æ´‹èƒŒæ™¯ SVG
        oceanBg: `<svg viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg">
<defs>
  <linearGradient id="oceanGradient" x1="0%" y1="0%" x2="0%" y2="100%">
    <stop offset="0%" style="stop-color:#1e5ba8;stop-opacity:1" />
    <stop offset="50%" style="stop-color:#2980b9;stop-opacity:1" />
    <stop offset="100%" style="stop-color:#3498db;stop-opacity:1" />
  </linearGradient>
  <filter id="bubble">
    <feGaussianBlur in="SourceGraphic" stdDeviation="2" />
  </filter>
</defs>
<rect width="600" height="400" fill="url(#oceanGradient)" />
<ellipse cx="300" cy="420" rx="400" ry="100" fill="#D4A574" opacity="0.6" />
<circle cx="50" cy="300" r="4" fill="#ffffff" opacity="0.4" filter="url(#bubble)" />
<circle cx="120" cy="250" r="3" fill="#ffffff" opacity="0.3" filter="url(#bubble)" />
<circle cx="200" cy="320" r="5" fill="#ffffff" opacity="0.5" filter="url(#bubble)" />
<circle cx="280" cy="280" r="3" fill="#ffffff" opacity="0.4" filter="url(#bubble)" />
<circle cx="350" cy="310" r="4" fill="#ffffff" opacity="0.3" filter="url(#bubble)" />
<circle cx="430" cy="260" r="3" fill="#ffffff" opacity="0.5" filter="url(#bubble)" />
<circle cx="520" cy="290" r="5" fill="#ffffff" opacity="0.4" filter="url(#bubble)" />
<circle cx="550" cy="330" r="4" fill="#ffffff" opacity="0.3" filter="url(#bubble)" />
<path d="M 80 400 Q 75 350, 80 300 Q 85 250, 80 200" 
      stroke="#27ae60" stroke-width="8" fill="none" opacity="0.4" />
<path d="M 150 400 Q 145 360, 150 320 Q 155 280, 150 240" 
      stroke="#229954" stroke-width="6" fill="none" opacity="0.3" />
<path d="M 450 400 Q 455 350, 450 300 Q 445 250, 450 200" 
      stroke="#27ae60" stroke-width="7" fill="none" opacity="0.4" />
<path d="M 530 400 Q 525 365, 530 330 Q 535 295, 530 260" 
      stroke="#229954" stroke-width="6" fill="none" opacity="0.3" />
<circle cx="100" cy="380" r="15" fill="#e74c3c" opacity="0.5" />
<circle cx="110" cy="370" r="12" fill="#c0392b" opacity="0.5" />
<circle cx="520" cy="385" r="18" fill="#e67e22" opacity="0.5" />
<circle cx="505" cy="375" r="14" fill="#d35400" opacity="0.5" />
</svg>`,
      };

      /*
       * ========================================
       * [æ–°å¢åŠŸèƒ½] éŸ³æ•ˆæ§åˆ¶ç³»çµ± (Sound System)
       * ========================================
       * [åˆå­¸è€…è§€å¿µ]
       * é€™è£¡æˆ‘å€‘å»ºç«‹ä¸€å€‹åç‚º audio çš„ç‰©ä»¶ï¼Œå°ˆé–€è² è²¬ã€Œè²éŸ³ã€ç›¸é—œçš„å·¥ä½œã€‚
       * ä½¿ç”¨ç€è¦½å™¨å…§å»ºçš„ Web Audio APIï¼Œå°±åƒæ˜¯åœ¨ç¶²é è£¡æ¥ä¸Šä¸€çµ„è™›æ“¬éŸ³éŸ¿ã€‚
       */
      const audio = {
        // 1. å»ºç«‹éŸ³æ•ˆç’°å¢ƒ (Context)
        // é€™å°±åƒæ˜¯æŠŠéŸ³éŸ¿æ’ä¸Šé›»æºï¼Œæº–å‚™é–‹å§‹é‹ä½œã€‚
        // window.AudioContext æ˜¯æ¨™æº–å¯«æ³•ï¼ŒwebkitAudioContext æ˜¯ç‚ºäº†ç›¸å®¹èˆŠç‰ˆ Safari ç€è¦½å™¨ã€‚
        ctx: new (window.AudioContext || window.webkitAudioContext)(),

        /**
         * [åŠŸèƒ½] ç”¢ç”Ÿä¸¦æ’­æ”¾ä¸€å€‹å–®éŸ³
         * @param {number} freq - é »ç‡ (Hz)ã€‚æ•¸å€¼è¶Šå¤§ï¼Œè²éŸ³è¶Šé«˜ (ä¾‹å¦‚ 880Hz æ¯” 440Hz é«˜)ã€‚
         * @param {string} type - æ³¢å½¢å½¢ç‹€ã€‚æ±ºå®šéŸ³è‰² (sine=åœ“æ½¤, square=åƒé›»ç©, sawtooth=åˆºè€³)ã€‚
         * @param {number} duration - æŒçºŒæ™‚é–“ (ç§’)ã€‚
         */
        playTone: function (freq, type, duration) {
          // [é™¤éŒ¯] å¦‚æœç€è¦½å™¨å› ç‚ºæ²’äººé»æ“Šè€Œæš«åœè²éŸ³ï¼Œé€™è£¡å¼·åˆ¶æŠŠå®ƒæ‰“é–‹
          if (this.ctx.state === "suspended") {
            this.ctx.resume();
          }

          // 2. å»ºç«‹ç™¼è²å™¨ (Oscillator) - å°±åƒæ˜¯æ¨‚å™¨çš„å¼¦æˆ–ç´éµ
          const osc = this.ctx.createOscillator();

          // 3. å»ºç«‹éŸ³é‡æ§åˆ¶å™¨ (GainNode) - å°±åƒæ˜¯éŸ³é‡æ—‹éˆ•
          const gain = this.ctx.createGain();

          // 4. è¨­å®šè²éŸ³åƒæ•¸
          osc.type = type; // è¨­å®šæ³¢å½¢ (éŸ³è‰²)
          osc.frequency.value = freq; // è¨­å®šé »ç‡ (éŸ³é«˜)

          // 5. æ¥ç·šè·¯ï¼šç™¼è²å™¨ -> éŸ³é‡æ—‹éˆ• -> å–‡å­ (Destination)
          osc.connect(gain);
          gain.connect(this.ctx.destination);

          // 6. é–‹å§‹ç™¼è² (ç¾åœ¨çš„æ™‚é–“)
          osc.start();

          // 7. è¨­å®šéŸ³é‡è®ŠåŒ– (æ·¡å‡ºæ•ˆæœï¼Œé¿å…å•µä¸€è²å¾ˆé›£è½)
          // setValueAtTime(0.5) -> ä¸€é–‹å§‹éŸ³é‡è¨­ç‚º 0.5 (èª¿å¤§è²ä¸€é»ï¼Œæœ€å¤§æ˜¯ 1.0)
          // exponentialRampToValueAtTime -> åœ¨æ™‚é–“å…§æ…¢æ…¢æŠŠéŸ³é‡é—œå°åˆ° 0.001
          gain.gain.setValueAtTime(0.3, this.ctx.currentTime);
          gain.gain.exponentialRampToValueAtTime(
            0.001,
            this.ctx.currentTime + duration
          );

          // 8. æ™‚é–“åˆ°åœæ­¢ç™¼è²
          osc.stop(this.ctx.currentTime + duration);
        },

        /**
         * [åŠŸèƒ½] æ’­æ”¾ã€Œç­”å°ã€éŸ³æ•ˆ - æ¸…è„†çš„é«˜éŸ³
         */
        playCorrect: function () {
          // â˜… ä¿®æ”¹é€™è£¡å¯ä»¥æ”¹è®Šç­”å°çš„è²éŸ³
          // åƒæ•¸ï¼šé »ç‡(880Hz), æ³¢å½¢('sine'åœ“æ½¤), æ™‚é–“(0.1ç§’)
          this.playTone(880, "sine", 0.1);
        },

        /**
         * [åŠŸèƒ½] æ’­æ”¾ã€Œç­”éŒ¯ã€éŸ³æ•ˆ - ä½æ²‰çš„è­¦å‘ŠéŸ³
         */
        playError: function () {
          // â˜… ä¿®æ”¹é€™è£¡å¯ä»¥æ”¹è®Šç­”éŒ¯çš„è²éŸ³
          // åƒæ•¸ï¼šé »ç‡(150Hz), æ³¢å½¢('sawtooth'åˆºè€³), æ™‚é–“(0.3ç§’)
          this.playTone(150, "sawtooth", 0.3);
        },
      };

      /*
         === [è‰¯å¥½å¯¦è¸] éŠæˆ²ç‰©ä»¶ (Game Object) ===
         åŸå‰‡ï¼šå–®ä¸€è·è²¬èˆ‡å°è£ (Encapsulation)ã€‚
         åƒè€ƒä¾†æºï¼šã€Šç¨‹å¼ç¢¼è‰¯å¥½å¯¦è¸å®Œæ•´æŒ‡å—ã€‹ç¬¬ 2.1 ç¯€
         æˆ‘å€‘æŠŠæ‰€æœ‰è·ŸéŠæˆ²æœ‰é—œçš„è®Šæ•¸ (score, timer...) å’Œå‡½æ•¸ (nextTrial, showStimulus...)
         éƒ½æ‰“åŒ…åœ¨ `game` é€™å€‹ç‰©ä»¶è£¡ã€‚
         é€™æ¨£æ‰ä¸æœƒè®“è®Šæ•¸åç¨±è·Ÿå…¶ä»–äººæ‰“æ¶ï¼Œç¨‹å¼ç¢¼çµæ§‹ä¹Ÿæ¯”è¼ƒæ¸…æ¥šã€‚
      */
      const game = {
        // State (ç‹€æ…‹)ï¼šè¨˜éŒ„éŠæˆ²ç¾åœ¨é€²è¡Œåˆ°å“ªè£¡ï¼Œåƒæ˜¯ã€ŒéŠæˆ²é€²åº¦å­˜æª”ã€
        state: {
          participantId: "", // [æ–°å¢] ç”¨ä¾†å­˜æš±ç¨± (è¨˜å¾—å¾Œé¢è¦åŠ é€—è™Ÿ)
          currentRound: 1, // ç›®å‰ç¬¬å¹¾å›
          currentTrial: 0, // ç›®å‰ç¬¬å¹¾é¡Œ
          totalTrials: 0, // é€™å›åˆç¸½å…±å¹¾é¡Œ
          score: 0, // å¾—åˆ†
          results: [], // å„²å­˜æ¯ä¸€é¡Œçš„æ•¸æ“š (é™£åˆ—)
          isPlaying: false, // éŠæˆ²æ˜¯å¦æ­£åœ¨é€²è¡Œ
          isPractice: false, // æ˜¯å¦ç‚ºç·´ç¿’æ¨¡å¼
          isRound2Practice: false, // [æ–°å¢]
          currentStimulus: null, // [ä¿®æ”¹] ç¾åœ¨å‡ºç¾çš„æ˜¯èµ·å¸é‚„æ˜¯è²“å’ª ('cheese' æˆ– 'cat')
          startTime: 0, // é¡Œç›®å‡ºç¾çš„æ™‚é–“é» (ç”¨ä¾†ç®—åæ‡‰æ™‚é–“)
          responded: false, // ä½¿ç”¨è€…æ˜¯å¦å·²ç¶“æŒ‰éµ
          timer: null, // è¨ˆæ™‚å™¨ ID
        },

        // Elements (å…ƒç´ )ï¼šé å…ˆæŠ“å– HTML å…ƒç´ å­˜èµ·ä¾†ï¼Œæå‡æ•ˆèƒ½
        // é€™æ¨£å°±ä¸ç”¨æ¯æ¬¡è¦æ”¹ç•«é¢æ™‚éƒ½å» document.getElementById æ‰¾ä¸€æ¬¡
        elements: {
          container: document.getElementById("gameContainer"),
          screens: {
            landing: document.getElementById("landingPage"),
            intro: document.getElementById("introScreen"),
            practiceEnd: document.getElementById("practiceEndScreen"),
            round2Practice: document.getElementById("round2PracticeScreen"), // [æ–°å¢]
            round2PracticeEnd: document.getElementById(
              "round2PracticeEndScreen"
            ), // [æ–°å¢]
            play: document.getElementById("playScreen"),
            result: document.getElementById("resultScreen"),
          },
          backgroundLayer: document.getElementById("backgroundLayer"), // [æ–°å¢]
          stimulus: document.getElementById("stimulusBox"),
          btnSpace: document.getElementById("btnSpace"),
          roundLabel: document.getElementById("roundLabel"),
          trialDisplay: document.getElementById("currentTrialDisplay"),
          totalDisplay: document.getElementById("totalTrialDisplay"),
          scoreDisplay: document.getElementById("scoreDisplay"),
          avgTimeDisplay: document.getElementById("avgTimeDisplay"),
        },

        // é¡¯ç¤ºæ•™å­¸ç•«é¢
        // ä¿®æ”¹å¾Œçš„ showTutorial
        showTutorial: function () {
          // 1. æŠ“å–è¼¸å…¥æ¡†
          const inputEl = document.getElementById("playerId");

          // 2. å­˜å…¥ç‹€æ…‹ (å¦‚æœæ²’è¼¸å…¥ï¼Œå°±é è¨­å« "NoName")
          // .trim() æ˜¯ç‚ºäº†å»æ‰å‰å¾Œå¤šé¤˜çš„ç©ºç™½
          this.state.participantId = inputEl.value.trim() || "NoName";

          // 3. åˆ‡æ›ç•«é¢
          this.showScreen("intro");
        },

        // é–‹å§‹ç·´ç¿’æ¨¡å¼
        startPractice: function () {
          // [ä¿®æ­£] ç¢ºä¿éŸ³æ•ˆç’°å¢ƒ (AudioContext) åœ¨ä½¿ç”¨è€…äº’å‹•å¾Œè¢«å–šé†’
          if (audio.ctx.state === "suspended") audio.ctx.resume();

          this.state.isPractice = true;
          this.state.currentRound = 1;
          this.state.totalTrials = CONFIG.practiceTrials;
          // è¨­å®š UI æ–‡å­—
          this.elements.roundLabel.innerText = "ç·´ç¿’æ¨¡å¼";
          this.elements.roundLabel.className = "round-label round-practice";
          this.initGameSession();
        },

        // é–‹å§‹ç¬¬ä¸€å› (æ­£å¼)
        startRound1: function () {
          this.state.isPractice = false;
          this.state.currentRound = 1;
          this.state.totalTrials = CONFIG.round1Trials;
          this.state.results = []; // æ¸…ç©ºä¹‹å‰çš„ç´€éŒ„
          this.elements.roundLabel.innerText = "ç¬¬ä¸€å›ï¼šæŠ‘åˆ¶æ§åˆ¶è¨“ç·´";
          this.elements.roundLabel.className = "round-label round1-badge";
          this.initGameSession();
        },

        // [æ–°å¢] é–‹å§‹ç¬¬äºŒå›åˆç·´ç¿’
        startRound2Practice: function () {
          if (audio.ctx.state === "suspended") audio.ctx.resume();

          this.state.isPractice = true;
          this.state.isRound2Practice = true;
          this.state.currentRound = 2;
          this.state.totalTrials = CONFIG.round2PracticeTrials;
          this.elements.roundLabel.innerText = "ç¬¬äºŒå›åˆç·´ç¿’";
          this.elements.roundLabel.className = "round-label round-practice";
          this.initGameSession();
        },

        // [æ–°å¢] é–‹å§‹ç¬¬äºŒå›åˆï¼ˆæ­£å¼ï¼‰
        startRound2: function () {
          this.state.isPractice = false;
          this.state.isRound2Practice = false;
          this.state.currentRound = 2;
          this.state.totalTrials = CONFIG.round2Trials;
          this.elements.roundLabel.innerText = "ç¬¬äºŒå›ï¼šæ•é­šéŠæˆ²";
          this.elements.roundLabel.className = "round-label round2-badge";
          this.initGameSession();
        },

        // åˆå§‹åŒ–ä¸€å›åˆçš„éŠæˆ²
        initGameSession: function () {
          this.state.currentTrial = 0;
          this.state.score = 0;
          this.state.isPlaying = true;
          this.elements.totalDisplay.innerText = this.state.totalTrials;
          this.showScreen("play");

          // [ä¿®æ”¹] æ ¹æ“šå›åˆè¨­å®šèƒŒæ™¯
          if (this.state.currentRound === 1) {
            // ç¬¬ä¸€å›åˆï¼šè€é¼ æ´èƒŒæ™¯ï¼ˆä½¿ç”¨ç¾æœ‰çš„ SVG_ASSETSï¼‰
            this.elements.backgroundLayer.innerHTML = SVG_ASSETS.mouseHole;
            this.elements.btnSpace.innerHTML =
              '<span class="key-hint">æŒ‰ç©ºç™½éµ</span><span>è’é›†èµ·å¸</span>';
          } else if (this.state.currentRound === 2) {
            // ç¬¬äºŒå›åˆï¼šæµ·æ´‹èƒŒæ™¯
            this.elements.backgroundLayer.innerHTML = SVG_ASSETS_ROUND2.oceanBg;
            this.elements.btnSpace.innerHTML =
              '<span class="key-hint">æŒ‰ç©ºç™½éµ</span><span>é‡£é­š</span>';
          }

          this.nextTrial();
        },

        // é€²å…¥ä¸‹ä¸€é¡Œ
        nextTrial: function () {
          // æª¢æŸ¥æ˜¯å¦æ‰€æœ‰é¡Œç›®éƒ½åšå®Œäº†
          if (this.state.currentTrial >= this.state.totalTrials) {
            this.endSession(); // çµæŸé€™å›åˆ
            return;
          }
          this.state.currentTrial++;
          this.updateUI(); // æ›´æ–°é€²åº¦æ¢
          // æ¸…ç©ºç•«é¢ç‹€æ…‹
          this.elements.stimulus.innerHTML = ""; // [ä¿®æ”¹] æ¸…ç©º SVG
          this.elements.container.className = "game-area"; // ç§»é™¤æˆåŠŸ/å¤±æ•—çš„å›é¥‹è‰²
          this.elements.stimulus.classList.remove(
            "pop",
            "correct-flash",
            "error-flash"
          ); // [ä¿®æ­£] ç§»é™¤æ®˜ç•™çš„å›é¥‹ç‰¹æ•ˆ
          this.state.responded = false;

          // [ä¿®æ”¹] é‡æ–°æ’­æ”¾èƒŒæ™¯å‹•ç•«
          if (this.state.currentRound === 1) {
            this.elements.backgroundLayer.innerHTML = SVG_ASSETS.mouseHole;
          } else {
            this.elements.backgroundLayer.innerHTML = SVG_ASSETS_ROUND2.oceanBg;
          }

          // è¨ˆç®—éš¨æ©Ÿç­‰å¾…æ™‚é–“ (Math.random ç”¢ç”Ÿéš¨æ©Ÿæ•¸)
          // é€™æ¨£ç©å®¶å°±ç„¡æ³•é æ¸¬åœ–æ¡ˆä»€éº¼æ™‚å€™å‡ºç¾
          const delay =
            Math.floor(Math.random() * (CONFIG.isiMax - CONFIG.isiMin + 1)) +
            CONFIG.isiMin;
          // setTimeout: è¨­å®šä¸€å€‹è¨ˆæ™‚å™¨ï¼Œæ™‚é–“åˆ°ä¹‹å¾ŒåŸ·è¡Œ showStimulus
          setTimeout(() => this.showStimulus(), delay);
        },

        showStimulus: function () {
          // æ ¹æ“šå›åˆæ±ºå®šåˆºæ¿€é¡å‹
          let isGo, goStimulus, noGoStimulus;

          if (this.state.currentRound === 1) {
            // ç¬¬ä¸€å›åˆï¼šèµ·å¸ vs. è²“å’ª
            isGo = Math.random() < CONFIG.goRatio;
            this.state.currentStimulus = isGo ? "cheese" : "cat";
            goStimulus = SVG_ASSETS.cheese;
            noGoStimulus = SVG_ASSETS.cat;
          } else if (this.state.currentRound === 2) {
            // ç¬¬äºŒå›åˆï¼šé­š vs. é¯Šé­š
            isGo = Math.random() < CONFIG.goRatio;
            this.state.currentStimulus = isGo ? "fish" : "shark";
            goStimulus = SVG_ASSETS_ROUND2.fish;
            noGoStimulus = SVG_ASSETS_ROUND2.shark;
          }

          // [é™¤éŒ¯æ¨¡å¼] é¡¯ç¤ºç•¶å‰åˆºæ¿€
          if (CONFIG.debugMode) {
            const round = this.state.currentRound;
            const emoji =
              round === 1 ? (isGo ? "ğŸ§€" : "ğŸ±") : isGo ? "ğŸŸ" : "ğŸ¦ˆ";
            console.log(
              `[ç¬¬${round}å› è©¦é©—${this.state.currentTrial}] åˆºæ¿€: ${
                this.state.currentStimulus
              } ${emoji} ${isGo ? "(æŒ‰ç©ºç™½éµ)" : "(ä¸è¦æŒ‰!)"}`
            );
          }

          // è¨­ç½®åˆºæ¿€ç‰© SVG
          this.elements.stimulus.innerHTML = isGo ? goStimulus : noGoStimulus;

          // æ·»åŠ æ”¾å¤§å‹•ç•«
          this.elements.stimulus.classList.add("pop");

          // è¨˜éŒ„æ™‚é–“
          this.state.startTime = Date.now();

          // è¨­å®šé€¾æ™‚è¨ˆæ™‚å™¨
          this.state.timer = setTimeout(() => {
            if (!this.state.responded) {
              this.handleTimeout();
            }
          }, CONFIG.stimulusDuration);
        },

        /**
         * [é‡æ§‹ - æ–°å¢åŠŸèƒ½] æ ¸å¿ƒé‚è¼¯åˆ¤æ–·
         * å°‡ã€Œåˆ¤æ–·å°éŒ¯ã€çš„è¦å‰‡é›†ä¸­åœ¨é€™è£¡ï¼Œç¬¦åˆã€Œå–®ä¸€è·è²¬åŸå‰‡ã€ã€‚
         * @param {string} stimulus - ç¾åœ¨å‡ºç¾çš„åœ–æ¡ˆ ('cheese' æˆ– 'cat')
         * @param {string|null} inputKey - ä½¿ç”¨è€…æŒ‰çš„éµ ('Space') æˆ– null (æ²’æŒ‰)
         * @returns {boolean} - å›å‚³ true (ç­”å°) æˆ– false (ç­”éŒ¯)
         */
        checkAnswer: function (stimulus, inputKey) {
          if (this.state.currentRound === 1) {
            // ç¬¬ä¸€å›åˆï¼šèµ·å¸ Go / è²“å’ª No-Go
            if (stimulus === "cheese" && inputKey === "Space") return true;
            if (stimulus === "cat" && inputKey === null) return true;
            return false;
          } else if (this.state.currentRound === 2) {
            // ç¬¬äºŒå›åˆï¼šé­š Go / é¯Šé­š No-Go
            if (stimulus === "fish" && inputKey === "Space") return true;
            if (stimulus === "shark" && inputKey === null) return true;
            return false;
          }
        },

        // [ä¿®æ”¹] è™•ç†ä½¿ç”¨è€…è¼¸å…¥ (æŒ‰ç©ºç™½éµ)
        handleInput: function (keyInput) {
          // é˜²å‘†æ©Ÿåˆ¶ï¼šå¦‚æœæ²’åœ¨ç©ã€æˆ–å·²ç¶“æŒ‰éäº†ã€æˆ–åœ–æ¡ˆé‚„æ²’å‡ºä¾†ï¼Œå°±ä¸ç†æœƒ
          if (
            !this.state.isPlaying ||
            this.state.responded ||
            !this.elements.stimulus.innerHTML
          )
            return;
          this.state.responded = true;
          clearTimeout(this.state.timer); // æ¸…é™¤é€¾æ™‚è¨ˆæ™‚å™¨

          // æŒ‰éˆ•çš„è¦–è¦ºå›é¥‹ (åŠ å…¥ .active-key è®“æŒ‰éˆ•å¾€ä¸‹å£“)
          const btn = this.elements.btnSpace;
          btn.classList.add("active-key");
          // 100ms å¾Œç§»é™¤ active-keyï¼Œè®“æŒ‰éˆ•å½ˆå›ä¾†
          setTimeout(() => btn.classList.remove("active-key"), 100);

          // è¨ˆç®—åæ‡‰æ™‚é–“ (ç¾åœ¨æ™‚é–“ - é¡Œç›®å‡ºç¾æ™‚é–“)
          const reactionTime = Date.now() - this.state.startTime;
          const stimulus = this.state.currentStimulus;

          // [é‡æ§‹] ä½¿ç”¨ checkAnswer çµ±ä¸€åˆ¤æ–·
          const isCorrect = this.checkAnswer(stimulus, keyInput);

          // [æ–°å¢] é™¤éŒ¯æ¨¡å¼ï¼šé¡¯ç¤ºåˆ¤æ–·çµæœ
          if (CONFIG.debugMode) {
            console.log(
              `  â†’ æŒ‰äº†ç©ºç™½éµ | åˆºæ¿€: ${stimulus} | åˆ¤æ–·: ${
                isCorrect ? "âœ“ æ­£ç¢º" : "âœ— éŒ¯èª¤"
              } | åæ‡‰æ™‚é–“: ${reactionTime}ms`
            );
          }

          this.triggerFeedback(isCorrect); // é¡¯ç¤ºå›é¥‹(é–ƒç¶ /é–ƒç´…)
          this.recordResult(isCorrect, reactionTime, keyInput); // å­˜æª”
          setTimeout(() => this.nextTrial(), 800); // å»¶é²ä¸€ä¸‹å†é€²ä¸‹ä¸€é¡Œ
        },

        // è™•ç†é€¾æ™‚ (ä½¿ç”¨è€…åœ¨æ™‚é–“å…§æ²’æœ‰æŒ‰éµ)
        handleTimeout: function () {
          this.state.responded = true;
          const stimulus = this.state.currentStimulus;

          // [é‡æ§‹] ä½¿ç”¨ checkAnswer çµ±ä¸€åˆ¤æ–· (å‚³å…¥ null ä»£è¡¨æ²’æŒ‰)
          const isCorrect = this.checkAnswer(stimulus, null);

          // [æ–°å¢] é™¤éŒ¯æ¨¡å¼ï¼šé¡¯ç¤ºåˆ¤æ–·çµæœ
          if (CONFIG.debugMode) {
            console.log(
              `  â†’ æ²’æŒ‰éµï¼ˆé€¾æ™‚ï¼‰| åˆºæ¿€: ${stimulus} | åˆ¤æ–·: ${
                isCorrect ? "âœ“ æ­£ç¢º" : "âœ— éŒ¯èª¤"
              }`
            );
          }

          if (isCorrect) this.triggerFeedback(true);
          else this.triggerFeedback(false);
          this.recordResult(isCorrect, 0, "none");
          setTimeout(() => this.nextTrial(), 800);
        },

        // è§¸ç™¼è¦–è¦ºå›é¥‹ (ç•«é¢é–ƒç¶ è‰²æˆ–ç´…è‰²)
        triggerFeedback: function (isSuccess) {
          // å…ˆç§»é™¤ä¹‹å‰çš„ class
          this.elements.container.classList.remove(
            "feedback-success",
            "feedback-error"
          );
          this.elements.stimulus.classList.remove(
            "correct-flash",
            "error-flash"
          );
          // é­”æ³•æŠ€å·§ï¼šå¼·åˆ¶ç€è¦½å™¨é‡ç¹ª (Reflow)ï¼Œè®“ CSS Animation å¯ä»¥é‡æ–°æ’­æ”¾
          void this.elements.container.offsetWidth;

          if (isSuccess) {
            this.elements.container.classList.add("feedback-success");
            this.elements.stimulus.classList.add("correct-flash");

            // [æ–°å¢] å‘¼å« audio ç‰©ä»¶æ’­æ”¾ç­”å°éŸ³æ•ˆ
            audio.playCorrect();
          } else {
            this.elements.container.classList.add("feedback-error");
            this.elements.stimulus.classList.add("error-flash");

            // [æ–°å¢] å‘¼å« audio ç‰©ä»¶æ’­æ”¾ç­”éŒ¯éŸ³æ•ˆ
            audio.playError();
          }
        },

        // è¨˜éŒ„è©²é¡Œçµæœ
        recordResult: function (isCorrect, rt, inputKey) {
          if (isCorrect) {
            this.state.score++;
            // åˆ†æ•¸å‹•ç•«
            const scoreEl = document.getElementById("scoreDisplay");
            if (scoreEl) {
              scoreEl.style.transform = "scale(1.3)";
              scoreEl.style.color = "#2ecc71";
              setTimeout(() => {
                scoreEl.style.transform = "scale(1)";
              }, 300);
            }
          }
          // åªæœ‰æ­£å¼æ¸¬é©—æ‰è¨˜éŒ„æ•¸æ“šï¼Œç·´ç¿’æ¨¡å¼ä¸è¨˜
          if (!this.state.isPractice) {
            // .push() æŠŠè³‡æ–™åŠ åˆ°é™£åˆ—çš„æœ€å¾Œé¢
            this.state.results.push({
              participantId: this.state.participantId, // [æ–°å¢] è¨˜éŒ„åƒèˆ‡è€…ID
              round: this.state.currentRound,
              trial: this.state.currentTrial,
              stimulus: this.state.currentStimulus,
              input: inputKey,
              correct: isCorrect ? "yes" : "no",
              rt: rt,
              timestamp: new Date().toISOString(), // [æ–°å¢] è¨˜éŒ„æ™‚é–“æˆ³è¨˜
            });
          }
        },

        // çµæŸé€™ä¸€å›åˆ
        endSession: function () {
          this.state.isPlaying = false;

          if (this.state.isPractice) {
            // ç·´ç¿’æ¨¡å¼çµæŸ
            if (this.state.currentRound === 1) {
              this.showScreen("practiceEnd");
            } else if (
              this.state.currentRound === 2 &&
              this.state.isRound2Practice
            ) {
              this.showScreen("round2PracticeEnd");
            }
          } else {
            // æ­£å¼æ¨¡å¼çµæŸ
            if (this.state.currentRound === 1) {
              // ç¬¬ä¸€å›åˆçµæŸï¼Œé€²å…¥ç¬¬äºŒå›åˆç·´ç¿’
              this.showScreen("round2Practice");
            } else if (this.state.currentRound === 2) {
              // ç¬¬äºŒå›åˆçµæŸï¼Œé¡¯ç¤ºæœ€çµ‚çµæœ
              this.showFinalResult();
            }
          }
        },

        // é¡¯ç¤ºæœ€çµ‚æˆç¸¾
        showFinalResult: function () {
          this.showScreen("result");
          // è¨ˆç®—æ­£ç¢ºé¡Œæ•¸ (filter ç¯©é¸å‡ºæ­£ç¢ºçš„é¡Œç›®ï¼Œlength å–å¾—æ•¸é‡)
          const totalCorrect = this.state.results.filter(
            (r) => r.correct === "yes"
          ).length;
          // è¨ˆç®—å¹³å‡åæ‡‰æ™‚é–“
          const validTrials = this.state.results.filter(
            (r) => r.input === "Space" && r.correct === "yes"
          );
          const avgRT =
            validTrials.length > 0
              ? Math.round(
                  validTrials.reduce((sum, r) => sum + r.rt, 0) /
                    validTrials.length
                )
              : 0;
          this.elements.scoreDisplay.innerText = totalCorrect;
          this.elements.avgTimeDisplay.innerText = avgRT + "ms";
        },

        // æ›´æ–°ä»‹é¢ (é€²åº¦æ¢)
        updateUI: function () {
          this.elements.trialDisplay.innerText = this.state.currentTrial;
          const progressBar = document.getElementById("progressBar");
          if (progressBar) {
            // è¨ˆç®—é€²åº¦ç™¾åˆ†æ¯”
            const progress =
              ((this.state.currentTrial - 1) / this.state.totalTrials) * 100;
            progressBar.style.width = progress + "%";
            // é€²åº¦æ¢é¡è‰²éš¨é€²åº¦è®ŠåŒ– (è— -> é»ƒ -> ç¶ )
            if (progress < 30) progressBar.style.background = "#3498db";
            else if (progress < 70) progressBar.style.background = "#f39c12";
            else progressBar.style.background = "#2ecc71";
          }
        },

        // åˆ‡æ›é¡¯ç¤ºçš„ç•«é¢ (Helper function)
        showScreen: function (name) {
          // å…ˆæŠŠæ‰€æœ‰ç•«é¢éƒ½åŠ ä¸Š hidden (éš±è—)
          Object.values(this.elements.screens).forEach((el) =>
            el.classList.add("hidden")
          );
          // å†æŠŠæŒ‡å®šçš„ç•«é¢ç§»é™¤ hidden (é¡¯ç¤º)
          this.elements.screens[name].classList.remove("hidden");
        },

        /*
           === [GSB å®‰å…¨] åŒ¯å‡ºè³‡æ–™åŠŸèƒ½ ===
           åƒè€ƒä¾†æºï¼šã€Šå¦‚ä½•é¿å…ç¶²ç«™è¢«GSBåˆ¤æ–·ç‚ºå±éšªç¶²ç«™ã€‹ç¬¬ 6.1 ç¯€
           1. å»ºç«‹ CSV ç´”æ–‡å­—æ ¼å¼å­—ä¸² (å®‰å…¨çš„æ–‡å­—æª”)ã€‚
           2. å»ºç«‹ä¸€å€‹ <a> é€£çµï¼Œä¸¦è§¸ç™¼é»æ“Šã€‚
           3. é€™æ¨£çš„ã€Œä½¿ç”¨è€…è§¸ç™¼ä¸‹è¼‰ã€ç¬¦åˆå®‰å…¨è¦ç¯„ï¼Œä¸æœƒè¢«èª¤åˆ¤ç‚ºè‡ªå‹•ä¸‹è¼‰æƒ¡æ„è»Ÿé«”ã€‚
        */
        // åŒ¯å‡ºè³‡æ–™åŠŸèƒ½ (å«æš±ç¨±ç‰ˆ)
        exportData: function () {
          // 1. æº–å‚™æ™‚é–“èˆ‡æª”åè³‡è¨Š
          const now = new Date();
          const year = now.getFullYear();
          const month = String(now.getMonth() + 1).padStart(2, "0");
          const day = String(now.getDate()).padStart(2, "0");
          const hour = String(now.getHours()).padStart(2, "0");
          const minute = String(now.getMinutes()).padStart(2, "0");
          const second = String(now.getSeconds()).padStart(2, "0");

          const id = this.state.participantId;
          const dateStr = `${year}/${month}/${day} ${hour}:${minute}:${second}`;
          const fileName = `EFè¨“ç·´éŠæˆ²æ•¸æ“š_${id}_${year}${month}${day}_${hour}${minute}${second}.csv`;

          // 2. å»ºç«‹ CSV å…§å®¹ (æ–°å¢ Participant å’Œ Timestamp æ¬„ä½)
          let csvContent =
            "Participant,Round,Trial,Stimulus,InputKey,Correct,RT(ms),Timestamp\n";
          this.state.results.forEach((r) => {
            csvContent += `${r.participantId},${r.round},${r.trial},${r.stimulus},${r.input},${r.correct},${r.rt},${r.timestamp}\n`;
          });

          // 3. [å„ªåŒ–] ä½¿ç”¨ Blob + BOM (\uFEFF) è§£æ±º Excel ä¸­æ–‡äº‚ç¢¼å•é¡Œ
          const blob = new Blob(["\uFEFF" + csvContent], {
            type: "text/csv;charset=utf-8;",
          });
          const url = URL.createObjectURL(blob);

          const link = document.createElement("a");
          link.setAttribute("href", url);
          link.setAttribute("download", fileName); // è¨­å®šä¸‹è¼‰æª”å
          document.body.appendChild(link);
          link.click(); // æ¨¡æ“¬é»æ“Šä¸‹è¼‰
          document.body.removeChild(link);
          URL.revokeObjectURL(url); // é‡‹æ”¾è¨˜æ†¶é«”
        },
      };

      /* === [è‰¯å¥½å¯¦è¸] å…¨åŸŸäº‹ä»¶ç›£è½ ===
         æˆ‘å€‘åœ¨æ•´å€‹æ–‡ä»¶ (document) ä¸Šç›£è½æŒ‰éµï¼Œè€Œä¸æ˜¯å€‹åˆ¥æŒ‰éˆ•ã€‚
         é€™æ¨£åªè¦å¯«ä¸€æ¬¡ï¼Œå°±å¯ä»¥ç®¡ç†æ‰€æœ‰æŒ‰éµè¡Œç‚ºã€‚
      */
      document.addEventListener("keydown", function (event) {
        if (event.code === "Space" || event.key === " ") {
          const screens = game.elements.screens;

          // ç¬¬ä¸€å›åˆç·´ç¿’
          if (!screens.intro.classList.contains("hidden")) {
            event.preventDefault();
            game.startPractice();
            return;
          }

          // ç¬¬ä¸€å›åˆæ­£å¼é–‹å§‹
          if (!screens.practiceEnd.classList.contains("hidden")) {
            event.preventDefault();
            game.startRound1();
            return;
          }

          // [æ–°å¢] ç¬¬äºŒå›åˆç·´ç¿’
          if (!screens.round2Practice.classList.contains("hidden")) {
            event.preventDefault();
            game.startRound2Practice();
            return;
          }

          // [æ–°å¢] ç¬¬äºŒå›åˆæ­£å¼é–‹å§‹
          if (!screens.round2PracticeEnd.classList.contains("hidden")) {
            event.preventDefault();
            game.startRound2();
            return;
          }

          // éŠæˆ²é€²è¡Œä¸­
          if (game.state.isPlaying) {
            event.preventDefault();
            game.handleInput("Space");
            return;
          }
        }
      });

      /*
       * ========================================
       * [æ–°å¢åŠŸèƒ½] è¼¸å…¥æ¡†æŒ‰ Enter éµè‡ªå‹•ä¸‹ä¸€æ­¥
       * ========================================
       * è®“ä½¿ç”¨è€…è¼¸å…¥å®Œåå­—å¾Œï¼Œç›´æ¥æŒ‰ Enter å°±èƒ½é€²å…¥ä¸‹ä¸€æ­¥ã€‚
       */
      document
        .getElementById("playerId")
        .addEventListener("keydown", function (event) {
          // [ä¿®æ­£] æª¢æŸ¥æ˜¯å¦æ­£åœ¨ä½¿ç”¨è¼¸å…¥æ³• (IME) é¸å­—
          // å¦‚æœ isComposing ç‚º trueï¼Œä»£è¡¨ä½¿ç”¨è€…é‚„åœ¨æ‰“ä¸­æ–‡ï¼Œé€™æ™‚å€™çš„ Enter åªæ˜¯ç¢ºèªé¸å­—ï¼Œä¸æ˜¯è¦é€å‡º
          if (event.isComposing) {
            return;
          }

          // event.key æœƒå‘Šè¨´æˆ‘å€‘ä½¿ç”¨è€…æŒ‰äº†å“ªé¡†éµ
          if (event.key === "Enter") {
            // å¦‚æœæ˜¯ Enter éµï¼Œå°±åŸ·è¡Œã€Œé¡¯ç¤ºæ•™å­¸ã€çš„å‹•ä½œï¼Œè·Ÿé»æ“ŠæŒ‰éˆ•ä¸€æ¨£
            game.showTutorial();
          }
        });
    </script>
  </body>
</html>
