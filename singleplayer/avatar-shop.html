<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;"
    />
    <title>換裝商店 — 執行功能訓練遊戲</title>
    <link rel="icon" href="../favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="../favicon.svg" />
    <link rel="manifest" href="../manifest.json" />
    <meta name="theme-color" content="#302b63" />
    <link rel="stylesheet" href="../css/themes/base.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link
      rel="preload"
      href="../css/components/landscape-hint.css"
      as="style"
      onload="this.rel = 'stylesheet'"
    />
    <noscript
      ><link rel="stylesheet" href="../css/components/landscape-hint.css"
    /></noscript>
    <link rel="stylesheet" href="../css/pages/avatar-shop.css" />
    <!-- style block extracted → css/pages/avatar-shop.css -->
    <link
      rel="preload"
      href="../css/components/navbar.css"
      as="style"
      onload="this.rel = 'stylesheet'"
    />
    <noscript
      ><link rel="stylesheet" href="../css/components/navbar.css"
    /></noscript>
    <script defer src="../js/game-config.js"></script>
    <script defer src="../js/utils/storage.js"></script>
    <script defer src="../js/utils/level-calculator.js"></script>
    <script defer src="../js/shop/avatar-config.js"></script>
    <script defer src="../js/shop/avatar-manager.js"></script>
    <script defer src="../js/shared/navbar.js"></script>
    <script defer src="../js/shared/landscape-hint.js"></script>
    <script defer src="../js/singleplayer/avatar-shop-controller.js"></script>
  </head>
  <body>
    <header class="shop-header">
      <div class="header-left">
        <button class="btn-back" onclick="goBack()" aria-label="返回">←</button>
        <span class="header-title">🛍️ 換裝商店</span>
      </div>
      <div class="stars-display">⭐ <span id="available-stars">0</span></div>
    </header>

    <main class="shop-main" id="main-content">
      <h1 class="sr-only">換裝商店</h1>
      <!-- 預覽區 -->
      <div class="preview-card">
        <div class="preview-avatar" id="preview-avatar">
          <span id="preview-level-icon">🥚</span>
        </div>
        <div class="preview-label" id="preview-label">目前造型</div>
      </div>

      <!-- 分類 Tab -->
      <div class="category-tabs" id="category-tabs">
        <button
          class="category-tab active"
          data-category="frame"
          onclick="filterCategory('frame')"
        >
          🖼️ 頭像框
        </button>
        <button
          class="category-tab"
          data-category="accessory"
          onclick="filterCategory('accessory')"
        >
          ✨ 配飾
        </button>
      </div>

      <!-- 物品網格 -->
      <div class="item-grid" id="item-grid"></div>
    </main>

    <!-- 購買 / 裝備 Popup -->
    <div
      class="buy-popup"
      id="buy-popup"
      role="dialog"
      aria-modal="true"
      aria-label="商品操作"
    >
      <div class="buy-card">
        <div class="buy-emoji" id="popup-emoji">—</div>
        <div class="buy-name" id="popup-name">—</div>
        <div class="buy-desc" id="popup-desc">—</div>
        <div class="buy-price" id="popup-price">—</div>
        <div class="buy-actions" id="popup-actions"></div>
      </div>
    </div>
  </body>
</html>
