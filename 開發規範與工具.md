<a id="top"></a>

# ğŸ› ï¸ é–‹ç™¼è¦ç¯„èˆ‡å·¥å…· v1.2

**å°ˆæ¡ˆåç¨±**ï¼š3-6æ­²è½éšœå­¸é½¡å‰å¹¼å…’åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ²  
**æ–‡ä»¶ç‰ˆæœ¬**ï¼šv1.2ï¼ˆ2026/02/18ï¼‰  
**æ–‡ä»¶ä½œè€…**ï¼šå°æ‘©ç ”ç©¶åŠ©ç†  
**å°æ‡‰éœ€æ±‚æ–‡ä»¶**ï¼š[å®Œæ•´éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md)

> æœ¬æ–‡ä»¶åˆä½µè‡ªåŸå§‹çš„ `NAMING-CONVENTION.md`ï¼ˆv2.4ï¼‰èˆ‡ `ç¨‹å¼é™¤éŒ¯å®Œæ•´æŒ‡å—.md`ï¼Œ  
> ä½œç‚ºé–‹ç™¼éšæ®µçš„çµ±ä¸€åƒè€ƒæ‰‹å†Šã€‚

---

> ğŸ”€ **å¿«é€Ÿåˆ‡æ›**ï¼š[ğŸ“„ å®Œæ•´éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top) Â· [ğŸ” å›åˆ°é ‚éƒ¨](#top)

## ğŸ“‹ æ–‡ä»¶ç¸½è¦½

æœ¬æ–‡ä»¶åˆ†ç‚ºä¸‰å¤§éƒ¨åˆ†ï¼š

| Part                                        | å…§å®¹                                 | ç”¨é€”            | åŸå§‹æª”æ¡ˆ                  |
| ------------------------------------------- | ------------------------------------ | --------------- | ------------------------- |
| [Part 1ï¼šå‘½åè¦ç¯„](#part-1å‘½åè¦ç¯„)         | CSS/JS/HTML/Firebase å‘½åç´„å®š        | å¯« code æ™‚æŸ¥é–±  | NAMING-CONVENTION.md v2.4 |
| [Part 2ï¼šç¨‹å¼é™¤éŒ¯æŒ‡å—](#part-2ç¨‹å¼é™¤éŒ¯æŒ‡å—) | é™¤éŒ¯æµç¨‹ã€å·¥å…·ã€å¸¸è¦‹å•é¡Œ             | é‡åˆ° bug æ™‚æŸ¥é–± | ç¨‹å¼é™¤éŒ¯å®Œæ•´æŒ‡å—.md       |
| [Part 3ï¼šæ¶æ§‹è¨­è¨ˆåŸå‰‡](#part-3æ¶æ§‹è¨­è¨ˆåŸå‰‡) | ä½è€¦åˆé«˜å…§èšã€å¸¸æ•¸é›†ä¸­ç®¡ç†ã€å…±ç”¨æ¨¡çµ„ | æ¨¡çµ„è¨­è¨ˆæ™‚æŸ¥é–±  | v1.1 æ–°å¢ / v1.2 æ“´å……     |

---

<a id="part-1å‘½åè¦ç¯„"></a>

# Part 1ï¼šå‘½åè¦ç¯„

> ğŸ“Œ åŸå§‹æª”æ¡ˆï¼šNAMING-CONVENTION.md v2.4ï¼ˆå·²æ¨™è¨˜æ£„ç”¨ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## ğŸ“‹ å‘½åè¦ç¯„ç¸½è¦½

| é …ç›®             | è¦ç¯„                   | ç¯„ä¾‹                                       |
| ---------------- | ---------------------- | ------------------------------------------ |
| æª”æ¡ˆåç¨±         | kebab-case             | `firebase-config.js`, `room-manager.js`    |
| è®Šæ•¸             | camelCase              | `roomCode`, `userName`, `isActive`         |
| å¸ƒæ—è®Šæ•¸         | is/has/can/should å‰ç¶´ | `isActive`, `hasPassword`, `canJoin`       |
| å‡½å¼             | camelCase              | `generateCode()`, `updatePlayer()`         |
| é¡åˆ¥             | PascalCase             | `RoomManager`, `GameController`            |
| å¸¸æ•¸             | UPPER_SNAKE_CASE       | `MAX_PLAYERS`, `ROOM_EXPIRY_TIME`          |
| é­”æ³•å€¼           | â›” ç¦æ­¢ç›´æ¥ä½¿ç”¨        | `3600000` â†’ `ROOM_EXPIRY_TIME`             |
| å…¨åŸŸç‰©ä»¶         | PascalCase             | `window.RoomManager`, `window.GameUtils`   |
| ç§æœ‰å±¬æ€§/æ–¹æ³•    | \_camelCase            | `_privateMethod()`, `this._cache`          |
| éŒ¯èª¤è®Šæ•¸         | error                  | `catch (error)`, `catch (networkError)`    |
| äº‹ä»¶ç›£è½å™¨       | on + åè© + å‹•ä½œ       | `onRoomChange()`, `onPlayerJoin()`         |
| äº‹ä»¶åç¨±         | åè©:éå»å¼            | `'room:updated'`, `'player:joined'`        |
| Firebase è·¯å¾‘    | camelCase + è¤‡æ•¸       | `rooms/`, `players/`, `globalLeaderboard/` |
| localStorage     | camelCase é ‚å±¤ key     | `playerProfile`, `adventureProgress`       |
| CSS è®Šæ•¸         | `--{åˆ†é¡}-{æè¿°}`      | `--bg-dark`, `--color-correct`             |
| CSS å‹•ç•«         | `{å‹•ä½œ}-{æ•ˆæœ}`        | `pulse-green`, `shake-red`                 |
| æ¢éšªåœ°åœ– ID      | `{field}_{rule}[_wm]`  | `mouse_r1`, `fishing_mixed_wm`             |
| data-\* åŠŸèƒ½å±¬æ€§ | kebab-case å€¼          | `data-theme="field-primary"`               |
| JSDoc            | å¿…é ˆæœ‰ @returns        | æ‰€æœ‰åŒ¯å‡ºå‡½å¼éƒ½è¦æ¨™è¨»å›å‚³å€¼                 |
| Git Commit       | Conventional           | `feat:`, `fix:`, `docs:`                   |

---

<a id="æ–‡ä»¶å°èˆª"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“– æ–‡ä»¶å°èˆª

<details open>
<summary><b>ğŸ”´ å¿…è®€ï¼šæ ¸å¿ƒè¦ç¯„ï¼ˆ5 é …åŸºç¤å‘½åï¼‰</b></summary>

- [ğŸ“ æª”æ¡ˆå‘½å](#æª”æ¡ˆå‘½åè¦ç¯„) - `kebab-case`
- [ğŸ”¤ è®Šæ•¸å‘½å](#è®Šæ•¸å‘½åè¦ç¯„) - `camelCase` + å¸ƒæ—å‰ç¶´
- [âš¡ å‡½å¼å‘½å](#å‡½å¼å‘½åè¦ç¯„) - `camelCase` + å‹•è©é–‹é ­
- [ğŸ—ï¸ é¡åˆ¥å‘½å](#é¡åˆ¥å‘½åè¦ç¯„) - `PascalCase`
- [ğŸ”’ å¸¸æ•¸å‘½å](#å¸¸æ•¸å‘½åè¦ç¯„) - `UPPER_SNAKE_CASE`

</details>

<details open>
<summary><b>â­ v2.2 åš´æ ¼è¦ç¯„ï¼ˆ3 é …æ ¸å¿ƒè®Šæ›´ï¼‰</b></summary>

- [â›” é­”æ³•å€¼ç¦ç”¨](#é­”æ³•å€¼-magic-values-ç¦ç”¨è¦ç¯„) - ğŸ”´ åš´æ ¼ç¦æ­¢
- [âœ… å¸ƒæ—å€¼å‰ç¶´](#å¸ƒæ—å€¼å‘½åè¦ç¯„) - ğŸ”´ å¼·åˆ¶ä½¿ç”¨ `is/has/can/should`
- [ğŸ“ JSDoc @returns](#jsdoc-è¨»è§£è¦ç¯„) - ğŸ”´ å¿…å¡«ï¼ˆå« `void`ï¼‰
- [ğŸ“‹ v2.2 é·ç§»æŒ‡å—](#-v22-é·ç§»æŒ‡å—) - å‡ç´šæ­¥é©Ÿ

</details>

<details>
<summary><b>ğŸ“¦ å°ˆé …è¦ç¯„ï¼ˆ32 é …ç´°åˆ†è¦å‰‡ï¼‰</b></summary>

**JavaScript/TypeScript å‘½å**

- [TypeScript å‹åˆ¥å‘½å](#typescript-å‹åˆ¥å‘½åè¦ç¯„) - Interface/Type/Enum/Generics
- [é™£åˆ—/é›†åˆè®Šæ•¸](#é™£åˆ—é›†åˆè®Šæ•¸å‘½åè¦ç¯„) - è¤‡æ•¸å½¢å¼
- [ç•°æ­¥å‡½å¼](#ç•°æ­¥å‡½å¼å‘½åè¦ç¯„) - `async/await` å‘½å
- [å›èª¿åƒæ•¸](#å›èª¿åƒæ•¸å‘½åè¦ç¯„) - Callback å‘½å
- [å¦å®šå¸ƒæ—å€¼](#å¦å®šå¸ƒæ—å€¼å‘½åè¦ç¯„) - é¿å…é›™é‡å¦å®š
- [è·¯å¾‘/URL](#è·¯å¾‘url-å‘½åè¦ç¯„) - æª”æ¡ˆè·¯å¾‘èˆ‡ API ç«¯é»
- [æ­£å‰‡è¡¨é”å¼](#æ­£å‰‡è¡¨é”å¼å‘½åè¦ç¯„) - `_REGEX/_PATTERN` å¾Œç¶´
- [è‡¨æ™‚è®Šæ•¸](#è‡¨æ™‚è®Šæ•¸å‘½åè¦ç¯„) - é¿å… `temp/tmp`
- [è§£æ§‹è³¦å€¼](#è§£æ§‹è³¦å€¼å‘½åè¦ç¯„) - é¿å…è®Šæ•¸è¡çª
- [ç¸®å¯«ä½¿ç”¨](#ç¸®å¯«ä½¿ç”¨è¦ç¯„) - åƒ…å…è¨±æ¥­ç•Œæ¨™æº–
- [Import é †åº](#import-é †åºè¦ç¯„) - â­ v2.3 æ–°å¢

**æ¡†æ¶ç›¸é—œå‘½å**

- [React/Vue å…ƒä»¶](#reactvue-å…ƒä»¶å‘½åè¦ç¯„) - PascalCase æª”æ¡ˆå
- [Props å‘½å](#props-å‘½åè¦ç¯„) - äº‹ä»¶è™•ç†å™¨/å›èª¿/å¸ƒæ— Props
- [React/Vue Hook](#reactvue-hook-å‘½åè¦ç¯„) - `use` å‰ç¶´
- [Getter/Setter](#gettersetter-å‘½åè¦ç¯„) - ES6 vs å‚³çµ±æ–¹æ³•

**æ¨¡çµ„èˆ‡æ¶æ§‹å‘½å**

- [æ¨¡çµ„æª”æ¡ˆå‘½å](#æ¨¡çµ„æª”æ¡ˆå‘½åå€åˆ¥è¦ç¯„) - Service/Utils/Helpers å€åˆ†
- [éœæ…‹å·¥å» æ–¹æ³•](#éœæ…‹å·¥å» æ–¹æ³•å‘½åè¦ç¯„) - `create/from/getInstance`
- [è·¨æ¨¡çµ„é€šè¨Š](#è·¨æ¨¡çµ„é€šè¨Šç‰©ä»¶å‘½åè¦ç¯„) - è³‡æ–™å‚³éç‰©ä»¶
- [Constants æª”æ¡ˆ](#constants-æª”æ¡ˆçµ„ç¹”è¦ç¯„) - å–®æª” vs å¤šæª”

**è³‡æ–™åº«èˆ‡ API å‘½å**

- [Firebase è·¯å¾‘](#firebase-è³‡æ–™è·¯å¾‘å‘½åè¦ç¯„) - `camelCase` + è¤‡æ•¸
- [è³‡æ–™åº«æ¬„ä½](#è³‡æ–™åº«æ¬„ä½å‘½åæ“´å……è¦ç¯„) - Firebase/MongoDB/SQL
- [API ç«¯é»](#è·¯å¾‘url-å‘½åè¦ç¯„) - RESTful å‘½å

**è³‡æºèˆ‡éœæ…‹æª”æ¡ˆå‘½å**

- [è³‡æºæª”æ¡ˆå‘½å](#è³‡æºæª”æ¡ˆå‘½åè¦ç¯„) - â­ v2.3 æ–°å¢ - åœ–ç‰‡/éŸ³è¨Š/å­—å‹
- [Z-Index å±¤ç´šç®¡ç†](#z-index-å±¤ç´šç®¡ç†è¦ç¯„) - å¸¸æ•¸åŒ–ç®¡ç†

**éŒ¯èª¤èˆ‡äº‹ä»¶å‘½å**

- [éŒ¯èª¤è™•ç†](#éŒ¯èª¤è™•ç†å‘½åè¦ç¯„) - çµ±ä¸€ä½¿ç”¨ `error`
- [éŒ¯èª¤é¡åˆ¥](#éŒ¯èª¤é¡åˆ¥å‘½åè¦ç¯„) - `Error` å¾Œç¶´
- [äº‹ä»¶å‘½å](#äº‹ä»¶å‘½åè¦ç¯„) - `on` + åè© + å‹•ä½œ
- [äº‹ä»¶åç¨±å­—ä¸²](#äº‹ä»¶å‘½åè¦ç¯„) - `åè©:éå»å¼`
- [è‡ªè¨‚äº‹ä»¶](#è‡ªè¨‚äº‹ä»¶å‘½åè¦ç¯„) - `app:` å‰ç¶´
- [WebSocket äº‹ä»¶](#websocket-äº‹ä»¶å‘½åè¦ç¯„) - å¯¦æ™‚é€šè¨Šå‘½å

**æ¸¬è©¦èˆ‡é–‹ç™¼å·¥å…·**

- [æ¸¬è©¦å±¬æ€§å‘½å](#æ¸¬è©¦å±¬æ€§å‘½åè¦ç¯„) - â­ v2.3 æ–°å¢ - data-testid
- [JSDoc è¨»è§£](#jsdoc-è¨»è§£è¦ç¯„) - å¿…å¡« `@returns`
- [Git Commit](#git-commit-è¨Šæ¯è¦ç¯„) - Conventional Commits

</details>

<details open>
<summary><b>ğŸ® v2.4 å°ˆæ¡ˆå°ˆç”¨æ©Ÿåˆ¶ï¼ˆ6 é …æ–°å¢ï¼‰</b></summary>

- [ğŸ’¾ localStorage Key](#localstorage-key-å‘½åè¦ç¯„) - â­ v2.4 æ–°å¢ - camelCase + å·¢ç‹€æ¬„ä½
- [ğŸ¨ CSS Custom Property](#css-custom-property-å‘½åè¦ç¯„) - â­ v2.4 æ–°å¢ - `--{category}-{descriptor}`
- [âœ¨ CSS å‹•ç•«](#css-å‹•ç•«å‘½åè¦ç¯„) - â­ v2.4 æ–°å¢ - @keyframes + class é…å°
- [ğŸ—ºï¸ æ¢éšªåœ°åœ–](#æ¢éšªåœ°åœ–å‘½åè¦ç¯„) - â­ v2.4 æ–°å¢ - Map ID / Point ID / ç‹€æ…‹æšèˆ‰
- [ğŸ·ï¸ åŠŸèƒ½æ€§ data-\* å±¬æ€§](#åŠŸèƒ½æ€§-data--å±¬æ€§å‘½åè¦ç¯„) - â­ v2.4 æ–°å¢ - data-theme / data-field / data-state
- [ğŸ”¥ Firebase è·¯å¾‘æ›´æ–°](#firebase-è³‡æ–™è·¯å¾‘å‘½åè¦ç¯„) - â­ v2.4 æ›´æ–° - gameCombos + liveLeaderboards

</details>

<details>
<summary><b>ğŸ”§ å¿«é€ŸæŸ¥é–±å·¥å…·ï¼ˆ5 é …å¯¦ç”¨è³‡æºï¼‰</b></summary>

- [â›” ç¦ç”¨æ¸…å–®](#ç¦ç”¨æ¸…å–®åš´æ ¼ç¦æ­¢) - çµ•å°ç¦æ­¢çš„å¯«æ³•
- [âœ… æª¢æŸ¥æ¸…å–®](#æª¢æŸ¥æ¸…å–®æ›´æ–°ç‰ˆ) - æäº¤å‰è‡ªæª¢
- [ğŸ“Š å¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨](#å¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨) - å°ç…§è¡¨
- [â“ å¸¸è¦‹å•é¡Œ FAQ](#-å¸¸è¦‹å•é¡Œ-faq) - ç–‘é›£è§£ç­”
- [ğŸ¤– AI å”ä½œæŒ‡å—](#-ai-å”ä½œæŒ‡å—) - AI ä½¿ç”¨æº–å‰‡

</details>

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ï¿½ 5åˆ†é˜å¿«é€Ÿé–‹å§‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿè¨˜ä½é€™3æ¢é»ƒé‡‘è¦å‰‡

1. **æª”æ¡ˆç”¨ kebab**ï¼š`room-manager.js` âœ… | `RoomManager.js` âŒ
2. **è®Šæ•¸ç”¨ camel**ï¼š`roomCode` âœ… | `room_code` âŒ
3. **å‡½å¼åŠ è¨»è§£**ï¼šå¿…é ˆæœ‰ `@returns`ï¼Œå³ä½¿æ˜¯ `{void}`

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¯«ç¨‹å¼å‰å…ˆå•3å€‹å•é¡Œ

â“ **é€™å€‹æ•¸å­—/å­—ä¸²æœ‰æ¥­å‹™æ„ç¾©å—ï¼Ÿ** â†’ æ˜¯ â†’ æå–ç‚ºå¸¸æ•¸  
â“ **é€™æ˜¯å¸ƒæ—å€¼å—ï¼Ÿ** â†’ æ˜¯ â†’ åŠ ä¸Š `is/has/can/should`  
â“ **é€™å€‹å‡½å¼æœƒè¢«åŒ¯å‡º/å…¨åŸŸä½¿ç”¨å—ï¼Ÿ** â†’ æ˜¯ â†’ å¯«å®Œæ•´ JSDoc

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 5ç§’è‡ªæª¢æ³•

åœ¨ VSCode æŒ‰ `Cmd+Shift+F`ï¼Œæœå°‹ä»¥ä¸‹é—œéµå­—ï¼š

- `\d{4,}` (æ­£å‰‡) â†’ æ‰¾å‡ºé­”æ³•æ•¸å­—
- `let active` â†’ æ‰¾å‡ºç¼ºå°‘å‰ç¶´çš„å¸ƒæ—è®Šæ•¸
- `catch (e)` â†’ æ‰¾å‡ºéŒ¯èª¤è®Šæ•¸å‘½åå•é¡Œ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æœ€å¸¸è¦‹çš„3å€‹éŒ¯èª¤

```javascript
// âŒ éŒ¯èª¤ 1ï¼šé­”æ³•å€¼
expires: Date.now() + 3600000;

// âœ… æ­£ç¢º
const ROOM_EXPIRY_TIME = 3600000;
expires: Date.now() + ROOM_EXPIRY_TIME;

// âŒ éŒ¯èª¤ 2ï¼šå¸ƒæ—è®Šæ•¸ç¼ºå‰ç¶´
let active = true;

// âœ… æ­£ç¢º
let isActive = true;

// âŒ éŒ¯èª¤ 3ï¼šç¼ºå°‘ @returns
function getData() {
  return data;
}

// âœ… æ­£ç¢º
/**
 * å–å¾—è³‡æ–™
 * @returns {Object} è³‡æ–™ç‰©ä»¶
 */
function getData() {
  return data;
}
```

**ğŸ¯ è¨˜ä½**ï¼šä¸ç¢ºå®šæ™‚é¸æ“‡æ›´åš´æ ¼çš„è¦ç¯„ï¼Œå¯è®€æ€§å„ªæ–¼ç°¡æ½”ï¼

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

<!-- ============================================================ -->

<a id="æª”æ¡ˆå‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ï¿½ğŸ“ æª”æ¡ˆå‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **kebab-case**ï¼ˆå°å¯«+é€£å­—è™Ÿï¼‰
- æª”æ¡ˆåç¨±è¦æœ‰æè¿°æ€§
- JavaScript æª”æ¡ˆä½¿ç”¨ `.js` å‰¯æª”å
- HTML æª”æ¡ˆä½¿ç”¨ `.html` å‰¯æª”å
- CSS æª”æ¡ˆä½¿ç”¨ `.css` å‰¯æª”å

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```
âœ… æ­£ç¢ºï¼š
  firebase-config.js
  room-manager.js
  question-generator.js
  game-controller.js
  sound-manager.js

âŒ éŒ¯èª¤ï¼š
  firebaseConfig.js
  RoomManager.js
  question_generator.js
  GameController.js
```

<!-- ============================================================ -->

<a id="è‡¨æ™‚è®Šæ•¸å‘½åè¦ç¯„"></a>
<a id="é™£åˆ—é›†åˆè®Šæ•¸å‘½åè¦ç¯„"></a>
<a id="è®Šæ•¸å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ”¤ è®Šæ•¸å‘½åè¦ç¯„

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼šcamelCase | å¸ƒæ—å€¼å¼·åˆ¶å‰ç¶´ (is/has/can/should)
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š3 åˆ†é˜

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **camelCase**ï¼ˆå°é§å³°ï¼‰
- ç¬¬ä¸€å€‹å­—æ¯å°å¯«ï¼Œä¹‹å¾Œæ¯å€‹å–®å­—é¦–å­—æ¯å¤§å¯«
- **å¸ƒæ—å€¼è®Šæ•¸å¼·åˆ¶ä½¿ç”¨å‰ç¶´**ï¼š`is`, `has`, `can`, `should` â­ æ–°å¢

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  let roomCode = 'ABC123';
  let userName = 'å°æ˜';
  let currentStageIndex = 0;
  let isGameStarted = false;      // â­ å¸ƒæ—å€¼å¿…é ˆæœ‰å‰ç¶´
  let hasPassword = true;         // â­ å¸ƒæ—å€¼å¿…é ˆæœ‰å‰ç¶´
  let canJoinRoom = true;         // â­ å¸ƒæ—å€¼å¿…é ˆæœ‰å‰ç¶´
  let shouldShowNotification = false;  // â­ å¸ƒæ—å€¼å¿…é ˆæœ‰å‰ç¶´

âŒ éŒ¯èª¤ï¼š
  let RoomCode = 'ABC123';        // ä¸è¦ç”¨ PascalCase
  let room_code = 'ABC123';       // ä¸è¦ç”¨ snake_case
  let ROOM_CODE = 'ABC123';       // ä¸è¦ç”¨ UPPER_CASE
  let gamestarted = false;        // ä¸æ¸…æ¥šåˆ†ç•Œ
  let gameStarted = false;        // â­ å¸ƒæ—å€¼ç¼ºå°‘å‰ç¶´ï¼ˆæ‡‰ç‚º isGameStartedï¼‰
  let active = true;              // â­ å¸ƒæ—å€¼ç¼ºå°‘å‰ç¶´ï¼ˆæ‡‰ç‚º isActiveï¼‰
```

> **âš ï¸ v2.2 åš´æ ¼è¦ç¯„è­¦å‘Š**
>
> å¸ƒæ—å€¼è®Šæ•¸**å¼·åˆ¶ä½¿ç”¨å‰ç¶´** (`is/has/can/should`)ï¼Œé€™æ˜¯ v2.2 çš„æ ¸å¿ƒè®Šæ›´ä¹‹ä¸€ã€‚
> é•åæ­¤è¦å‰‡å°‡å°è‡´ç¨‹å¼ç¢¼å¯©æŸ¥ä¸é€šéï¼

<a id="å¸ƒæ—å€¼å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸ƒæ—å€¼å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶ï¼ˆæ–°ç¨‹å¼ç¢¼ï¼‰ï½œğŸŸ¡ å»ºè­°ï¼ˆFirebase æ¬„ä½ï¼‰

**å¼·åˆ¶ä½¿ç”¨å‰ç¶´çš„å ´æ™¯**ï¼š

```javascript
// âœ… å‡½å¼åƒæ•¸
function createRoom(hasPassword, canJoin) { }

// âœ… æœ¬åœ°è®Šæ•¸
let isValid = validateCode();
let hasPermission = checkAuth();

// âœ… å‡½å¼å›å‚³å€¼
function checkRoomStatus() {
  return isActive && !isPaused;
}

// âš ï¸ è³‡æ–™åº«æ¬„ä½ï¼ˆå»ºè­°ï¼Œä½†å¯å½ˆæ€§è™•ç†ç›¸å®¹æ€§ï¼‰
// æ–°å°ˆæ¡ˆï¼š
{ isGameStarted: true, hasPassword: false }

// å·²å­˜åœ¨çš„å°ˆæ¡ˆï¼ˆå¯æ¥å—ï¼‰ï¼š
{ gameStarted: true, hasPassword: false }
// ç†ç”±ï¼šFirebase æ¬„ä½åç¨±è®Šæ›´æˆæœ¬é«˜ï¼Œéœ€è©•ä¼°ç›¸å®¹æ€§
```

**å‰ç¶´é¸æ“‡æŒ‡å—**ï¼š

| å‰ç¶´     | ç”¨é€”       | ç¯„ä¾‹                                     |
| :------- | :--------- | :--------------------------------------- |
| `is`     | ç‹€æ…‹æˆ–æ¢ä»¶ | `isActive`, `isLoading`, `isValid`       |
| `has`    | æ“æœ‰æˆ–åŒ…å« | `hasPassword`, `hasError`, `hasChildren` |
| `can`    | èƒ½åŠ›æˆ–æ¬Šé™ | `canJoin`, `canEdit`, `canDelete`        |
| `should` | å»ºè­°æˆ–é…ç½® | `shouldShowAlert`, `shouldRetry`         |

<!-- ============================================================ -->

<a id="å¦å®šå¸ƒæ—å€¼å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¦å®šå¸ƒæ—å€¼å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

**æ ¸å¿ƒåŸå‰‡**ï¼š

- **ç¦æ­¢é›™é‡å¦å®š**ï¼ˆ`isNotInactive`ï¼‰
- **å„ªå…ˆä½¿ç”¨è‚¯å®šå½¢å¼**ï¼ˆ`isEnabled` è€Œé `isNotDisabled`ï¼‰
- **é¿å… `not` åœ¨è®Šæ•¸åä¸­**

#### é›™é‡å¦å®šå•é¡Œ

```javascript
// âŒ é›™é‡å¦å®šï¼ˆæ¥µé›£ç†è§£ï¼‰
const isNotInactive = true;
if (!isNotInactive) {
  // é€™æ˜¯å•¥æ„æ€ï¼Ÿéœ€è¦å¿ƒç®—å…©æ¬¡å¦å®š
}

// âœ… ä½¿ç”¨è‚¯å®šå½¢å¼
const isActive = true;
if (isActive) {
  // æ¸…æ™°æ˜ç­
}

// âŒ é¿å… disabled/hidden èˆ‡ not æ··ç”¨
const isNotDisabled = true;
const isNotHidden = false;

// âœ… ç›´æ¥ä½¿ç”¨å°æ‡‰çš„è‚¯å®šè©
const isEnabled = true;
const isVisible = false;
```

#### è‚¯å®š/å¦å®šå°ç…§è¡¨

| âŒ é¿å…ä½¿ç”¨     | âœ… å»ºè­°ä½¿ç”¨      | èªªæ˜           |
| --------------- | ---------------- | -------------- |
| `isNotDisabled` | `isEnabled`      | å•Ÿç”¨/ç¦ç”¨      |
| `isNotHidden`   | `isVisible`      | å¯è¦‹/éš±è—      |
| `isNotInactive` | `isActive`       | æ´»èº/ä¸æ´»èº    |
| `isNotInvalid`  | `isValid`        | æœ‰æ•ˆ/ç„¡æ•ˆ      |
| `isNotEmpty`    | `hasContent`     | æœ‰å…§å®¹/ç©º      |
| `isNotReadonly` | `isEditable`     | å¯ç·¨è¼¯/å”¯è®€    |
| `canNotEdit`    | `canEdit: false` | ä½¿ç”¨å¸ƒæ—å€¼å¦å®š |
| `shouldNotShow` | `shouldHide`     | éš±è—/é¡¯ç¤º      |

#### æ­£ç¢ºçš„å¦å®šæ–¹å¼

```javascript
// âœ… æ–¹å¼ 1ï¼šåœ¨é‚è¼¯ä¸­å¦å®š
const isEnabled = false; // ç”¨ false è¡¨ç¤ºã€Œæœªå•Ÿç”¨ã€
if (!isEnabled) {
  // åœ¨æ¢ä»¶åˆ¤æ–·ä¸­å¦å®š
}

// âœ… æ–¹å¼ 2ï¼šä½¿ç”¨ç›¸åè©
const isDisabled = true; // æ˜ç¢ºè¡¨ç¤ºã€Œå·²ç¦ç”¨ã€
if (isDisabled) {
  // ä¸éœ€è¦å¦å®šç¬¦è™Ÿ
}

// âœ… æ–¹å¼ 3ï¼šæ ¹æ“šæ¥­å‹™é‚è¼¯é¸æ“‡ä¸»è¦ç‹€æ…‹
// å¦‚æœã€Œå•Ÿç”¨ã€æ˜¯é è¨­/å¸¸è¦‹ç‹€æ…‹
const isEnabled = true;

// å¦‚æœã€Œç¦ç”¨ã€æ˜¯é è¨­/å¸¸è¦‹ç‹€æ…‹
const isDisabled = false;
```

#### ç‰¹æ®Šæƒ…æ³ï¼šdisabled/readonly å±¬æ€§

```javascript
// âœ… HTML å±¬æ€§ç›´æ¥å°æ‡‰ï¼ˆå¯æ¥å—ä¾‹å¤–ï¼‰
const inputProps = {
  disabled: false, // HTML å±¬æ€§åç¨±
  readonly: false, // HTML å±¬æ€§åç¨±
};

// âœ… ä½†åœ¨æ¥­å‹™é‚è¼¯ä¸­æ‡‰è½‰æ›
const isEditable = !inputProps.disabled && !inputProps.readonly;
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é™£åˆ—/é›†åˆè®Šæ•¸è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶

**è¦å‰‡**ï¼š

- é™£åˆ—/é›†åˆé¡å‹çš„è®Šæ•¸å¿…é ˆä½¿ç”¨**è¤‡æ•¸åè©**
- é¿å…ä½¿ç”¨ `List`, `Array`, `Collection` å¾Œç¶´
- å–®ä¸€å…ƒç´ ä½¿ç”¨å–®æ•¸å½¢å¼

```javascript
// âœ… é™£åˆ—/é›†åˆä½¿ç”¨è¤‡æ•¸åè©
const players = [];
const roomCodes = ['ABC12', 'DEF34'];
const errorMessages = [];
const selectedStages = ['A', 'B', 'C'];

// âœ… å–®ä¸€å…ƒç´ ä½¿ç”¨å–®æ•¸
const player = players[0];
const currentRoom = rooms.find(r => r.isActive);

// âŒ é¿å…ä½¿ç”¨ List/Array å¾Œç¶´
const playerList = [];       // æ‡‰è©²ç”¨ players
const roomCodeArray = [];    // æ‡‰è©²ç”¨ roomCodes
const errorMessageList = []; // æ‡‰è©²ç”¨ errorMessages

// âš ï¸ éœ€è¦å€åˆ†æ™‚ä½¿ç”¨ä¿®é£¾è©
const allPlayers = [...players];           // æ‰€æœ‰ç©å®¶
const activePlayers = players.filter(...); // æ´»èºç©å®¶
const selectedPlayer = player;             // é¸ä¸­çš„ç©å®¶
```

**å‘½åæ¨¡å¼**ï¼š
| é¡å‹ | å–®æ•¸ | è¤‡æ•¸ | èªªæ˜ |
|------|------|------|------|
| ç©å®¶ | `player` | `players` | âœ… æ¨™æº–è¤‡æ•¸ |
| æˆ¿é–“ | `room` | `rooms` | âœ… æ¨™æº–è¤‡æ•¸ |
| è¨Šæ¯ | `message` | `messages` | âœ… æ¨™æº–è¤‡æ•¸ |
| é¡åˆ¥ | `category` | `categories` | âœ… y â†’ ies |
| å­©å­ | `child` | `children` | âœ… ä¸è¦å‰‡è¤‡æ•¸ |
| è³‡æ–™ | `data` | `data` | âš ï¸ ä¸å¯æ•¸åè© |

**ä½¿ç”¨å ´æ™¯**ï¼š

```javascript
// âœ… é™£åˆ—éæ­·ï¼šè¤‡æ•¸ â†’ å–®æ•¸
players.forEach((player) => {
  console.log(player.name);
});

rooms.map((room) => room.roomCode);

// âœ… ç´¯åŠ /æ¸›å°‘
errorMessages.push("æ–°éŒ¯èª¤");
players.splice(index, 1);

// âœ… é•·åº¦åˆ¤æ–·
if (players.length === 0) {
}
if (rooms.length > MAX_ROOMS) {
}
```

<!-- ============================================================ -->

<a id="ç•°æ­¥å‡½å¼å‘½åè¦ç¯„"></a>
<a id="å‡½å¼å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ¯ å‡½å¼å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **camelCase**
- ä½¿ç”¨å‹•è©é–‹é ­ï¼ˆæè¿°å‹•ä½œï¼‰
- å¸¸ç”¨å‹•è©ï¼šget, set, create, update, delete, add, remove, show, hide, toggle, validate, check, generate, calculate, handle

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  function generateRoomCode() { }
  function getRoomData() { }
  function updatePlayerScore() { }
  function validateInput() { }
  function handleFormSubmit() { }
  function calculateBonus() { }

âŒ éŒ¯èª¤ï¼š
  function GenerateRoomCode() { }  // ä¸è¦ç”¨ PascalCase
  function generate_room_code() { } // ä¸è¦ç”¨ snake_case
  function roomcode() { }          // ç¼ºå°‘å‹•è©
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éåŒæ­¥å‡½å¼å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶

**è¦å‰‡**ï¼š

- å„ªå…ˆä½¿ç”¨èªæ„åŒ–å‹•è©ï¼ˆfetch/load/save/createï¼‰æš—ç¤ºéåŒæ­¥
- ä¾è³´ JSDoc çš„ `@async` æ¨™ç±¤
- **é¿å…** `Async` å¾Œç¶´ï¼ˆé™¤ééœ€èˆ‡åŒæ­¥ç‰ˆæœ¬å…±å­˜ï¼‰

```javascript
// âœ… é¸é … Aï¼šä½¿ç”¨èªæ„åŒ–å‹•è©ï¼ˆæ¨è–¦ï¼‰
/**
 * è¼‰å…¥æˆ¿é–“è³‡æ–™
 * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
 * @returns {Promise<Object>} æˆ¿é–“è³‡æ–™
 * @async
 */
async function fetchRoomData(roomCode) {} // fetch æš—ç¤ºç¶²è·¯è«‹æ±‚

/**
 * è¼‰å…¥ä½¿ç”¨è€…è³‡æ–™
 * @returns {Promise<Object>}
 * @async
 */
async function loadUserProfile() {} // load æš—ç¤ºè®€å–æ“ä½œ

/**
 * å„²å­˜è³‡æ–™åˆ°è³‡æ–™åº«
 * @returns {Promise<void>}
 * @async
 */
async function saveToDatabase(data) {} // save æš—ç¤ºå¯«å…¥æ“ä½œ

// âœ… é¸é … Bï¼šä¸ç‰¹åˆ¥æ¨™ç¤ºï¼ˆä¾è³´ JSDocï¼‰
/**
 * å–å¾—æˆ¿é–“è³‡æ–™
 * @async
 * @returns {Promise<Object>}
 */
async function getRoomData() {}

// âŒ é¿å… Async å¾Œç¶´
async function getRoomDataAsync() {} // å†—é•·ä¸”ä¸å¿…è¦

// âš ï¸ ä¾‹å¤–ï¼šåŒæ™‚æä¾›åŒæ­¥/éåŒæ­¥ç‰ˆæœ¬
function getRoomDataSync() {} // åŒæ­¥ç‰ˆæœ¬
async function getRoomDataAsync() {} // éåŒæ­¥ç‰ˆæœ¬
```

**å¸¸ç”¨éåŒæ­¥å‹•è©**ï¼š
| å‹•è© | ç”¨é€” | ç¯„ä¾‹ |
| ------ | ------ | ------ |
| `fetch` | ç¶²è·¯è«‹æ±‚ | `fetchRoomData()`, `fetchUserList()` |
| `load` | è®€å–/è¼‰å…¥ | `loadGameState()`, `loadConfig()` |
| `save` | å„²å­˜/å¯«å…¥ | `saveUserProfile()`, `saveSettings()` |
| `create` | å»ºç«‹è³‡æº | `createRoom()`, `createUser()` |
| `update` | æ›´æ–°è³‡æ–™ | `updatePlayerScore()`, `updateRoom()` |
| `delete` | åˆªé™¤è³‡æ–™ | `deleteRoom()`, `deleteUser()` |
| `upload` | ä¸Šå‚³æª”æ¡ˆ | `uploadImage()`, `uploadFile()` |
| `download` | ä¸‹è¼‰æª”æ¡ˆ | `downloadReport()`, `downloadFile()` |

<!-- ============================================================ -->

<a id="å›èª¿åƒæ•¸å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å›èª¿åƒæ•¸å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

**è¦å‰‡**ï¼š

- é€šç”¨å›èª¿ä½¿ç”¨ `callback`
- äº‹ä»¶è™•ç†å™¨ä½¿ç”¨ `handler`
- æˆåŠŸ/å¤±æ•—å›èª¿ä½¿ç”¨ `onSuccess` / `onError`
- Promise ä½¿ç”¨ `resolve` / `reject`

```javascript
// âœ… é€šç”¨å›èª¿ï¼šcallback
/**
 * å–å¾—è³‡æ–™
 * @param {string} url - è³‡æ–™ç¶²å€
 * @param {Function} callback - å›èª¿å‡½å¼
 * @returns {void}
 */
function fetchData(url, callback) {
  // ...
  callback(data);
}

// âœ… äº‹ä»¶è™•ç†å™¨ï¼šhandler
/**
 * è¨»å†Šäº‹ä»¶ç›£è½
 * @param {string} event - äº‹ä»¶åç¨±
 * @param {Function} handler - äº‹ä»¶è™•ç†å™¨
 * @returns {void}
 */
function addEventListener(event, handler) {
  element.addEventListener(event, handler);
}

// âœ… æˆåŠŸ/å¤±æ•—å›èª¿ï¼šonSuccess / onError
/**
 * å»ºç«‹æˆ¿é–“
 * @param {Object} roomData - æˆ¿é–“è³‡æ–™
 * @param {Function} onSuccess - æˆåŠŸå›èª¿
 * @param {Function} onError - å¤±æ•—å›èª¿
 * @returns {void}
 */
function createRoom(roomData, onSuccess, onError) {
  try {
    const room = saveRoom(roomData);
    onSuccess(room);
  } catch (error) {
    onError(error);
  }
}

// âœ… Promiseï¼šresolve / reject
new Promise((resolve, reject) => {
  if (success) {
    resolve(data);
  } else {
    reject(error);
  }
});

// âœ… å¤šå€‹å›èª¿çš„å‘½å
function processData({
  onStart, // é–‹å§‹æ™‚
  onProgress, // é€²åº¦æ›´æ–°
  onComplete, // å®Œæˆæ™‚
  onError, // ç™¼ç”ŸéŒ¯èª¤
}) {
  // ...
}
```

**å‘½åå°ç…§è¡¨**ï¼š
| å ´æ™¯ | åƒæ•¸åç¨± | ç¯„ä¾‹ |
| ------ | ---------- | ------ |
| é€šç”¨å›èª¿ | `callback` | `fetchData(url, callback)` |
| äº‹ä»¶è™•ç† | `handler` | `addEventListener(event, handler)` |
| æˆåŠŸå›èª¿ | `onSuccess`, `onComplete` | `createRoom(data, onSuccess)` |
| å¤±æ•—å›èª¿ | `onError`, `onFailure` | `createRoom(data, _, onError)` |
| Promise | `resolve`, `reject` | `new Promise((resolve, reject))` |
| é–‹å§‹/çµæŸ | `onStart`, `onEnd` | `processData({ onStart, onEnd })` |
| é€²åº¦æ›´æ–° | `onProgress`, `onUpdate` | `upload(file, onProgress)` |

<!-- ============================================================ -->
<!-- é¡åˆ¥å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="é¡åˆ¥å‘½åè¦ç¯„"></a>
<a id="éŒ¯èª¤é¡åˆ¥å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ—ï¸ é¡åˆ¥å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **PascalCase**ï¼ˆå¤§é§å³°ï¼‰
- æ¯å€‹å–®å­—é¦–å­—æ¯å¤§å¯«
- ä½¿ç”¨åè©ï¼ˆæè¿°ç‰©ä»¶ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  class RoomManager { }
  class GameController { }
  class SoundManager { }
  class QuestionGenerator { }

âŒ éŒ¯èª¤ï¼š
  class roomManager { }            // ä¸è¦ç”¨ camelCase
  class room_manager { }           // ä¸è¦ç”¨ snake_case
  class ROOM_MANAGER { }           // ä¸è¦ç”¨ UPPER_CASE
```

<!-- ============================================================ -->
<!-- å¸¸æ•¸å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="å¸¸æ•¸å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ”’ å¸¸æ•¸å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **UPPER_SNAKE_CASE**ï¼ˆå…¨å¤§å¯«+åº•ç·šï¼‰
- ç”¨æ–¼ä¸æœƒæ”¹è®Šçš„å€¼
- é€šå¸¸å®šç¾©åœ¨æª”æ¡ˆæœ€ä¸Šæ–¹æˆ–å°ˆç”¨çš„ config æª”æ¡ˆ
- **æ‰€æœ‰é­”æ³•å€¼å¿…é ˆæå–ç‚ºå¸¸æ•¸** â­ æ–°å¢

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  const MAX_PLAYERS = 10;
  const DEFAULT_COUNTDOWN_SECONDS = 3;
  const MIN_QUESTIONS_COUNT = 5;
  const API_BASE_URL = 'https://api.example.com';
  const ROOM_CODE_LENGTH = 5;
  const ROOM_EXPIRY_TIME = 3600000;  // â­ ä¸è¦ç›´æ¥å¯« 3600000
  const VALID_CHARS = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';  // â­ ä¸è¦ç›´æ¥å¯«å­—ä¸²

âŒ éŒ¯èª¤ï¼š
  const maxPlayers = 10;           // ä¸è¦ç”¨ camelCase
  const MaxPlayers = 10;           // ä¸è¦ç”¨ PascalCase
  const max-players = 10;          // èªæ³•éŒ¯èª¤

  // â­ é­”æ³•å€¼ï¼ˆç¦æ­¢ï¼‰
  expiresAt: Date.now() + 3600000  // æ‡‰è©²ç”¨ ROOM_EXPIRY_TIME
  if (code.length !== 5)           // æ‡‰è©²ç”¨ ROOM_CODE_LENGTH
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ•¸å­—å¸¸æ•¸çš„å–®ä½è¨»è§£è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶

**è¦å‰‡**ï¼š

- æ‰€æœ‰æœ‰å–®ä½çš„æ•¸å­—å¸¸æ•¸**å¿…é ˆ**åœ¨è®Šæ•¸åç¨±æˆ–è¨»è§£ä¸­æ˜ç¢ºæ¨™ç¤ºå–®ä½
- æ™‚é–“ç›¸é—œå¸¸æ•¸å¿…é ˆæ¨™æ˜å–®ä½ï¼ˆæ¯«ç§’/ç§’/åˆ†é˜/å°æ™‚ï¼‰
- å¤§å°/é•·åº¦ç›¸é—œå¸¸æ•¸å¿…é ˆæ¨™æ˜å–®ä½ï¼ˆpx/em/bytesï¼‰

```javascript
// âŒ ä¸æ¸…æ¥šå–®ä½ï¼ˆç¦æ­¢ï¼‰
const ROOM_EXPIRY_TIME = 3600000;
const MAX_FILE_SIZE = 10485760;
const ANIMATION_DURATION = 300;

// âœ… æ–¹æ³• 1ï¼šåœ¨è®Šæ•¸åç¨±æ¨™ç¤ºå–®ä½ï¼ˆæ¨è–¦ï¼‰
const ROOM_EXPIRY_TIME_MS = 3600000; // æ¯«ç§’
const ROOM_EXPIRY_TIME_SECONDS = 3600; // ç§’
const ROOM_EXPIRY_TIME_MINUTES = 60; // åˆ†é˜
const ROOM_EXPIRY_TIME_HOURS = 1; // å°æ™‚

const MAX_FILE_SIZE_BYTES = 10485760; // ä½å…ƒçµ„
const MAX_FILE_SIZE_MB = 10; // MB

const ANIMATION_DURATION_MS = 300; // æ¯«ç§’
const COUNTDOWN_SECONDS = 3; // ç§’

// âœ… æ–¹æ³• 2ï¼šåœ¨è¨»è§£èªªæ˜å–®ä½
/**
 * æˆ¿é–“éæœŸæ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
 * @constant {number}
 */
const ROOM_EXPIRY_TIME = 3600000; // 1å°æ™‚ = 3600ç§’ Ã— 1000

/**
 * æª”æ¡ˆå¤§å°ä¸Šé™ï¼ˆä½å…ƒçµ„ï¼‰
 * @constant {number}
 */
const MAX_FILE_SIZE = 10485760; // 10 MB = 10 Ã— 1024 Ã— 1024

/**
 * å‹•ç•«æŒçºŒæ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
 * @constant {number}
 */
const ANIMATION_DURATION = 300; // 0.3 ç§’

// âœ… æ–¹æ³• 3ï¼šåŒæ™‚ä½¿ç”¨åç¨±å’Œè¨»è§£ï¼ˆæœ€ä½³ï¼‰
/**
 * æˆ¿é–“éæœŸæ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
 * @constant {number}
 */
const ROOM_EXPIRY_TIME_MS = 3600000; // 1å°æ™‚
```

**å¸¸ç”¨å–®ä½å¾Œç¶´**ï¼š

| é¡å‹     | å¾Œç¶´       | ç¯„ä¾‹                                 |
| -------- | ---------- | ------------------------------------ |
| **æ™‚é–“** |            |                                      |
| æ¯«ç§’     | `_MS`      | `TIMEOUT_MS`, `DURATION_MS`          |
| ç§’       | `_SECONDS` | `COUNTDOWN_SECONDS`, `DELAY_SECONDS` |
| åˆ†é˜     | `_MINUTES` | `SESSION_TIMEOUT_MINUTES`            |
| å°æ™‚     | `_HOURS`   | `TOKEN_EXPIRY_HOURS`                 |
| å¤©       | `_DAYS`    | `CACHE_EXPIRY_DAYS`                  |
| **å¤§å°** |            |                                      |
| ä½å…ƒçµ„   | `_BYTES`   | `MAX_FILE_SIZE_BYTES`                |
| KB       | `_KB`      | `MAX_IMAGE_SIZE_KB`                  |
| MB       | `_MB`      | `MAX_VIDEO_SIZE_MB`                  |
| **é•·åº¦** |            |                                      |
| åƒç´      | `_PX`      | `MAX_WIDTH_PX`, `MARGIN_PX`          |
| em       | `_EM`      | `FONT_SIZE_EM`                       |
| rem      | `_REM`     | `SPACING_REM`                        |
| ç™¾åˆ†æ¯”   | `_PERCENT` | `OPACITY_PERCENT`                    |
| **æ•¸é‡** |            |                                      |
| æ•¸é‡     | `_COUNT`   | `MAX_RETRY_COUNT`                    |
| é™åˆ¶     | `_LIMIT`   | `RATE_LIMIT`                         |
| æœ€å¤§å€¼   | `_MAX`     | `PLAYERS_MAX`                        |
| æœ€å°å€¼   | `_MIN`     | `QUESTIONS_MIN`                      |
| **é‡‘é¡** |            | â­ æ–°å¢                              |
| æ–°å°å¹£   | `_TWD`     | `PRODUCT_PRICE_TWD`                  |
| ç¾åˆ†     | `_CENTS`   | `COIN_PRICE_CENTS`                   |
| ç¾é‡‘     | `_USD`     | `PREMIUM_PRICE_USD`                  |
| **æ¯”ç‡** |            | â­ æ–°å¢                              |
| ç™¾åˆ†æ¯”   | `_PERCENT` | `DISCOUNT_PERCENT`ï¼ˆå¦‚ 20 è¡¨ç¤º 20%ï¼‰ |
| æ¯”ç‡     | `_RATIO`   | `OPACITY_RATIO`ï¼ˆ0-1 ä¹‹é–“ï¼‰          |
| **é »ç‡** |            | â­ æ–°å¢                              |
| èµ«èŒ²     | `_HZ`      | `SAMPLE_RATE_HZ`                     |
| æ¯ç§’     | `_PER_SEC` | `REQUESTS_PER_SEC`                   |

**ä½¿ç”¨ç¯„ä¾‹**ï¼š

```javascript
// âœ… æ¸…æ¥šæ˜ç¢ºçš„æ™‚é–“å¸¸æ•¸
const SESSION_TIMEOUT_MS = 1800000; // 30åˆ†é˜
const RETRY_DELAY_SECONDS = 5; // 5ç§’
const TOKEN_EXPIRY_HOURS = 24; // 24å°æ™‚

// âœ… æ¸…æ¥šæ˜ç¢ºçš„å¤§å°å¸¸æ•¸
const MAX_UPLOAD_SIZE_MB = 50; // 50 MB
const THUMBNAIL_WIDTH_PX = 150; // 150 åƒç´ 
const COMPRESSION_RATE_PERCENT = 80; // 80%

// âœ… é‡‘é¡å¸¸æ•¸ï¼ˆé¿å…å°æ•¸é»éŒ¯èª¤ï¼‰ â­ æ–°å¢
const PREMIUM_PRICE_TWD = 9900; // æ–°å°å¹£ 9,900 å…ƒ
const COIN_PRICE_CENTS = 99; // ç¾é‡‘ $0.99ï¼ˆç”¨ç¾åˆ†é¿å…æµ®é»æ•¸å•é¡Œï¼‰
const DISCOUNT_PERCENT = 20; // 20% æŠ˜æ‰£

// âœ… æ¯”ç‡å¸¸æ•¸ï¼ˆ0-1 ä¹‹é–“ï¼‰ â­ æ–°å¢
const OPACITY_RATIO = 0.8; // 80% ä¸é€æ˜åº¦
const SUCCESS_RATE_RATIO = 0.95; // 95% æˆåŠŸç‡

// âœ… ä½¿ç”¨æ™‚ä¸æœƒæ··æ·†
setTimeout(callback, SESSION_TIMEOUT_MS); // æ˜ç¢ºæ˜¯æ¯«ç§’
await sleep(RETRY_DELAY_SECONDS * 1000); // æ˜ç¢ºéœ€è¦è½‰æ›

// âœ… é‡‘é¡è¨ˆç®—æ¸…æ™°
const totalPrice = PREMIUM_PRICE_TWD * (1 - DISCOUNT_PERCENT / 100);
```

**é¿å…æ··æ·†çš„æœ€ä½³å¯¦è¸**ï¼š

```javascript
// âŒ å®¹æ˜“æ··æ·†ï¼šåˆ°åº•æ˜¯ç§’é‚„æ˜¯æ¯«ç§’ï¼Ÿ
const TIMEOUT = 3000;
setTimeout(callback, TIMEOUT); // æ˜¯ 3000 æ¯«ç§’å—ï¼Ÿ

// âœ… æ¸…æ¥šæ˜ç¢º
const TIMEOUT_MS = 3000;
setTimeout(callback, TIMEOUT_MS); // æ˜ç¢ºæ˜¯ 3000 æ¯«ç§’

// âœ… æˆ–è€…ä½¿ç”¨è½‰æ›å‡½å¼
const TIMEOUT_SECONDS = 3;
const toMilliseconds = (seconds) => seconds * 1000;
setTimeout(callback, toMilliseconds(TIMEOUT_SECONDS));
```

<!-- ============================================================ -->
<!-- é­”æ³•å€¼ç¦ç”¨è¦ç¯„ -->
<!-- ============================================================ -->

<a id="é­”æ³•å€¼-magic-values-ç¦ç”¨è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## â›” é­”æ³•å€¼ (Magic Values) ç¦ç”¨è¦ç¯„ â­ æ–°å¢

> **ï¿½ æ ¸å¿ƒè¦å‰‡**ï¼šåš´æ ¼ç¦æ­¢ | æå–ç‚º UPPER_SNAKE_CASE å¸¸æ•¸ | v2.3 å¿…é ˆéµå®ˆ
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š5 åˆ†é˜

> **ï¿½ğŸ”´ v2.2 åš´æ ¼ç¦æ­¢**
>
> **ç¦æ­¢åœ¨é‚è¼¯ç¨‹å¼ç¢¼ä¸­ç›´æ¥ä½¿ç”¨é­”æ³•æ•¸å­—æˆ–é­”æ³•å­—ä¸²ï¼**
>
> æ‰€æœ‰å…·å‚™æ¥­å‹™æ„ç¾©çš„å€¼å¿…é ˆæå–ç‚ºå…·åå¸¸æ•¸ã€‚é€™æ˜¯ v2.3 çš„æ ¸å¿ƒè¦ç¯„ï¼Œé•åæ­¤è¦å‰‡å°‡å°è‡´ç¨‹å¼ç¢¼å¯©æŸ¥ä¸é€šéã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä»€éº¼æ˜¯é­”æ³•å€¼ï¼Ÿ

åœ¨ç¨‹å¼ç¢¼ä¸­ç›´æ¥å‡ºç¾çš„ã€å…·æœ‰æ¥­å‹™æ„ç¾©çš„æ•¸å­—æˆ–å­—ä¸²ï¼Œæœƒé™ä½å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- **ç¦æ­¢åœ¨é‚è¼¯ç¨‹å¼ç¢¼ä¸­ç›´æ¥ä½¿ç”¨é­”æ³•æ•¸å­—æˆ–é­”æ³•å­—ä¸²**
- æ‰€æœ‰å…·å‚™æ¥­å‹™æ„ç¾©çš„å€¼å¿…é ˆæå–ç‚º `UPPER_SNAKE_CASE` å¸¸æ•¸
- å¸¸æ•¸æ‡‰è©²é›†ä¸­å®šç¾©æˆ–ä½¿ç”¨å°ˆç”¨çš„ config æª”æ¡ˆ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éœ€è¦æå–ç‚ºå¸¸æ•¸çš„æƒ…æ³

```javascript
âœ… å¿…é ˆæå–ï¼ˆæœ‰æ¥­å‹™æ„ç¾©ï¼‰ï¼š

// æ™‚é–“ç›¸é—œ
const ROOM_EXPIRY_TIME = 3600000;        // 1 å°æ™‚ï¼ˆæ¯«ç§’ï¼‰
const COUNTDOWN_DURATION = 3000;         // 3 ç§’
const ANIMATION_DURATION = 300;          // 0.3 ç§’

// é•·åº¦/æ•¸é‡é™åˆ¶
const ROOM_CODE_LENGTH = 5;
const MAX_PLAYERS = 10;
const MIN_QUESTIONS = 5;
const MAX_QUESTIONS = 20;
const MAX_RETRY_ATTEMPTS = 10;

// å­—ä¸²å¸¸æ•¸ï¼ˆé‡è¤‡ä½¿ç”¨æˆ–æ˜“æ‰“éŒ¯ï¼‰
const VALID_CHARS = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
const DEFAULT_ROOM_NAME = 'æˆ‘çš„ç·´ç¿’æˆ¿';

// ç‹€æ…‹å€¼
const ROOM_STATUS = {
  WAITING: 'waiting',
  PLAYING: 'playing',
  FINISHED: 'finished'
};

// ä½¿ç”¨ç¯„ä¾‹
room.expiresAt = Date.now() + ROOM_EXPIRY_TIME;  // âœ…
room.status = ROOM_STATUS.WAITING;                // âœ…
```

> **ğŸ’¡ ç‚ºä»€éº¼é€™æ¨£æ›´å¥½ï¼Ÿ**
>
> 1. **å¯è®€æ€§**ï¼š`ROOM_EXPIRY_TIME` æ¯” `3600000` æ›´æ¸…æ¥šè¡¨é”æ„åœ–
> 2. **å¯ç¶­è­·æ€§**ï¼šä¿®æ”¹æ™‚åªéœ€æ›´æ–°ä¸€è™•å¸¸æ•¸å®šç¾©ï¼Œè€Œä¸æ˜¯æœå°‹æ‰€æœ‰å‡ºç¾ `3600000` çš„åœ°æ–¹
> 3. **å¯æ¸¬è©¦æ€§**ï¼šå–®å…ƒæ¸¬è©¦å¯ç›´æ¥å¼•ç”¨å¸¸æ•¸é€²è¡Œé©—è­‰ï¼Œä¸éœ€è¨˜ä½é­”æ³•å€¼
> 4. **é¿å…éŒ¯èª¤**ï¼šæ¸›å°‘æ‰“å­—éŒ¯èª¤ï¼ˆä¾‹å¦‚å°‡ `3600000` èª¤å¯«ç‚º `360000`ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä¸éœ€è¦æå–çš„æƒ…æ³

```javascript
âœ… å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ˆç„¡æ¥­å‹™æ„ç¾©ï¼‰ï¼š

// é€šç”¨æ•¸å­¸/é‚è¼¯å€¼
if (count === 0) { }              // 0 ä¸éœ€è¦æå–
if (index === 1) { }              // 1 ä¸éœ€è¦æå–
if (value === -1) { }             // -1ï¼ˆå¸¸è¦‹çš„ã€Œæœªæ‰¾åˆ°ã€æ¨™è¨˜ï¼‰
if (isActive === true) { }        // true/false ä¸éœ€è¦æå–

// é™£åˆ—/å­—ä¸²æ“ä½œ
array.slice(0, 3)                 // ç´¢å¼•æ“ä½œ
string.substring(0, 3)            // åˆ‡å‰²æ“ä½œ
Math.floor(value)                 // æ•¸å­¸é‹ç®—

// ç™¾åˆ†æ¯”è¨ˆç®—
const percentage = (score / total) * 100;  // 100 ä¸éœ€è¦æå–

// è¿´åœˆè¨ˆæ•¸
for (let i = 0; i < 10; i++) { }  // ç°¡å–®è¿´åœˆå¯ä¸æå–
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åˆ¤æ–·æ¨™æº–

å•è‡ªå·±ä¸‰å€‹å•é¡Œï¼š

1. **é€™å€‹å€¼æœƒé‡è¤‡å‡ºç¾å—ï¼Ÿ**ï¼ˆå‡ºç¾ â‰¥2 æ¬¡ â†’ æå–ï¼‰
2. **é€™å€‹å€¼æœ‰æ¥­å‹™æ„ç¾©å—ï¼Ÿ**ï¼ˆå¦‚ï¼šæˆ¿é–“éæœŸæ™‚é–“ â†’ æå–ï¼‰
3. **æœªä¾†å¯èƒ½éœ€è¦èª¿æ•´å—ï¼Ÿ**ï¼ˆå¦‚ï¼šæœ€å¤§ç©å®¶æ•¸ â†’ æå–ï¼‰

ä»»ä¸€å•é¡Œç­”æ¡ˆç‚ºã€Œæ˜¯ã€â†’ æå–ç‚ºå¸¸æ•¸

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é›†ä¸­ç®¡ç†å¸¸æ•¸ï¼ˆâœ… å·²å¯¦æ–½ï¼‰

> â„¹ï¸ è©³ç´°æ¶æ§‹è¨­è¨ˆåŸå‰‡è«‹åƒè€ƒ [Part 3ï¼šæ¶æ§‹è¨­è¨ˆåŸå‰‡](#part-3æ¶æ§‹è¨­è¨ˆåŸå‰‡)

```javascript
// js/game-config.js â­ å¯¦éš›ä½¿ç”¨çš„å¸¸æ•¸é›†ä¸­æª”æ¡ˆ
// ä»¥ IIFE + window æ›è¼‰ï¼Œé©ç”¨æ–¼ç„¡æ¨¡çµ„ç³»çµ±çš„ Vanilla JS å°ˆæ¡ˆ

// â‘  æˆ¿é–“ç›¸é—œ
const ROOM_CODE_LENGTH = 5;
const ROOM_EXPIRY_TIME = 3600000;
const MAX_ROOM_CAPACITY = 10;

// â‘¡ éŠæˆ²ç›¸é—œ
const MIN_QUESTIONS_PER_STAGE = 5;
const DEFAULT_COUNTDOWN_SECONDS = 3;

// â‘¢ GameConstants â€” æ‰€æœ‰å…±ç”¨å¸¸æ•¸çš„ Single Source of Truth
window.GameConstants = {
  CSV_FIELDS: { rank: 'æ’å', nickname: 'æš±ç¨±', ... },
  CSV_FIELD_ORDER: ['rank', 'nickname', 'totalScore', ...],
  REGULAR_ROUND_IDS: ['A', 'B', 'C', 'D'],
  WM_ROUND_IDS: ['WM_A', 'WM_B', 'WM_C', 'WM_D'],
  ROUND_DISPLAY_NAMES: { A: 'ğŸ•ï¸ æ£®æ— A', ... },
  REPORT_META: { appName: 'EFè¨“ç·´éŠæˆ²', ... },
  // ... å…¶ä»–å¸¸æ•¸çµ„
};

// â‘£ æ¶ˆè²»è€…ç«¯ä½¿ç”¨ç¯„ä¾‹ï¼ˆå¸¶ || fallback é˜²ç¦¦æ€§ç·¨ç¨‹ï¼‰
const C = window.GameConstants || {};
const fields = C.CSV_FIELDS || { rank: 'æ’å', nickname: 'æš±ç¨±' };
```

<!-- ============================================================ -->

<a id="-v22-é·ç§»æŒ‡å—"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ”„ v2.2 é·ç§»æŒ‡å— â­

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç›®çš„

å°‡ç¾æœ‰ç¨‹å¼ç¢¼å¾ v2.1 å‡ç´šåˆ° v2.2 è¦ç¯„ï¼Œç¢ºä¿ç¬¦åˆé­”æ³•å€¼ç¦ç”¨ã€å¸ƒæ—å‰ç¶´ã€@returns å¼·åˆ¶ç­‰æ–°è¦ç¯„ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é·ç§»æª¢æŸ¥æ¸…å–®

#### ğŸ” æ­¥é©Ÿ 1ï¼šæƒæé­”æ³•å€¼

```bash
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œï¼Œæœå°‹å¸¸è¦‹é­”æ³•æ•¸å­—
grep -rn "3600000\|86400000\|300\|5000" js/
grep -rn "length !== 5\|length === 5" js/
```

**éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆ**ï¼š

- [ ] `js/multiplayer/room-manager.js`
  - `Date.now() + 3600000` â†’ æå– `ROOM_EXPIRY_TIME`
  - `Date.now() + 86400000` â†’ æå– `ROOM_DAILY_EXPIRY`
- [ ] `js/utils/room-code.js`
  - `'ABCDEFGH...'` å­—ä¸² â†’ æå– `VALID_ROOM_CODE_CHARS`
  - `code.length !== 5` â†’ ä½¿ç”¨ `ROOM_CODE_LENGTH`

- [ ] `js/game/question-generator.js`
  - æª¢æŸ¥é¡Œæ•¸é™åˆ¶ï¼ˆ5, 20ï¼‰â†’ æå– `MIN_QUESTIONS`, `MAX_QUESTIONS`

#### ğŸ·ï¸ æ­¥é©Ÿ 2ï¼šä¿®æ­£å¸ƒæ—å‘½å

```bash
# æœå°‹å¯èƒ½çš„å¸ƒæ—è®Šæ•¸ï¼ˆç¼ºå°‘å‰ç¶´ï¼‰
grep -rn "let \(active\|valid\|ready\|loading\)" js/
grep -rn "gameStarted\|roomActive" js/
```

**å‘½åå°ç…§è¡¨**ï¼š
| èˆŠåç¨± | æ–°åç¨± | æª”æ¡ˆ |
| -------- | -------- | ------ |
| `active` | `isActive` | room-manager.js |
| `gameStarted` | `isGameStarted` | room-manager.jsï¼ˆè®Šæ•¸ï¼‰ |
| `valid` | `isValid` | room-code.js |
| `loading` | `isLoading` | UI æª”æ¡ˆ |

âš ï¸ **æ³¨æ„**ï¼šFirebase æ¬„ä½åç¨±ï¼ˆå¦‚ `gameStarted`ï¼‰æš«ä¸ä¿®æ”¹ï¼Œé¿å…ç›¸å®¹æ€§å•é¡Œã€‚

#### ğŸ“ æ­¥é©Ÿ 3ï¼šè£œå…… @returns è¨»è§£

```bash
# æœå°‹ç¼ºå°‘ @returns çš„å‡½å¼
grep -B5 "^function\|^async function" js/ | grep -v "@returns"
```

**éœ€è¦è£œå……çš„å‡½å¼é¡å‹**ï¼š

- æ‰€æœ‰ `window.*` æ›è¼‰çš„å…¨åŸŸå‡½å¼
- æ‰€æœ‰ class çš„å…¬é–‹æ–¹æ³•
- æ‰€æœ‰ export çš„å‡½å¼
- å³ä½¿å›å‚³ void ä¹Ÿè¦æ¨™è¨» `@returns {void}`

#### ğŸ“¦ æ­¥é©Ÿ 4ï¼šå»ºç«‹ constants.jsï¼ˆå»ºè­°ï¼‰

æ–°å¢ `js/utils/constants.js` é›†ä¸­ç®¡ç†å¸¸æ•¸ï¼š

```javascript
// js/utils/constants.js

// æˆ¿é–“ç›¸é—œ
export const ROOM_CODE_LENGTH = 5;
export const ROOM_EXPIRY_TIME = 3600000; // 1å°æ™‚
export const ROOM_DAILY_EXPIRY = 86400000; // 24å°æ™‚
export const MAX_ROOM_CAPACITY = 10;
export const VALID_ROOM_CODE_CHARS = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";

// éŠæˆ²ç›¸é—œ
export const MIN_QUESTIONS_PER_STAGE = 5;
export const MAX_QUESTIONS_PER_STAGE = 20;
export const DEFAULT_COUNTDOWN_SECONDS = 3;
export const FEEDBACK_DISPLAY_DURATION = 300; // 0.3ç§’

// ç‹€æ…‹å¸¸æ•¸
export const ROOM_STATUS = {
  WAITING: "waiting",
  PLAYING: "playing",
  FINISHED: "finished",
};
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é·ç§»å„ªå…ˆç´š

| å„ªå…ˆç´š | é …ç›®          | å½±éŸ¿ç¯„åœ      | å»ºè­°æ™‚é–“   |
| ------ | ------------- | ------------- | ---------- |
| ğŸ”´ é«˜  | è£œå…… @returns | AI ç†è§£ç¨‹å¼ç¢¼ | ç«‹å³       |
| ğŸŸ  ä¸­  | æå–é­”æ³•å€¼    | å¯ç¶­è­·æ€§      | æœ¬é€±å…§     |
| ğŸŸ¡ ä½  | å¸ƒæ—è®Šæ•¸æ”¹å  | ç¨‹å¼ç¢¼ä¸€è‡´æ€§  | ä¸‹æ¬¡é‡æ§‹æ™‚ |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é·ç§»å‰æº–å‚™

```bash
# 1. å»ºç«‹æ–°åˆ†æ”¯
git checkout -b refactor/naming-v2.2

# 2. ç¢ºä¿å·¥ä½œç›®éŒ„ä¹¾æ·¨
git status

# 3. åŸ·è¡Œé·ç§»ï¼ˆå»ºè­°ä¸€æ¬¡è™•ç†ä¸€å€‹æª”æ¡ˆï¼‰
# ä¿®æ”¹å¾Œæ¸¬è©¦ä¸¦ commit

# 4. å®Œæˆå¾Œåˆä½µ
git checkout main
git merge refactor/naming-v2.2
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸŒ å…¨åŸŸç‰©ä»¶å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- æ›åœ¨ `window` ç‰©ä»¶ä¸Šçš„å…¨åŸŸè®Šæ•¸ä½¿ç”¨ **PascalCase**
- é¿å…æ±¡æŸ“å…¨åŸŸå‘½åç©ºé–“
- å„ªå…ˆä½¿ç”¨æ¨¡çµ„åŒ–æ–¹å¼

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  window.RoomManager = new RoomManager();
  window.GameUtils = { ... };
  window.QuestionGenerator = { ... };
  window.SoundManager = new SoundManager();

âŒ éŒ¯èª¤ï¼š
  window.roomManager = new RoomManager();    // ä¸è¦ç”¨ camelCase
  window.ROOM_MANAGER = new RoomManager();   // ä¸è¦ç”¨ UPPER_CASE
  roomManager = new RoomManager();           // é¿å…ä¸æ˜ç¢ºçš„å…¨åŸŸè®Šæ•¸
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ” ç§æœ‰å±¬æ€§/æ–¹æ³•å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨åº•ç·šé–‹é ­ `_camelCase`
- è¡¨ç¤ºä¸æ‡‰è©²å¾å¤–éƒ¨ç›´æ¥å­˜å–
- åƒ…ä¾›é¡åˆ¥å…§éƒ¨ä½¿ç”¨

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  class RoomManager {
    constructor() {
      this._cache = {};
      this._isInitialized = false;
    }

    _privateMethod() {
      // å…§éƒ¨æ–¹æ³•
    }

    publicMethod() {
      return this._privateMethod();
    }
  }

âŒ éŒ¯èª¤ï¼š
  class RoomManager {
    constructor() {
      this.cache = {};           // æ²’æ¨™ç¤ºç§æœ‰
      this.__cache = {};         // ä¸è¦ç”¨é›™åº•ç·š
    }
  }
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“¦ ç‰©ä»¶å±¬æ€§å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **camelCase**
- èˆ‡ Firebase è³‡æ–™åº«æ¬„ä½ä¿æŒä¸€è‡´
- JSON æ ¼å¼çš„ key ä¹Ÿä½¿ç”¨ camelCase

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  const roomData = {
    roomCode: 'ABC123',
    roomName: 'æˆ‘çš„æˆ¿é–“',
    createdAt: Date.now(),
    hasPassword: true,
    playerCount: 5
  };

âŒ éŒ¯èª¤ï¼š
  const roomData = {
    RoomCode: 'ABC123',      // ä¸è¦ç”¨ PascalCase
    room_code: 'ABC123',     // ä¸è¦ç”¨ snake_case
    'room-code': 'ABC123'    // ä¸è¦ç”¨ kebab-case
  };
```

<!-- ============================================================ -->
<!-- éŒ¯èª¤è™•ç†å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## âš ï¸ éŒ¯èª¤è™•ç†å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- try-catch çš„éŒ¯èª¤è®Šæ•¸çµ±ä¸€ä½¿ç”¨ **error**
- è‹¥éœ€å€åˆ†éŒ¯èª¤é¡å‹ï¼Œä½¿ç”¨æè¿°æ€§å‰ç¶´ + Error
- é¿å…ä½¿ç”¨ `e`, `err`, `ex`, `exception`ï¼ˆä¸ä¸€è‡´ï¼‰
- éŒ¯èª¤è¨Šæ¯ä½¿ç”¨å­—ä¸²ï¼Œæè¿°æ¸…æ¥š

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  // åŸºæœ¬éŒ¯èª¤è™•ç†
  try {
    await createRoom();
  } catch (error) {
    console.error('å»ºç«‹æˆ¿é–“å¤±æ•—:', error);
    throw error;
  }

  // å€åˆ†éŒ¯èª¤é¡å‹
  try {
    await saveToFirebase();
  } catch (networkError) {
    console.error('ç¶²è·¯éŒ¯èª¤:', networkError);
    // é‡è©¦é‚è¼¯
  }

  // è‡ªè¨‚éŒ¯èª¤
  if (!roomCode) {
    throw new Error('æˆ¿é–“ä»£ç¢¼ä¸èƒ½ç‚ºç©º');
  }

  // Promise.catch
  fetchRoomData()
    .catch(error => {
      console.error('å–å¾—æˆ¿é–“è³‡æ–™å¤±æ•—:', error);
    });

âŒ éŒ¯èª¤ï¼š
  try {
    await createRoom();
  } catch (e) {              // å¤ªç°¡ç•¥
    console.log(e);          // æ‡‰è©²ç”¨ console.error
  }

  try {
    await saveData();
  } catch (err) {            // ä¸çµ±ä¸€ï¼ˆç”¨ errorï¼‰
    // ...
  }

  try {
    await loadData();
  } catch (exception) {      // å¤ªå†—é•·ï¼ˆç”¨ errorï¼‰
    // ...
  }
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸è¦‹éŒ¯èª¤é¡å‹å‘½å

| æƒ…å¢ƒ       | è®Šæ•¸åç¨±          | èªªæ˜              |
| :--------- | :---------------- | :---------------- |
| ä¸€èˆ¬éŒ¯èª¤   | `error`           | é è¨­ä½¿ç”¨          |
| ç¶²è·¯éŒ¯èª¤   | `networkError`    | API è«‹æ±‚å¤±æ•—      |
| é©—è­‰éŒ¯èª¤   | `validationError` | è¼¸å…¥é©—è­‰å¤±æ•—      |
| è³‡æ–™åº«éŒ¯èª¤ | `dbError`         | Firebase æ“ä½œå¤±æ•— |
| æ¬Šé™éŒ¯èª¤   | `authError`       | èªè­‰/æˆæ¬Šå¤±æ•—     |

<!-- ============================================================ -->
<!-- äº‹ä»¶å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="websocket-äº‹ä»¶å‘½åè¦ç¯„"></a>
<a id="äº‹ä»¶å‘½åè¦ç¯„"></a>
<a id="è‡ªè¨‚äº‹ä»¶å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ§ äº‹ä»¶å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- äº‹ä»¶ç›£è½å™¨å‡½å¼ï¼šä½¿ç”¨ `on` + åè© + å‹•ä½œ
- äº‹ä»¶åç¨±å­—ä¸²ï¼šä½¿ç”¨ `åè©:éå»å¼`
- ä¿æŒä¸€è‡´æ€§ï¼Œä¾¿æ–¼æœå°‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Firebase ç›£è½å™¨ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  /**
   * ç›£è½æˆ¿é–“è³‡æ–™è®ŠåŒ–
   * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
   * @param {Function} callback - å›èª¿å‡½å¼
   * @returns {Function} å–æ¶ˆç›£è½çš„å‡½å¼
   */
  function onRoomChange(roomCode, callback) {
    const ref = firebase.database().ref(`rooms/${roomCode}`);
    ref.on('value', callback);
    return () => ref.off('value', callback);
  }

  function onPlayerJoin(roomCode, callback) { }
  function onPlayerLeave(roomCode, callback) { }
  function onGameStart(roomCode, callback) { }
  function onStageComplete(roomCode, stageId, callback) { }

âŒ éŒ¯èª¤ï¼š
  function listenRoom() { }          // ä¸æ˜ç¢º
  function roomListener() { }        // èªæ„ä¸æ¸…
  function watchRoomChanges() { }    // å¤ªå†—é•·
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è‡ªè¨‚äº‹ä»¶åç¨±ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  // äº‹ä»¶åç¨±ï¼šåè©:éå»å¼
  const EVENT_NAMES = {
    ROOM_CREATED: 'room:created',
    ROOM_UPDATED: 'room:updated',
    ROOM_DELETED: 'room:deleted',
    PLAYER_JOINED: 'player:joined',
    PLAYER_LEFT: 'player:left',
    GAME_STARTED: 'game:started',
    STAGE_COMPLETED: 'stage:completed'
  };

  // ä½¿ç”¨ç¯„ä¾‹
  eventEmitter.on(EVENT_NAMES.ROOM_CREATED, (roomData) => {
    console.log('æˆ¿é–“å·²å»ºç«‹:', roomData);
  });

  eventEmitter.emit(EVENT_NAMES.PLAYER_JOINED, {
    userId: 'abc123',
    nickname: 'å°æ˜'
  });

âŒ éŒ¯èª¤ï¼š
  const EVENTS = {
    CREATE_ROOM: 'createRoom',     // ä½¿ç”¨ç¾åœ¨å¼
    RoomUpdated: 'RoomUpdated',    // ä½¿ç”¨ PascalCase
    player_left: 'player_left',    // ä½¿ç”¨ snake_case
    'game-started': 'game-started' // ä½¿ç”¨ kebab-case
  };
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### äº‹ä»¶è™•ç†å‡½å¼å‘½å

```javascript
âœ… æ­£ç¢ºï¼š
  function handleRoomCreate(event) { }      // handle + åè© + å‹•ä½œ
  function handlePlayerJoin(event) { }
  function handleFormSubmit(event) { }
  function handleButtonClick(event) { }

âŒ éŒ¯èª¤ï¼š
  function roomCreate(event) { }            // ç¼ºå°‘ handle
  function onRoomCreate(event) { }          // on ä¿ç•™çµ¦ç›£è½å™¨
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ¨ CSS é¡åˆ¥å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **kebab-case**
- ä½¿ç”¨ BEM å‘½åæ³•ï¼ˆBlock\_\_Element--Modifierï¼‰
- é¿å…ä½¿ç”¨ç¸®å¯«

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```css
âœ… æ­£ç¢ºï¼š
  .room-card { }
  .room-card__title { }
  .room-card__button { }
  .room-card--active { }
  .stage-selector { }
  .stage-selector__item { }

âŒ éŒ¯èª¤ï¼š
  .roomCard { }               // ä¸è¦ç”¨ camelCase
  .RoomCard { }               // ä¸è¦ç”¨ PascalCase
  .room_card { }              // ä¸è¦ç”¨ snake_case
```

<!-- ============================================================ -->
<!-- è³‡æºæª”æ¡ˆå‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="è³‡æºæª”æ¡ˆå‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ¨ è³‡æºæª”æ¡ˆå‘½åè¦ç¯„ â­ v2.3 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼škebab-case | å¼·åˆ¶å‰ç¶´åˆ†é¡ | æè¿°æ€§å‘½å
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š4 åˆ†é˜

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

**é©ç”¨ç¯„åœ**ï¼šåœ–ç‰‡ã€éŸ³è¨Šã€å½±ç‰‡ã€å­—å‹ç­‰éœæ…‹è³‡æºæª”æ¡ˆ

#### åŸºæœ¬è¦å‰‡

- **æ ¼å¼**ï¼š`category-description.ext`ï¼ˆkebab-caseï¼‰
- **å¼·åˆ¶å‰ç¶´**ï¼šæ ¹æ“šè³‡æºé¡å‹ä½¿ç”¨æ¨™æº–å‰ç¶´
- **æè¿°æ€§**ï¼šæª”åéœ€æ¸…æ¥šæè¿°è³‡æºç”¨é€”
- **ä¸€è‡´æ€§**ï¼šåŒé¡è³‡æºä½¿ç”¨çµ±ä¸€å‘½åæ¨¡å¼

#### åœ–ç‰‡è³‡æºå‘½å

**å‰ç¶´è¦ç¯„**ï¼š

```
âœ… åœ–ç‰‡å‰ç¶´ï¼š
bg-      èƒŒæ™¯åœ–
icon-    åœ–æ¨™/åœ–ç¤º
img-     ä¸€èˆ¬åœ–ç‰‡
btn-     æŒ‰éˆ•åœ–ç‰‡
logo-    æ¨™èªŒåœ–ç‰‡
avatar-  é ­åƒåœ–ç‰‡
thumb-   ç¸®åœ–

âœ… æ­£ç¢ºç¯„ä¾‹ï¼š
images/bg-main-menu.png
images/bg-stage-forest.jpg
images/icon-home.svg
images/icon-settings-24px.svg
images/img-trophy-gold.png
images/btn-start-game.png
images/btn-start-game-hover.png
images/logo-company.svg
images/avatar-default.png
images/thumb-video-preview.jpg

âŒ éŒ¯èª¤ç¯„ä¾‹ï¼š
images/mainBackground.png      // ä¸è¦ç”¨ camelCase
images/home_icon.svg           // ä¸è¦ç”¨ snake_case
images/è¨­å®šåœ–æ¨™.svg            // ä¸è¦ç”¨ä¸­æ–‡
images/icon.svg                // ç¼ºå°‘æè¿°
images/image1.png              // ç„¡æ„ç¾©å‘½å
```

#### éŸ³è¨Šè³‡æºå‘½å

**å‰ç¶´è¦ç¯„**ï¼š

```
âœ… éŸ³è¨Šå‰ç¶´ï¼š
sfx-     éŸ³æ•ˆ (Sound Effects)         ä¾‹ï¼šsfx-correct.mp3
voice-   èªéŸ³/æ•™å­¸èªéŸ³                 ä¾‹ï¼švoice-tutorial-intro.mp3
badge-   å¾½ç« æ’­å ±èªéŸ³ â­ v2.4 æ–°å¢     ä¾‹ï¼šbadge-speedster.mp3
level-   ç­‰ç´šæ’­å ±èªéŸ³ â­ v2.4 æ–°å¢     ä¾‹ï¼šlevel-explorer.mp3
wm-      å·¥ä½œè¨˜æ†¶èªéŸ³ â­ v2.4 æ–°å¢     ä¾‹ï¼šwm-forward.mp3

âš ï¸ bgm-ï¼ˆèƒŒæ™¯éŸ³æ¨‚ï¼‰å·²å–æ¶ˆï¼Œä¸å†ä½¿ç”¨

âœ… æ­£ç¢ºç¯„ä¾‹ï¼ˆä¾å­ç›®éŒ„åˆ†é¡ï¼‰ï¼š
audio/sfx/sfx-correct.mp3
audio/sfx/sfx-wrong.mp3
audio/sfx/sfx-button-click.wav
audio/sfx/sfx-countdown-tick.mp3
audio/voice/voice-tutorial-intro.mp3
audio/voice/voice-rule1-explain.mp3
audio/voice/female/voice-cheese.mp3      // å¥³è²åˆºæ¿€ç‰©èªéŸ³
audio/voice/male/voice-cheese.mp3        // ç”·è²åˆºæ¿€ç‰©èªéŸ³
audio/voice/badge-speedster.mp3
audio/voice/badge-perfect-star.mp3
audio/voice/level-explorer.mp3
audio/voice/wm-forward.mp3
audio/voice/wm-reverse.mp3

âŒ éŒ¯èª¤ç¯„ä¾‹ï¼š
audio/music1.mp3               // ç„¡åˆ†é¡å‰ç¶´
audio/correctSound.mp3         // camelCase
audio/button_click.mp3         // snake_case
audio/æ­£ç¢ºéŸ³æ•ˆ.mp3             // ä¸­æ–‡å‘½å
audio/bgm-main-menu.mp3        // bgm å·²å–æ¶ˆ
```

#### å½±ç‰‡è³‡æºå‘½å

```
âœ… å½±ç‰‡å‰ç¶´ï¼š
video-   ä¸€èˆ¬å½±ç‰‡
intro-   ä»‹ç´¹å½±ç‰‡
demo-    ç¤ºç¯„å½±ç‰‡

âœ… æ­£ç¢ºç¯„ä¾‹ï¼š
videos/intro-welcome.mp4
videos/demo-gameplay.mp4
videos/video-tutorial-stage-a.mp4

âŒ éŒ¯èª¤ç¯„ä¾‹ï¼š
videos/tutorial.mp4            // ç¼ºå°‘å‰ç¶´
videos/welcomeVideo.mp4        // camelCase
```

#### å­—å‹è³‡æºå‘½å

```
âœ… å­—å‹å‘½åï¼ˆç„¡éœ€å‰ç¶´ï¼Œä½†éœ€æè¿°ï¼‰ï¼š
fonts/roboto-regular.ttf
fonts/roboto-bold.woff2
fonts/noto-sans-tc-regular.woff2
fonts/material-icons.woff

âŒ éŒ¯èª¤ç¯„ä¾‹ï¼š
fonts/font1.ttf                // ç„¡æ„ç¾©å‘½å
fonts/MyFont.ttf               // PascalCase
```

#### ç‹€æ…‹å¾Œç¶´è¦ç¯„

å°æ–¼æœ‰å¤šç¨®ç‹€æ…‹çš„è³‡æºï¼ˆæŒ‰éˆ•ã€åœ–æ¨™ç­‰ï¼‰ï¼Œä½¿ç”¨ç‹€æ…‹å¾Œç¶´ï¼š

```
âœ… ç‹€æ…‹å¾Œç¶´ï¼š
-normal     æ­£å¸¸ç‹€æ…‹ï¼ˆå¯çœç•¥ï¼‰
-hover      æ»‘é¼ æ‡¸åœ
-active     å•Ÿç”¨/æŒ‰ä¸‹
-disabled   ç¦ç”¨
-selected   é¸ä¸­
-focus      èšç„¦

âœ… ç¯„ä¾‹ï¼š
btn-start-normal.png
btn-start-hover.png
btn-start-active.png
btn-start-disabled.png

icon-menu-normal.svg
icon-menu-selected.svg
```

#### å°ºå¯¸/è§£æåº¦å¾Œç¶´

```
âœ… å°ºå¯¸å¾Œç¶´ï¼š
-xs, -sm, -md, -lg, -xl        å°ºå¯¸ç´šåˆ¥
-24px, -48px                   åƒç´ å°ºå¯¸
-@2x, -@3x                     è¦–ç¶²è†œé¡¯ç¤ºå€æ•¸

âœ… ç¯„ä¾‹ï¼š
icon-home-24px.svg
icon-home-48px.svg
logo-company-sm.png
logo-company-lg.png
avatar-default-@2x.png
```

#### å°ˆæ¡ˆç¯„ä¾‹ï¼ˆåŸ·è¡ŒåŠŸèƒ½éŠæˆ²ï¼‰

```
project-root/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ bg-main-menu.jpg
â”‚   â”œâ”€â”€ bg-stage-a.png
â”‚   â”œâ”€â”€ bg-stage-b.png
â”‚   â”œâ”€â”€ icon-home.svg
â”‚   â”œâ”€â”€ icon-settings.svg
â”‚   â”œâ”€â”€ img-trophy-gold.png
â”‚   â”œâ”€â”€ img-trophy-silver.png
â”‚   â”œâ”€â”€ btn-start-normal.png
â”‚   â”œâ”€â”€ btn-start-hover.png
â”‚   â””â”€â”€ avatar-player-default.png
â”‚
â”œâ”€â”€ audio/
â”‚   â”œâ”€â”€ bgm-main-menu.mp3
â”‚   â”œâ”€â”€ bgm-stage-a.mp3
â”‚   â”œâ”€â”€ sfx-correct.mp3
â”‚   â”œâ”€â”€ sfx-wrong.mp3
â”‚   â”œâ”€â”€ sfx-countdown-tick.wav
â”‚   â””â”€â”€ voice-tutorial-intro.mp3
â”‚
â”œâ”€â”€ videos/
â”‚   â”œâ”€â”€ intro-welcome.mp4
â”‚   â””â”€â”€ demo-gameplay.mp4
â”‚
â””â”€â”€ fonts/
    â”œâ”€â”€ noto-sans-tc-regular.woff2
    â””â”€â”€ noto-sans-tc-bold.woff2
```

> **ğŸ’¡ ç‚ºä»€éº¼é€™æ¨£æ›´å¥½ï¼Ÿ**
>
> 1. **å¿«é€Ÿè­˜åˆ¥**ï¼šå‰ç¶´åˆ†é¡è®“é–‹ç™¼è€…ä¸€çœ¼å°±çŸ¥é“è³‡æºé¡å‹
> 2. **æ˜“æ–¼æœå°‹**ï¼šçµ±ä¸€å‘½åæ¨¡å¼æ–¹ä¾¿æ‰¹é‡æœå°‹å’Œç®¡ç†
> 3. **é¿å…è¡çª**ï¼šæè¿°æ€§å‘½åæ¸›å°‘æª”åé‡è¤‡çš„å¯èƒ½æ€§
> 4. **åœ˜éšŠå”ä½œ**ï¼šçµ±ä¸€è¦ç¯„è®“å¤šäººå”ä½œæ›´é †æš¢
> 5. **è‡ªå‹•åŒ–å‹å–„**ï¼škebab-case æ ¼å¼é©åˆè…³æœ¬è™•ç†å’Œ URL ä½¿ç”¨

<!-- ============================================================ -->

<a id="z-index-å±¤ç´šç®¡ç†è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ“ Z-Index å±¤ç´šç®¡ç†è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ“ ä½

**è¦å‰‡**ï¼š

- æ‰€æœ‰ z-index å¿…é ˆæå–ç‚ºå¸¸æ•¸ï¼ˆè¦–ç‚ºé­”æ³•å€¼çš„ä¸€ç¨®ï¼‰
- å‘½åï¼š`Z_INDEX_{COMPONENT}`

**ç¯„ä¾‹**ï¼š

```javascript
export const Z_INDEX_BASE = 1;
export const Z_INDEX_DROPDOWN = 100;
export const Z_INDEX_STICKY_HEADER = 500;
export const Z_INDEX_MODAL = 1000;
export const Z_INDEX_TOAST = 9999;
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“ HTML ID å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **camelCase**
- å°æ‡‰åˆ° JavaScript è®Šæ•¸æ™‚ä¿æŒä¸€è‡´
- å”¯ä¸€ä¸”æœ‰æè¿°æ€§

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```html
âœ… æ­£ç¢ºï¼š
<input id="roomCode" />
<button id="startGameBtn">
  <div id="playerList">
    <form id="createRoomForm">
      âŒ éŒ¯èª¤ï¼š
      <input id="room-code" /> // èˆ‡ JS ä¸ä¸€è‡´
      <button id="start_game">
        // ä¸è¦ç”¨ snake_case
        <div id="PlayerList">// ä¸è¦ç”¨ PascalCase</div>
      </button>
    </form>
  </div>
</button>
```

<!-- ============================================================ -->
<!-- æ¸¬è©¦å±¬æ€§å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="æ¸¬è©¦å±¬æ€§å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ§ª æ¸¬è©¦å±¬æ€§å‘½åè¦ç¯„ â­ v2.3 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼šdata-testid æˆ– data-cy | kebab-case | æè¿°æ€§å‘½å
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š3 åˆ†é˜

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

**é©ç”¨ç¯„åœ**ï¼šè‡ªå‹•åŒ–æ¸¬è©¦ï¼ˆJestã€Cypressã€Playwright ç­‰ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸºæœ¬è¦å‰‡

- **å±¬æ€§åç¨±**ï¼šå„ªå…ˆä½¿ç”¨ `data-testid`ï¼ˆé€šç”¨ï¼‰æˆ– `data-cy`ï¼ˆCypressï¼‰
- **å‘½åæ ¼å¼**ï¼škebab-caseï¼ˆå°å¯« + é€£å­—è™Ÿï¼‰
- **å‘½åæ¨¡å¼**ï¼š`{component}-{element}-{action/state}`
- **å”¯ä¸€æ€§**ï¼šåŒä¸€é é¢å…§çš„ testid å¿…é ˆå”¯ä¸€

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¸¬è©¦å±¬æ€§é¸æ“‡

```html
âœ… é€šç”¨æ¸¬è©¦æ¡†æ¶ï¼ˆæ¨è–¦ï¼‰ï¼š
<button data-testid="submit-btn">æäº¤</button>

âœ… Cypress å°ˆç”¨ï¼š
<button data-cy="submit-btn">æäº¤</button>

âœ… React Testing Libraryï¼š
<button data-testid="submit-btn">æäº¤</button>

âœ… Playwrightï¼š
<button data-testid="submit-btn">æäº¤</button>

âŒ é¿å…ï¼š
<button id="submitBtn">æäº¤</button> // ID å¯èƒ½æ”¹è®Š
<button class="submit-button">æäº¤</button> // Class ç”¨æ–¼æ¨£å¼
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‘½åæ¨¡å¼

#### åŸºæœ¬å…ƒç´ 

```html
âœ… æŒ‰éˆ•ï¼š
<button data-testid="submit-btn">æäº¤</button>
<button data-testid="cancel-btn">å–æ¶ˆ</button>
<button data-testid="start-game-btn">é–‹å§‹éŠæˆ²</button>

âœ… è¼¸å…¥æ¡†ï¼š
<input data-testid="room-code-input" />
<input data-testid="player-name-input" />
<textarea data-testid="comment-textarea"></textarea>

âœ… å®¹å™¨/å€å¡Šï¼š
<div data-testid="player-list-container"></div>
<section data-testid="game-stage-section"></section>
<form data-testid="create-room-form"></form>

âœ… åˆ—è¡¨é …ç›®ï¼š
<li data-testid="player-item-1"></li>
<li data-testid="player-item-2"></li>
<!-- æˆ–ä½¿ç”¨å‹•æ…‹ç”Ÿæˆ -->
<li data-testid="player-item-${userId}"></li>
```

#### ç‹€æ…‹ç›¸é—œ

```html
âœ… è¼‰å…¥ç‹€æ…‹ï¼š
<div data-testid="loading-spinner"></div>
<div data-testid="loading-overlay"></div>

âœ… éŒ¯èª¤è¨Šæ¯ï¼š
<span data-testid="error-message"></span>
<div data-testid="validation-error"></div>

âœ… æˆåŠŸæç¤ºï¼š
<div data-testid="success-toast"></div>
<span data-testid="success-message"></span>
```

#### æ¨¡æ…‹æ¡†/å½ˆçª—

```html
âœ… æ¨¡æ…‹æ¡†ï¼š
<div data-testid="confirm-modal">
  <h2 data-testid="confirm-modal-title">ç¢ºèªåˆªé™¤</h2>
  <p data-testid="confirm-modal-message">ç¢ºå®šè¦åˆªé™¤æ­¤é …ç›®å—ï¼Ÿ</p>
  <button data-testid="confirm-modal-ok-btn">ç¢ºå®š</button>
  <button data-testid="confirm-modal-cancel-btn">å–æ¶ˆ</button>
</div>

âœ… Toast é€šçŸ¥ï¼š
<div data-testid="toast-notification">
  <span data-testid="toast-message">æ“ä½œæˆåŠŸ</span>
  <button data-testid="toast-close-btn">Ã—</button>
</div>
```

#### å°èˆªå…ƒç´ 

```html
âœ… å°èˆªï¼š
<nav data-testid="main-nav">
  <a data-testid="nav-home-link" href="/">é¦–é </a>
  <a data-testid="nav-settings-link" href="/settings">è¨­å®š</a>
  <a data-testid="nav-profile-link" href="/profile">å€‹äººè³‡æ–™</a>
</nav>

âœ… éºµåŒ…å±‘ï¼š
<nav data-testid="breadcrumb-nav">
  <a data-testid="breadcrumb-home-link">é¦–é </a>
  <span data-testid="breadcrumb-separator">/</span>
  <a data-testid="breadcrumb-current-page">ç•¶å‰é é¢</a>
</nav>
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### React ç¯„ä¾‹

```jsx
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ data-testid
function LoginForm() {
  return (
    <form data-testid="login-form">
      <input
        data-testid="username-input"
        type="text"
        placeholder="ä½¿ç”¨è€…åç¨±"
      />
      <input data-testid="password-input" type="password" placeholder="å¯†ç¢¼" />
      <button data-testid="login-submit-btn">ç™»å…¥</button>
      <a data-testid="forgot-password-link" href="/forgot">
        å¿˜è¨˜å¯†ç¢¼ï¼Ÿ
      </a>
    </form>
  );
}

// âœ… æ¸¬è©¦ä»£ç¢¼ç¯„ä¾‹ï¼ˆReact Testing Libraryï¼‰
test("ä½¿ç”¨è€…å¯ä»¥ç™»å…¥", async () => {
  render(<LoginForm />);

  const usernameInput = screen.getByTestId("username-input");
  const passwordInput = screen.getByTestId("password-input");
  const submitBtn = screen.getByTestId("login-submit-btn");

  await userEvent.type(usernameInput, "testuser");
  await userEvent.type(passwordInput, "password123");
  await userEvent.click(submitBtn);

  expect(screen.getByTestId("success-message")).toBeInTheDocument();
});
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Cypress æ¸¬è©¦ç¯„ä¾‹

```javascript
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ data-cy æˆ– data-testid
describe("æˆ¿é–“å»ºç«‹æµç¨‹", () => {
  it("å¯ä»¥æˆåŠŸå»ºç«‹æˆ¿é–“", () => {
    cy.visit("/create-room");

    // ä½¿ç”¨ data-testid
    cy.get('[data-testid="room-name-input"]').type("æ¸¬è©¦æˆ¿é–“");
    cy.get('[data-testid="max-players-select"]').select("10");
    cy.get('[data-testid="create-room-btn"]').click();

    // é©—è­‰æˆåŠŸè¨Šæ¯
    cy.get('[data-testid="success-toast"]').should("be.visible");
    cy.get('[data-testid="room-code-display"]').should("contain", "ABC");
  });
});
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‘½åå°ç…§è¡¨

| å…ƒç´ é¡å‹ | å‘½åæ¨¡å¼            | ç¯„ä¾‹                                |
| :------- | :------------------ | :---------------------------------- |
| æŒ‰éˆ•     | `{action}-btn`      | `submit-btn`, `cancel-btn`          |
| è¼¸å…¥æ¡†   | `{field}-input`     | `email-input`, `password-input`     |
| ä¸‹æ‹‰é¸å–® | `{field}-select`    | `country-select`, `category-select` |
| æ ¸å–æ–¹å¡Š | `{field}-checkbox`  | `agree-terms-checkbox`              |
| å–®é¸æŒ‰éˆ• | `{field}-radio`     | `gender-male-radio`                 |
| é€£çµ     | `{purpose}-link`    | `forgot-password-link`              |
| å®¹å™¨     | `{name}-container`  | `player-list-container`             |
| æ¨¡æ…‹æ¡†   | `{name}-modal`      | `confirm-modal`, `settings-modal`   |
| è¡¨å–®     | `{name}-form`       | `login-form`, `register-form`       |
| åˆ—è¡¨é …   | `{name}-item`       | `player-item`, `message-item`       |
| åœ–æ¨™     | `{name}-icon`       | `close-icon`, `menu-icon`           |
| è¼‰å…¥     | `loading-{element}` | `loading-spinner`                   |
| éŒ¯èª¤     | `error-{element}`   | `error-message`                     |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æœ€ä½³å¯¦è¸

```html
âœ… å¥½çš„å¯¦è¸ï¼š
<!-- 1. æè¿°æ€§å‘½å -->
<button data-testid="create-room-btn">å»ºç«‹æˆ¿é–“</button>

<!-- 2. å±¤ç´šçµæ§‹æ¸…æ™° -->
<div data-testid="player-card">
  <h3 data-testid="player-card-name">ç©å®¶åç¨±</h3>
  <span data-testid="player-card-score">åˆ†æ•¸</span>
  <button data-testid="player-card-remove-btn">ç§»é™¤</button>
</div>

<!-- 3. åˆ—è¡¨é …ä½¿ç”¨ç´¢å¼•æˆ– ID -->
<ul data-testid="player-list">
  {players.map((player, index) => (
  <li key="{player.id}" data-testid="{`player-item-${player.id}`}">
    {player.name}
  </li>
  ))}
</ul>

âŒ é¿å…çš„åšæ³•ï¼š
<!-- 1. å‘½åéæ–¼ç± çµ± -->
<button data-testid="button1">æäº¤</button>

<!-- 2. ä½¿ç”¨ camelCase -->
<button data-testid="submitBtn">æäº¤</button>

<!-- 3. ä½¿ç”¨ä¸­æ–‡ -->
<button data-testid="æäº¤æŒ‰éˆ•">æäº¤</button>

<!-- 4. ä¾è³´æ¨£å¼ class -->
<button class="btn-primary">æäº¤</button>
<!-- æ¸¬è©¦ä¸è¦ä¾è³´ class -->

<!-- 5. ä¾è³´ IDï¼ˆID å¯èƒ½é‡è¤‡æˆ–æ”¹è®Šï¼‰ -->
<button id="submitBtn">æäº¤</button>
```

> **ğŸ’¡ ç‚ºä»€éº¼ä½¿ç”¨ data-testidï¼Ÿ**
>
> 1. **ç©©å®šæ€§**ï¼šä¸å—æ¨£å¼æˆ–çµæ§‹è®Šæ›´å½±éŸ¿
> 2. **èªæ„æ¸…æ™°**ï¼šæ˜ç¢ºæ¨™ç¤ºæ¸¬è©¦ç›®æ¨™å…ƒç´ 
> 3. **æ¡†æ¶é€šç”¨**ï¼šæ”¯æ´å¤šç¨®æ¸¬è©¦æ¡†æ¶
> 4. **æ˜“æ–¼ç¶­è­·**ï¼šæ¸¬è©¦ä»£ç¢¼æ›´æ˜“è®€å’Œç¶­è­·
> 5. **é¿å…è¡çª**ï¼šä¸èˆ‡ ID/Class ç­‰å±¬æ€§è¡çª

<!-- ============================================================ -->
<!-- ğŸ’¾ localStorage Key å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="localstorage-key-å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ’¾ localStorage Key å‘½åè¦ç¯„ â­ v2.4 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼šcamelCase | é ‚å±¤ key ç‚ºå‘½åç©ºé–“ | å·¢ç‹€æ¬„ä½ä¸€è‡´æ€§
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š3 åˆ†é˜

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶

**é©ç”¨ç¯„åœ**ï¼šæ‰€æœ‰ `localStorage.getItem()` / `localStorage.setItem()` ä½¿ç”¨å ´æ™¯

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é ‚å±¤ Key å‘½å

- **æ ¼å¼**ï¼šcamelCaseï¼ˆèˆ‡ JavaScript è®Šæ•¸ä¸€è‡´ï¼‰
- **åŸå‰‡**ï¼šä¸€å€‹åŠŸèƒ½åŸŸç”¨ä¸€å€‹é ‚å±¤ keyï¼Œä»¥ JSON ç‰©ä»¶å„²å­˜
- **ç¦æ­¢**ï¼šä¸å¾—ç”¨ kebab-case æˆ– snake_case

```javascript
âœ… æ­£ç¢ºï¼š
localStorage.setItem('playerProfile', JSON.stringify({...}));
localStorage.setItem('adventureProgress', JSON.stringify({...}));
localStorage.setItem('classData', JSON.stringify({...}));

âŒ éŒ¯èª¤ï¼š
localStorage.setItem('player-profile', ...);   // kebab-case
localStorage.setItem('player_profile', ...);    // snake_case
localStorage.setItem('PlayerProfile', ...);     // PascalCase
localStorage.setItem('score', '100');            // æ•£è½çš„ç¨ç«‹ key
localStorage.setItem('round', '3');              // æ•£è½çš„ç¨ç«‹ key
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å·¢ç‹€æ¬„ä½å‘½å

- **æ ¼å¼**ï¼šcamelCaseï¼Œèˆ‡ JavaScript ç‰©ä»¶å±¬æ€§å‘½åä¸€è‡´
- **å¸ƒæ—æ¬„ä½**ï¼šå¼·åˆ¶ä½¿ç”¨ `is/has/can` å‰ç¶´
- **è¨ˆæ•¸æ¬„ä½**ï¼šä½¿ç”¨åè©ï¼ˆ`totalStars`ã€`totalPlayTime`ï¼‰
- **è¨­å®šæ¬„ä½**ï¼šä½¿ç”¨ `Settings` / `Prefs` å¾Œç¶´

```javascript
// âœ… playerProfile çµæ§‹ç¯„ä¾‹
{
  seatNumber: 1,                    // æ•¸å­—
  nickname: 'å°æ˜',                  // å­—ä¸²
  totalStars: 15,                   // è¨ˆæ•¸
  level: 3,                         // ç­‰ç´š
  badges: ['speedster', 'perfect'], // é™£åˆ—
  soundSettings: {                  // è¨­å®šå­ç‰©ä»¶
    sfx: true,
    voice: true
  },
  colorTheme: 'field-primary',     // é¸é …å€¼
  firestoreUploadPrefs: {          // åå¥½å­ç‰©ä»¶
    score: true,
    time: true,
    accuracy: false
  }
}

// âœ… adventureProgress çµæ§‹ç¯„ä¾‹
{
  currentMapIndex: 0,
  currentPointIndex: 3,
  freeChoiceUnlocked: false,        // å¸ƒæ—ç”¨ is/has/can å‰ç¶´ï¼ˆæˆ–å‹•è© + edï¼‰
  fieldRuleRecords: {               // è·¨æ¨¡å¼å…±äº«ç´€éŒ„
    mouse_rule1: { bestScore: 95 },
    fishing_mixed: { bestScore: 88 }
  },
  maps: [
    {
      mapId: 'mouse',
      points: [
        { passed: true, bestScore: 92, starsEarned: 3 }
      ]
    }
  ]
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç‰ˆæœ¬é·ç§»ç­–ç•¥

ç•¶ localStorage çµæ§‹éœ€è¦è®Šæ›´ï¼ˆä¾‹å¦‚æ¬„ä½æ”¹åæˆ–çµæ§‹é‡çµ„ï¼‰æ™‚ï¼š

```javascript
// âœ… é·ç§»å‡½å¼ç¯„ä¾‹
function migrateLocalStorage() {
  const version = localStorage.getItem("storageVersion") || "1.0";

  if (version === "1.0") {
    // èˆŠ key 'gameProgress' â†’ æ–° key 'adventureProgress'
    const oldData = localStorage.getItem("gameProgress");
    if (oldData) {
      localStorage.setItem("adventureProgress", oldData);
      localStorage.removeItem("gameProgress");
    }
    localStorage.setItem("storageVersion", "2.0");
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å°ˆæ¡ˆ Key é€ŸæŸ¥è¡¨

| é ‚å±¤ Key            | ç”¨é€”           | ä¸»è¦æ¬„ä½                                        |
| ------------------- | -------------- | ----------------------------------------------- |
| `playerProfile`     | ç©å®¶èº«ä»½èˆ‡åå¥½ | `nickname`, `level`, `badges`, `soundSettings`  |
| `adventureProgress` | æ¢éšªåœ°åœ–é€²åº¦   | `currentMapIndex`, `fieldRuleRecords`, `maps[]` |
| `classData`         | ç­ç´šæ’è¡Œè³‡æ–™   | é›¢ç·š CSV round-trip                             |
| `storageVersion`    | çµæ§‹ç‰ˆæœ¬è™Ÿ     | ç´”å­—ä¸²ï¼ˆå¦‚ `'2.0'`ï¼‰                            |

<!-- ============================================================ -->
<!-- ğŸ¨ CSS Custom Property å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="css-custom-property-å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ¨ CSS Custom Property å‘½åè¦ç¯„ â­ v2.4 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼š`--{åˆ†é¡}-{æè¿°}` kebab-case | å‰ç¶´åˆ†é¡ | ä¸»é¡Œè‰²èˆ‡åŸºç¤è‰²åˆ†é›¢
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š4 åˆ†é˜

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶ï¼ˆPhase 1 å‰å¿…é ˆç¢ºèªï¼Œå¾ŒçºŒæ”¹å‹•æˆæœ¬ï¼šğŸ’€ å…¨ç«™è¿”å·¥ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸºæœ¬æ ¼å¼

```css
/* æ ¼å¼ï¼š--{category}-{descriptor} */
--bg-dark: #1a2332;
--text-white: #ffffff;
--primary-blue: #4a90d9;
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‰ç¶´åˆ†é¡è¡¨

| å‰ç¶´          | ç”¨é€”                     | ç¯„ä¾‹                                                    |
| ------------- | ------------------------ | ------------------------------------------------------- |
| `--bg-`       | èƒŒæ™¯è‰²                   | `--bg-dark`, `--bg-card`, `--bg-overlay`                |
| `--text-`     | æ–‡å­—è‰²                   | `--text-white`, `--text-light`, `--text-muted`          |
| `--color-`    | åŠŸèƒ½è‰²ï¼ˆå…¨ä¸»é¡Œå…±ç”¨ï¼‰     | `--color-correct`, `--color-error`, `--color-warning`   |
| `--primary-`  | ä¸»è‰²èª¿                   | `--primary-blue`, `--primary-light`                     |
| `--success-`  | æˆåŠŸè‰²                   | `--success-green`, `--success-light`                    |
| `--error-`    | éŒ¯èª¤è‰²                   | `--error-red`, `--error-light`                          |
| `--accent-`   | å¼·èª¿è‰²                   | `--accent-yellow`, `--accent-glow`                      |
| `--practice-` | ç·´ç¿’æ¨¡å¼è‰²               | `--practice-teal`, `--practice-light`                   |
| `--mouse-`    | å°è€é¼ éŠæˆ²å ´è‰²           | `--mouse-rule1`, `--mouse-rule2`, `--mouse-mixed`       |
| `--fishing-`  | é‡£é­šéŠæˆ²å ´è‰²             | `--fishing-rule1`, `--fishing-rule2`, `--fishing-mixed` |
| `--wm-`       | å·¥ä½œè¨˜æ†¶å°ˆç”¨è‰²           | `--wm-color`, `--wm-highlight`                          |
| `--spacing-`  | é–“è·                     | `--spacing-sm`, `--spacing-md`, `--spacing-lg`          |
| `--radius-`   | åœ“è§’                     | `--radius-sm`, `--radius-card`                          |
| `--shadow-`   | é™°å½±                     | `--shadow-card`, `--shadow-modal`                       |
| `--font-`     | å­—å‹                     | `--font-family-primary`, `--font-size-base`             |
| `--z-`        | å±¤ç´šï¼ˆè‹¥å¾ JS å¸¸æ•¸åŒæ­¥ï¼‰ | `--z-modal`, `--z-toast`                                |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸºç¤è‰² vs ä¸»é¡Œè‰²

```css
/* === åŸºç¤è‰²ï¼šå®šç¾©åœ¨ :rootï¼Œæ‰€æœ‰ä¸»é¡Œå…±ç”¨ === */
:root {
  --bg-dark: #1a2332;
  --text-white: #ffffff;
  --color-correct: #4caf50; /* åŠŸèƒ½è‰²ä¸éš¨ä¸»é¡Œè®Š */
  --color-error: #f44336;
  --spacing-md: 16px;
}

/* === ä¸»é¡Œè‰²ï¼šå®šç¾©åœ¨ [data-theme]ï¼ŒæŒ‰ä¸»é¡Œè¦†å¯« === */
[data-theme="field-primary"] {
  --primary-blue: #4a90d9;
  --accent-yellow: #ffd700;
}

[data-theme="rule-independent"] {
  --primary-blue: #6c5ce7;
  --accent-yellow: #fdcb6e;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä¸»é¡Œåˆ‡æ›æ©Ÿåˆ¶

```javascript
// JS ä¸­åˆ‡æ›ä¸»é¡Œ
document.documentElement.setAttribute("data-theme", "field-primary");

// data-theme çš„å€¼æ ¼å¼ï¼škebab-case
// âœ… 'field-primary', 'rule-independent'
// âŒ 'fieldPrimary', 'FIELD_PRIMARY'
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‘½åç¦å¿Œ

```css
âŒ ç¦æ­¢ï¼š
--blue: #4A90D9;                /* å¤ªæŠ½è±¡ï¼Œç„¡èªæ„ */
--color1: #4CAF50;              /* ç„¡æ„ç¾©æ•¸å­— */
--mouseRule1Color: #FF6B6B;     /* camelCaseï¼Œæ‡‰ç”¨ kebab-case */
--MOUSE_RULE1: #FF6B6B;         /* UPPER_SNAKE_CASE */
--bg_dark: #1a2332;             /* snake_case */
```

<!-- ============================================================ -->
<!-- âœ¨ CSS å‹•ç•«å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="css-å‹•ç•«å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## âœ¨ CSS å‹•ç•«å‘½åè¦ç¯„ â­ v2.4 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼š`{å‹•ä½œ}-{æ•ˆæœ}` kebab-case | class èˆ‡ @keyframes é…å°
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š2 åˆ†é˜

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### @keyframes å‘½å

- **æ ¼å¼**ï¼š`{å‹•ä½œ}-{é¡è‰²/æ•ˆæœ}`ï¼Œkebab-case
- **å‹•ä½œè©**ï¼š`pulse`ï¼ˆè„ˆè¡ï¼‰ã€`shake`ï¼ˆæ–æ™ƒï¼‰ã€`fade`ï¼ˆæ·¡å…¥æ·¡å‡ºï¼‰ã€`slide`ï¼ˆæ»‘å‹•ï¼‰ã€`bounce`ï¼ˆå½ˆè·³ï¼‰ã€`spin`ï¼ˆæ—‹è½‰ï¼‰

```css
/* âœ… æ­£ç¢º */
@keyframes pulse-green { ... }     /* ç¶ è‰²è„ˆè¡ */
@keyframes shake-red { ... }       /* ç´…è‰²æ–æ™ƒ */
@keyframes pulse-correct { ... }   /* æ­£ç¢ºåˆºæ¿€ç‰©é–ƒçˆ */
@keyframes shake-error { ... }     /* éŒ¯èª¤åˆºæ¿€ç‰©æ–æ™ƒ */
@keyframes fade-in { ... }         /* æ·¡å…¥ */
@keyframes slide-up { ... }        /* ä¸Šæ»‘ */
@keyframes bounce-badge { ... }    /* å¾½ç« å½ˆè·³ */

/* âŒ éŒ¯èª¤ */
@keyframes pulseGreen { ... }      /* camelCase */
@keyframes SHAKE_RED { ... }       /* UPPER_SNAKE_CASE */
@keyframes animation1 { ... }      /* ç„¡æ„ç¾©å‘½å */
@keyframes green { ... }           /* å¤ªæ¨¡ç³Š */
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Class èˆ‡ @keyframes é…å°è¦å‰‡

```css
/* å›é¥‹å‹•ç•« class â†’ @keyframes å‘½åä¸€è‡´ */
.correct-feedback {
  animation: pulse-green 0.6s ease; /* class: correct-feedback â†’ keyframes: pulse-green */
}

.incorrect-feedback {
  animation: shake-red 0.5s ease; /* class: incorrect-feedback â†’ keyframes: shake-red */
}

.correct-flash {
  animation: pulse-correct 0.4s ease;
}

.error-flash {
  animation: shake-error 0.4s ease;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‹•ç•«æŒçºŒæ™‚é–“åŒæ­¥

CSS å‹•ç•«æŒçºŒæ™‚é–“æ‡‰èˆ‡ JS å¸¸æ•¸ä¿æŒä¸€è‡´ï¼š

```javascript
// JS å¸¸æ•¸
const ANIMATION_DURATION = {
  CORRECT_FEEDBACK: 600, // ms
  ERROR_FEEDBACK: 500,
  BADGE_BOUNCE: 800,
};

// CSS å°æ‡‰
// .correct-feedback { animation: pulse-green 0.6s; }   â†’ 600ms
// .incorrect-feedback { animation: shake-red 0.5s; }    â†’ 500ms
// .badge-unlock { animation: bounce-badge 0.8s; }       â†’ 800ms
```

<!-- ============================================================ -->
<!-- ğŸ—ºï¸ æ¢éšªåœ°åœ–å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="æ¢éšªåœ°åœ–å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ—ºï¸ æ¢éšªåœ°åœ–å‘½åè¦ç¯„ â­ v2.4 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼šMap ID å°å¯«å–®è© | Point ID `{field}_{rule}[_wm]` | ç‹€æ…‹æšèˆ‰å¸¸æ•¸
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š4 åˆ†é˜

**å„ªå…ˆç´š**ï¼šğŸ”´ å¼·åˆ¶ï¼ˆPhase 1 config å°±æœƒç”¨åˆ°ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Map ID å‘½å

- **æ ¼å¼**ï¼šå°å¯«å–®è©ï¼ˆèˆ‡éŠæˆ²å ´ `gameField` å€¼ä¸€è‡´ï¼‰
- **å€¼åŸŸ**ï¼š`'mouse'`ï¼ˆå°è€é¼ ï¼‰ã€`'fishing'`ï¼ˆé‡£é­šï¼‰

```javascript
// âœ… æ­£ç¢º
const ADVENTURE_MAPS = [
  { mapId: 'mouse', ... },
  { mapId: 'fishing', ... }
];

// âŒ éŒ¯èª¤
{ mapId: 'Mouse' }          // PascalCase
{ mapId: 'MOUSE' }          // UPPER_CASE
{ mapId: 'mouse-field' }    // å¤šé¤˜æè¿°
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Point ID å‘½å

- **æ ¼å¼**ï¼š`{field}_{rule}` æˆ– `{field}_{rule}_wm`
- **field**ï¼š`mouse` / `fishing`
- **rule ç¸®å¯«**ï¼š`r1`ï¼ˆrule1ï¼‰ã€`r2`ï¼ˆrule2ï¼‰ã€`mixed`
- **\_wm å¾Œç¶´**ï¼šæœ‰å·¥ä½œè¨˜æ†¶æ¸¬é©—çš„æ¢ç´¢é»

```javascript
// âœ… æ­£ç¢ºçš„ Point ID
"mouse_r1"; // å°è€é¼  + è¦å‰‡1
"mouse_r1_wm"; // å°è€é¼  + è¦å‰‡1 + WM
"mouse_r2"; // å°è€é¼  + è¦å‰‡2
"mouse_r2_wm"; // å°è€é¼  + è¦å‰‡2 + WM
"mouse_mixed"; // å°è€é¼  + æ··åˆè¦å‰‡
"mouse_mixed_wm"; // å°è€é¼  + æ··åˆè¦å‰‡ + WM
"fishing_r1"; // é‡£é­š + è¦å‰‡1
"fishing_mixed_wm"; // é‡£é­š + æ··åˆè¦å‰‡ + WM
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### fieldRuleRecords Key å‘½å

`fieldRuleRecords` çš„ key èˆ‡ Point ID **æ ¼å¼ä¸åŒ**ï¼Œä½¿ç”¨å®Œæ•´è¦å‰‡åç¨±ï¼š

```javascript
// Point ID â†’ fieldRuleRecords key çš„å°æ˜ é—œä¿‚
// 'mouse_r1'      â†’ 'mouse_rule1'
// 'mouse_r2'      â†’ 'mouse_rule2'
// 'mouse_mixed'   â†’ 'mouse_mixed'    (ç›¸åŒ)
// 'fishing_r1'    â†’ 'fishing_rule1'
// 'fishing_mixed' â†’ 'fishing_mixed'  (ç›¸åŒ)

// æ ¼å¼ï¼š{field}_{ruleFullName}
const fieldRuleRecords = {
  mouse_rule1: { bestScore: 95, totalAttempts: 3 },
  mouse_rule2: { bestScore: 88, totalAttempts: 2 },
  mouse_mixed: { bestScore: 90, totalAttempts: 1 },
  fishing_rule1: { bestScore: 85, totalAttempts: 4 },
  fishing_rule2: { bestScore: 92, totalAttempts: 2 },
  fishing_mixed: { bestScore: 78, totalAttempts: 1 },
};

// âš ï¸ æ³¨æ„ï¼šPoint ID ç”¨ç¸®å¯« r1/r2ï¼ŒfieldRuleRecords key ç”¨å®Œæ•´å rule1/rule2
// é€™æ˜¯è¨­è¨ˆä¸Šçš„åˆ»æ„å€åˆ†ï¼ˆID ç°¡çŸ­ vs è¨˜éŒ„ key æ˜“è®€ï¼‰
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¢ç´¢é»ç‹€æ…‹æšèˆ‰

```javascript
// âœ… å»ºè­°å®šç¾©ç‹€æ…‹å¸¸æ•¸
const POINT_STATE = {
  LOCKED: "locked", // ğŸ”’ å°šæœªè§£é–
  CURRENT: "current", // ğŸŸ¡ ç•¶å‰å¯ç©
  PASSED: "passed", // âœ… å·²é€šé
};

// ä½¿ç”¨
function getPointState(mapIndex, pointIndex, progress) {
  if (progress.maps[mapIndex].points[pointIndex].passed) {
    return POINT_STATE.PASSED;
  }
  if (
    mapIndex === progress.currentMapIndex &&
    pointIndex === progress.currentPointIndex
  ) {
    return POINT_STATE.CURRENT;
  }
  return POINT_STATE.LOCKED;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Combo ID å‘½å

å¤šäººæ¨¡å¼ä¸­ `gameCombos` é™£åˆ—çš„ç´¢å¼•ä½œç‚º combo è­˜åˆ¥ï¼š

```javascript
// comboStatus çš„ key æ ¼å¼ï¼šcombo_{index}
comboStatus: {
  combo_0: { started: true, completed: true, score: 95 },
  combo_1: { started: true, completed: false, score: 0 },
}

// âœ… æ ¼å¼ï¼š'combo_' + æ•¸å­—ç´¢å¼•
// âŒ ç¦æ­¢ï¼š'combo-0'ï¼ˆkebab-caseï¼‰ã€'comboOne'ï¼ˆæ–‡å­—æè¿°ï¼‰
```

<!-- ============================================================ -->
<!-- åŠŸèƒ½æ€§ data-* å±¬æ€§å‘½åè¦ç¯„ -->
<!-- ============================================================ -->

<a id="åŠŸèƒ½æ€§-data--å±¬æ€§å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ·ï¸ åŠŸèƒ½æ€§ data-\* å±¬æ€§å‘½åè¦ç¯„ â­ v2.4 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼šå€åˆ†æ¸¬è©¦ç”¨ vs åŠŸèƒ½ç”¨ | å€¼æ ¼å¼ kebab-case
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š2 åˆ†é˜

**å„ªå…ˆç´š**ï¼šğŸŸ¡ å»ºè­°

èˆ‡ `data-testid`ï¼ˆæ¸¬è©¦ç”¨é€”ï¼‰ä¸åŒï¼ŒåŠŸèƒ½æ€§ `data-*` å±¬æ€§æ˜¯**ç¨‹å¼é‚è¼¯ä¾è³´çš„**ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å±¬æ€§å‘½å

```html
<!-- ä¸»é¡Œåˆ‡æ›ï¼ˆæ ¸å¿ƒæ©Ÿåˆ¶ï¼‰ -->
<html data-theme="field-primary">
  <!-- éŠæˆ²å ´æ¨™è¨˜ -->
  <div data-field="mouse">
    <!-- è¦å‰‡æ¨™è¨˜ -->
    <div data-rule="rule1">
      <!-- ç‹€æ…‹æ¨™è¨˜ -->
      <div data-state="locked">
        <div data-state="current">
          <div data-state="passed"></div>
        </div>
      </div>
    </div>
  </div>
</html>
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‘½åè¦å‰‡

| å±¬æ€§          | å€¼æ ¼å¼     | ç”¨é€”                                            |
| ------------- | ---------- | ----------------------------------------------- |
| `data-theme`  | kebab-case | ä¸»é¡Œåˆ‡æ›ï¼ˆ`field-primary`, `rule-independent`ï¼‰ |
| `data-field`  | å°å¯«å–®è©   | éŠæˆ²å ´æ¨™è¨˜ï¼ˆ`mouse`, `fishing`ï¼‰                |
| `data-rule`   | camelCase  | è¦å‰‡æ¨™è¨˜ï¼ˆ`rule1`, `rule2`, `mixed`ï¼‰           |
| `data-state`  | å°å¯«å–®è©   | UI ç‹€æ…‹ï¼ˆ`locked`, `current`, `passed`ï¼‰        |
| `data-testid` | kebab-case | æ¸¬è©¦ç”¨ï¼ˆè¦‹ [æ¸¬è©¦å±¬æ€§å‘½å](#æ¸¬è©¦å±¬æ€§å‘½åè¦ç¯„)ï¼‰  |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âš ï¸ å€åˆ†åŸå‰‡

```html
<!-- åŠŸèƒ½æ€§ï¼šç¨‹å¼é‚è¼¯æœƒè®€å–ï¼Œå½±éŸ¿æ¸²æŸ“/è¡Œç‚º -->
<html data-theme="field-primary">
  <!-- JS: getAttribute('data-theme') -->
  <button data-field="mouse">
    <!-- CSS: [data-field="mouse"] { } -->

    <!-- æ¸¬è©¦ç”¨ï¼šåªæœ‰æ¸¬è©¦æ¡†æ¶æœƒè®€å–ï¼Œä¸å½±éŸ¿åŠŸèƒ½ -->
    <button data-testid="start-game-btn"><!-- åƒ… Jest/Cypress ä½¿ç”¨ --></button>
  </button>
</html>
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ”„ äº‹ä»¶è™•ç†å‡½å¼å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ `handle` æˆ– `on` é–‹é ­
- æ¸…æ¥šæè¿°äº‹ä»¶é¡å‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  function handleFormSubmit(e) { }
  function handleButtonClick(e) { }
  function onRoomDataChange(data) { }
  function onPlayerJoin(playerId) { }

âŒ éŒ¯èª¤ï¼š
  function formSubmit(e) { }        // ç¼ºå°‘ handle/on
  function clickButton(e) { }       // èªæ„ä¸æ¸…
  function submit(e) { }            // å¤ªç°¡ç•¥
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“‚ è³‡æ–™å¤¾å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **kebab-case**
- å°å¯«å­—æ¯
- è¤‡æ•¸å½¢å¼ï¼ˆå¦‚æœåŒ…å«å¤šå€‹é …ç›®ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯„ä¾‹

```
âœ… æ­£ç¢ºï¼š
  js/
  css/
  audio/
  multiplayer/
  singleplayer/
  leaderboard/
  components/
  utils/

âŒ éŒ¯èª¤ï¼š
  JS/                         // ä¸è¦ç”¨å¤§å¯«
  multiPlayer/                // ä¸è¦ç”¨ camelCase
  single_player/              // ä¸è¦ç”¨ snake_case
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ¯ å¯¦éš›ç¯„ä¾‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å®Œæ•´æª”æ¡ˆç¯„ä¾‹

```javascript
// ====================================
// æª”æ¡ˆï¼šjs/multiplayer/room-manager.js
// ====================================

// å¸¸æ•¸å®šç¾©
const MAX_ROOM_CAPACITY = 10;
const ROOM_EXPIRY_TIME = 3600000; // 1å°æ™‚

// é¡åˆ¥å®šç¾©
class RoomManager {
  constructor() {
    this.database = firebase.database();
    this._cache = {};
  }

  // å…¬é–‹æ–¹æ³•
  async createRoom(roomData) {
    const roomCode = await this._generateUniqueCode();
    const timestamp = Date.now();

    const room = {
      roomCode: roomCode,
      roomName: roomData.roomName,
      createdAt: timestamp,
      expiresAt: timestamp + ROOM_EXPIRY_TIME,
      playerCount: 0,
      isActive: true,
    };

    await this._saveToDatabase(room);
    return roomCode;
  }

  // ç§æœ‰æ–¹æ³•
  _generateUniqueCode() {
    // å¯¦ä½œ
  }

  _saveToDatabase(room) {
    // å¯¦ä½œ
  }
}

// å·¥å…·å‡½å¼
function formatRoomCode(code) {
  return `${code.substring(0, 3)} ${code.substring(3)}`;
}

function validateRoomCode(code) {
  const cleanCode = code.replace(/\s+/g, "");
  return /^[A-Z0-9]{5}$/.test(cleanCode);
}

// åŒ¯å‡º
window.RoomManager = new RoomManager();
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### v2.1 vs v2.2 å°ç…§ç¯„ä¾‹

ä»¥ä¸‹å±•ç¤ºåŒä¸€åŠŸèƒ½åœ¨ä¸åŒç‰ˆæœ¬è¦ç¯„ä¸‹çš„å¯«æ³•å·®ç•°ï¼š

```javascript
// ====================================
// âŒ v2.1 ä¹‹å‰çš„å¯«æ³•ï¼ˆä¸æ¨è–¦ï¼‰
// ====================================

function createRoom(roomData) {
  const room = {
    expiresAt: Date.now() + 3600000, // âŒ é­”æ³•å€¼
    active: true, // âŒ ç¼ºå°‘å‰ç¶´
    playerCount: 0,
  };

  return room; // âŒ ç¼ºå°‘ @returns
}

function validateCode(code) {
  // âŒ ç¼ºå°‘ JSDoc
  if (code.length !== 5) {
    // âŒ é­”æ³•å€¼
    return false;
  }
  return /^[A-Z0-9]{5}$/.test(code);
}

// ====================================
// âœ… v2.2 æ­£ç¢ºå¯«æ³•ï¼ˆæ¨è–¦ï¼‰
// ====================================

// å¸¸æ•¸é›†ä¸­å®šç¾©
const ROOM_EXPIRY_TIME = 3600000; // âœ… æå–é­”æ³•å€¼
const ROOM_CODE_LENGTH = 5; // âœ… æå–é­”æ³•å€¼
const VALID_CHARS_PATTERN = /^[A-Z0-9]{5}$/;

/**
 * å»ºç«‹æ–°æˆ¿é–“
 * @param {Object} roomData - æˆ¿é–“è¨­å®šè³‡æ–™
 * @param {string} roomData.roomName - æˆ¿é–“åç¨±
 * @returns {Object} æˆ¿é–“è³‡æ–™ç‰©ä»¶              âœ… å¼·åˆ¶ @returns
 */
function createRoom(roomData) {
  const room = {
    expiresAt: Date.now() + ROOM_EXPIRY_TIME, // âœ… ä½¿ç”¨å¸¸æ•¸
    isActive: true, // âœ… å¸ƒæ—å‰ç¶´
    playerCount: 0,
  };

  return room;
}

/**
 * é©—è­‰æˆ¿é–“ä»£ç¢¼æ ¼å¼
 * @param {string} code - å¾…é©—è­‰çš„ä»£ç¢¼
 * @returns {boolean} æ˜¯å¦æœ‰æ•ˆ                 âœ… å¼·åˆ¶ @returns
 */
function validateCode(code) {
  if (code.length !== ROOM_CODE_LENGTH) {
    // âœ… ä½¿ç”¨å¸¸æ•¸
    return false;
  }
  return VALID_CHARS_PATTERN.test(code); // âœ… ä½¿ç”¨å¸¸æ•¸
}

/**
 * æ›´æ–°æˆ¿é–“ç‹€æ…‹ï¼ˆç„¡å›å‚³å€¼ï¼‰
 * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
 * @param {boolean} isActive - æ˜¯å¦å•Ÿç”¨
 * @returns {void}                             âœ… void ä¹Ÿè¦æ¨™è¨»
 */
function updateRoomStatus(roomCode, isActive) {
  firebase
    .database()
    .ref(`rooms/${roomCode}/isActive`) // âœ… å¸ƒæ—æ¬„ä½ä½¿ç”¨å‰ç¶´
    .set(isActive);
}
```

**v2.2 æ”¹å–„é‡é»**ï¼š

- ğŸ“Š å¯ç¶­è­·æ€§ï¼šä¿®æ”¹éæœŸæ™‚é–“åªéœ€æ”¹ä¸€å€‹åœ°æ–¹
- ğŸ” å¯è®€æ€§ï¼š`ROOM_EXPIRY_TIME` æ¯” `3600000` æ›´æ¸…æ¥š
- ğŸ¤– AI ç†è§£ï¼šå®Œæ•´çš„ JSDoc è®“ AI æ›´æº–ç¢ºç†è§£ç¨‹å¼ç¢¼
- âœ… ä¸€è‡´æ€§ï¼šæ‰€æœ‰å¸ƒæ—å€¼éƒ½æœ‰å‰ç¶´ï¼Œä¸€çœ¼è­˜åˆ¥

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ï¿½ å¯è¤‡è£½çš„ä»£ç¢¼æ¨¡æ¿

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¨™æº–å‡½å¼æ¨¡æ¿

```javascript
/**
 * [åŠŸèƒ½æè¿°ï¼šé€™å€‹å‡½å¼åšä»€éº¼]
 * @param {string} paramName - [åƒæ•¸èªªæ˜]
 * @param {number} [optionalParam=10] - [å¯é¸åƒæ•¸ï¼Œé è¨­å€¼ 10]
 * @returns {Promise<string>} [å›å‚³å€¼èªªæ˜]
 * @throws {Error} [ä»€éº¼æƒ…æ³ä¸‹æœƒæ‹‹å‡ºéŒ¯èª¤]
 * @example
 * const result = await functionName('test', 20);
 * console.log(result); // è¼¸å‡ºçµæœ
 */
async function functionName(paramName, optionalParam = 10) {
  // å¯¦ä½œ
  return result;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¨™æº–é¡åˆ¥æ¨¡æ¿

```javascript
/**
 * [é¡åˆ¥ç”¨é€”èªªæ˜]
 * @class
 * @example
 * const instance = new ClassName({ value: 'test' });
 * const result = await instance.publicMethod('data');
 */
class ClassName {
  /**
   * å»ºç«‹å¯¦ä¾‹
   * @param {Object} options - è¨­å®šé¸é …
   * @param {string} options.value - å¿…è¦å±¬æ€§
   * @param {boolean} [options.isEnabled=true] - å¯é¸å±¬æ€§
   */
  constructor(options) {
    this._privateProperty = options.value;
    this.isEnabled = options.isEnabled ?? true;
    this._cache = new Map();
  }

  /**
   * [å…¬é–‹æ–¹æ³•èªªæ˜]
   * @param {string} param - [åƒæ•¸]
   * @returns {Promise<string>} [éåŒæ­¥å›å‚³]
   * @async
   */
  async publicMethod(param) {
    return this._privateMethod(param);
  }

  /**
   * [ç§æœ‰æ–¹æ³•èªªæ˜]
   * @param {string} param - [åƒæ•¸]
   * @returns {string} [å›å‚³]
   * @private
   */
  _privateMethod(param) {
    return `processed: ${param}`;
  }
}

// åŒ¯å‡º
window.ClassName = ClassName;
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¨™æº–å¸¸æ•¸æª”æ¡ˆæ¨¡æ¿

```javascript
/**
 * å°ˆæ¡ˆå¸¸æ•¸å®šç¾©
 * @module constants
 */

// ==================== æ™‚é–“ç›¸é—œï¼ˆæ¯«ç§’ï¼‰ ====================

/**
 * æˆ¿é–“éæœŸæ™‚é–“
 * @constant {number}
 */
export const ROOM_EXPIRY_TIME = 3600000; // 1å°æ™‚

/**
 * å€’æ•¸è¨ˆæ™‚ç§’æ•¸
 * @constant {number}
 */
export const COUNTDOWN_DURATION = 3000; // 3ç§’

/**
 * å›é¥‹å‹•ç•«æ™‚é•·
 * @constant {number}
 */
export const FEEDBACK_DURATION = 300; // 0.3ç§’

// ==================== æ•¸é‡é™åˆ¶ ====================

/**
 * æˆ¿é–“æœ€å¤§äººæ•¸
 * @constant {number}
 */
export const MAX_PLAYERS = 10;

/**
 * æ¯é—œæœ€å°‘é¡Œæ•¸
 * @constant {number}
 */
export const MIN_QUESTIONS = 5;

/**
 * æˆ¿é–“ä»£ç¢¼é•·åº¦
 * @constant {number}
 */
export const ROOM_CODE_LENGTH = 5;

// ==================== å­—ä¸²å¸¸æ•¸ ====================

/**
 * æˆ¿é–“ä»£ç¢¼æœ‰æ•ˆå­—å…ƒ
 * @constant {string}
 */
export const VALID_ROOM_CODE_CHARS = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";

/**
 * é è¨­æˆ¿é–“åç¨±
 * @constant {string}
 */
export const DEFAULT_ROOM_NAME = "æˆ‘çš„ç·´ç¿’æˆ¿";

// ==================== ç‹€æ…‹æšèˆ‰ ====================

/**
 * æˆ¿é–“ç‹€æ…‹æšèˆ‰
 * @constant {Object}
 * @property {string} WAITING - ç­‰å¾…ä¸­
 * @property {string} PLAYING - éŠæˆ²é€²è¡Œä¸­
 * @property {string} FINISHED - å·²çµæŸ
 */
export const ROOM_STATUS = Object.freeze({
  WAITING: "waiting",
  PLAYING: "playing",
  FINISHED: "finished",
});

/**
 * éŠæˆ²éšæ®µæšèˆ‰
 * @constant {Object}
 */
export const GAME_STAGES = Object.freeze({
  A: "A",
  B: "B",
  C: "C",
  D: "D",
});
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Firebase è·¯å¾‘å¸¸æ•¸æ¨¡æ¿

```javascript
/**
 * Firebase è³‡æ–™è·¯å¾‘å¸¸æ•¸
 * @module firebase-paths
 */

// åŸºç¤è·¯å¾‘
export const PATHS = {
  ROOMS: "rooms",
  PLAYERS: "players",
  GAME_STAGES: "gameStages",
  GLOBAL_LEADERBOARD: "globalLeaderboard",
};

// è·¯å¾‘ç”Ÿæˆå‡½å¼
export const FirebasePaths = {
  /**
   * å–å¾—æˆ¿é–“è·¯å¾‘
   * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
   * @returns {string} å®Œæ•´è·¯å¾‘
   */
  getRoomPath: (roomCode) => `${PATHS.ROOMS}/${roomCode}`,

  /**
   * å–å¾—ç©å®¶è·¯å¾‘
   * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
   * @param {string} userId - ä½¿ç”¨è€… ID
   * @returns {string} å®Œæ•´è·¯å¾‘
   */
  getPlayerPath: (roomCode, userId) =>
    `${PATHS.ROOMS}/${roomCode}/${PATHS.PLAYERS}/${userId}`,

  /**
   * å–å¾—é—œå¡è·¯å¾‘
   * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
   * @param {number} stageIndex - é—œå¡ç´¢å¼•
   * @returns {string} å®Œæ•´è·¯å¾‘
   */
  getStagePath: (roomCode, stageIndex) =>
    `${PATHS.ROOMS}/${roomCode}/${PATHS.GAME_STAGES}/${stageIndex}`,
};
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éŒ¯èª¤è™•ç†æ¨¡æ¿

```javascript
/**
 * è‡ªè¨‚éŒ¯èª¤é¡åˆ¥
 */
class ValidationError extends Error {
  constructor(message) {
    super(message);
    this.name = "ValidationError";
  }
}

/**
 * æ¨™æº–éŒ¯èª¤è™•ç†ç¯„ä¾‹
 */
try {
  const result = await someAsyncOperation();

  if (!result) {
    throw new ValidationError("æ“ä½œçµæœç‚ºç©º");
  }

  return result;
} catch (error) {
  if (error instanceof ValidationError) {
    console.error("é©—è­‰éŒ¯èª¤:", error.message);
    // è™•ç†é©—è­‰éŒ¯èª¤
  } else if (error.code === "PERMISSION_DENIED") {
    console.error("æ¬Šé™éŒ¯èª¤:", error);
    // è™•ç†æ¬Šé™éŒ¯èª¤
  } else {
    console.error("æœªé æœŸçš„éŒ¯èª¤:", error);
    throw error; // é‡æ–°æ‹‹å‡º
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

<!-- ============================================================ -->

<a id="firebase-è³‡æ–™è·¯å¾‘å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ï¿½ğŸ”¥ Firebase è³‡æ–™è·¯å¾‘å‘½åè¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **camelCase**
- ä½¿ç”¨**è¤‡æ•¸åè©**ï¼ˆå¦‚æœæ˜¯é›†åˆï¼‰
- ä¿æŒè·¯å¾‘ç°¡æ½”ä¸”æœ‰æ„ç¾©
- é¿å…æ·±å±¤å·¢ç‹€ï¼ˆå»ºè­°æœ€å¤š 3 å±¤ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è³‡æ–™åº«çµæ§‹ç¯„ä¾‹

```javascript
Firebase Realtime Database:
  rooms/                        âœ… è¤‡æ•¸ + camelCase
    {roomCode}/
      hostId                    âœ… camelCase
      status                    âœ… camelCaseï¼ˆwaiting/playing/finishedï¼‰
      joinOrder                 âœ… camelCaseï¼ˆæˆ¿ä¸»è½‰ç§»æ’åºï¼‰
      createdAt                 âœ… camelCase
      players/                  âœ… è¤‡æ•¸
        {userId}/
          nickname              âœ… camelCase
          currentComboIndex     âœ… camelCaseï¼ˆv4.0 æ”¹åï¼‰
          totalScore            âœ… camelCase
          comboStatus/          âœ… camelCaseï¼ˆv4.0 æ–°å¢ï¼‰
            combo_0/
              started            âœ… camelCase
              completed          âœ… camelCase
              score              âœ… camelCase
          workingMemoryResult/  âœ… camelCaseï¼ˆv4.0 æ–°å¢ï¼‰
      gameCombos/               âœ… camelCaseï¼ˆv4.0ï¼šgameStagesâ†’gameCombosï¼‰
        0/
          questions/            âœ… è¤‡æ•¸
      allCompleted              âœ… camelCaseï¼ˆå…¨å“¡å®Œæˆå»£æ’­ï¼‰

Firebase Firestore:
  globalLeaderboard/            âœ… camelCaseï¼ˆè¦–ç‚ºå–®ä¸€é›†åˆï¼‰
    {userId}/
      totalScore                âœ… camelCase
      userName                  âœ… camelCase
  liveLeaderboards/             âœ… camelCase + è¤‡æ•¸ï¼ˆv4.3 æ–°å¢å³æ™‚æ’è¡Œæ¦œï¼‰
    {roomCode}/
      entries/                  âœ… è¤‡æ•¸
        {nickname}/
          score                 âœ… camelCase
          completedAt           âœ… camelCase
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å®Œæ•´è·¯å¾‘ç¯„ä¾‹

```javascript
âœ… æ­£ç¢ºï¼š
  firebase.database().ref('rooms')
  firebase.database().ref('rooms/ABC123/players')
  firebase.database().ref('rooms/ABC123/gameCombos/0/questions')  // v4.0 æ›´æ–°
  firebase.database().ref('rooms/ABC123/players/uid1/comboStatus/combo_0')
  firestore.collection('globalLeaderboard')
  firestore.collection('globalLeaderboard').doc(userId)
  firestore.collection('liveLeaderboards').doc(roomCode)          // v4.3 æ–°å¢
    .collection('entries').doc(nickname)

âŒ éŒ¯èª¤ï¼š
  firebase.database().ref('Rooms')              // ä¸è¦ç”¨ PascalCase
  firebase.database().ref('room')               // é›†åˆç”¨è¤‡æ•¸
  firebase.database().ref('game_stages')        // ä¸è¦ç”¨ snake_case
  firebase.database().ref('gameStages')         // å·²æ”¹åç‚º gameCombos
  firebase.database().ref('global-leaderboard') // ä¸è¦ç”¨ kebab-case
  firestore.collection('GlobalLeaderboard')     // ä¸è¦ç”¨ PascalCase
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç¯€é»å‘½åè¦ç¯„

| ç¯€é»é¡å‹         | å‘½åæ–¹å¼              | ç¯„ä¾‹                                |
| ---------------- | --------------------- | ----------------------------------- |
| é›†åˆï¼ˆå¤šç­†è³‡æ–™ï¼‰ | camelCase + è¤‡æ•¸      | `rooms`, `players`, `questions`     |
| æ–‡ä»¶ ID          | è‡ªå‹•ç”Ÿæˆæˆ–æœ‰æ„ç¾©çš„ ID | `{roomCode}`, `{userId}`            |
| æ¬„ä½åç¨±         | camelCase             | `roomName`, `createdAt`, `isActive` |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è³‡æ–™è·¯å¾‘å¸¸æ•¸å®šç¾©

å»ºè­°å»ºç«‹å°ˆç”¨æª”æ¡ˆç®¡ç†æ‰€æœ‰ Firebase è·¯å¾‘ï¼š

```javascript
// js/utils/firebase-paths.js

const FIREBASE_PATHS = {
  // Realtime Database
  ROOMS: "rooms",
  PLAYERS: "players",
  GAME_COMBOS: "gameCombos", // v4.0ï¼šgameStages â†’ gameCombos
  QUESTIONS: "questions",
  COMBO_STATUS: "comboStatus", // v4.0 æ–°å¢
  WORKING_MEMORY_RESULT: "workingMemoryResult", // v4.0 æ–°å¢

  // Firestore
  GLOBAL_LEADERBOARD: "globalLeaderboard",
  LIVE_LEADERBOARDS: "liveLeaderboards", // v4.3 æ–°å¢å³æ™‚æ’è¡Œæ¦œ

  // çµ„åˆè·¯å¾‘çš„è¼”åŠ©å‡½å¼
  getRoomPath: (roomCode) => `rooms/${roomCode}`,
  getPlayerPath: (roomCode, userId) => `rooms/${roomCode}/players/${userId}`,
  getComboPath: (roomCode, comboIndex) =>
    `rooms/${roomCode}/gameCombos/${comboIndex}`,
  getComboStatusPath: (roomCode, userId, comboId) =>
    `rooms/${roomCode}/players/${userId}/comboStatus/${comboId}`,

  // Firestore è·¯å¾‘è¼”åŠ©
  getLiveLeaderboardPath: (roomCode) => `liveLeaderboards/${roomCode}/entries`,
  getLiveEntryPath: (roomCode, nickname) =>
    `liveLeaderboards/${roomCode}/entries/${nickname}`,
};

window.FirebasePaths = FIREBASE_PATHS;
```

<!-- ============================================================ -->
<!-- JSDoc è¨»è§£è¦ç¯„ -->
<!-- ============================================================ -->

<a id="jsdoc-è¨»è§£è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“ JSDoc è¨»è§£è¦ç¯„

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼š@returns å¼·åˆ¶å¿…å¡« (å« void) | @param å¿…å¡« | AI ä¾è³´è¨»è§£
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š4 åˆ†é˜

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- **æ‰€æœ‰å‡½å¼å¿…é ˆæœ‰ JSDoc è¨»è§£**
- åŒ…å«åŠŸèƒ½æè¿°ã€åƒæ•¸ã€å›å‚³å€¼
- **@returns æ˜¯å¼·åˆ¶æ€§çš„ï¼Œå³ä½¿å›å‚³ void** â­ æ–°å¢
- ä½¿ç”¨æ¨™æº– JSDoc æ¨™ç±¤
- AI ä¾è³´è¨»è§£ç†è§£ç¨‹å¼ç¢¼ï¼Œä¸å¯çœç•¥

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¿…è¦æ¨™ç±¤

| æ¨™ç±¤       | ç”¨é€”       | å¿…è¦æ€§                          |
| ---------- | ---------- | ------------------------------- |
| `@param`   | åƒæ•¸èªªæ˜   | âœ… å¿…è¦ï¼ˆæœ‰åƒæ•¸æ™‚ï¼‰             |
| `@returns` | å›å‚³å€¼èªªæ˜ | â­ **å¼·åˆ¶å¿…è¦ï¼ˆæ‰€æœ‰åŒ¯å‡ºå‡½å¼ï¼‰** |
| `@throws`  | æ‹‹å‡ºçš„éŒ¯èª¤ | âš ï¸ å»ºè­°ï¼ˆæœ‰éŒ¯èª¤æ™‚ï¼‰             |
| `@async`   | éåŒæ­¥å‡½å¼ | âš ï¸ å»ºè­°ï¼ˆasync æ™‚ï¼‰             |
| `@example` | ä½¿ç”¨ç¯„ä¾‹   | ğŸ’¡ é¸ç”¨ï¼ˆè¤‡é›œå‡½å¼ï¼‰             |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### @returns å¼·åˆ¶è¦ç¯„ â­ æ–°å¢

> **ğŸ”´ v2.2 å¼·åˆ¶è¦ç¯„**
>
> **æ‰€æœ‰åŒ¯å‡ºå‡½å¼å¿…é ˆåŒ…å« `@returns` æ¨™ç±¤ï¼Œå³ä½¿å›å‚³ `void`ï¼**
>
> é€™æ˜¯ v2.2 çš„é—œéµè®Šæ›´ï¼Œæœ‰åŠ©æ–¼ AI ç†è§£å‡½å¼è¡Œç‚ºã€‚

**æ‰€æœ‰ä»¥ä¸‹é¡å‹çš„å‡½å¼å¿…é ˆåŒ…å« @returns**ï¼š

```javascript
// âœ… åŒ¯å‡ºå‡½å¼ï¼ˆæ›åœ¨ window ä¸Šï¼‰
/**
 * ç”Ÿæˆæˆ¿é–“ä»£ç¢¼
 * @returns {string} 5 ä½å­—å…ƒçš„ä»£ç¢¼
 */
window.RoomCodeUtils = {
  generate: function () {
    return generateCode();
  },
};

// âœ… é¡åˆ¥çš„å…¬é–‹æ–¹æ³•
class RoomManager {
  /**
   * å»ºç«‹æˆ¿é–“
   * @param {Object} data - æˆ¿é–“è³‡æ–™
   * @returns {Promise<string>} æˆ¿é–“ä»£ç¢¼
   */
  async createRoom(data) {}
}

// âœ… æœ‰å›å‚³å€¼çš„å‡½å¼
/**
 * é©—è­‰ä»£ç¢¼
 * @param {string} code - æˆ¿é–“ä»£ç¢¼
 * @returns {boolean} æ˜¯å¦æœ‰æ•ˆ
 */
function isValidCode(code) {
  return /^[A-Z0-9]{5}$/.test(code);
}

// âœ… ç„¡å›å‚³å€¼ä¹Ÿè¦æ¨™è¨»
/**
 * æ›´æ–°ç©å®¶ç‹€æ…‹
 * @param {string} userId - ç©å®¶ ID
 * @returns {void}  â­ å³ä½¿ void ä¹Ÿè¦å¯«
 */
function updatePlayer(userId) {
  // ...
}

// âœ… Promise<void> ä¹Ÿè¦æ¨™è¨»
/**
 * å„²å­˜è³‡æ–™åˆ° Firebase
 * @param {Object} data - è³‡æ–™
 * @returns {Promise<void>}  â­ async ç„¡å›å‚³ä¹Ÿè¦å¯«
 * @async
 */
async function saveData(data) {
  await firebase.database().ref("data").set(data);
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### @returns å‹åˆ¥æ¨™è¨»è¦ç¯„

| å›å‚³é¡å‹      | æ¨™è¨»æ–¹å¼                           | ç¯„ä¾‹         |
| :------------ | :--------------------------------- | :----------- |
| å­—ä¸²          | `@returns {string}`                | æˆ¿é–“ä»£ç¢¼     |
| æ•¸å­—          | `@returns {number}`                | ç©å®¶åˆ†æ•¸     |
| å¸ƒæ—          | `@returns {boolean}`               | æ˜¯å¦æœ‰æ•ˆ     |
| é™£åˆ—          | `@returns {Array}` æˆ– `{string[]}` | ç©å®¶åˆ—è¡¨     |
| ç‰©ä»¶          | `@returns {Object}`                | æˆ¿é–“è³‡æ–™     |
| ç„¡å›å‚³        | `@returns {void}`                  | â­ å¼·åˆ¶æ¨™è¨»  |
| Promise       | `@returns {Promise<string>}`       | async å‡½å¼   |
| Promiseç„¡å›å‚³ | `@returns {Promise<void>}`         | â­ å¼·åˆ¶æ¨™è¨»  |
| å‡½å¼          | `@returns {Function}`              | å–æ¶ˆç›£è½å‡½å¼ |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å®Œæ•´ç¯„ä¾‹ï¼ˆåŒ…å« @returnsï¼‰

```javascript
/**
 * ç”Ÿæˆå”¯ä¸€çš„æˆ¿é–“ä»£ç¢¼
 * @param {number} maxAttempts - æœ€å¤§å˜—è©¦æ¬¡æ•¸ï¼ˆé è¨­ 10ï¼‰
 * @returns {Promise<string>} 5 ä½å­—å…ƒçš„æˆ¿é–“ä»£ç¢¼
 * @throws {Error} ç•¶ç„¡æ³•ç”Ÿæˆå”¯ä¸€ä»£ç¢¼æ™‚æ‹‹å‡ºéŒ¯èª¤
 * @async
 */
async function generateUniqueRoomCode(maxAttempts = 10) {
  for (let i = 0; i < maxAttempts; i++) {
    const code = generateRoomCode();
    const exists = await isRoomCodeExists(code);

    if (!exists) {
      return code;
    }
  }

  throw new Error("ç„¡æ³•ç”Ÿæˆå”¯ä¸€çš„æˆ¿é–“ä»£ç¢¼ï¼Œè«‹ç¨å¾Œå†è©¦");
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é¡åˆ¥æ–¹æ³•ç¯„ä¾‹

```javascript
class RoomManager {
  /**
   * å»ºç«‹æ–°æˆ¿é–“
   * @param {Object} roomData - æˆ¿é–“è¨­å®šè³‡æ–™
   * @param {string} roomData.roomName - æˆ¿é–“åç¨±
   * @param {boolean} roomData.hasPassword - æ˜¯å¦è¨­å®šå¯†ç¢¼
   * @param {string[]} roomData.selectedStages - é¸æ“‡çš„éŠæˆ²å ´ ID é™£åˆ—
   * @param {number} roomData.questionsCount - æ¯å ´åœ°é¡Œæ•¸
   * @returns {Promise<string>} æˆ¿é–“ä»£ç¢¼
   * @throws {Error} ç•¶ä½¿ç”¨è€…æœªç™»å…¥æˆ–å»ºç«‹å¤±æ•—æ™‚æ‹‹å‡ºéŒ¯èª¤
   * @async
   * @example
   * const roomCode = await RoomManager.createRoom({
   *   roomName: 'æˆ‘çš„æˆ¿é–“',
   *   hasPassword: false,
   *   selectedStages: ['A', 'B'],
   *   questionsCount: 10
   * });
   */
  async createRoom(roomData) {
    // å¯¦ä½œ
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¤‡é›œç‰©ä»¶åƒæ•¸ç¯„ä¾‹

```javascript
/**
 * æ›´æ–°ç©å®¶éŠæˆ²ç‹€æ…‹
 * @param {string} roomCode - æˆ¿é–“ä»£ç¢¼
 * @param {string} userId - ä½¿ç”¨è€… ID
 * @param {Object} stageStatus - å ´åœ°ç‹€æ…‹ç‰©ä»¶
 * @param {boolean} stageStatus.completed - æ˜¯å¦å®Œæˆ
 * @param {number} stageStatus.score - ç²å¾—åˆ†æ•¸
 * @param {number} stageStatus.stars - ç²å¾—æ˜Ÿæ˜Ÿæ•¸
 * @param {Object[]} stageStatus.answers - ç­”é¡Œè¨˜éŒ„é™£åˆ—
 * @param {string} stageStatus.answers[].questionId - é¡Œç›® ID
 * @param {boolean} stageStatus.answers[].correct - æ˜¯å¦ç­”å°
 * @param {number} stageStatus.answers[].reactionTime - åæ‡‰æ™‚é–“ï¼ˆç§’ï¼‰
 * @returns {Promise<void>}
 * @async
 */
async function updatePlayerStageStatus(roomCode, userId, stageStatus) {
  // å¯¦ä½œ
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸æ•¸è¨»è§£ç¯„ä¾‹

```javascript
/**
 * æˆ¿é–“ä»£ç¢¼é•·åº¦
 * @constant {number}
 */
const ROOM_CODE_LENGTH = 5;

/**
 * éŠæˆ²å ´å®šç¾©
 * @constant {Object}
 * @property {Object} A - å ´åœ° Aï¼šèµ·å¸æ£®æ—
 * @property {Object} B - å ´åœ° Bï¼šäººé¡æ‘èŠ
 */
const GAME_STAGES = {
  A: {
    /* ... */
  },
  B: {
    /* ... */
  },
};
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‹åˆ¥å®šç¾©ç¯„ä¾‹ï¼ˆä½¿ç”¨ @typedefï¼‰

```javascript
/**
 * æˆ¿é–“è³‡æ–™çµæ§‹
 * @typedef {Object} RoomData
 * @property {string} roomCode - æˆ¿é–“ä»£ç¢¼
 * @property {string} roomName - æˆ¿é–“åç¨±
 * @property {string} hostId - æˆ¿ä¸» ID
 * @property {boolean} hasPassword - æ˜¯å¦æœ‰å¯†ç¢¼
 * @property {number} createdAt - å»ºç«‹æ™‚é–“æˆ³
 * @property {Object.<string, PlayerData>} players - ç©å®¶åˆ—è¡¨
 */

/**
 * å»ºç«‹æˆ¿é–“
 * @param {RoomData} roomData - æˆ¿é–“è³‡æ–™
 * @returns {Promise<string>}
 */
async function createRoom(roomData) {
  // å¯¦ä½œ
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éŒ¯èª¤ç¤ºç¯„

```javascript
âŒ éŒ¯èª¤ï¼šæ²’æœ‰è¨»è§£
function generateCode() {
  return Math.random().toString(36);
}

âŒ éŒ¯èª¤ï¼šè¨»è§£ä¸å®Œæ•´
/**
 * ç”Ÿæˆä»£ç¢¼
 */
function generateCode(length) {  // ç¼ºå°‘ @param å’Œ @returns
  return Math.random().toString(36);
}

âŒ éŒ¯èª¤ï¼šè¨»è§£èˆ‡å¯¦ä½œä¸ç¬¦
/**
 * @returns {string}
 */
async function generateCode() {  // æ‡‰è©²æ¨™è¨» @async å’Œ Promise<string>
  return await someAsyncFunction();
}
```

<!-- ============================================================ -->

<a id="git-commit-è¨Šæ¯è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“¦ Git Commit è¨Šæ¯è¦ç¯„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è¦å‰‡

- ä½¿ç”¨ **Conventional Commits** æ ¼å¼
- æ ¼å¼ï¼š`<type>(<scope>): <subject>`
- ä¸»æ—¨ä½¿ç”¨ç¾åœ¨å¼ï¼ˆå¦‚ï¼šadd è€Œé addedï¼‰
- ä¸»æ—¨ä¸è¶…é 50 å­—å…ƒ
- å¯é¸ï¼šåŠ å…¥è©³ç´°èªªæ˜ï¼ˆBodyï¼‰å’Œé—œè¯è­°é¡Œï¼ˆFooterï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Commit Type é¡å‹

| Type       | èªªæ˜                             | ç¯„ä¾‹                                    |
| ---------- | -------------------------------- | --------------------------------------- |
| `feat`     | æ–°å¢åŠŸèƒ½                         | `feat(multiplayer): æ–°å¢æˆ¿é–“å»ºç«‹åŠŸèƒ½`   |
| `fix`      | ä¿®å¾© Bug                         | `fix(room): ä¿®æ­£æˆ¿é–“ä»£ç¢¼é©—è­‰éŒ¯èª¤`       |
| `docs`     | æ–‡ä»¶è®Šæ›´                         | `docs(readme): æ›´æ–°å®‰è£èªªæ˜`            |
| `style`    | æ ¼å¼èª¿æ•´ï¼ˆä¸å½±éŸ¿ç¨‹å¼ç¢¼é‹ä½œï¼‰     | `style(main): èª¿æ•´ç¸®æ’æ ¼å¼`             |
| `refactor` | é‡æ§‹ï¼ˆä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿® Bugï¼‰ | `refactor(utils): é‡æ§‹æˆ¿é–“ä»£ç¢¼ç”Ÿæˆé‚è¼¯` |
| `test`     | æ–°å¢æˆ–ä¿®æ”¹æ¸¬è©¦                   | `test(room): æ–°å¢æˆ¿é–“å»ºç«‹æ¸¬è©¦æ¡ˆä¾‹`      |
| `chore`    | å»ºç½®å·¥å…·æˆ–è¼”åŠ©å·¥å…·è®Šæ›´           | `chore(deps): æ›´æ–° Firebase SDK ç‰ˆæœ¬`   |
| `perf`     | æ•ˆèƒ½æ”¹å–„                         | `perf(game): å„ªåŒ–é¡Œç›®ç”Ÿæˆé€Ÿåº¦`          |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Scope ç¯„åœï¼ˆé¸ç”¨ï¼‰

å»ºè­°ä½¿ç”¨çš„ scopeï¼š

```
multiplayer    - å¤šäººæ¨¡å¼
singleplayer   - å–®äººæ¨¡å¼
room           - æˆ¿é–“ç³»çµ±
game           - éŠæˆ²é‚è¼¯
stage          - éŠæˆ²å ´
ui             - ä½¿ç”¨è€…ä»‹é¢
firebase       - Firebase ç›¸é—œ
sound          - è²éŸ³ç³»çµ±
leaderboard    - æ’è¡Œæ¦œ
auth           - èªè­‰ç³»çµ±
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Commit è¨Šæ¯ç¯„ä¾‹

```bash
âœ… æ­£ç¢ºï¼š
feat(multiplayer): æ–°å¢æˆ¿é–“å»ºç«‹åŠŸèƒ½
fix(room): ä¿®æ­£æˆ¿é–“ä»£ç¢¼æ ¼å¼åŒ–éŒ¯èª¤
docs(naming): æ–°å¢ Firebase è·¯å¾‘å‘½åè¦ç¯„
style(css): çµ±ä¸€æŒ‰éˆ•æ¨£å¼
refactor(utils): é‡æ§‹é¡Œç›®ç”Ÿæˆé‚è¼¯
test(game): æ–°å¢éŠæˆ²æµç¨‹æ¸¬è©¦
chore(firebase): æ›´æ–° Firebase é…ç½®
perf(stage): å„ªåŒ–å ´åœ°åˆ‡æ›å‹•ç•«

âŒ éŒ¯èª¤ï¼š
Update files                        // å¤ªæ¨¡ç³Š
ä¿®æ­£éŒ¯èª¤                            // ä½¿ç”¨ä¸­æ–‡ï¼ˆå»ºè­°è‹±æ–‡ï¼‰
feat: add room feature              // ç¼ºå°‘ scope
Fixed bug in room code validation   // ä½¿ç”¨éå»å¼
feat(multiplayer): æ–°å¢æˆ¿é–“å»ºç«‹åŠŸèƒ½ï¼Œä¸¦ä¸”ä¿®æ”¹äº†æ¨£å¼å’Œæ–‡ä»¶  // ä¸€æ¬¡ commit å¤ªå¤šäº‹æƒ…
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å®Œæ•´ Commit ç¯„ä¾‹

```bash
# ç°¡å–® commit
git commit -m "feat(multiplayer): æ–°å¢ç­‰å¾…å®¤é é¢"

# åŒ…å«è©³ç´°èªªæ˜
git commit -m "feat(game): å¯¦ä½œå³æ™‚å›é¥‹ç–ŠåŠ æ•ˆæœ

- åœ¨åŸç•«é¢ä¸Šç–ŠåŠ ç¶ /ç´…æ¡†
- 0.3ç§’æ·¡å‡ºå‹•ç•«
- ç«‹å³åˆ‡æ›ä¸‹ä¸€é¡Œ

Closes #12"

# ä¿®å¾© Bug
git commit -m "fix(room): ä¿®æ­£æˆ¿é–“ä»£ç¢¼ç„¡æ³•é©—è­‰çš„å•é¡Œ

å•é¡Œï¼šä½¿ç”¨è€…è¼¸å…¥åŒ…å«ç©ºæ ¼çš„ä»£ç¢¼æœƒé©—è­‰å¤±æ•—
è§£æ±ºï¼šåœ¨é©—è­‰å‰å…ˆç§»é™¤æ‰€æœ‰ç©ºæ ¼

Fixes #23"
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Git Commit æª¢æŸ¥æ¸…å–®

æäº¤å‰ç¢ºèªï¼š

- [ ] Type æ­£ç¢ºï¼ˆfeat/fix/docs ç­‰ï¼‰
- [ ] Scope æœ‰æ„ç¾©ä¸”ä¸€è‡´
- [ ] ä¸»æ—¨ç°¡çŸ­æ˜ç¢ºï¼ˆâ‰¤ 50 å­—å…ƒï¼‰
- [ ] ä½¿ç”¨ç¾åœ¨å¼å‹•è©
- [ ] ä¸€æ¬¡ commit åªåšä¸€ä»¶äº‹
- [ ] æœ‰éœ€è¦æ™‚åŠ å…¥è©³ç´°èªªæ˜

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### VSCode Git Commit æ’ä»¶å»ºè­°

å®‰è£ **Conventional Commits** æ’ä»¶ï¼š

```
ext install vivaxy.vscode-conventional-commits
```

ä½¿ç”¨å¾Œå¯ä»¥å¿«é€Ÿé¸æ“‡ type å’Œ scopeï¼Œè‡ªå‹•ç”¢ç”Ÿç¬¦åˆè¦ç¯„çš„ commit è¨Šæ¯ã€‚

<!-- ============================================================ -->

<a id="ç¦ç”¨æ¸…å–®åš´æ ¼ç¦æ­¢"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## â›” ç¦ç”¨æ¸…å–®ï¼ˆåš´æ ¼ç¦æ­¢ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è®Šæ•¸åç¨±

```javascript
âŒ ç¦æ­¢ä½¿ç”¨ï¼š
  let a = 10;                    // å–®å­—æ¯è®Šæ•¸ï¼ˆé™¤äº†è¿´åœˆçš„ i, j, kï¼‰
  let usr = 'å°æ˜';              // ç¸®å¯«ï¼ˆä½¿ç”¨ userï¼‰
  let rm = {};                   // ç¸®å¯«ï¼ˆä½¿ç”¨ roomï¼‰
  let msg = 'Hello';             // ç¸®å¯«ï¼ˆä½¿ç”¨ messageï¼‰
  let æˆ¿é–“ä»£ç¢¼ = 'ABC';          // ä¸­æ–‡å‘½å
  let fangJianDaiMa = 'ABC';     // æ‹¼éŸ³å‘½å
  let temp = {};                 // æ¨¡ç³Šå‘½åï¼ˆtemp ä»€éº¼ï¼Ÿï¼‰
  let data = [];                 // æ¨¡ç³Šå‘½åï¼ˆä»€éº¼ dataï¼Ÿï¼‰

âœ… æ‡‰è©²ä½¿ç”¨ï¼š
  let index = 10;
  let user = 'å°æ˜';
  let room = {};
  let message = 'Hello';
  let roomCode = 'ABC';
  let temporaryRoomData = {};
  let playerList = [];
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‡½å¼åç¨±

```javascript
âŒ ç¦æ­¢ä½¿ç”¨ï¼š
  function data() { }            // åè©ï¼Œä¸æ˜¯å‹•è©
  function info() { }            // å¤ªæŠ½è±¡
  function process() { }         // ä¸æ˜ç¢ºï¼ˆè™•ç†ä»€éº¼ï¼Ÿï¼‰
  function doSomething() { }     // å¤ªæ¨¡ç³Š
  function handleStuff() { }     // ä¸å°ˆæ¥­
  function func1() { }           // ç„¡æ„ç¾©å‘½å

âœ… æ‡‰è©²ä½¿ç”¨ï¼š
  function getRoomData() { }
  function getUserInfo() { }
  function processPayment() { }
  function createNewRoom() { }
  function handleFormSubmit() { }
  function validateRoomCode() { }
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Firebase è·¯å¾‘

```javascript
âŒ ç¦æ­¢ä½¿ç”¨ï¼š
  firebase.database().ref('Room')              // å¤§å¯«é–‹é ­
  firebase.database().ref('game_rooms')        // snake_case
  firebase.database().ref('game-rooms')        // kebab-case
  firebase.database().ref('2026-02-09/rooms')  // æ—¥æœŸåšç¯€é»
  firebase.database().ref('rooms/ABC.123')     // ç‰¹æ®Šå­—å…ƒ .
  firebase.database().ref('rooms/ABC#123')     // ç‰¹æ®Šå­—å…ƒ #
  firebase.database().ref('a/b/c/d/e/f/g')     // éæ·±ï¼ˆ> 3 å±¤ï¼‰

âœ… æ‡‰è©²ä½¿ç”¨ï¼š
  firebase.database().ref('rooms')
  firebase.database().ref('gameRooms')
  firebase.database().ref('rooms/ABC123')
  firebase.database().ref('rooms/ABC123/players')
```

<a id="éŒ¯èª¤è™•ç†å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éŒ¯èª¤è™•ç†

```javascript
âŒ ç¦æ­¢ä½¿ç”¨ï¼š
  try { } catch (e) { }          // å¤ªç°¡ç•¥
  try { } catch (err) { }        // ä¸çµ±ä¸€
  try { } catch (ex) { }         // ä¸çµ±ä¸€
  try { } catch (exception) { }  // å¤ªå†—é•·

âœ… æ‡‰è©²ä½¿ç”¨ï¼š
  try { } catch (error) { }
  try { } catch (networkError) { }
  try { } catch (validationError) { }
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Git Commit | èªªæ˜ |

| --------------------------------- | -------------------------- | ------------------- |
| `RoomManager.js` | `room-manager.js` | æª”æ¡ˆç”¨ kebab-case |
| `room_code` | `roomCode` | è®Šæ•¸ç”¨ camelCase |
| `catch (e)` | `catch (error)` | éŒ¯èª¤è®Šæ•¸çµ±ä¸€ç”¨ error |
| `listenRoom()` | `onRoomChange()` | äº‹ä»¶ç›£è½ç”¨ on é–‹é ­ |
| `'roomCreated'` | `'room:created'` | äº‹ä»¶åç¨±ç”¨å†’è™Ÿåˆ†éš” |
| `generateCode` (ç„¡è¨»è§£) | åŠ ä¸Š JSDoc | å‡½å¼å¿…é ˆæœ‰è¨»è§£ |
| `firebase.database().ref('Room')` | `ref('rooms')` | è·¯å¾‘ç”¨å°å¯«è¤‡æ•¸ |
| `git commit -m "update"` | `feat(scope): æè¿°` | ä½¿ç”¨ Conventional |
| `let usr = 'name'` | `let userName = 'name'` | ä¸è¦ç”¨ç¸®å¯« |
| `function data()` | `function getRoomData()` | å‡½å¼ç”¨å‹•è©é–‹é ­  
 git commit -m "Fixed the room bug" # éå»å¼

âœ… æ‡‰è©²ä½¿ç”¨ï¼š
git commit -m "feat(room): add room creation"
git commit -m "fix(room): fix code validation"
git commit -m "docs(readme): update setup guide"

````


[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å…¶ä»–ç¦ç”¨é …ç›®
```javascript
âŒ ç¦æ­¢ï¼š
  var roomCode = 'ABC';          // ä½¿ç”¨ let/constï¼Œä¸è¦ç”¨ var
  eval(code);                    // å®‰å…¨é¢¨éšª
  with (obj) { }                 // å·²å»¢æ£„
  setTimeout('alert(1)', 100);   // å­—ä¸²åŸ·è¡Œ

âœ… æ‡‰è©²ï¼š
  const roomCode = 'ABC';
  const func = new Function(code);
  const value = obj.property;
  setTimeout(() => alert(1), 100);
````

<!-- ============================================================ -->

<a id="ç¸®å¯«ä½¿ç”¨è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ” ç¸®å¯«ä½¿ç”¨è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ“ ä¸­

**æ ¸å¿ƒåŸå‰‡**ï¼š

- **å„ªå…ˆä½¿ç”¨å®Œæ•´å–®å­—** - æé«˜ç¨‹å¼ç¢¼å¯è®€æ€§
- **åƒ…å…è¨±æ¥­ç•Œæ¨™æº–ç¸®å¯«** - é¿å…ç†è§£éšœç¤™
- **ç¦æ­¢è‡ªå‰µç¸®å¯«** - é˜²æ­¢å‘½åæ··äº‚

#### å…è¨±çš„ç¸®å¯«æ¸…å–®

**æ¥­ç•Œæ¨™æº–æŠ€è¡“è¡“èª**ï¼š

```javascript
// âœ… æŠ€è¡“æ¨™æº–ç¸®å¯«
const id = userId; // ID (identifier)
const url = apiEndpoint; // URL (Uniform Resource Locator)
const uri = resourceUri; // URI (Uniform Resource Identifier)
const html = contentHtml; // HTML
const css = styleCSS; // CSS
const json = dataJson; // JSON
const xml = dataXml; // XML
const api = backendApi; // API (Application Programming Interface)
const http = httpClient; // HTTP
const https = secureHttp; // HTTPS
const sql = querySQL; // SQL
const db = database; // DB (Database)
const ui = userInterface; // UI (User Interface)
```

**æ¡†æ¶/å‡½å¼åº«æ…£ä¾‹**ï¼š

```javascript
// âœ… React ç”Ÿæ…‹ç³»æ…£ä¾‹
const props = componentProps; // React props
const ref = elementRef; // React ref

// âœ… å‡½å¼åƒæ•¸æ…£ä¾‹
const params = routeParams; // è·¯ç”±åƒæ•¸
const config = appConfig; // é…ç½®ç‰©ä»¶
const opts = options; // é¸é …ç‰©ä»¶ï¼ˆè¼ƒå°‘ä½¿ç”¨ï¼Œå»ºè­°ç”¨ optionsï¼‰

// âœ… æ™‚é–“ç›¸é—œæ…£ä¾‹
const min = minValue; // minimum
const max = maxValue; // maximum
const avg = average; // averageï¼ˆçµ±è¨ˆå­¸å¸¸ç”¨ï¼‰
```

#### ç¦æ­¢çš„ç¸®å¯«

```javascript
// âŒ ç¦æ­¢è‡ªå‰µç¸®å¯«
const usr = user; // æ‡‰è©²ç”¨ user
const msg = message; // æ‡‰è©²ç”¨ message
const btn = button; // æ‡‰è©²ç”¨ button
const img = image; // æ‡‰è©²ç”¨ image
const rm = room; // æ‡‰è©²ç”¨ room
const mgr = manager; // æ‡‰è©²ç”¨ manager
const cfg = config; // æ‡‰è©²ç”¨ config
const tmp = temporary; // æ‡‰è©²ç”¨ temporary æˆ– temp
const cnt = count; // æ‡‰è©²ç”¨ count
const num = number; // æ‡‰è©²ç”¨ numberï¼ˆé™¤éåœ¨æ•¸å­¸å…¬å¼ä¸­ï¼‰
const str = string; // æ‡‰è©²ç”¨ stringï¼ˆé™¤éåœ¨å‹åˆ¥è½‰æ›ä¸­ï¼‰
const arr = array; // æ‡‰è©²ç”¨ array æˆ–è¤‡æ•¸åè©
const obj = object; // æ‡‰è©²ç”¨å…·é«”åç¨±
```

#### ç‰¹æ®Šæƒ…å¢ƒä¾‹å¤–

```javascript
// âœ… æ•¸å­¸/æ¼”ç®—æ³•ï¼ˆå…è¨±å­¸è¡“æ…£ä¾‹ï¼‰
const i = 0; // è¿´åœˆç´¢å¼•
const j = 0; // å·¢ç‹€è¿´åœˆç´¢å¼•
const x = coordinates.x; // åº§æ¨™
const y = coordinates.y; // åº§æ¨™
const n = arrayLength; // é™£åˆ—é•·åº¦ï¼ˆæ•¸å­¸è¨˜è™Ÿï¼‰

// âœ… å–®ä½ç¸®å¯«ï¼ˆéœ€åŠ è¨»è§£ï¼‰
const widthPx = 100; // px = pixel
const durationMs = 5000; // ms = millisecond
const sizeKb = 2048; // kb = kilobyte
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ”„ è¿­ä»£è®Šæ•¸æ“´å±•è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”„ ä½

**åˆ¤æ–·åŸå‰‡**ï¼š

- **ç°¡å–®è¿´åœˆï¼ˆ< 5 è¡Œï¼‰** â†’ å¯ç”¨ `i`, `j`, `k`
- **è¤‡é›œé‚è¼¯ï¼ˆâ‰¥ 5 è¡Œï¼‰** â†’ ç”¨èªæ„åŒ–å‘½å
- **é™£åˆ—éæ­·** â†’ ç”¨å–®æ•¸åè©ï¼ˆ`player` è€Œé `p`ï¼‰

#### è¿´åœˆç´¢å¼•å‘½åè¦ç¯„

```javascript
// âœ… ç°¡å–®è¿´åœˆï¼ˆ< 5 è¡Œï¼‰å¯ç”¨ i, j, k
for (let i = 0; i < 10; i++) {
  console.log(i);
}

// âœ… å·¢ç‹€è¿´åœˆï¼ˆäºŒç¶­é™£åˆ—ï¼‰
for (let i = 0; i < rows; i++) {
  for (let j = 0; j < cols; j++) {
    grid[i][j] = 0;
  }
}

// âœ… è¤‡é›œé‚è¼¯ç”¨èªæ„åŒ–å‘½å
for (let playerIndex = 0; playerIndex < players.length; playerIndex++) {
  const player = players[playerIndex];
  updatePlayerScore(player);
  calculatePlayerRank(player);
  savePlayerData(player);
  notifyPlayerUpdate(player);
}

// âŒ è¤‡é›œé‚è¼¯ç”¨ iï¼ˆé™ä½å¯è®€æ€§ï¼‰
for (let i = 0; i < players.length; i++) {
  const player = players[i];
  updatePlayerScore(player);
  calculatePlayerRank(player);
  savePlayerData(player);
  notifyPlayerUpdate(player);
}
```

#### é™£åˆ—éæ­·å‘½å

```javascript
// âœ… forEach/map/filter ç”¨èªæ„åŒ–å‘½å
players.forEach((player) => {
  player.isActive = true;
});

rooms.map((room) => ({
  id: room.id,
  name: room.name,
}));

// âœ… for...of ç”¨èªæ„åŒ–å‘½å
for (const player of players) {
  console.log(player.name);
}

// âŒ ä¸è¦ç”¨ç¸®å¯«
players.forEach((p) => {
  // âŒ æ‡‰è©²ç”¨ player
  p.isActive = true;
});
```

<!-- ============================================================ -->
<!-- Import é †åºè¦ç¯„ -->
<!-- ============================================================ -->

<a id="import-é †åºè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ“¦ Import é †åºè¦ç¯„ â­ v2.3 æ–°å¢

> **ğŸ“Œ æ ¸å¿ƒè¦å‰‡**ï¼šç¬¬ä¸‰æ–¹ â†’ å…§éƒ¨çµ•å°è·¯å¾‘ â†’ ç›¸å°è·¯å¾‘ â†’ æ¨£å¼
> **â±ï¸ é–±è®€æ™‚é–“**ï¼š3 åˆ†é˜

**å„ªå…ˆç´š**ï¼šğŸŸ¡ å»ºè­°

**é©ç”¨ç¯„åœ**ï¼šJavaScript / TypeScript / React / Vue å°ˆæ¡ˆ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸºæœ¬é †åºè¦å‰‡

**æ¨™æº–é †åºï¼ˆç”±ä¸Šè‡³ä¸‹ï¼‰**ï¼š

1. **ç¬¬ä¸‰æ–¹å¥—ä»¶** - Node modulesï¼ˆå¦‚ Reactã€Lodashï¼‰
2. **å…§éƒ¨çµ•å°è·¯å¾‘** - å°ˆæ¡ˆåˆ¥å/çµ•å°è·¯å¾‘ï¼ˆå¦‚ `@/components`ï¼‰
3. **å…§éƒ¨ç›¸å°è·¯å¾‘** - ç›¸å°è·¯å¾‘å°å…¥ï¼ˆå¦‚ `./utils`ã€`../config`ï¼‰
4. **æ¨£å¼æª”æ¡ˆ** - CSS/SCSS å°å…¥
5. **é¡å‹å°å…¥** - TypeScript å‹åˆ¥ï¼ˆå¯é¸ï¼Œå¯æ”¾åœ¨å„åˆ†çµ„å…§ï¼‰

**åˆ†çµ„ä¹‹é–“ç©ºä¸€è¡Œ**ï¼ŒåŒåˆ†çµ„å…§æŒ‰å­—æ¯é †åºæ’åˆ—ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### React å°ˆæ¡ˆç¯„ä¾‹

```javascript
// ============================================
// âœ… æ­£ç¢ºçš„ Import é †åº
// ============================================

// 1ï¸âƒ£ ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼ˆReact æ ¸å¿ƒæ”¾æœ€å‰ï¼‰
import React, { useState, useEffect } from "react";
import { useNavigate, useParams } from "react-router-dom";
import axios from "axios";
import { toast } from "react-toastify";

// 2ï¸âƒ£ å…§éƒ¨çµ•å°è·¯å¾‘å°å…¥ï¼ˆä½¿ç”¨ @ åˆ¥åï¼‰
import { Button, Modal, Input } from "@/components/ui";
import { useAuth } from "@/contexts/AuthContext";
import { apiService } from "@/services/apiService";
import { formatDate, validateEmail } from "@/utils/helpers";

// 3ï¸âƒ£ å…§éƒ¨ç›¸å°è·¯å¾‘å°å…¥
import { PlayerCard } from "./components/PlayerCard";
import { RoomSettings } from "./components/RoomSettings";
import { ROOM_CONFIG } from "./config/constants";
import { calculateScore } from "./utils/gameLogic";

// 4ï¸âƒ£ æ¨£å¼æª”æ¡ˆ
import "./RoomManager.css";
import "./components/PlayerCard.scss";

// ============================================
// âŒ éŒ¯èª¤çš„ Import é †åºï¼ˆæ··äº‚ï¼‰
// ============================================

import "./RoomManager.css"; // âŒ æ¨£å¼ä¸æ‡‰è©²åœ¨æœ€å‰é¢
import { PlayerCard } from "./components/PlayerCard";
import axios from "axios"; // âŒ ç¬¬ä¸‰æ–¹å¥—ä»¶æ‡‰è©²åœ¨æœ€å‰
import { Button } from "@/components/ui"; // âŒ çµ•å°è·¯å¾‘æ‡‰è©²åœ¨ç›¸å°è·¯å¾‘å‰
import React from "react"; // âŒ React æ‡‰è©²åœ¨æœ€å‰
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### TypeScript å°ˆæ¡ˆç¯„ä¾‹ï¼ˆå«å‹åˆ¥å°å…¥ï¼‰

```typescript
// ============================================
// âœ… æ–¹æ¡ˆ 1ï¼šå‹åˆ¥èˆ‡å€¼åˆ†é–‹å°å…¥
// ============================================

// 1ï¸âƒ£ ç¬¬ä¸‰æ–¹å¥—ä»¶
import React, { useState } from "react";
import axios from "axios";

// ç¬¬ä¸‰æ–¹å‹åˆ¥ï¼ˆæ”¾åœ¨åŒçµ„ï¼‰
import type { AxiosResponse } from "axios";
import type { ReactNode } from "react";

// 2ï¸âƒ£ å…§éƒ¨çµ•å°è·¯å¾‘
import { Button } from "@/components/ui";
import { apiService } from "@/services/apiService";

// å…§éƒ¨å‹åˆ¥ï¼ˆæ”¾åœ¨åŒçµ„ï¼‰
import type { User, Room } from "@/types";
import type { ApiResponse } from "@/types/api";

// 3ï¸âƒ£ ç›¸å°è·¯å¾‘
import { PlayerCard } from "./components/PlayerCard";

// ç›¸å°è·¯å¾‘å‹åˆ¥
import type { PlayerCardProps } from "./components/PlayerCard";

// 4ï¸âƒ£ æ¨£å¼
import "./styles.css";

// ============================================
// âœ… æ–¹æ¡ˆ 2ï¼šå‹åˆ¥çµ±ä¸€æ”¾åœ¨æœ€å‰ï¼ˆå¯é¸ï¼‰
// ============================================

// 0ï¸âƒ£ æ‰€æœ‰å‹åˆ¥å°å…¥ï¼ˆé›†ä¸­ç®¡ç†ï¼‰
import type { ReactNode } from "react";
import type { AxiosResponse } from "axios";
import type { User, Room, ApiResponse } from "@/types";
import type { PlayerCardProps } from "./components/PlayerCard";

// 1ï¸âƒ£ ç¬¬ä¸‰æ–¹å¥—ä»¶
import React, { useState } from "react";
import axios from "axios";

// 2ï¸âƒ£ å…§éƒ¨çµ•å°è·¯å¾‘
import { Button } from "@/components/ui";
import { apiService } from "@/services/apiService";

// 3ï¸âƒ£ ç›¸å°è·¯å¾‘
import { PlayerCard } from "./components/PlayerCard";

// 4ï¸âƒ£ æ¨£å¼
import "./styles.css";
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Vue 3 å°ˆæ¡ˆç¯„ä¾‹

```javascript
// âœ… Vue 3 Composition API é †åº

// 1ï¸âƒ£ ç¬¬ä¸‰æ–¹å¥—ä»¶
import { ref, computed, onMounted } from "vue";
import { useRouter, useRoute } from "vue-router";
import axios from "axios";

// 2ï¸âƒ£ å…§éƒ¨çµ•å°è·¯å¾‘
import BaseButton from "@/components/BaseButton.vue";
import { useAuthStore } from "@/stores/auth";
import { apiService } from "@/services/api";

// 3ï¸âƒ£ ç›¸å°è·¯å¾‘
import PlayerList from "./components/PlayerList.vue";
import { calculateScore } from "./utils/game";

// 4ï¸âƒ£ æ¨£å¼
import "./RoomView.scss";
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Node.js å¾Œç«¯å°ˆæ¡ˆç¯„ä¾‹

```javascript
// âœ… Node.js/Express é †åº

// 1ï¸âƒ£ Node æ ¸å¿ƒæ¨¡çµ„
import fs from "fs";
import path from "path";
import { promisify } from "util";

// 2ï¸âƒ£ ç¬¬ä¸‰æ–¹å¥—ä»¶
import express from "express";
import cors from "cors";
import dotenv from "dotenv";
import { initializeApp } from "firebase-admin/app";

// 3ï¸âƒ£ å…§éƒ¨çµ•å°è·¯å¾‘ï¼ˆåˆ¥åï¼‰
import { authMiddleware } from "@/middleware/auth";
import { logger } from "@/utils/logger";
import { db } from "@/config/database";

// 4ï¸âƒ£ ç›¸å°è·¯å¾‘
import { roomRoutes } from "./routes/rooms";
import { userRoutes } from "./routes/users";
import { validateRequest } from "./middleware/validator";
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç‰¹æ®Šæƒ…æ³è™•ç†

#### å‹•æ…‹å°å…¥

```javascript
// âœ… å‹•æ…‹å°å…¥æ”¾åœ¨éœ€è¦çš„ä½ç½®
async function loadHeavyModule() {
  // å‹•æ…‹å°å…¥å¯ä»¥åœ¨å‡½å¼å…§
  const { heavyFunction } = await import("./heavyModule");
  return heavyFunction();
}

// âœ… æ¢ä»¶å°å…¥
if (process.env.NODE_ENV === "development") {
  const { setupDevTools } = await import("./devTools");
  setupDevTools();
}
```

#### Side Effect Imports

```javascript
// âœ… å‰¯ä½œç”¨å°å…¥ï¼ˆå¦‚ polyfillsï¼‰æ”¾åœ¨æœ€å‰
import "core-js/stable";
import "regenerator-runtime/runtime";

// ç„¶å¾Œæ‰æ˜¯æ­£å¸¸çš„å°å…¥é †åº
import React from "react";
import ReactDOM from "react-dom";
// ...
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ESLint è‡ªå‹•æ’åºè¨­ç½®

å¯ä»¥ä½¿ç”¨ ESLint æ’ä»¶è‡ªå‹•å¼·åˆ¶åŸ·è¡Œ import é †åºï¼š

```json
// .eslintrc.json
{
  "plugins": ["import"],
  "rules": {
    "import/order": [
      "error",
      {
        "groups": [
          "builtin", // Node å…§å»ºæ¨¡çµ„
          "external", // ç¬¬ä¸‰æ–¹å¥—ä»¶
          "internal", // å…§éƒ¨åˆ¥åè·¯å¾‘
          ["parent", "sibling"], // ç›¸å°è·¯å¾‘
          "index", // index æª”æ¡ˆ
          "object",
          "type" // TypeScript å‹åˆ¥
        ],
        "pathGroups": [
          {
            "pattern": "react",
            "group": "external",
            "position": "before"
          },
          {
            "pattern": "@/**",
            "group": "internal"
          }
        ],
        "pathGroupsExcludedImportTypes": ["react"],
        "newlines-between": "always", // åˆ†çµ„ä¹‹é–“ç©ºè¡Œ
        "alphabetize": {
          "order": "asc", // å­—æ¯é †åº
          "caseInsensitive": true
        }
      }
    ]
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Prettier æ•´åˆ

```json
// .prettierrc
{
  "importOrder": ["^react", "^@?\\w", "^@/(.*)$", "^[./]"],
  "importOrderSeparation": true,
  "importOrderSortSpecifiers": true
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¿«é€Ÿæª¢æŸ¥æ¸…å–®

**âœ… è‰¯å¥½çš„ Import å€å¡Šæ‡‰è©²**ï¼š

- [ ] React/Vue æ”¾åœ¨æœ€å‰é¢
- [ ] ç¬¬ä¸‰æ–¹å¥—ä»¶åœ¨å…§éƒ¨å°å…¥ä¹‹å‰
- [ ] çµ•å°è·¯å¾‘åœ¨ç›¸å°è·¯å¾‘ä¹‹å‰
- [ ] æ¨£å¼æª”æ¡ˆåœ¨æœ€å¾Œ
- [ ] å„åˆ†çµ„ä¹‹é–“æœ‰ç©ºè¡Œåˆ†éš”
- [ ] åŒçµ„å…§æŒ‰å­—æ¯é †åºæ’åˆ—

**âŒ é¿å…çš„åšæ³•**ï¼š

- [ ] æ··äº‚ç„¡åºçš„å°å…¥
- [ ] æ¨£å¼æª”æ¡ˆæ•£è½å„è™•
- [ ] ç¬¬ä¸‰æ–¹å¥—ä»¶èˆ‡å…§éƒ¨æ¨¡çµ„æ··é›œ
- [ ] ç¼ºå°‘åˆ†çµ„ç©ºè¡Œ

> **ğŸ’¡ ç‚ºä»€éº¼é€™æ¨£æ›´å¥½ï¼Ÿ**
>
> 1. **å¯è®€æ€§**ï¼šæ¸…æ™°çš„åˆ†çµ„è®“ä¾è³´é—œä¿‚ä¸€ç›®äº†ç„¶
> 2. **æ˜“ç¶­è­·**ï¼šçµ±ä¸€æ ¼å¼æ¸›å°‘ merge conflict
> 3. **å¿«é€Ÿå®šä½**ï¼šçŸ¥é“åœ¨å“ªå€‹å€å¡Šæ‰¾éœ€è¦çš„å°å…¥
> 4. **è‡ªå‹•åŒ–**ï¼šESLint/Prettier å¯è‡ªå‹•æ’åº
> 5. **åœ˜éšŠå”ä½œ**ï¼šçµ±ä¸€è¦ç¯„é¿å…é¢¨æ ¼çˆ­è­°

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ§ª æ¸¬è©¦å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ§ª ä½

**é©ç”¨ç¯„åœ**ï¼šJest / Vitest / Mocha ç­‰æ¸¬è©¦æ¡†æ¶

#### æ¸¬è©¦æª”æ¡ˆå‘½å

```javascript
// âœ… æ¸¬è©¦æª”æ¡ˆèˆ‡åŸå§‹æª”æ¡ˆåŒååŠ  .test
src / room - manager.js; // åŸå§‹æª”æ¡ˆ
room - manager.test.js; // æ¸¬è©¦æª”æ¡ˆ

// âœ… æˆ–ä½¿ç”¨ .specï¼ˆVitest æ…£ä¾‹ï¼‰
src / room - manager.js;
room - manager.spec.js;
```

#### æ¸¬è©¦å¥—ä»¶èˆ‡æ¸¬è©¦æ¡ˆä¾‹

```javascript
// âœ… describe ç”¨é¡åˆ¥/å‡½å¼åç¨±
describe("RoomManager", () => {
  // âœ… it æè¿°æ¸¬è©¦è¡Œç‚ºï¼ˆshould é–‹é ­ï¼‰
  it("should create room with valid data", () => {
    const room = roomManager.createRoom({ name: "Test Room" });
    expect(room.name).toBe("Test Room");
  });

  it("should throw error when room name is empty", () => {
    expect(() => roomManager.createRoom({ name: "" })).toThrow(
      "Room name cannot be empty",
    );
  });

  // âœ… æ¸¬è©¦ç¾¤çµ„ï¼ˆå·¢ç‹€ describeï¼‰
  describe("when user is not authenticated", () => {
    it("should reject room creation", () => {
      // ...
    });
  });
});
```

#### Mock/Stub/Fake è³‡æ–™å‘½å

```javascript
// âœ… Mock è³‡æ–™å‘½åè¦ç¯„
const mockUser = {
  // mock å‰ç¶´
  id: "test-id",
  name: "Test User",
};

const mockRoomData = {
  name: "Test Room",
  capacity: 10,
};

// âœ… Stub å‡½å¼ï¼ˆå›ºå®šå›å‚³å€¼ï¼‰
const stubGetUser = vi.fn(() => mockUser);
const stubCallback = vi.fn();

// âœ… Fake å¯¦ä½œï¼ˆç°¡åŒ–ç‰ˆå¯¦ä½œï¼‰
const fakeDatabase = {
  users: [mockUser],
  getRoomById: (id) => fakeDatabase.rooms.find((r) => r.id === id),
};

// âœ… Spyï¼ˆç›£è¦–çœŸå¯¦å‡½å¼ï¼‰
const spyOnSaveRoom = vi.spyOn(roomManager, "saveRoom");
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âš™ï¸ ç’°å¢ƒè®Šæ•¸/é…ç½®å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš™ï¸ ä½

**æ ¸å¿ƒåŸå‰‡**ï¼š

- `.env` æª”æ¡ˆç”¨ `UPPER_SNAKE_CASE`
- ç¨‹å¼ç¢¼ä¸­è®€å–å¾Œè½‰ç‚º `camelCase`
- é…ç½®ç‰©ä»¶ç”¨ `config` æˆ– `settings`

#### .env æª”æ¡ˆå‘½å

```bash
# âœ… .env æª”æ¡ˆï¼ˆUPPER_SNAKE_CASEï¼‰
FIREBASE_API_KEY=AIzaSyXXXX
FIREBASE_AUTH_DOMAIN=project.firebaseapp.com
DATABASE_URL=https://database.firebaseio.com
MAX_UPLOAD_SIZE=10485760
ALLOWED_ORIGINS=http://localhost:3000,https://example.com

# âœ… åŠ å‰ç¶´å€åˆ†é¡åˆ¥
VITE_API_URL=https://api.example.com       # Vite ç’°å¢ƒè®Šæ•¸
REACT_APP_VERSION=1.0.0                     # Create React App
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX              # Next.js å…¬é–‹è®Šæ•¸
```

#### ç¨‹å¼ç¢¼ä¸­è®€å–ç’°å¢ƒè®Šæ•¸

```javascript
// âœ… è½‰æ›ç‚º camelCase
const firebaseApiKey = process.env.FIREBASE_API_KEY;
const databaseUrl = process.env.DATABASE_URL;
const maxUploadSize = parseInt(process.env.MAX_UPLOAD_SIZE);

// âœ… é…ç½®ç‰©ä»¶çµ±ä¸€ç®¡ç†
const firebaseConfig = {
  apiKey: process.env.FIREBASE_API_KEY,
  authDomain: process.env.FIREBASE_AUTH_DOMAIN,
  databaseURL: process.env.DATABASE_URL,
};

// âŒ ä¸è¦ç›´æ¥åœ¨ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨ UPPER_SNAKE_CASE
const API_KEY = process.env.FIREBASE_API_KEY; // âŒ æ‡‰è©²ç”¨ camelCase
```

#### é…ç½®ç‰©ä»¶å‘½å

```javascript
// âœ… æ‡‰ç”¨å±¤é…ç½®ç”¨ config
const appConfig = {
  firebase: { ... },
  game: {
    maxPlayers: 4,
    timeout: 300000
  }
};

// âœ… æ¨¡çµ„é…ç½®ç”¨ settings
const roomSettings = {
  defaultCapacity: 10,
  allowPassword: true
};
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ—ï¸ å»ºæ§‹å‡½å¼åƒæ•¸å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ—ï¸ ä½

**æ ¸å¿ƒåŸå‰‡**ï¼š

- å»ºæ§‹å‡½å¼åƒæ•¸ç‰©ä»¶çµ±ä¸€ç”¨ `options`
- å‡½å¼é¸é …åƒæ•¸ç”¨ `options`
- å…¨åŸŸé…ç½®ç”¨ `config`

#### å»ºæ§‹å‡½å¼åƒæ•¸å‘½å

```javascript
// âœ… å»ºæ§‹å‡½å¼åƒæ•¸çµ±ä¸€ç”¨ options
class RoomManager {
  constructor(options) {
    this.apiKey = options.apiKey;
    this.timeout = options.timeout ?? 5000;
    this.maxRetries = options.maxRetries ?? 3;
  }
}

// âœ… ä½¿ç”¨è§£æ§‹è³¦å€¼è¨­å®šé è¨­å€¼
class Player {
  constructor({ name, level = 1, hp = 100 }) {
    this.name = name;
    this.level = level;
    this.hp = hp;
  }
}

// âŒ ä¸è¦ç”¨ config ä½œç‚ºå»ºæ§‹å‡½å¼åƒæ•¸
class RoomManager {
  constructor(config) {
    // âŒ æ‡‰è©²ç”¨ options
    // ...
  }
}
```

#### å‡½å¼é¸é …åƒæ•¸å‘½å

```javascript
// âœ… å‡½å¼é¸é …åƒæ•¸ç”¨ options
function createRoom(roomData, options = {}) {
  const { hasPassword = false, maxPlayers = 10, isPrivate = false } = options;

  return {
    ...roomData,
    hasPassword,
    maxPlayers,
    isPrivate,
  };
}

// âœ… å‘¼å«æ™‚å‘½åæ¸…æ™°
const room = createRoom(
  { name: "Game Room" },
  { hasPassword: true, maxPlayers: 6 },
);

// âŒ ä¸è¦ç”¨å¤šå€‹ç¨ç«‹åƒæ•¸ï¼ˆè¶…é 3 å€‹æ™‚ï¼‰
function createRoom(
  roomData,
  hasPassword, // âŒ æ‡‰è©²æ•´åˆåˆ° options
  maxPlayers,
  isPrivate,
) {}
```

#### å…¨åŸŸé…ç½®å‘½å

```javascript
// âœ… å…¨åŸŸé…ç½®ç‰©ä»¶ç”¨ config
const appConfig = {
  firebase: {
    apiKey: "xxx",
    authDomain: "xxx",
  },
  game: {
    maxPlayers: 4,
    timeout: 300000,
  },
};

// âœ… åŒ¯å‡ºé…ç½®
export const firebaseConfig = {
  apiKey: process.env.FIREBASE_API_KEY,
  authDomain: process.env.FIREBASE_AUTH_DOMAIN,
};
```

<!-- ============================================================ -->

<a id="typescript-å‹åˆ¥å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ“˜ TypeScript å‹åˆ¥å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ é«˜

**é©ç”¨ç¯„åœ**ï¼šTypeScript å°ˆæ¡ˆã€JSDoc å‹åˆ¥å®šç¾©

#### Interface å‘½å

```typescript
// âœ… Interface ä½¿ç”¨ PascalCase
interface PlayerData {
  id: string;
  name: string;
  score: number;
}

interface RoomSettings {
  maxPlayers: number;
  hasPassword: boolean;
}

interface GameState {
  status: "waiting" | "playing" | "finished";
  players: PlayerData[];
}

// âŒ é¿å…
interface playerData {} // å°å¯«é–‹é ­
interface IPlayerData {} // é¿å… I å‰ç¶´ï¼ˆèˆŠæ…£ä¾‹ï¼‰
interface Player_Data {} // é¿å…åº•ç·š
```

#### Type Alias å‘½å

```typescript
// âœ… Type ä½¿ç”¨ PascalCase
type UserId = string;
type RoomCode = string;
type GameStatus = "waiting" | "playing" | "finished";
type PlayerList = PlayerData[];

// âœ… å‡½å¼å‹åˆ¥
type EventHandler = (event: CustomEvent) => void;
type DataFetcher<T> = () => Promise<T>;

// âŒ é¿å…
type userId = string; // å°å¯«é–‹é ­
type ROOM_CODE = string; // å…¨å¤§å¯«ï¼ˆå¸¸æ•¸æ‰ç”¨ï¼‰
```

#### Enum å‘½å

```typescript
// âœ… Enum åç¨±ç”¨ PascalCaseï¼Œæˆå“¡ç”¨ UPPER_SNAKE_CASE
enum GameStatus {
  WAITING = "waiting",
  PLAYING = "playing",
  FINISHED = "finished",
}

enum PlayerRole {
  HOST = "host",
  PLAYER = "player",
  OBSERVER = "observer",
}

// âœ… ä½¿ç”¨
const status: GameStatus = GameStatus.WAITING;

// âŒ é¿å…
enum gameStatus {} // å°å¯«é–‹é ­
enum GameStatus {
  waiting = "waiting", // æˆå“¡æ‡‰è©²å¤§å¯«
  Playing = "playing", // ä¸è¦ç”¨ PascalCase
}
```

#### æ³›å‹å‘½å

```typescript
// âœ… ç°¡å–®æ³›å‹ç”¨å–®å­—æ¯ï¼ˆæ…£ä¾‹ï¼‰
function getData<T>(id: string): T {}
function mapValues<K, V>(map: Map<K, V>): V[] {}

// âœ… è¤‡é›œæ³›å‹ç”¨å®Œæ•´ PascalCase
function createManager<TData, TConfig>(config: TConfig): Manager<TData> {}

// âœ… å¸¸è¦‹æ³›å‹å­—æ¯
// T = Typeï¼ˆé€šç”¨å‹åˆ¥ï¼‰
// K = Keyï¼ˆéµï¼‰
// V = Valueï¼ˆå€¼ï¼‰
// E = Elementï¼ˆå…ƒç´ ï¼‰
// R = Resultï¼ˆçµæœï¼‰

// âœ… èªæ„åŒ–æ³›å‹
interface Repository<TEntity> {
  findById(id: string): Promise<TEntity>;
}

class RoomRepository implements Repository<RoomData> {}
```

#### JSDoc å‹åˆ¥è¨»è§£

```javascript
// âœ… JSDoc ä¸­çš„å‹åˆ¥å®šç¾©ä¹Ÿç”¨ PascalCase
/**
 * @typedef {Object} PlayerData
 * @property {string} id
 * @property {string} name
 * @property {number} score
 */

/**
 * @typedef {'waiting'|'playing'|'finished'} GameStatus
 */

/**
 * å–å¾—ç©å®¶è³‡æ–™
 * @param {string} playerId
 * @returns {Promise<PlayerData>}
 */
function getPlayerData(playerId) {}
```

#### Union Type å‘½å

```typescript
// âœ… Union Type ç”¨ PascalCase
type Result<T> = Success<T> | Error;
type AsyncState<T> = Loading | Success<T> | Failed;

// âœ… å­—é¢é‡è¯åˆï¼ˆç”¨æ–¼ç‹€æ…‹ï¼‰
type GameStatus = "waiting" | "playing" | "finished";
type HttpMethod = "GET" | "POST" | "PUT" | "DELETE";
```

<!-- ============================================================ -->

<a id="è·¯å¾‘url-å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ—‚ï¸ è·¯å¾‘/URL å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

#### æª”æ¡ˆè·¯å¾‘å¸¸æ•¸

```javascript
// âœ… æª”æ¡ˆè·¯å¾‘ç”¨ UPPER_SNAKE_CASEï¼ˆå­—ä¸²å¸¸æ•¸ï¼‰
const ASSETS_PATH = "/assets/images/";
const CONFIG_FILE_PATH = "./config/firebase-config.js";
const DATA_DIR = "./data/";
const BACKUP_PATH = "/backup/rooms/";

// âœ… è·¯å¾‘çµ„åˆå‡½å¼
const getAssetPath = (filename) => `${ASSETS_PATH}${filename}`;
const getUserDataPath = (userId) => `./data/users/${userId}.json`;
```

#### API ç«¯é»å‘½å

```javascript
// âœ… REST API ç«¯é»ï¼šè¤‡æ•¸åè© + kebab-case
const API_ENDPOINTS = {
  ROOMS: "/api/rooms", // è¤‡æ•¸
  PLAYERS: "/api/players", // è¤‡æ•¸
  USER_PROFILE: "/api/user-profile", // kebab-case
  GAME_SESSIONS: "/api/game-sessions", // è¤‡æ•¸ + kebab
  LEADERBOARD: "/api/leaderboard", // å–®æ•¸ï¼ˆé›†åˆæ¦‚å¿µï¼‰
};

// âœ… å‹•æ…‹è·¯å¾‘å‡½å¼
const getRoomUrl = (roomCode) => `/api/rooms/${roomCode}`;
const getPlayerUrl = (roomCode, playerId) =>
  `/api/rooms/${roomCode}/players/${playerId}`;

// âŒ é¿å…
const API_ENDPOINTS = {
  ROOM: "/api/room", // âŒ æ‡‰è©²ç”¨è¤‡æ•¸
  user_profile: "/api/user", // âŒ å¸¸æ•¸æ‡‰è©²å¤§å¯«
  Players: "/api/Players", // âŒ URL è·¯å¾‘å°å¯«
};
```

#### URL æŸ¥è©¢åƒæ•¸å‘½å

```javascript
// âœ… æŸ¥è©¢åƒæ•¸ç”¨ camelCase æˆ– snake_caseï¼ˆä¿æŒä¸€è‡´ï¼‰
const searchParams = new URLSearchParams({
  roomCode: "ABC12", // camelCaseï¼ˆå»ºè­°ï¼‰
  maxPlayers: 10,
  hasPassword: true,
});

// âœ… æˆ–çµ±ä¸€ç”¨ snake_caseï¼ˆREST API å¸¸è¦‹ï¼‰
const apiParams = {
  room_code: "ABC12",
  max_players: 10,
  has_password: true,
};

// âš ï¸ é¸æ“‡ä¸€ç¨®é¢¨æ ¼å¾Œå…¨å°ˆæ¡ˆä¿æŒä¸€è‡´
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸª äº‹ä»¶åç¨±ç´°åŒ–è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

#### è‡ªè¨‚äº‹ä»¶å‰ç¶´ï¼ˆé¿å…è¡çªï¼‰

```javascript
// âœ… è‡ªè¨‚äº‹ä»¶åŠ  app: å‰ç¶´ï¼ˆé¿å…èˆ‡åŸç”Ÿ DOM äº‹ä»¶è¡çªï¼‰
const CUSTOM_EVENTS = {
  ROOM_CREATED: "app:room-created",
  ROOM_UPDATED: "app:room-updated",
  PLAYER_JOINED: "app:player-joined",
  GAME_STARTED: "app:game-started",
};

// âœ… è§¸ç™¼äº‹ä»¶
document.dispatchEvent(
  new CustomEvent("app:room-created", {
    detail: { roomCode: "ABC12" },
  }),
);

// âŒ é¿å…ï¼ˆå¯èƒ½èˆ‡åŸç”Ÿäº‹ä»¶è¡çªï¼‰
const EVENTS = {
  CLICK: "click", // âŒ èˆ‡åŸç”Ÿäº‹ä»¶é‡å
  CHANGE: "change", // âŒ èˆ‡åŸç”Ÿäº‹ä»¶é‡å
  LOAD: "load", // âŒ èˆ‡åŸç”Ÿäº‹ä»¶é‡å
};
```

#### WebSocket/å¯¦æ™‚äº‹ä»¶å‘½å

```javascript
// âœ… WebSocket äº‹ä»¶ï¼šåè©:éå»å¼
const SOCKET_EVENTS = {
  // æˆ¿é–“äº‹ä»¶
  ROOM_CREATED: "room:created",
  ROOM_UPDATED: "room:updated",
  ROOM_DELETED: "room:deleted",

  // ç©å®¶äº‹ä»¶
  PLAYER_JOINED: "player:joined",
  PLAYER_LEFT: "player:left",
  PLAYER_READY: "player:ready",

  // éŠæˆ²äº‹ä»¶
  GAME_STARTED: "game:started",
  GAME_PAUSED: "game:paused",
  GAME_ENDED: "game:ended",
};

// âœ… Firebase ç›£è½
onSnapshot(roomRef, (snapshot) => {
  emit("room:updated", snapshot.data());
});
```

#### äº‹ä»¶å‘½åç©ºé–“

```javascript
// âœ… ä½¿ç”¨å‘½åç©ºé–“çµ„ç¹”äº‹ä»¶
const EVENTS = {
  // ä½¿ç”¨è€…å‘½åç©ºé–“
  USER: {
    LOGIN: "user:login",
    LOGOUT: "user:logout",
    PROFILE_UPDATED: "user:profile-updated",
  },

  // æˆ¿é–“å‘½åç©ºé–“
  ROOM: {
    CREATED: "room:created",
    JOINED: "room:joined",
    LEFT: "room:left",
  },

  // éŠæˆ²å‘½åç©ºé–“
  GAME: {
    STARTED: "game:started",
    ANSWER_SUBMITTED: "game:answer-submitted",
    ROUND_ENDED: "game:round-ended",
  },
};
```

<!-- ============================================================ -->

<a id="æ­£å‰‡è¡¨é”å¼å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ” æ­£å‰‡è¡¨é”å¼å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

```javascript
// âœ… Regex è®Šæ•¸ç”¨ UPPER_SNAKE_CASE + _REGEX æˆ– _PATTERN å¾Œç¶´
const ROOM_CODE_REGEX = /^[A-Z0-9]{5}$/;
const EMAIL_REGEX = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
const PHONE_NUMBER_REGEX = /^09\d{8}$/;
const URL_REGEX = /^https?:\/\/.+/;

// âœ… æˆ–ç”¨ PATTERN å¾Œç¶´
const VALID_CHARS_PATTERN = /^[A-Za-z0-9]+$/;
const DATE_FORMAT_PATTERN = /^\d{4}-\d{2}-\d{2}$/;

// âœ… è¤‡é›œæ­£å‰‡åŠ è¨»è§£
const PASSWORD_REGEX = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
// è‡³å°‘ 8 ä½ï¼ŒåŒ…å«å¤§å°å¯«å­—æ¯å’Œæ•¸å­—

// âœ… ä½¿ç”¨ç¯„ä¾‹
function validateRoomCode(code) {
  return ROOM_CODE_REGEX.test(code);
}

// âŒ é¿å…
const roomCodeRegex = /^[A-Z0-9]{5}$/; // âŒ æ‡‰è©²ç”¨å¤§å¯«
const regex1 = /^\d+$/; // âŒ å‘½åç„¡æ„ç¾©
const re = /test/; // âŒ éåº¦ç¸®å¯«
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âŒ éŒ¯èª¤é¡åˆ¥å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

#### è‡ªè¨‚éŒ¯èª¤é¡åˆ¥

```javascript
// âœ… è‡ªè¨‚éŒ¯èª¤é¡åˆ¥ï¼šPascalCase + Error å¾Œç¶´
class RoomNotFoundError extends Error {
  constructor(roomCode) {
    super(`æ‰¾ä¸åˆ°æˆ¿é–“ä»£ç¢¼ï¼š${roomCode}`);
    this.name = "RoomNotFoundError";
    this.roomCode = roomCode;
  }
}

class InvalidCodeError extends Error {
  constructor(code) {
    super(`æˆ¿é–“ä»£ç¢¼æ ¼å¼éŒ¯èª¤ï¼š${code}`);
    this.name = "InvalidCodeError";
  }
}

class NetworkError extends Error {
  constructor(message, statusCode) {
    super(message);
    this.name = "NetworkError";
    this.statusCode = statusCode;
  }
}

class AuthenticationError extends Error {
  constructor() {
    super("ä½¿ç”¨è€…æœªç™»å…¥");
    this.name = "AuthenticationError";
  }
}

// âœ… ä½¿ç”¨è‡ªè¨‚éŒ¯èª¤
try {
  const room = await getRoomData(roomCode);
  if (!room) {
    throw new RoomNotFoundError(roomCode);
  }
} catch (error) {
  if (error instanceof RoomNotFoundError) {
    showError(`æˆ¿é–“ä¸å­˜åœ¨ï¼š${error.roomCode}`);
  } else if (error instanceof NetworkError) {
    showError(`ç¶²è·¯éŒ¯èª¤ (${error.statusCode})`);
  }
}
```

#### éŒ¯èª¤è¨Šæ¯å¸¸æ•¸

```javascript
// âœ… éŒ¯èª¤è¨Šæ¯å¸¸æ•¸
const ERROR_MESSAGES = {
  ROOM_NOT_FOUND: "æ‰¾ä¸åˆ°æŒ‡å®šçš„æˆ¿é–“",
  INVALID_CODE: "æˆ¿é–“ä»£ç¢¼æ ¼å¼éŒ¯èª¤",
  ROOM_FULL: "æˆ¿é–“å·²æ»¿",
  UNAUTHORIZED: "æ²’æœ‰æ¬Šé™åŸ·è¡Œæ­¤æ“ä½œ",
  NETWORK_ERROR: "ç¶²è·¯é€£ç·šç•°å¸¸ï¼Œè«‹ç¨å¾Œå†è©¦",
  TIMEOUT: "æ“ä½œé€¾æ™‚",
  INVALID_INPUT: "è¼¸å…¥æ ¼å¼ä¸æ­£ç¢º",
};

// âœ… ä½¿ç”¨éŒ¯èª¤è¨Šæ¯
if (!isValidCode(code)) {
  throw new Error(ERROR_MESSAGES.INVALID_CODE);
}
```

<!-- ============================================================ -->

<a id="reactvue-hook-å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âš›ï¸ React/Vue Hook å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”„ ä½

**é©ç”¨ç¯„åœ**ï¼šReact Hooks / Vue 3 Composables

#### React Hooks å‘½å

```javascript
// âœ… React Hooksï¼šuse é–‹é ­ + camelCase
function useRoomData(roomCode) {
  const [room, setRoom] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchRoomData(roomCode).then(setRoom);
  }, [roomCode]);

  return { room, loading };
}

function usePlayerList(roomCode) {
  // ...
}

function useAuth() {
  // ...
}

function useLocalStorage(key, initialValue) {
  // ...
}

// âœ… ä½¿ç”¨ Hook
function RoomComponent({ roomCode }) {
  const { room, loading } = useRoomData(roomCode);
  const { players } = usePlayerList(roomCode);

  // ...
}

// âŒ é¿å…
function getRoomData() {} // âŒ Hook å¿…é ˆ use é–‹é ­
function UseRoomData() {} // âŒ ä¸è¦ç”¨ PascalCase
function use_room_data() {} // âŒ ä¸è¦ç”¨ snake_case
```

#### Vue 3 Composables å‘½å

```javascript
// âœ… Vue Composablesï¼šuse é–‹é ­ + camelCase
import { ref, computed } from "vue";

export function useRoomData(roomCode) {
  const room = ref(null);
  const loading = ref(true);

  const fetchRoom = async () => {
    loading.value = true;
    room.value = await getRoomData(roomCode);
    loading.value = false;
  };

  return {
    room,
    loading,
    fetchRoom,
  };
}

export function useFirebaseAuth() {
  // ...
}
```

<!-- ============================================================ -->

<a id="è§£æ§‹è³¦å€¼å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ”€ è§£æ§‹è³¦å€¼å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”„ ä½

#### é¿å…è®Šæ•¸åè¡çª

```javascript
// âœ… è§£æ§‹é‡å‘½åï¼ˆé¿å…è¡çªï¼‰
const { name: roomName } = room;
const { name: playerName } = player;
const { id: roomId } = room;
const { id: playerId } = player;

console.log(roomName, playerName); // ä¸æœƒè¡çª

// âŒ é¿å…ï¼ˆè®Šæ•¸åè¡çªï¼‰
const { name } = room;
const { name } = player; // âŒ éŒ¯èª¤ï¼šname å·²å®£å‘Š

// âœ… é™£åˆ—è§£æ§‹å‘½åæ¸…æ™°
const [firstPlayer, secondPlayer, thirdPlayer] = players;
const [currentRoom, ...otherRooms] = rooms;

// âŒ é¿å…ç„¡æ„ç¾©çš„å‘½å
const [a, b, c] = players; // âŒ çœ‹ä¸æ‡‚ a, b, c æ˜¯ä»€éº¼
```

#### æ·±å±¤è§£æ§‹

```javascript
// âœ… æ·±å±¤è§£æ§‹ä¿æŒèªæ„
const {
  game: { status: gameStatus, score: gameScore },
  player: { name: playerName, level: playerLevel },
} = roomData;

// âœ… è¨­å®šé è¨­å€¼
const { maxPlayers = 10, hasPassword = false, questionsCount = 5 } = options;
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ”§ è‡¨æ™‚/æš«å­˜è®Šæ•¸å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”„ ä½

**æ ¸å¿ƒåŸå‰‡**ï¼šæœ€å°åŒ–è‡¨æ™‚è®Šæ•¸ä½¿ç”¨ï¼Œå„ªå…ˆä½¿ç”¨èªæ„åŒ–å‘½å

```javascript
// âœ… å„ªå…ˆä½¿ç”¨èªæ„åŒ–å‘½åï¼ˆè€Œé tempï¼‰
const playersBackup = [...players]; // è€Œé tempPlayers
const previousScore = player.score; // è€Œé tempScore
const originalValue = input.value; // è€Œé temp

// âš ï¸ å¯æ¥å—çš„ temp ä½¿ç”¨ï¼ˆéå¸¸çŸ­æœŸï¼‰
const tempPlayers = [...players];
tempPlayers.sort((a, b) => b.score - a.score);
const topThree = tempPlayers.slice(0, 3);

// âœ… æ›´å¥½çš„æ–¹å¼ï¼šç›´æ¥ chain
const topThree = [...players].sort((a, b) => b.score - a.score).slice(0, 3);

// âœ… äº¤æ›è®Šæ•¸ï¼ˆè§£æ§‹è³¦å€¼ï¼‰
[a, b] = [b, a]; // ä¸éœ€è¦ temp

// âŒ èˆŠå¼äº¤æ›ï¼ˆé¿å…ï¼‰
const temp = a;
a = b;
b = temp;

// âœ… ä¸­é–“è¨ˆç®—çµæœï¼ˆæè¿°æ€§å‘½åï¼‰
const subtotal = items.reduce((sum, item) => sum + item.price, 0);
const tax = subtotal * TAX_RATE;
const total = subtotal + tax;

// âŒ é¿å…
const temp1 = items.reduce((sum, item) => sum + item.price, 0);
const temp2 = temp1 * TAX_RATE;
const result = temp1 + temp2;
```

<!-- ============================================================ -->

<a id="reactvue-å…ƒä»¶å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âš›ï¸ React/Vue å…ƒä»¶å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ é«˜

**é©ç”¨ç¯„åœ**ï¼šReact / Vue / Preact ç­‰å…ƒä»¶åŒ–æ¡†æ¶

#### å…ƒä»¶æª”æ¡ˆå‘½å

```javascript
// âœ… React/Vue å…ƒä»¶æª”æ¡ˆï¼šPascalCase
PlayerCard.jsx; // React å…ƒä»¶
RoomList.vue; // Vue å…ƒä»¶
GameController.jsx; // æ§åˆ¶å™¨å…ƒä»¶
UserProfile.tsx; // TypeScript å…ƒä»¶

// âœ… å…ƒä»¶è³‡æ–™å¤¾çµæ§‹
src / components / PlayerCard / PlayerCard.jsx; // ä¸»å…ƒä»¶
PlayerCard.css; // æ¨£å¼ï¼ˆæˆ– .module.cssï¼‰
PlayerCard.test.js; // æ¸¬è©¦
index.js; // åŒ¯å‡º

// âŒ é¿å…
player - card.jsx; // âŒ å…ƒä»¶æ‡‰è©²ç”¨ PascalCase
playerCard.jsx; // âŒ å…ƒä»¶æ‡‰è©²ç”¨ PascalCase
PLAYER_CARD.jsx; // âŒ ä¸è¦å…¨å¤§å¯«
```

#### å…ƒä»¶å‘½åæ…£ä¾‹

```javascript
// âœ… åŠŸèƒ½å‹å…ƒä»¶ï¼ˆæè¿°åŠŸèƒ½ï¼‰
function PlayerCard() {} // å¡ç‰‡å…ƒä»¶
function RoomList() {} // åˆ—è¡¨å…ƒä»¶
function GameTimer() {} // è¨ˆæ™‚å™¨å…ƒä»¶

// âœ… å®¹å™¨å…ƒä»¶ï¼ˆContainer å¾Œç¶´ï¼‰
function PlayerCardContainer() {} // è™•ç†è³‡æ–™é‚è¼¯
function RoomListContainer() {} // è™•ç†ç‹€æ…‹ç®¡ç†

// âœ… é é¢å…ƒä»¶ï¼ˆPage å¾Œç¶´ï¼‰
function RoomPage() {} // æˆ¿é–“é é¢
function GamePage() {} // éŠæˆ²é é¢

// âœ… ä½ˆå±€å…ƒä»¶ï¼ˆLayout å¾Œç¶´ï¼‰
function MainLayout() {} // ä¸»ä½ˆå±€
function GameLayout() {} // éŠæˆ²ä½ˆå±€

// âœ… HOCï¼ˆé«˜éšå…ƒä»¶ï¼šwith å‰ç¶´ï¼‰
function withAuth(Component) {} // èªè­‰ HOC
function withLoading(Component) {} // è¼‰å…¥ HOC
```

#### å…ƒä»¶è®Šæ•¸å‘½å

```javascript
// âœ… å…ƒä»¶è®Šæ•¸ç”¨ PascalCase
const PlayerCard = () => {};
const RoomList = () => {};

// âœ… å…ƒä»¶å¼•ç”¨ä¹Ÿç”¨ PascalCase
import PlayerCard from "./PlayerCard";
import { RoomList, GameTimer } from "./components";

// âœ… å‹•æ…‹å…ƒä»¶
const ComponentMap = {
  PlayerCard: PlayerCard,
  RoomList: RoomList,
};

const DynamicComponent = ComponentMap[componentType];
```

<!-- ============================================================ -->

<a id="props-å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ“‹ å…ƒä»¶ Props å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸ”´ é«˜

**é©ç”¨ç¯„åœ**ï¼šReact / Vue props å‚³é

**æœ¬ç¯€å…§å®¹**ï¼š

- [Props å‘½åæ…£ä¾‹](#props-å‘½åæ…£ä¾‹) - åŸºæœ¬ Props å‘½å (camelCase)
- [äº‹ä»¶è™•ç†å™¨ Props](#äº‹ä»¶è™•ç†å™¨-props-å‘½å) - on + åè© + å‹•è©
- [å›èª¿å‡½å¼ Props](#äº‹ä»¶è™•ç†å™¨-props-å‘½å) - onSuccess/onError/onChange
- [å¸ƒæ— Props](#å¸ƒæ—-props-å‘½å) - is/has/can å‰ç¶´
- [Render Props](#äº‹ä»¶è™•ç†å™¨-props-å‘½å) - render + åè©

<a id="props-å‘½åæ…£ä¾‹"></a>

#### Props å‘½åæ…£ä¾‹

```javascript
// âœ… Props ç”¨ camelCase
function PlayerCard({
  playerData, // è³‡æ–™ç‰©ä»¶
  isActive, // å¸ƒæ—å€¼ï¼ˆå‰ç¶´ï¼‰
  maxPlayers, // æ•¸å­—
  onPlayerClick, // äº‹ä»¶è™•ç†å™¨ï¼ˆon å‰ç¶´ï¼‰
  onScoreUpdate, // äº‹ä»¶è™•ç†å™¨
  className, // CSS é¡åˆ¥åç¨±
  children, // React children
}) {}

// âœ… Vue Props å®šç¾©
export default {
  props: {
    playerData: Object,
    isActive: Boolean,
    maxPlayers: Number,
    onPlayerClick: Function,
  },
};

// âŒ é¿å…
function PlayerCard({
  player_data, // âŒ ä¸è¦ç”¨ snake_case
  IsActive, // âŒ ä¸è¦ç”¨ PascalCase
  click, // âŒ äº‹ä»¶è™•ç†å™¨æ‡‰è©²åŠ  on å‰ç¶´
  callback, // âŒ å‘½åä¸æ˜ç¢º
}) {}
```

<a id="äº‹ä»¶è™•ç†å™¨-props-å‘½å"></a>

#### äº‹ä»¶è™•ç†å™¨ Props å‘½å

```javascript
// âœ… äº‹ä»¶è™•ç†å™¨ Propsï¼šon + åè© + å‹•è©
function Button({
  onClick, // é»æ“Šäº‹ä»¶
  onChange, // è®Šæ›´äº‹ä»¶
  onSubmit, // æäº¤äº‹ä»¶
  onPlayerJoin, // ç©å®¶åŠ å…¥äº‹ä»¶
  onRoomCreate, // æˆ¿é–“å»ºç«‹äº‹ä»¶
  onScoreUpdate, // åˆ†æ•¸æ›´æ–°äº‹ä»¶
}) {}

// âœ… å›èª¿å‡½å¼ Props å‘½å
function DataFetcher({
  onSuccess, // æˆåŠŸå›èª¿
  onError, // éŒ¯èª¤å›èª¿
  onComplete, // å®Œæˆå›èª¿
  onRetry, // é‡è©¦å›èª¿
}) {}

// âœ… å…ƒä»¶å…§éƒ¨äº‹ä»¶è™•ç†å™¨ï¼šhandle + åè© + å‹•è©
function PlayerCard({ onPlayerClick }) {
  const handlePlayerClick = (event) => {
    // å…§éƒ¨è™•ç†
    onPlayerClick?.(event); // å‘¼å« prop
  };

  return <div onClick={handlePlayerClick}>...</div>;
}
```

#### Props å‹åˆ¥å®šç¾©

```javascript
// âœ… React PropTypes
import PropTypes from 'prop-types';

PlayerCard.propTypes = {
  playerData: PropTypes.object.isRequired,
  isActive: PropTypes.bool,
  maxPlayers: PropTypes.number,
  onPlayerClick: PropTypes.func,
  children: PropTypes.node
};

// âœ… TypeScript Interfaceï¼ˆProps å¾Œç¶´ï¼‰
interface PlayerCardProps {
  playerData: PlayerData;
  isActive?: boolean;
  maxPlayers?: number;
  onPlayerClick?: (playerId: string) => void;
  children?: React.ReactNode;
}

function PlayerCard(props: PlayerCardProps) { }

// âœ… æˆ–ä½¿ç”¨è§£æ§‹
function PlayerCard({
  playerData,
  isActive = false,
  maxPlayers = 10,
  onPlayerClick,
  children
}: PlayerCardProps) { }
```

<a id="å¸ƒæ—-props-å‘½å"></a>

#### å¸ƒæ— Props å‘½å

```javascript
// âœ… å¸ƒæ— Props ç”¨å‰ç¶´
function Modal({
  isOpen, // æ˜¯å¦é–‹å•Ÿ
  isLoading, // æ˜¯å¦è¼‰å…¥ä¸­
  hasError, // æ˜¯å¦æœ‰éŒ¯èª¤
  canClose, // æ˜¯å¦å¯é—œé–‰
  shouldAutoClose, // æ˜¯å¦è‡ªå‹•é—œé–‰
}) {}

// âŒ é¿å…
function Modal({
  open, // âŒ æ‡‰è©²ç”¨ isOpen
  loading, // âŒ æ‡‰è©²ç”¨ isLoading
  error, // âŒ æ‡‰è©²ç”¨ hasError
  closable, // âŒ æ‡‰è©²ç”¨ canClose
}) {}
```

#### Render Props å‘½å

```javascript
// âœ… Render Propsï¼šrender + åè©
function DataProvider({
  renderLoading, // è¼‰å…¥æ™‚æ¸²æŸ“
  renderError, // éŒ¯èª¤æ™‚æ¸²æŸ“
  renderData, // è³‡æ–™æ¸²æŸ“
  children,
}) {}

// âœ… æˆ–ä½¿ç”¨ children as function
function DataProvider({ children }) {
  return children({ data, loading, error });
}

// âœ… ä½¿ç”¨
<DataProvider>
  {({ data, loading }) => (loading ? <Loading /> : <List data={data} />)}
</DataProvider>;
```

<!-- ============================================================ -->

<a id="è³‡æ–™åº«æ¬„ä½å‘½åæ“´å……è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ—„ï¸ è³‡æ–™åº«æ¬„ä½å‘½åæ“´å±•è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

**é©ç”¨ç¯„åœ**ï¼šFirebase / MongoDB / SQL è³‡æ–™åº«

#### Firebase æ¬„ä½å‘½åï¼ˆå·²æ¶µè“‹ï¼Œè£œå……ç´°ç¯€ï¼‰

```javascript
// âœ… Firebase æ¬„ä½ï¼šcamelCaseï¼ˆJavaScript é¢¨æ ¼ï¼‰
const roomData = {
  roomCode: "ABC12", // camelCase
  roomName: "æˆ‘çš„æˆ¿é–“",
  maxPlayers: 10,
  hasPassword: false,
  createdAt: Timestamp.now(),
  updatedAt: Timestamp.now(),
};

// âœ… å·¢ç‹€ç‰©ä»¶ä¹Ÿç”¨ camelCase
const playerData = {
  userId: "user123",
  profile: {
    displayName: "ç©å®¶A", // camelCase
    avatarUrl: "/path/to/avatar",
    totalScore: 100,
  },
  gameStats: {
    gamesPlayed: 10,
    gamesWon: 5,
  },
};
```

#### MongoDB/Mongoose æ¬„ä½å‘½å

```javascript
// âœ… MongoDB Schemaï¼šcamelCaseï¼ˆèˆ‡ JS ä¸€è‡´ï¼‰
const roomSchema = new Schema({
  roomCode: String, // camelCase
  roomName: String,
  maxPlayers: Number,
  hasPassword: Boolean,
  createdAt: { type: Date, default: Date.now },
  updatedAt: Date,
});

// âœ… è™›æ“¬æ¬„ä½ï¼ˆVirtualï¼‰
roomSchema.virtual("playerCount").get(function () {
  return this.players.length;
});
```

#### SQL/é—œè¯å¼è³‡æ–™åº«å‘½å

```sql
-- âœ… SQL è¡¨æ ¼ï¼šè¤‡æ•¸ + snake_case
CREATE TABLE rooms (
  room_id VARCHAR(5) PRIMARY KEY,
  room_name VARCHAR(100),
  max_players INT DEFAULT 10,
  has_password BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP
);

-- âœ… é—œè¯è¡¨æ ¼ï¼šè¤‡æ•¸ + snake_case
CREATE TABLE room_players (
  room_id VARCHAR(5),
  user_id VARCHAR(50),
  joined_at TIMESTAMP,
  PRIMARY KEY (room_id, user_id)
);
```

#### å‰å¾Œç«¯æ¬„ä½å‘½åè½‰æ›

```javascript
// âœ… API Response è½‰æ›ï¼ˆsnake_case â†’ camelCaseï¼‰
function convertToCamelCase(dbData) {
  return {
    roomCode: dbData.room_code, // SQL: snake_case
    roomName: dbData.room_name, // JavaScript: camelCase
    maxPlayers: dbData.max_players,
    hasPassword: dbData.has_password,
    createdAt: dbData.created_at,
  };
}

// âœ… API Request è½‰æ›ï¼ˆcamelCase â†’ snake_caseï¼‰
function convertToSnakeCase(jsData) {
  return {
    room_code: jsData.roomCode,
    room_name: jsData.roomName,
    max_players: jsData.maxPlayers,
    has_password: jsData.hasPassword,
    created_at: jsData.createdAt,
  };
}
```

#### æ™‚é–“æˆ³è¨˜æ¬„ä½å‘½å

```javascript
// âœ… æ™‚é–“æˆ³è¨˜çµ±ä¸€å‘½åæ…£ä¾‹
const entity = {
  createdAt: Timestamp.now(), // å»ºç«‹æ™‚é–“
  updatedAt: Timestamp.now(), // æ›´æ–°æ™‚é–“
  deletedAt: null, // åˆªé™¤æ™‚é–“ï¼ˆè»Ÿåˆªé™¤ï¼‰
  publishedAt: null, // ç™¼å¸ƒæ™‚é–“
  expiredAt: null, // éæœŸæ™‚é–“
  lastLoginAt: Timestamp.now(), // æœ€å¾Œç™»å…¥æ™‚é–“
};

// âŒ é¿å…
const entity = {
  created: Date.now(), // âŒ æ‡‰è©²åŠ  At å¾Œç¶´
  modified: Date.now(), // âŒ æ‡‰è©²ç”¨ updatedAt
  timestamp: Date.now(), // âŒ å‘½åä¸æ˜ç¢º
};
```

<!-- ============================================================ -->

<a id="gettersetter-å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ Getter/Setter å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šâš ï¸ ä¸­

**é©ç”¨ç¯„åœ**ï¼šES6 Class / ç‰©ä»¶å­˜å–å™¨

**æœ¬ç¯€å…§å®¹**ï¼š

- [ES6 Class Getter/Setter](#class-gettersetter-å‘½å) - ä½¿ç”¨åè©ï¼Œä¸åŠ  get/set å‰ç¶´
- [å¸ƒæ— Getter](#class-gettersetter-å‘½å) - ä½¿ç”¨ is/has/can å‰ç¶´
- [å”¯è®€å±¬æ€§](#class-gettersetter-å‘½å) - åƒ…æä¾› getter
- [å‚³çµ± Getter/Setter æ–¹æ³•](#å‚³çµ±-gettersetter-æ–¹æ³•) - ä½¿ç”¨ get/set å‰ç¶´
- [Vue Computed å±¬æ€§](#vue-computed-properties) - ä½¿ç”¨åè©
- [React useMemo](#react-usememoé¡ä¼¼-computed) - Memoized å€¼å‘½å

<a id="class-gettersetter-å‘½å"></a>

#### Class Getter/Setter å‘½å

```javascript
// âœ… Getter/Setter ç”¨åè©ï¼ˆä¸ç”¨ get/set å‰ç¶´ï¼‰
class Player {
  constructor(name, score) {
    this._name = name;       // ç§æœ‰å±¬æ€§ç”¨åº•ç·š
    this._score = score;
  }

  // âœ… Getterï¼šåè©
  get name() {
    return this._name;
  }

  // âœ… Setterï¼šåè©
  set name(value) {
    if (value.length > 0) {
      this._name = value;
    }
  }

  // âœ… å¸ƒæ— Getter ç”¨å‰ç¶´
  get isActive() {
    return this._score > 0;
  }

  // âœ… è¨ˆç®—å±¬æ€§
  get fullName() {
    return `${this._firstName} ${this._lastName}`;
  }

  // âœ… ä½¿ç”¨
  const player = new Player('Alice', 100);
  console.log(player.name);        // å‘¼å« getter
  player.name = 'Bob';             // å‘¼å« setter
  console.log(player.isActive);    // å‘¼å«å¸ƒæ— getter
}

// âŒ é¿å…
class Player {
  // âŒ ä¸è¦åœ¨ getter/setter ä¸­ä½¿ç”¨ get/set å‰ç¶´
  get getName() {                  // âŒ æ‡‰è©²ç”¨ get name()
    return this._name;
  }

  set setName(value) {             // âŒ æ‡‰è©²ç”¨ set name()
    this._name = value;
  }
}
```

#### å”¯è®€å±¬æ€§ï¼ˆåªæœ‰ Getterï¼‰

```javascript
// âœ… å”¯è®€å±¬æ€§ï¼šåªå®šç¾© getter
class Room {
  constructor(code) {
    this._roomCode = code;
    this._createdAt = Date.now();
  }

  // âœ… å”¯è®€å±¬æ€§
  get roomCode() {
    return this._roomCode; // ä¸æä¾› setter
  }

  get createdAt() {
    return this._createdAt; // ä¸æä¾› setter
  }

  // âœ… è¨ˆç®—å”¯è®€å±¬æ€§
  get age() {
    return Date.now() - this._createdAt;
  }
}

const room = new Room("ABC12");
console.log(room.roomCode); // âœ… å¯è®€å–
room.roomCode = "DEF34"; // âŒ ç„¡æ•ˆï¼ˆæ²’æœ‰ setterï¼‰
```

<a id="å‚³çµ±-gettersetter-æ–¹æ³•"></a>

#### å‚³çµ± Getter/Setter æ–¹æ³•

```javascript
// âœ… å‚³çµ±æ–¹æ³•ï¼ˆé ES6 getter/setterï¼‰ï¼šget/set å‰ç¶´
class Player {
  constructor(name) {
    this._name = name;
  }

  // âœ… å‚³çµ± getter æ–¹æ³•
  getName() {
    return this._name;
  }

  // âœ… å‚³çµ± setter æ–¹æ³•
  setName(value) {
    this._name = value;
  }

  // âœ… å¸ƒæ— getter æ–¹æ³•
  isActive() {
    return this._score > 0;
  }

  // âœ… ä½¿ç”¨
  const player = new Player('Alice');
  console.log(player.getName());   // å‘¼å«æ–¹æ³•
  player.setName('Bob');           // å‘¼å«æ–¹æ³•
}
```

<a id="vue-computed-properties"></a>

#### Vue Computed Properties

```javascript
// âœ… Vue Computedï¼šç”¨åè©
export default {
  data() {
    return {
      firstName: "John",
      lastName: "Doe",
    };
  },
  computed: {
    // âœ… Computed å±¬æ€§ç”¨åè©
    fullName() {
      return `${this.firstName} ${this.lastName}`;
    },

    // âœ… å¸ƒæ— computed ç”¨å‰ç¶´
    isComplete() {
      return this.firstName && this.lastName;
    },

    // âœ… Computed with getter/setter
    fullName: {
      get() {
        return `${this.firstName} ${this.lastName}`;
      },
      set(value) {
        const [first, last] = value.split(" ");
        this.firstName = first;
        this.lastName = last;
      },
    },
  },
};
```

<a id="react-usememoé¡ä¼¼-computed"></a>

#### React useMemoï¼ˆé¡ä¼¼ Computedï¼‰

```javascript
// âœ… React useMemoï¼šç”¨åè©
function PlayerCard({ firstName, lastName }) {
  // âœ… Memoized å€¼ç”¨åè©
  const fullName = useMemo(() => {
    return `${firstName} ${lastName}`;
  }, [firstName, lastName]);

  // âœ… å¸ƒæ— memoized å€¼ç”¨å‰ç¶´
  const isComplete = useMemo(() => {
    return firstName && lastName;
  }, [firstName, lastName]);

  return <div>{fullName}</div>;
}
```

<!-- ============================================================ -->

<a id="æ¨¡çµ„æª”æ¡ˆå‘½åå€åˆ¥è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ“¦ æ¨¡çµ„æª”æ¡ˆå‘½åå€åˆ¥è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸŸ¡ å»ºè­°

**æ ¸å¿ƒåŸå‰‡**ï¼šæ ¹æ“šè·è²¬å€åˆ† Service / Utils / Helpers / Constants æª”æ¡ˆå‘½å

#### Service æª”æ¡ˆå‘½åï¼ˆæ¥­å‹™é‚è¼¯ï¼‰

```javascript
// âœ… Service æª”æ¡ˆï¼šè™•ç†æ¥­å‹™é‚è¼¯ã€API å‘¼å«ã€è³‡æ–™å­˜å–
room - service.js; // æˆ¿é–“ç›¸é—œæ¥­å‹™é‚è¼¯
user - service.js; // ä½¿ç”¨è€…ç›¸é—œæ¥­å‹™é‚è¼¯
game - service.js; // éŠæˆ²ç›¸é—œæ¥­å‹™é‚è¼¯
auth - service.js; // èªè­‰æœå‹™

// âœ… Service å…§å®¹ç¯„ä¾‹
/**
 * æˆ¿é–“æœå‹™
 * è™•ç†æˆ¿é–“çš„ CRUD æ“ä½œã€æ¥­å‹™è¦å‰‡é©—è­‰
 */
export async function createRoom(roomData) {
  // æ¥­å‹™é‚è¼¯ï¼šé©—è­‰ã€å»ºç«‹ã€å„²å­˜
}

export async function getRoomByCode(code) {
  // è³‡æ–™å­˜å–é‚è¼¯
}
```

#### Utils æª”æ¡ˆå‘½åï¼ˆé€šç”¨å·¥å…·ï¼‰

```javascript
// âœ… Utils æª”æ¡ˆï¼šé€šç”¨å·¥å…·å‡½å¼ã€ç´”å‡½å¼ã€ç„¡æ¥­å‹™é‚è¼¯
string - utils.js; // å­—ä¸²è™•ç†å·¥å…·
date - utils.js; // æ—¥æœŸè™•ç†å·¥å…·
array - utils.js; // é™£åˆ—è™•ç†å·¥å…·
validation - utils.js; // é©—è­‰å·¥å…·

// âœ… æˆ–çµ±ä¸€æ”¾åœ¨ utils.js
utils.js; // é€šç”¨å·¥å…·é›†åˆ

// âœ… Utils å…§å®¹ç¯„ä¾‹
/**
 * æ ¼å¼åŒ–æ—¥æœŸ
 * @param {Date} date
 * @returns {string}
 */
export function formatDate(date) {
  // ç´”å‡½å¼ï¼Œç„¡å‰¯ä½œç”¨
  return date.toISOString().split("T")[0];
}

/**
 * é©—è­‰ Email
 * @param {string} email
 * @returns {boolean}
 */
export function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}
```

#### Helpers æª”æ¡ˆå‘½åï¼ˆè¼”åŠ©å‡½å¼ï¼‰

```javascript
// âœ… Helpers æª”æ¡ˆï¼šç‰¹å®šæ¨¡çµ„çš„è¼”åŠ©å‡½å¼ï¼Œæœ‰æ¥­å‹™ä¸Šä¸‹æ–‡
room - helpers.js; // æˆ¿é–“ç›¸é—œè¼”åŠ©å‡½å¼
game - helpers.js; // éŠæˆ²ç›¸é—œè¼”åŠ©å‡½å¼
player - helpers.js; // ç©å®¶ç›¸é—œè¼”åŠ©å‡½å¼

// âœ… Helpers å…§å®¹ç¯„ä¾‹
/**
 * è¨ˆç®—æˆ¿é–“å‰©é¤˜å®¹é‡
 * @param {Object} room
 * @returns {number}
 */
export function getRoomCapacity(room) {
  return room.maxPlayers - room.players.length;
}

/**
 * æª¢æŸ¥ç©å®¶æ˜¯å¦å¯åŠ å…¥æˆ¿é–“
 * @param {Object} room
 * @param {Object} player
 * @returns {boolean}
 */
export function canPlayerJoinRoom(room, player) {
  // æœ‰æ¥­å‹™ä¸Šä¸‹æ–‡çš„è¼”åŠ©åˆ¤æ–·
  return getRoomCapacity(room) > 0 && !room.hasPassword;
}
```

#### Constants æª”æ¡ˆå‘½å

```javascript
// âœ… Constants æª”æ¡ˆï¼šå¸¸æ•¸å®šç¾©
app - constants.js; // å…¨åŸŸæ‡‰ç”¨å¸¸æ•¸
room - constants.js; // æˆ¿é–“ç›¸é—œå¸¸æ•¸
game - constants.js; // éŠæˆ²ç›¸é—œå¸¸æ•¸

// âœ… Constants å…§å®¹ç¯„ä¾‹
export const MAX_PLAYERS = 10;
export const ROOM_EXPIRY_TIME = 3600000;
export const GAME_STATUS = {
  WAITING: "waiting",
  PLAYING: "playing",
  FINISHED: "finished",
};
```

#### æª”æ¡ˆå‘½åå°ç…§è¡¨

| æª”æ¡ˆé¡å‹  | å‘½å                    | è·è²¬                    | ç¯„ä¾‹                |
| --------- | ----------------------- | ----------------------- | ------------------- |
| Service   | `*-service.js`          | æ¥­å‹™é‚è¼¯ã€APIã€è³‡æ–™å­˜å– | `room-service.js`   |
| Utils     | `*-utils.js`            | é€šç”¨å·¥å…·ã€ç´”å‡½å¼        | `date-utils.js`     |
| Helpers   | `*-helpers.js`          | ç‰¹å®šæ¨¡çµ„è¼”åŠ©å‡½å¼        | `room-helpers.js`   |
| Constants | `*-constants.js`        | å¸¸æ•¸å®šç¾©                | `room-constants.js` |
| Types     | `*-types.js` / `*.d.ts` | å‹åˆ¥å®šç¾©                | `room-types.js`     |

#### æ¨¡çµ„ç´¢å¼•æª”æ¡ˆï¼ˆindex.jsï¼‰

```javascript
// âœ… index.jsï¼šçµ±ä¸€åŒ¯å‡ºæ¨¡çµ„å…§æ‰€æœ‰åŠŸèƒ½
// src/services/index.js
export * from "./room-service";
export * from "./user-service";
export * from "./game-service";

// âœ… æˆ–é¸æ“‡æ€§åŒ¯å‡º
export { createRoom, getRoomByCode } from "./room-service";
export { createUser, getUserById } from "./user-service";

// âœ… default export ç”¨æ–¼ä¸»è¦åŠŸèƒ½
export { default as RoomService } from "./room-service";
```

<!-- ============================================================ -->

<a id="éœæ…‹å·¥å» æ–¹æ³•å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ­ éœæ…‹å·¥å» æ–¹æ³•å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸŸ¡ å»ºè­°

**é©ç”¨ç¯„åœ**ï¼šé¡åˆ¥éœæ…‹æ–¹æ³•ã€è¨­è¨ˆæ¨¡å¼

#### å·¥å» æ–¹æ³•å‘½åæ…£ä¾‹

```javascript
// âœ… create ç³»åˆ—ï¼šå»ºç«‹æ–°å¯¦ä¾‹
class Room {
  static createInstance(options) {
    return new Room(options);
  }

  static createWithPassword(name, password) {
    return new Room({ name, hasPassword: true, password });
  }

  static createPublic(name) {
    return new Room({ name, hasPassword: false });
  }
}

// âœ… from ç³»åˆ—ï¼šå¾å…¶ä»–æ ¼å¼è½‰æ›
class Room {
  static fromJSON(json) {
    return new Room(JSON.parse(json));
  }

  static fromFirebase(snapshot) {
    return new Room(snapshot.data());
  }

  static fromObject(obj) {
    return new Room(obj);
  }
}

// âœ… getInstanceï¼šå–®ä¾‹æ¨¡å¼
class RoomManager {
  static #instance = null;

  static getInstance() {
    if (!RoomManager.#instance) {
      RoomManager.#instance = new RoomManager();
    }
    return RoomManager.#instance;
  }
}

// âœ… of ç³»åˆ—ï¼šå»ºç«‹åŒ…å«ç‰¹å®šå€¼çš„å¯¦ä¾‹
class PlayerList {
  static of(...players) {
    return new PlayerList(players);
  }
}

const list = PlayerList.of(player1, player2, player3);
```

#### éœæ…‹å±¬æ€§å‘½å

```javascript
// âœ… éœæ…‹å¸¸æ•¸ï¼šUPPER_SNAKE_CASE
class Room {
  static DEFAULT_MAX_PLAYERS = 10;
  static MIN_PLAYERS = 2;
  static EXPIRY_TIME_MS = 3600000;

  // âœ… éœæ…‹é…ç½®ç‰©ä»¶ï¼šcamelCase
  static defaultConfig = {
    maxPlayers: 10,
    hasPassword: false,
    isPublic: true,
  };
}
```

#### éœæ…‹æ–¹æ³• vs å¯¦ä¾‹æ–¹æ³•

```javascript
class Room {
  // âœ… éœæ…‹æ–¹æ³•ï¼šä¸ä¾è³´å¯¦ä¾‹ç‹€æ…‹
  static validateCode(code) {
    return /^[A-Z0-9]{5}$/.test(code);
  }

  static generateCode() {
    const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
    return Array.from(
      { length: 5 },
      () => chars[Math.floor(Math.random() * chars.length)],
    ).join("");
  }

  // âœ… å¯¦ä¾‹æ–¹æ³•ï¼šä¾è³´å¯¦ä¾‹ç‹€æ…‹
  addPlayer(player) {
    this.players.push(player);
  }

  isFull() {
    return this.players.length >= this.maxPlayers;
  }
}

// ä½¿ç”¨
const code = Room.generateCode(); // éœæ…‹æ–¹æ³•
const isValid = Room.validateCode(code); // éœæ…‹æ–¹æ³•

const room = new Room({ code });
room.addPlayer(player); // å¯¦ä¾‹æ–¹æ³•
console.log(room.isFull()); // å¯¦ä¾‹æ–¹æ³•
```

<!-- ============================================================ -->

<a id="è·¨æ¨¡çµ„é€šè¨Šç‰©ä»¶å‘½åè¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ”— è·¨æ¨¡çµ„é€šè¨Šç‰©ä»¶å‘½åè¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸŸ¡ å»ºè­°

**é©ç”¨ç¯„åœ**ï¼šå¤šæ¨¡çµ„æ¶æ§‹ã€æ¨¡çµ„é–“è³‡æ–™å‚³é

#### è·¨æ¨¡çµ„è³‡æ–™å‚³éç‰©ä»¶å‘½å

```javascript
// âœ… å‘½åæ ¼å¼ï¼š{ä¾†æºæ¨¡çµ„}{ç›®æ¨™æ¨¡çµ„}Data
// æˆ–ï¼š{è³‡æ–™é¡å‹}{ç”¨é€”}Data

// ç¯„ä¾‹ 1ï¼šé£²é£Ÿæ¨¡çµ„ â†’ è¨˜å¸³æ¨¡çµ„
const mealExpenseData = {
  sourceModule: "diet", // ä¾†æºæ¨¡çµ„
  sourceMealId: "meal123", // ä¾†æº ID
  date: "2026-02-09",
  mealType: "lunch",
  amount: 120,
  description: "åˆé¤ - é›è…¿ä¾¿ç•¶",
};

// ç¯„ä¾‹ 2ï¼šé£²é£Ÿæ¨¡çµ„ â†’ ä½œæ¯æ¨¡çµ„
const mealTimeData = {
  sourceModule: "diet",
  sourceMealId: "meal123",
  date: "2026-02-09",
  mealType: "lunch",
  time: Timestamp.now(),
};

// ç¯„ä¾‹ 3ï¼šå„æ¨¡çµ„ â†’ æ—¥è¨˜æ¨¡çµ„ï¼ˆæ¯æ—¥æ‘˜è¦ï¼‰
const dietDailySummary = {
  date: "2026-02-09",
  totalCalories: 1800,
  mealCount: 3,
  carbGoalMet: true,
};

const expenseDailySummary = {
  date: "2026-02-09",
  totalAmount: 320,
  transactionCount: 5,
};
```

#### æ•´åˆç‰©ä»¶å‘½åæ…£ä¾‹

```javascript
// âœ… æ•´åˆå¤šå€‹æ¨¡çµ„è³‡æ–™çš„ç‰©ä»¶
interface DailySummary {
  id: string;                  // {uid}_{date}
  uid: string;
  date: string;

  // å„æ¨¡çµ„æ‘˜è¦ï¼ˆç”¨æ¨¡çµ„åç¨±ä½œç‚ºå±¬æ€§ï¼‰
  diet: DietDailySummary;
  expense: ExpenseDailySummary;
  routine: RoutineDailySummary;
  diary: DiaryDailySummary;
}

// âœ… è·¨æ¨¡çµ„äº‹ä»¶å‘½å
const CROSS_MODULE_EVENTS = {
  MEAL_CREATED: 'diet:meal-created',           // é£²é£Ÿæ¨¡çµ„ç™¼å‡º
  MEAL_EXPENSE_READY: 'diet:expense-ready',    // æº–å‚™å‚³çµ¦è¨˜å¸³
  MEAL_TIME_READY: 'diet:time-ready'           // æº–å‚™å‚³çµ¦ä½œæ¯
};
```

#### æ¨¡çµ„ä»‹é¢å®šç¾©

```javascript
// âœ… å®šç¾©æ¸…æ¥šçš„æ¨¡çµ„ä»‹é¢
/**
 * é£²é£Ÿæ¨¡çµ„åŒ¯å‡ºä»‹é¢
 */
export interface DietModuleExports {
  // çµ¦è¨˜å¸³æ¨¡çµ„
  toExpenseData: (meal: MealRecord) => MealExpenseData;

  // çµ¦ä½œæ¯æ¨¡çµ„
  toRoutineData: (meal: MealRecord) => MealTimeData;

  // çµ¦æ—¥è¨˜æ¨¡çµ„
  generateDailySummary: (uid: string, date: string) => Promise<DietDailySummary>;
}

// âœ… ä½¿ç”¨ç¯„ä¾‹
import { toExpenseData } from '@modules/diet';

const meal = await getMealById(mealId);
const expenseData = toExpenseData(meal);
await createExpense(uid, expenseData);
```

#### è³‡æ–™è½‰æ›å‡½å¼å‘½å

```javascript
// âœ… è½‰æ›å‡½å¼å‘½åï¼što{ç›®æ¨™æ ¼å¼}
function toExpenseData(meal) {
  return {
    sourceModule: "diet",
    sourceMealId: meal.id,
    amount: meal.totalCost,
    description: `${meal.mealType} - ${meal.foods.map((f) => f.name).join("ã€")}`,
  };
}

function toRoutineData(meal) {
  return {
    sourceModule: "diet",
    sourceMealId: meal.id,
    activityType: "meal",
    time: meal.mealTime,
  };
}

// âœ… åå‘è½‰æ›ï¼šfrom{ä¾†æºæ ¼å¼}
function fromFirebaseSnapshot(snapshot) {
  return {
    id: snapshot.id,
    ...snapshot.data(),
  };
}
```

<!-- ============================================================ -->

<a id="constants-æª”æ¡ˆçµ„ç¹”è¦ç¯„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ğŸ“š Constants æª”æ¡ˆçµ„ç¹”è¦ç¯„ â­ æ–°å¢

**å„ªå…ˆç´š**ï¼šğŸŸ¡ å»ºè­°

**é©ç”¨ç¯„åœ**ï¼šå¤§å‹å°ˆæ¡ˆã€å¤šæ¨¡çµ„æ¶æ§‹

#### å–®ä¸€ vs å¤šå€‹ Constants æª”æ¡ˆ

```javascript
// âœ… å°å‹å°ˆæ¡ˆï¼šå–®ä¸€ constants.js
src / constants.js; // æ‰€æœ‰å¸¸æ•¸

// âœ… å¤§å‹å°ˆæ¡ˆï¼šæ¨¡çµ„åŒ– constants
src / constants / app - constants.js; // å…¨åŸŸæ‡‰ç”¨å¸¸æ•¸
room - constants.js; // æˆ¿é–“ç›¸é—œ
game - constants.js; // éŠæˆ²ç›¸é—œ
player - constants.js; // ç©å®¶ç›¸é—œ
index.js; // çµ±ä¸€åŒ¯å‡º
```

#### å…¨åŸŸ Constants æª”æ¡ˆçµæ§‹

```javascript
// âœ… app-constants.jsï¼šå…¨åŸŸæ‡‰ç”¨å¸¸æ•¸
/**
 * æ‡‰ç”¨ç¨‹å¼å…¨åŸŸå¸¸æ•¸
 */

// ==================== åŸºæœ¬é…ç½® ====================
export const APP_NAME = "åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ²";
export const APP_VERSION = "1.0.0";
export const API_BASE_URL = "https://api.example.com";

// ==================== æ™‚é–“å¸¸æ•¸ ====================
export const ONE_SECOND_MS = 1000;
export const ONE_MINUTE_MS = 60000;
export const ONE_HOUR_MS = 3600000;
export const ONE_DAY_MS = 86400000;

// ==================== æ•¸é‡é™åˆ¶ ====================
export const MAX_FILE_SIZE_MB = 10;
export const MAX_UPLOAD_FILES = 5;
export const MAX_TEXT_LENGTH = 1000;

// ==================== è·¯ç”±è·¯å¾‘ ====================
export const ROUTES = {
  HOME: "/",
  ROOM: "/room",
  GAME: "/game",
  LEADERBOARD: "/leaderboard",
};

// ==================== éŒ¯èª¤è¨Šæ¯ ====================
export const ERROR_MESSAGES = {
  NETWORK_ERROR: "ç¶²è·¯é€£ç·šç•°å¸¸",
  UNAUTHORIZED: "æœªæˆæ¬Šå­˜å–",
  NOT_FOUND: "æ‰¾ä¸åˆ°è³‡æº",
};
```

#### æ¨¡çµ„ Constants æª”æ¡ˆçµæ§‹

```javascript
// âœ… room-constants.jsï¼šæˆ¿é–“ç›¸é—œå¸¸æ•¸
/**
 * æˆ¿é–“æ¨¡çµ„å¸¸æ•¸
 */

// ==================== æˆ¿é–“é…ç½® ====================
export const ROOM_CODE_LENGTH = 5;
export const MAX_PLAYERS = 10;
export const MIN_PLAYERS = 2;
export const ROOM_EXPIRY_TIME = 3600000; // 1å°æ™‚

// ==================== æˆ¿é–“ç‹€æ…‹ ====================
export const ROOM_STATUS = {
  WAITING: "waiting",
  PLAYING: "playing",
  FINISHED: "finished",
};

// ==================== é©—è­‰è¦å‰‡ ====================
export const VALID_ROOM_CODE_CHARS = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
export const ROOM_CODE_REGEX = /^[A-Z0-9]{5}$/;

// ==================== å·¥å…·å‡½å¼ ====================
export function getRoomStatusLabel(status) {
  const labels = {
    waiting: "ç­‰å¾…ä¸­",
    playing: "é€²è¡Œä¸­",
    finished: "å·²çµæŸ",
  };
  return labels[status] || "æœªçŸ¥ç‹€æ…‹";
}
```

#### Constants ç´¢å¼•æª”æ¡ˆ

```javascript
// âœ… src/constants/index.jsï¼šçµ±ä¸€åŒ¯å‡º
/**
 * å¸¸æ•¸çµ±ä¸€åŒ¯å‡º
 */

// å…¨åŸŸå¸¸æ•¸
export * from "./app-constants";

// æ¨¡çµ„å¸¸æ•¸
export * from "./room-constants";
export * from "./game-constants";
export * from "./player-constants";

// æˆ–ä½¿ç”¨å‘½åç©ºé–“åŒ¯å‡º
import * as AppConstants from "./app-constants";
import * as RoomConstants from "./room-constants";
import * as GameConstants from "./game-constants";

export { AppConstants, RoomConstants, GameConstants };
```

#### ä½¿ç”¨ç¯„ä¾‹

```javascript
// âœ… æ–¹å¼ 1ï¼šç›´æ¥åŒ¯å…¥
import { MAX_PLAYERS, ROOM_STATUS } from "@/constants";

if (players.length >= MAX_PLAYERS) {
  // ...
}

// âœ… æ–¹å¼ 2ï¼šå‘½åç©ºé–“åŒ¯å…¥
import { RoomConstants } from "@/constants";

if (players.length >= RoomConstants.MAX_PLAYERS) {
  // ...
}

// âœ… æ–¹å¼ 3ï¼šæŒ‰éœ€åŒ¯å…¥
import { MAX_PLAYERS } from "@/constants/room-constants";
```

#### Constants æª”æ¡ˆçµ„ç¹”å»ºè­°

| å°ˆæ¡ˆè¦æ¨¡             | çµ„ç¹”æ–¹å¼   | æª”æ¡ˆçµæ§‹                                   |
| -------------------- | ---------- | ------------------------------------------ |
| å°å‹ï¼ˆ< 1000 è¡Œï¼‰    | å–®ä¸€æª”æ¡ˆ   | `constants.js`                             |
| ä¸­å‹ï¼ˆ1000-5000 è¡Œï¼‰ | æ¨¡çµ„åŒ–     | `app-constants.js`, `room-constants.js` ç­‰ |
| å¤§å‹ï¼ˆ> 5000 è¡Œï¼‰    | è³‡æ–™å¤¾çµ„ç¹” | `constants/` è³‡æ–™å¤¾ + `index.js`           |

<!-- ============================================================ -->

<a id="æª¢æŸ¥æ¸…å–®æ›´æ–°ç‰ˆ"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## âœ… æª¢æŸ¥æ¸…å–®ï¼ˆæ›´æ–°ç‰ˆï¼‰

åœ¨æäº¤ç¨‹å¼ç¢¼å‰ï¼Œè«‹ç¢ºèªï¼š

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‘½åè¦ç¯„

- [ ] æª”æ¡ˆåç¨±ä½¿ç”¨ kebab-case
- [ ] è®Šæ•¸ä½¿ç”¨ camelCase
- [ ] å‡½å¼ä½¿ç”¨ camelCase + å‹•è©é–‹é ­
- [ ] é¡åˆ¥ä½¿ç”¨ PascalCase
- [ ] å¸¸æ•¸ä½¿ç”¨ UPPER_SNAKE_CASE
- [ ] å…¨åŸŸç‰©ä»¶ä½¿ç”¨ PascalCase
- [ ] ç§æœ‰æ–¹æ³•/å±¬æ€§ä½¿ç”¨ \_camelCase
- [ ] éŒ¯èª¤è®Šæ•¸ä½¿ç”¨ error
- [ ] äº‹ä»¶ç›£è½å™¨ä½¿ç”¨ on + åè© + å‹•ä½œ
- [ ] äº‹ä»¶åç¨±ä½¿ç”¨ åè©:éå»å¼
- [ ] CSS é¡åˆ¥ä½¿ç”¨ kebab-case
- [ ] HTML ID ä½¿ç”¨ camelCase

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Firebase è¦ç¯„

- [ ] è³‡æ–™è·¯å¾‘ä½¿ç”¨ camelCase
- [ ] é›†åˆä½¿ç”¨è¤‡æ•¸åè©
- [ ] é¿å…æ·±å±¤å·¢ç‹€ï¼ˆâ‰¤ 3 å±¤ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### JSDoc è¦ç¯„

- [ ] æ‰€æœ‰å‡½å¼éƒ½æœ‰ JSDoc è¨»è§£
- [ ] åŒ…å« @param å’Œ @returnsï¼ˆåŒ…å« voidï¼‰
- [ ] è¤‡é›œå‡½å¼æœ‰ @example
- [ ] è¨»è§£èˆ‡å¯¦ä½œä¸€è‡´
- [ ] å¸ƒæ—è®Šæ•¸ä½¿ç”¨ is/has/can/should å‰ç¶´
- [ ] é­”æ³•å€¼å·²æå–ç‚ºå…·åå¸¸æ•¸

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Git Commit è¦ç¯„

- [ ] ä½¿ç”¨ Conventional Commits æ ¼å¼
- [ ] Type å’Œ Scope æ­£ç¢º
- [ ] ä¸»æ—¨ç°¡çŸ­æ˜ç¢ºï¼ˆâ‰¤ 50 å­—å…ƒï¼‰
- [ ] ä¸€æ¬¡ commit åªåšä¸€ä»¶äº‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å…¶ä»–

- [ ] æ²’æœ‰æ‹¼å¯«éŒ¯èª¤
- [ ] å‘½åæœ‰æ„ç¾©ä¸”æ˜“æ‡‚
- [ ] ç¨‹å¼ç¢¼å¯è®€æ€§é«˜

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ï¿½ è‡ªå‹•æª¢æŸ¥å·¥å…·

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä¸€éµæª¢æŸ¥è…³æœ¬ï¼ˆShellï¼‰

å°‡ä»¥ä¸‹è…³æœ¬å­˜ç‚º `check-naming.sh`ï¼š

```bash
#!/bin/bash
# å‘½åè¦ç¯„è‡ªå‹•æª¢æŸ¥è…³æœ¬ v2.2

echo "ğŸ” æª¢æŸ¥å‘½åè¦ç¯„ v2.2..."
echo "================================"

# è¨ˆæ•¸å™¨
ISSUES=0

# 1. æª¢æŸ¥é­”æ³•æ•¸å­—ï¼ˆ4ä½æ•¸ä»¥ä¸Šï¼‰
echo "\n1ï¸âƒ£ æª¢æŸ¥é­”æ³•æ•¸å­—ï¼ˆå¯èƒ½éœ€è¦æå–ç‚ºå¸¸æ•¸ï¼‰ï¼š"
RESULT=$(grep -rn "\b[0-9]\{4,\}\b" js/ --include="*.js" 2>/dev/null | \
  grep -v "node_modules" | grep -v "Binary" | head -10)
if [ -n "$RESULT" ]; then
  echo "$RESULT"
  ISSUES=$((ISSUES+1))
else
  echo "âœ… æœªç™¼ç¾å•é¡Œ"
fi

# 2. æª¢æŸ¥å¸ƒæ—è®Šæ•¸ï¼ˆç¼ºå°‘å‰ç¶´ï¼‰
echo "\n2ï¸âƒ£ æª¢æŸ¥å¸ƒæ—è®Šæ•¸å‘½åï¼ˆæ‡‰ä½¿ç”¨ is/has/can/shouldï¼‰ï¼š"
RESULT=$(grep -rn "let \(active\|valid\|loading\|ready\|enabled\) =" js/ --include="*.js" 2>/dev/null)
if [ -n "$RESULT" ]; then
  echo "$RESULT"
  ISSUES=$((ISSUES+1))
else
  echo "âœ… æœªç™¼ç¾å•é¡Œ"
fi

# 3. æª¢æŸ¥éŒ¯èª¤è®Šæ•¸å‘½å
echo "\n3ï¸âƒ£ æª¢æŸ¥éŒ¯èª¤è™•ç†ï¼ˆæ‡‰çµ±ä¸€ä½¿ç”¨ errorï¼‰ï¼š"
RESULT=$(grep -rn "catch *(\([^e]\|e[^r]\|er[^r]\|err[^o]\|erro[^r]\)" js/ --include="*.js" 2>/dev/null | head -5)
if [ -n "$RESULT" ]; then
  echo "$RESULT"
  ISSUES=$((ISSUES+1))
else
  echo "âœ… æœªç™¼ç¾å•é¡Œ"
fi

# 4. æª¢æŸ¥æª”æ¡ˆå‘½åï¼ˆä¸æ‡‰æœ‰å¤§å¯«æˆ–åº•ç·šï¼‰
echo "\n4ï¸âƒ£ æª¢æŸ¥æª”æ¡ˆå‘½åï¼ˆæ‡‰ä½¿ç”¨ kebab-caseï¼‰ï¼š"
RESULT=$(find js/ -name "*[A-Z_]*.js" 2>/dev/null | grep -v "node_modules")
if [ -n "$RESULT" ]; then
  echo "$RESULT"
  ISSUES=$((ISSUES+1))
else
  echo "âœ… æœªç™¼ç¾å•é¡Œ"
fi

# 5. çµ±è¨ˆå ±å‘Š
echo "\n================================"
if [ $ISSUES -eq 0 ]; then
  echo "âœ… æª¢æŸ¥å®Œæˆï¼æœªç™¼ç¾æ˜é¡¯å•é¡Œã€‚"
else
  echo "âš ï¸  ç™¼ç¾ $ISSUES é¡å•é¡Œï¼Œè«‹æª¢æŸ¥ä¸Šæ–¹è¼¸å‡ºã€‚"
fi
echo "\nğŸ’¡ æç¤ºï¼šé€™åªæ˜¯åŸºç¤æª¢æŸ¥ï¼Œä»éœ€äººå·¥å¯©æŸ¥ JSDoc è¨»è§£ã€‚"
```

**ä½¿ç”¨æ–¹å¼**ï¼š

```bash
# è³¦äºˆåŸ·è¡Œæ¬Šé™
chmod +x check-naming.sh

# åŸ·è¡Œæª¢æŸ¥
./check-naming.sh

# è¼¸å‡ºç¯„ä¾‹ï¼š
# ğŸ” æª¢æŸ¥å‘½åè¦ç¯„ v2.2...
# 1ï¸âƒ£ æª¢æŸ¥é­”æ³•æ•¸å­—ï¼š
# js/room-manager.js:42:  expiresAt: Date.now() + 3600000
# âš ï¸ ç™¼ç¾ 1 é¡å•é¡Œ
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### VSCode æ­£å‰‡æœå°‹æ¸…å–®

åœ¨ VSCode æŒ‰ `Cmd+Shift+F` (Mac) æˆ– `Ctrl+Shift+F` (Windows)ï¼Œå•Ÿç”¨æ­£å‰‡æ¨¡å¼ `.*`ï¼š

| æœå°‹æ­£å‰‡                                | èªªæ˜                   | ä¿®æ­£æ–¹å¼        | ç¯„ä¾‹                                 |
| --------------------------------------- | ---------------------- | --------------- | ------------------------------------ |
| `\b\d{4,}\b`                            | é­”æ³•æ•¸å­—ï¼ˆ4ä½æ•¸ä»¥ä¸Šï¼‰  | æå–ç‚ºå¸¸æ•¸      | `3600000` â†’ `ROOM_EXPIRY_TIME`       |
| `let (active\|valid\|ready\|loading) =` | å¸ƒæ—è®Šæ•¸ç¼ºå‰ç¶´         | åŠ ä¸Šå‰ç¶´        | `active` â†’ `isActive`                |
| `catch \([^e]`                          | éŒ¯èª¤è®Šæ•¸ä¸æ˜¯ error     | çµ±ä¸€å‘½å        | `catch (e)` â†’ `catch (error)`        |
| `function \w+\(`                        | å‡½å¼å®šç¾©ï¼ˆæª¢æŸ¥ JSDocï¼‰ | è£œå……è¨»è§£        | ç¢ºä¿æœ‰ `@returns`                    |
| `[A-Z_]+\.js`                           | æª”æ¡ˆåç¨±å•é¡Œ           | æ”¹ç‚º kebab-case | `RoomManager.js` â†’ `room-manager.js` |

**æœå°‹æ­¥é©Ÿ**ï¼š

1. é–‹å•Ÿæœå°‹é¢æ¿ï¼š`Cmd+Shift+F`
2. é»æ“Š `.*` å•Ÿç”¨æ­£å‰‡æ¨¡å¼
3. è¼¸å…¥ä¸Šè¡¨ä¸­çš„æ­£å‰‡è¡¨é”å¼
4. é»æ“Šã€Œåœ¨æª”æ¡ˆä¸­å°‹æ‰¾ã€
5. é€ä¸€æª¢æŸ¥ä¸¦ä¿®æ­£

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Git Pre-commit Hookï¼ˆé€²éšï¼‰

åœ¨ `.git/hooks/pre-commit` åŠ å…¥ï¼š

```bash
#!/bin/bash
# æäº¤å‰è‡ªå‹•æª¢æŸ¥å‘½åè¦ç¯„

echo "ğŸ” åŸ·è¡Œå‘½åè¦ç¯„æª¢æŸ¥..."

# åªæª¢æŸ¥æš«å­˜çš„ .js æª”æ¡ˆ
FILES=$(git diff --cached --name-only --diff-filter=ACM | grep "\.js$")

if [ -z "$FILES" ]; then
  exit 0
fi

# æª¢æŸ¥é­”æ³•æ•¸å­—
for FILE in $FILES; do
  if grep -q "\b[0-9]\{4,\}\b" "$FILE"; then
    echo "âŒ $FILE åŒ…å«ç–‘ä¼¼é­”æ³•æ•¸å­—"
    echo "ğŸ’¡ è«‹ç¢ºèªæ˜¯å¦éœ€è¦æå–ç‚ºå¸¸æ•¸"
    exit 1
  fi
done

echo "âœ… å‘½åè¦ç¯„æª¢æŸ¥é€šé"
exit 0
```

**å•Ÿç”¨æ–¹å¼**ï¼š

```bash
chmod +x .git/hooks/pre-commit
```

**æ•ˆæœ**ï¼šæ¯æ¬¡ `git commit` æ™‚è‡ªå‹•æª¢æŸ¥ï¼Œç™¼ç¾å•é¡Œæœƒé˜»æ­¢æäº¤ã€‚

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç·šä¸Šæª¢æŸ¥å·¥å…·ï¼ˆè¦åŠƒä¸­ï¼‰

æœªä¾†å¯é–‹ç™¼ VSCode Extensionï¼š

- å³æ™‚é«˜äº®é­”æ³•æ•¸å­—
- è‡ªå‹•å»ºè­°å¸¸æ•¸åç¨±
- å¿«é€Ÿä¿®å¾©å‹•ä½œï¼ˆQuick Fixï¼‰
- æ•´åˆ ESLint è¦å‰‡

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ï¿½ğŸ”§ VSCode è¨­å®šå»ºè­°

å»ºè­°åœ¨ `.vscode/settings.json` åŠ å…¥ï¼š

```json
{
  "editor.codeActionsOnSave": {
    "source.fixAll": true
  },
  "javascript.preferences.quoteStyle": "single",
  "javascript.format.semicolons": "insert",
  "editor.formatOnSave": true,
  "files.eol": "\n"
}
```

<!-- ============================================================ -->

<a id="-å¸¸è¦‹å•é¡Œ-faq"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## â“ å¸¸è¦‹å•é¡Œ FAQ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q1: Firebase æ—¢æœ‰æ¬„ä½åç¨±ä¸ç¬¦åˆè¦ç¯„æ€éº¼è¾¦ï¼Ÿ

**A**: v2.2 å…è¨±ä¿ç•™æ—¢æœ‰æ¬„ä½ï¼ˆå¦‚ `gameStarted`ï¼‰ï¼Œä½†**æ–°æ¬„ä½å¿…é ˆä½¿ç”¨å‰ç¶´**ï¼ˆ`isGameStarted`ï¼‰ã€‚

**åŸå› **ï¼šFirebase æ¬„ä½åç¨±è®Šæ›´éœ€è¦ï¼š

- è³‡æ–™åº«é·ç§»è…³æœ¬
- å‰ç«¯/å¾Œç«¯åŒæ­¥æ›´æ–°
- å¯èƒ½å½±éŸ¿å·²ä¸Šç·šåŠŸèƒ½

**å»ºè­°åšæ³•**ï¼š

```javascript
// âœ… è®€å–æ™‚ç›¸å®¹èˆŠæ¬„ä½
const isGameStarted = roomData.isGameStarted ?? roomData.gameStarted ?? false;

// âœ… æ–°æ¬„ä½ä½¿ç”¨æ­£ç¢ºå‘½å
firebase.database().ref("rooms").set({
  isActive: true, // æ–°æ¬„ä½
  hasPassword: false, // æ–°æ¬„ä½
  gameStarted: true, // èˆŠæ¬„ä½ä¿ç•™ç›¸å®¹
});
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q2: 0ã€1ã€-1ã€true/false è¦æå–ç‚ºå¸¸æ•¸å—ï¼Ÿ

**A**: **ä¸éœ€è¦**ï¼Œé€™äº›æ˜¯é€šç”¨é‚è¼¯å€¼ï¼Œä¸å…·æ¥­å‹™æ„ç¾©ã€‚

**éœ€è¦æå–**ï¼š

```javascript
const MAX_RETRY_COUNT = 3; // âœ… æœ‰æ¥­å‹™æ„ç¾©
const DEFAULT_TIMEOUT = 5000; // âœ… å¯èƒ½èª¿æ•´
```

**ä¸éœ€è¦æå–**ï¼š

```javascript
if (count === 0) {
} // âœ… é€šç”¨é‚è¼¯
if (index === -1) {
} // âœ… æœªæ‰¾åˆ°æ¨™è¨˜
array.slice(0, 10); // âœ… ç°¡å–®æ“ä½œ
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q3: `console.log` è£¡çš„å­—ä¸²ç®—é­”æ³•å€¼å—ï¼Ÿ

**A**: è¦–æƒ…æ³è€Œå®šã€‚

**Debug å­—ä¸²**ï¼ˆå¯ä¿ç•™ï¼‰ï¼š

```javascript
console.log("é–‹å§‹è¼‰å…¥æˆ¿é–“è³‡æ–™..."); // âœ… Debug ç”¨
console.log("userId:", userId); // âœ… ç°¡å–®è¼¸å‡º
```

**éŒ¯èª¤è¨Šæ¯**ï¼ˆå»ºè­°æå–ï¼‰ï¼š

```javascript
// âŒ ç¡¬ç·¨ç¢¼
throw new Error("æˆ¿é–“ä»£ç¢¼ä¸èƒ½ç‚ºç©º");

// âœ… æå–ç‚ºå¸¸æ•¸ï¼ˆæ–¹ä¾¿å¤šèªç³»ã€çµ±ä¸€ç®¡ç†ï¼‰
const ERROR_MESSAGES = {
  ROOM_CODE_EMPTY: "æˆ¿é–“ä»£ç¢¼ä¸èƒ½ç‚ºç©º",
  ROOM_NOT_FOUND: "æ‰¾ä¸åˆ°æˆ¿é–“",
};
throw new Error(ERROR_MESSAGES.ROOM_CODE_EMPTY);
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q4: è¿´åœˆä¸­çš„æ•¸å­—éœ€è¦æå–å—ï¼Ÿ

**A**: **ç°¡å–®è¿´åœˆä¸éœ€è¦**ï¼Œä½†æœ‰æ¥­å‹™æ„ç¾©çš„è¦æå–ã€‚

```javascript
// âœ… ç°¡å–®è¿´åœˆï¼ˆä¸éœ€è¦ï¼‰
for (let i = 0; i < 10; i++) {
  console.log(i);
}

// âŒ æ¥­å‹™é‚è¼¯ï¼ˆéœ€è¦æå–ï¼‰
for (let attempt = 0; attempt < 10; attempt++) {
  // 10 æ˜¯ã€Œæœ€å¤§é‡è©¦æ¬¡æ•¸ã€
  // ...
}

// âœ… æ­£ç¢ºåšæ³•
const MAX_RETRY_ATTEMPTS = 10;
for (let attempt = 0; attempt < MAX_RETRY_ATTEMPTS; attempt++) {
  // ...
}
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q5: å…©å€‹ AI æ¨¡å‹çš„ç¨‹å¼ç¢¼é¢¨æ ¼ä¸ä¸€è‡´æ€éº¼è¾¦ï¼Ÿ

**A**: ä½¿ç”¨ã€Œæª¢æŸ¥æ¸…å–®ã€å’Œã€Œå¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨ã€äº¤å‰æª¢æŸ¥ã€‚

**æµç¨‹**ï¼š

1. A æ¨¡å‹å¯«å®Œç¨‹å¼ç¢¼å¾Œï¼ŒåŸ·è¡Œã€Œæª¢æŸ¥æ¸…å–®ã€è‡ªæˆ‘æª¢æŸ¥
2. B æ¨¡å‹ review æ™‚ï¼Œå°ç…§ã€Œç¦ç”¨æ¸…å–®ã€å’Œã€Œé€ŸæŸ¥è¡¨ã€
3. ç™¼ç¾ä¸ä¸€è‡´æ™‚ï¼Œå›å‚³é€™ä»½æ–‡ä»¶çš„ç›¸é—œæ®µè½çµ¦å°æ–¹

**æºé€šç¯„ä¾‹**ï¼š

```
âŒ ç™¼ç¾å‘½åä¸ç¬¦ï¼š
let active = true;  // room-manager.js line 42

âœ… è«‹åƒè€ƒã€Œå¸ƒæ—å€¼å‘½åè¦ç¯„ã€ä¿®æ­£ç‚ºï¼š
let isActive = true;
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q6: å¦‚ä½•åˆ¤æ–·æŸå€‹å€¼ã€Œæœªä¾†å¯èƒ½èª¿æ•´ã€ï¼Ÿ

**A**: å•è‡ªå·±ï¼šã€Œå¦‚æœè€å¸«/å®¢æˆ¶è¦æ±‚æ”¹é€™å€‹æ•¸å­—ï¼Œæˆ‘éœ€è¦æ”¹å¹¾å€‹åœ°æ–¹ï¼Ÿã€

**éœ€è¦æå–**ï¼ˆæ”¹ä¸€è™•å³å¯ï¼‰ï¼š

```javascript
const ROOM_EXPIRY_TIME = 3600000;
// è€å¸«èªªæ”¹æˆ 2 å°æ™‚ï¼Ÿåªæ”¹é€™ä¸€è¡Œï¼
```

**ä¸éœ€è¦æå–**ï¼ˆåªå‡ºç¾ä¸€æ¬¡ï¼‰ï¼š

```javascript
const percentage = (score / total) * 100; // ç™¾åˆ†æ¯”ä¸æœƒè®Š
```

**åˆ¤æ–·æ¨™æº–**ï¼š

- æ¥­å‹™è¦å‰‡ç›¸é—œ â†’ æå–
- æ•¸å­¸/ç‰©ç†å¸¸æ•¸ â†’ ä¸æå–
- å‡ºç¾ â‰¥2 æ¬¡ â†’ æå–

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Q7: @returns {void} çœŸçš„æœ‰å¿…è¦å—ï¼Ÿ

**A**: **æœ‰å¿…è¦**ï¼ŒåŸå› ï¼š

1. **AI ç†è§£**ï¼šæ˜ç¢ºå‘Šè¨´ AIã€Œæ­¤å‡½å¼ç„¡å›å‚³å€¼ã€vsã€Œå¿˜è¨˜å¯«è¨»è§£ã€
2. **IDE æ”¯æ´**ï¼šVSCode æœƒé¡¯ç¤º `(method) createRoom(): void`
3. **åœ˜éšŠå”ä½œ**ï¼šçµ±ä¸€æ¨™æº–ï¼Œé¿å…éºæ¼
4. **æ–‡ä»¶ç”Ÿæˆ**ï¼šJSDoc å·¥å…·æœƒæ­£ç¢ºç”Ÿæˆæ–‡ä»¶

```javascript
// âŒ ä¸æ˜ç¢º
/**
 * æ›´æ–°ç©å®¶ç‹€æ…‹
 */
function updatePlayer(userId) {}

// âœ… æ˜ç¢º
/**
 * æ›´æ–°ç©å®¶ç‹€æ…‹
 * @param {string} userId
 * @returns {void}  // æ¸…æ¥šè¡¨æ˜ã€Œç„¡å›å‚³å€¼ã€
 */
function updatePlayer(userId) {}
```

<!-- ============================================================ -->

<a id="-ai-å”ä½œæŒ‡å—"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ¤– AI å”ä½œæŒ‡å—

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### çµ¦ AI æ¨¡å‹çš„ä½¿ç”¨å»ºè­°

#### ğŸ“¥ æ”¶åˆ°ç¨‹å¼ç¢¼æ™‚

**å„ªå…ˆæª¢æŸ¥é …ç›®**ï¼ˆä¾åºï¼‰ï¼š

1. âœ… **ç¦ç”¨æ¸…å–®**ï¼šæ˜¯å¦ä½¿ç”¨ `let a =`, `catch (e)`, `var` ç­‰ç¦ç”¨èªæ³•
2. âœ… **é­”æ³•å€¼**ï¼šæœå°‹ `3600000`, `86400000`, `"waiting"` ç­‰ç¡¬ç·¨ç¢¼
3. âœ… **å¸ƒæ—å‘½å**ï¼šæœå°‹ `let (active|valid|ready) =` ç¢ºèªæœ‰å‰ç¶´
4. âœ… **@returns**ï¼šç¢ºèªæ‰€æœ‰å‡½å¼éƒ½æœ‰å›å‚³å€¼è¨»è§£

**å¿«é€Ÿæª¢æŸ¥æŒ‡ä»¤**ï¼š

```javascript
// åœ¨ AI å…§éƒ¨åŸ·è¡Œçš„æª¢æŸ¥é‚è¼¯
function quickCheck(code) {
  const issues = [];

  if (/let [a-z] =/.test(code)) {
    issues.push("ç™¼ç¾å–®å­—æ¯è®Šæ•¸");
  }

  if (/\d{6,}/.test(code)) {
    issues.push("ç™¼ç¾å¯èƒ½çš„é­”æ³•æ•¸å­—");
  }

  if (/catch \([^e][^r][^r][^o][^r]\)/.test(code)) {
    issues.push("éŒ¯èª¤è®Šæ•¸å‘½åä¸æ­£ç¢º");
  }

  return issues;
}
```

<!-- ============================================================ -->

#### ğŸ“¤ å¯«ç¨‹å¼ç¢¼æ™‚

**æ¨™æº–æµç¨‹**ï¼š

1. **è¦åŠƒéšæ®µ**ï¼š
   - åˆ—å‡ºéœ€è¦çš„å¸¸æ•¸ â†’ å…ˆå®šç¾©åœ¨æª”æ¡ˆé–‹é ­
   - åˆ—å‡ºå‡½å¼åç¨± â†’ ç¢ºèªä½¿ç”¨å‹•è©é–‹é ­
   - ç¢ºèªå¸ƒæ—è®Šæ•¸å‘½å â†’ åŠ ä¸Š is/has/can/should

2. **å¯¦ä½œéšæ®µ**ï¼š
   - æ¯å¯«ä¸€å€‹å‡½å¼ â†’ ç«‹å³åŠ  JSDocï¼ˆåŒ…å« @returnsï¼‰
   - æ¯ç”¨ä¸€å€‹æ•¸å­— â†’ å•è‡ªå·±ã€Œé€™æ˜¯é­”æ³•å€¼å—ï¼Ÿã€
   - æ¯ç”¨ä¸€å€‹å¸ƒæ—å€¼ â†’ ç¢ºèªæœ‰å‰ç¶´

3. **æäº¤å‰**ï¼š
   - åŸ·è¡Œã€Œæª¢æŸ¥æ¸…å–®ã€ï¼ˆæ‰€æœ‰ â˜‘ï¸ éƒ½è¦æ‰“å‹¾ï¼‰
   - è·‘ä¸€æ¬¡ `grep -rn "3600000\|let [a-z] ="` ç¢ºèªç„¡éºæ¼

<!-- ============================================================ -->

#### ğŸ”„ ç‰ˆæœ¬æ›´æ–°é€šçŸ¥æ™‚

**æ”¶åˆ° v2.x æ›´æ–°é€šçŸ¥çš„ SOP**ï¼š

1. **æš«åœæ‰‹ä¸Šå·¥ä½œ**ï¼ˆå¦‚æœæ­£åœ¨å¯«ç¨‹å¼ç¢¼ï¼‰
2. **é–±è®€ã€Œç‰ˆæœ¬æ­·å²ã€**ï¼šäº†è§£æ–°å¢äº†å“ªäº›è¦ç¯„
3. **æª¢æŸ¥ã€Œé·ç§»æŒ‡å—ã€**ï¼šç¢ºèªæ˜¯å¦éœ€è¦ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼
4. **æ›´æ–°å…§éƒ¨çŸ¥è­˜åº«**ï¼šè¨˜éŒ„æ–°è¦ç¯„åˆ° AI è¨˜æ†¶é«”
5. **å›è¦†ç¢ºèª**ï¼šå‘ŠçŸ¥å¦ä¸€å€‹ AI æ¨¡å‹ã€Œå·²è®€å– v2.x æ›´æ–°ã€

**ç¯„ä¾‹å›è¦†**ï¼š

```
âœ… å·²è®€å– NAMING-CONVENTION v2.2 æ›´æ–°

æ–°å¢è¦ç¯„å·²è¨˜éŒ„ï¼š
- é­”æ³•å€¼ç¦ç”¨ï¼ˆæå–æ¨™æº–ï¼šâ‰¥2æ¬¡ã€æœ‰æ¥­å‹™æ„ç¾©ã€å¯èƒ½èª¿æ•´ï¼‰
- å¸ƒæ—å‰ç¶´å¼·åˆ¶ï¼ˆè®Šæ•¸å¿…é ˆã€Firebase æ¬„ä½å»ºè­°ï¼‰
- @returns å¼·åˆ¶ï¼ˆåŒ…å« voidï¼‰

å¾…è¾¦äº‹é …ï¼š
- [ ] æª¢æŸ¥ room-manager.js çš„ 3600000
- [ ] è£œå……æ‰€æœ‰å‡½å¼çš„ @returns
```

<!-- ============================================================ -->

#### ğŸ” Code Review æ™‚

**ä½¿ç”¨ã€Œå¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨ã€é€é …æ¯”å°**ï¼š

| æª¢æŸ¥é …        | æ­£å‰‡è¡¨é”å¼                     | èªªæ˜         |
| ------------- | ------------------------------ | ------------ |
| æª”æ¡ˆåç¨±      | `[A-Z].*\.js`                  | ä¸æ‡‰æœ‰å¤§å¯«   |
| é­”æ³•æ•¸å­—      | `\d{4,}`                       | æª¢æŸ¥å¤§æ•¸å­—   |
| å–®å­—æ¯è®Šæ•¸    | `let [a-z] =`                  | é™¤äº† i/j/k   |
| éŒ¯èª¤è®Šæ•¸      | `catch \((?!error)`            | æ‡‰è©²ç”¨ error |
| ç¼ºå°‘ @returns | `function.*\{` å‰ç„¡ `@returns` | å¿…é ˆæ¨™è¨»     |

**Review å›é¥‹ç¯„ä¾‹**ï¼š

```markdown
[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## Code Review - room-manager.js

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âŒ éœ€è¦ä¿®æ­£ï¼ˆ3 é …ï¼‰

1. **Line 42**: é­”æ³•å€¼
   - ç¾æ³ï¼š`Date.now() + 3600000`
   - å»ºè­°ï¼šæå–ç‚º `ROOM_EXPIRY_TIME`
   - åƒè€ƒï¼š[é­”æ³•å€¼ç¦ç”¨è¦ç¯„](#é­”æ³•å€¼-magic-values-ç¦ç”¨è¦ç¯„)

2. **Line 58**: å¸ƒæ—è®Šæ•¸ç¼ºå°‘å‰ç¶´
   - ç¾æ³ï¼š`let active = true`
   - å»ºè­°ï¼šæ”¹ç‚º `let isActive = true`
   - åƒè€ƒï¼š[å¸ƒæ—å€¼å‘½åè¦ç¯„](#å¸ƒæ—å€¼å‘½åè¦ç¯„)

3. **Line 103**: ç¼ºå°‘ @returns
   - ç¾æ³ï¼š`function createRoom(data) { }`
   - å»ºè­°ï¼šåŠ ä¸Š `@returns {Promise<string>}`
   - åƒè€ƒï¼š[JSDoc è¦ç¯„](#jsdoc-è¨»è§£è¦ç¯„)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### âœ… ç¬¦åˆè¦ç¯„ï¼ˆ5 é …ï¼‰

- æª”æ¡ˆå‘½åæ­£ç¢ºï¼ˆkebab-caseï¼‰
- è®Šæ•¸å‘½åä¸€è‡´ï¼ˆcamelCaseï¼‰
- é¡åˆ¥å‘½åæ­£ç¢ºï¼ˆPascalCaseï¼‰
- éŒ¯èª¤è™•ç†çµ±ä¸€ä½¿ç”¨ error
- Git commit ç¬¦åˆ Conventional æ ¼å¼
```

<!-- ============================================================ -->

#### ğŸ†˜ é‡åˆ°æ¨¡ç³Šæƒ…æ³æ™‚

**æ±ºç­–æµç¨‹åœ–**ï¼š

```
ä¸ç¢ºå®šæ˜¯å¦è¦æå–å¸¸æ•¸ï¼Ÿ
  â†“
å• 3 å€‹å•é¡Œï¼š
  1. å‡ºç¾ â‰¥2 æ¬¡ï¼Ÿ â†’ æ˜¯ â†’ æå–
  2. æœ‰æ¥­å‹™æ„ç¾©ï¼Ÿ â†’ æ˜¯ â†’ æå–
  3. å¯èƒ½èª¿æ•´ï¼Ÿ   â†’ æ˜¯ â†’ æå–
  â†“
å…¨éƒ¨ã€Œå¦ã€ â†’ ä¸æå–
```

**ç„¡æ³•åˆ¤æ–·æ™‚**ï¼š

- ğŸŸ¢ ä¿å®ˆåšæ³•ï¼šæå–ï¼ˆéåº¦å·¥ç¨‹å¥½éæœªä¾†æ”¹ 10 å€‹åœ°æ–¹ï¼‰
- ğŸ”´ æ¿€é€²åšæ³•ï¼šä¸æå–ï¼ˆä¿æŒç°¡æ½”ï¼Œéœ€è¦æ™‚å†é‡æ§‹ï¼‰

**å»ºè­°**ï¼šå‚¾å‘ä¿å®ˆåšæ³•ï¼Œå› ç‚ºï¼š

- æå–å¸¸æ•¸ä¸å½±éŸ¿æ•ˆèƒ½
- æœªä¾†ä¿®æ”¹æ›´å®¹æ˜“
- ç¬¦åˆ v2.2 è¦ç¯„

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### çµ¦äººé¡é–‹ç™¼è€…çš„æç¤º

#### å¦‚ä½•æœ‰æ•ˆä½¿ç”¨ AI å”ä½œ

1. **æ˜ç¢ºæŒ‡ç¤º AI éµå®ˆè¦ç¯„**ï¼š

   ```
   è«‹æŒ‰ç…§ NAMING-CONVENTION.md v2.2 è¦ç¯„æ’°å¯«ç¨‹å¼ç¢¼ï¼Œ
   ç‰¹åˆ¥æ³¨æ„ï¼šé­”æ³•å€¼æå–ã€å¸ƒæ—å‰ç¶´ã€@returns å¿…å¡«ã€‚
   ```

2. **æä¾›æª¢æŸ¥æ¸…å–®**ï¼š

   ```
   å®Œæˆå¾Œè«‹è‡ªæˆ‘æª¢æŸ¥ï¼š
   - [ ] æ‰€æœ‰æ•¸å­—éƒ½ä¸æ˜¯é­”æ³•å€¼
   - [ ] æ‰€æœ‰å¸ƒæ—è®Šæ•¸éƒ½æœ‰å‰ç¶´
   - [ ] æ‰€æœ‰å‡½å¼éƒ½æœ‰ @returns
   ```

3. **è¦æ±‚ AI èªªæ˜å‘½åç†ç”±**ï¼š

   ```
   è«‹èªªæ˜ç‚ºä»€éº¼ `ROOM_EXPIRY_TIME = 3600000`
   è€Œä¸æ˜¯ç›´æ¥å¯« 3600000ï¼Ÿ
   ```

4. **å®šæœŸåŒæ­¥å…©å€‹ AI**ï¼š
   ```
   è«‹å°‡ä½ çš„å‘½åè¦ç¯„ç‰ˆæœ¬å‘Šè¨´å¦ä¸€å€‹ AIï¼Œ
   ç¢ºä¿å…©é‚Šéƒ½ä½¿ç”¨ v2.2ã€‚
   ```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ² ä¸ç¢ºå®šæ™‚çš„é è¨­åŸå‰‡

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ ¸å¿ƒç†å¿µ

ç•¶é‡åˆ°å‘½åè¦ç¯„çš„æ¨¡ç³Šåœ°å¸¶æ™‚ï¼Œéµå¾ªä»¥ä¸‹åŸå‰‡é †åºï¼š

**åŸå‰‡ 1 > åŸå‰‡ 2 > åŸå‰‡ 3 > åŸå‰‡ 4**

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸå‰‡ 1ï¼šä¿å®ˆå„ªæ–¼æ¿€é€² ğŸ›¡ï¸

ç•¶ç„¡æ³•åˆ¤æ–·æ™‚ï¼Œé¸æ“‡**æ›´åš´æ ¼**çš„è¦ç¯„ï¼š

```javascript
// â“ ä¸ç¢ºå®šé€™å€‹ 10 è¦ä¸è¦æå–ç‚ºå¸¸æ•¸ï¼Ÿ
const maxRetries = 10;

// ğŸ¤” åˆ¤æ–·æµç¨‹ï¼š
// - å‡ºç¾å¹¾æ¬¡ï¼Ÿåªæœ‰ 1 æ¬¡
// - æœ‰æ¥­å‹™æ„ç¾©ï¼Ÿæœ‰ï¼ˆé‡è©¦æ¬¡æ•¸ï¼‰
// - å¯èƒ½èª¿æ•´ï¼Ÿå¯èƒ½ï¼ˆæ ¹æ“šç¶²è·¯ç‹€æ³ï¼‰
// â†’ ä»»ä¸€æ¢ä»¶ç‚ºã€Œæ˜¯ã€â†’ æå–ï¼

// âœ… ä¿å®ˆåšæ³•ï¼ˆæ¨è–¦ï¼‰
const MAX_RETRY_ATTEMPTS = 10;
const maxRetries = MAX_RETRY_ATTEMPTS;

// ç†ç”±ï¼šéåº¦å·¥ç¨‹ > æœªä¾†æ”¹ 10 å€‹åœ°æ–¹
```

**é©ç”¨æƒ…å¢ƒ**ï¼š

- ä¸ç¢ºå®šæ˜¯å¦æå–å¸¸æ•¸ï¼Ÿ â†’ **æå–**
- ä¸ç¢ºå®šæ˜¯å¦è¦å¯« @exampleï¼Ÿ â†’ **å¯«**
- ä¸ç¢ºå®šå¸ƒæ—è®Šæ•¸è¦ä¸è¦å‰ç¶´ï¼Ÿ â†’ **è¦**
- ä¸ç¢ºå®š JSDoc è¦å¯«å¤šè©³ç´°ï¼Ÿ â†’ **è¶Šè©³ç´°è¶Šå¥½**

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸå‰‡ 2ï¼šå¯è®€æ€§å„ªæ–¼ç°¡æ½” ğŸ“–

```javascript
// âŒ ç°¡æ½”ä½†ä¸æ¸…æ¥š
const t = Date.now() + 3600000;
const u = users.filter((u) => u.a && !u.d);

// âœ… å†—é•·ä½†æ¸…æ¥šï¼ˆæ¨è–¦ï¼‰
const ROOM_EXPIRY_TIME_MS = 3600000; // 1å°æ™‚ = 60åˆ† Ã— 60ç§’ Ã— 1000æ¯«ç§’
const roomExpiresAt = Date.now() + ROOM_EXPIRY_TIME_MS;

const activeUsers = users.filter((user) => user.isActive && !user.isDeleted);
```

**è¨˜ä½**ï¼š

- ç¨‹å¼ç¢¼å¯«ä¸€æ¬¡ï¼Œè®€ä¸€ç™¾æ¬¡
- 3å€‹æœˆå¾Œçš„ä½  = é™Œç”Ÿäºº
- AI ç†è§£æ¸…æ¥šçš„ç¨‹å¼ç¢¼æ›´æº–ç¢º

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸå‰‡ 3ï¼šè©¢å•å¦ä¸€å€‹ AI æ™‚çš„æ¨™æº–æµç¨‹ ğŸ¤

ç•¶å…©å€‹ AI æ„è¦‹ä¸ä¸€è‡´ï¼š

**æ­¥é©Ÿ 1**ï¼šå›å‚³æ–‡ä»¶çš„ç›¸é—œæ®µè½ï¼ˆä½¿ç”¨éŒ¨é»é€£çµï¼‰

```
è«‹åƒè€ƒå‘½åè¦ç¯„æ–‡ä»¶ï¼š
- [é­”æ³•å€¼ç¦ç”¨è¦ç¯„](#é­”æ³•å€¼-magic-values-ç¦ç”¨è¦ç¯„)
- [å¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨](#å¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨) ç¬¬ 3 è¡Œç¯„ä¾‹
```

**æ­¥é©Ÿ 2**ï¼šå¼•ç”¨å…·é«”ç¯„ä¾‹

```
æ ¹æ“šé€ŸæŸ¥è¡¨ï¼š
âŒ expiresAt = Date.now() + 3600000
âœ… expiresAt = Date.now() + ROOM_EXPIRY_TIME

ä½ çš„å¯«æ³•å±¬æ–¼ã€ŒâŒã€é¡å‹ï¼Œå»ºè­°ä¿®æ”¹ã€‚
```

**æ­¥é©Ÿ 3**ï¼šå¦‚æœä»æœ‰çˆ­è­°

- é¸æ“‡**é€ŸæŸ¥è¡¨ä¸­çš„ç¯„ä¾‹**ï¼ˆæœ€çµ‚è£åˆ¤ï¼‰
- å¦‚æœé€ŸæŸ¥è¡¨æ²’æœ‰ â†’ é¸æ“‡**æ›´åš´æ ¼**çš„è§£é‡‹

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸå‰‡ 4ï¼šå…ˆéµå®ˆå¾Œå„ªåŒ– ğŸ”„

```
ç¬¬ä¸€æ¬¡å¯«ç¨‹å¼ç¢¼
    â†“
åš´æ ¼éµå®ˆè¦ç¯„ï¼ˆå³ä½¿è¦ºå¾—å†—é•·ï¼‰
    â†“
å®ŒæˆåŠŸèƒ½ä¸¦æ¸¬è©¦
    â†“
Code Review
    â†“
æª¢æŸ¥æ˜¯å¦éåº¦å·¥ç¨‹
    â†“
é‡æ§‹æ™‚å†èª¿æ•´ï¼ˆå¦‚æœç¢ºå¯¦å¤ªå†—é•·ï¼‰
```

**æ¡ˆä¾‹**ï¼š

```javascript
// ç¬¬ä¸€ç‰ˆï¼šåš´æ ¼éµå®ˆ
const MINIMUM_PASSWORD_LENGTH = 6;
const MAXIMUM_PASSWORD_LENGTH = 20;

function validatePassword(password) {
  if (password.length < MINIMUM_PASSWORD_LENGTH) {
    return false;
  }
  if (password.length > MAXIMUM_PASSWORD_LENGTH) {
    return false;
  }
  return true;
}

// é‡æ§‹å¾Œï¼šç™¼ç¾ 6 å’Œ 20 åªç”¨ä¸€æ¬¡ï¼Œç°¡åŒ–
function validatePassword(password) {
  const MIN_LENGTH = 6;
  const MAX_LENGTH = 20;
  return password.length >= MIN_LENGTH && password.length <= MAX_LENGTH;
}

// âœ… å…ˆåš´æ ¼ï¼Œå¾Œç°¡åŒ– > ä¸€é–‹å§‹å°±éš¨ä¾¿å¯«
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ±ºç­–æµç¨‹åœ–

```
é‡åˆ°å‘½å/è¦ç¯„å•é¡Œ
        â†“
   æŸ¥ã€Œé€ŸæŸ¥è¡¨ã€
        â†“
      æœ‰ç¯„ä¾‹ï¼Ÿ â€”â€”â†’ æ˜¯ â€”â€”â†’ ç›´æ¥å¥—ç”¨ âœ…
        â†“ å¦
   æŸ¥ã€ŒFAQ å‰3é¡Œã€
        â†“
    æœ‰é¡ä¼¼æƒ…æ³ï¼Ÿ â€”â€”â†’ æ˜¯ â€”â€”â†’ å¥—ç”¨åŸå‰‡ âœ…
        â†“ å¦
   å¥—ç”¨ã€ŒåŸå‰‡ 1ã€
  ï¼ˆä¿å®ˆå„ªæ–¼æ¿€é€²ï¼‰
        â†“
      å®Œæˆ âœ…

ç‰¹æ®Šæƒ…æ³ï¼š
- Firebase æ¬„ä½åç¨±ï¼Ÿ â†’ æŸ¥ FAQ Q1ï¼ˆä¿æŒç›¸å®¹æ€§ï¼‰
- 0/1/-1ï¼Ÿ â†’ æŸ¥ FAQ Q2ï¼ˆä¸éœ€æå–ï¼‰
- console.logï¼Ÿ â†’ æŸ¥ FAQ Q3ï¼ˆDebug å¯ä¿ç•™ï¼‰
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¯¦æˆ°æ¡ˆä¾‹

#### æ¡ˆä¾‹ 1ï¼šä¸ç¢ºå®šçš„é­”æ³•æ•¸å­—

```javascript
// æƒ…å¢ƒï¼šé€™å€‹ 30 è¦æå–å—ï¼Ÿ
setTimeout(() => {
  showNotification();
}, 30);

// ğŸ¤” åˆ¤æ–·ï¼š
// - å‡ºç¾å¹¾æ¬¡ï¼Ÿåªæœ‰ 1 æ¬¡
// - æœ‰æ¥­å‹™æ„ç¾©ï¼Ÿæœ‰ï¼ˆé€šçŸ¥å»¶é²ï¼‰
// - å¯èƒ½èª¿æ•´ï¼Ÿå¯èƒ½ï¼ˆUX å„ªåŒ–æ™‚ï¼‰

// âœ… å¥—ç”¨ã€Œä¿å®ˆåŸå‰‡ã€â†’ æå–
const NOTIFICATION_DELAY_MS = 30;
setTimeout(() => {
  showNotification();
}, NOTIFICATION_DELAY_MS);
```

#### æ¡ˆä¾‹ 2ï¼šçˆ­è­°çš„è®Šæ•¸å‘½å

```javascript
// AI A èªªï¼šé€™æ¨£å¯ä»¥
let loading = true;

// AI B èªªï¼šæ‡‰è©²æ”¹æˆ
let isLoading = true;

// ğŸ¤” è§£æ±ºæ–¹å¼ï¼š
// 1. æŸ¥é€ŸæŸ¥è¡¨ â†’ æœ‰ç¯„ä¾‹ï¼š`let active` âŒ â†’ `let isActive` âœ…
// 2. å¥—ç”¨ç›¸åŒé‚è¼¯ â†’ loading ä¹Ÿè¦å‰ç¶´
// 3. æœ€çµ‚ç­”æ¡ˆï¼šAI B æ­£ç¢º

// âœ… æ­£ç¢ºå¯«æ³•
let isLoading = true;
```

#### æ¡ˆä¾‹ 3ï¼šéåº¦å·¥ç¨‹çš„é‚Šç•Œ

```javascript
// æƒ…å¢ƒï¼šé€™æ¨£æœƒä¸æœƒå¤ªèª‡å¼µï¼Ÿ
const ARRAY_FIRST_INDEX = 0;
const result = array[ARRAY_FIRST_INDEX];

// ğŸ¤” åˆ¤æ–·ï¼š
// - 0 æœ‰æ¥­å‹™æ„ç¾©å—ï¼Ÿæ²’æœ‰ï¼ˆé€šç”¨ç´¢å¼•ï¼‰
// - æœƒé‡è¤‡å‡ºç¾å—ï¼Ÿä¸ä¸€å®š
// - æœªä¾†æœƒèª¿æ•´å—ï¼Ÿä¸æœƒï¼ˆé™£åˆ—æ°¸é å¾ 0 é–‹å§‹ï¼‰

// âœ… å¥—ç”¨ã€ŒFAQ Q2ã€â†’ ä¸éœ€æå–
const result = array[0]; // âœ… é€™æ¨£å°±å¥½
```

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### çµ¦ AI æ¨¡å‹çš„æé†’

- âš ï¸ ä¸è¦ã€ŒçŒœæ¸¬ã€ä½¿ç”¨è€…çš„æ„åœ–ï¼Œ**è©¢å•**æˆ–**é¸æ“‡ä¿å®ˆæ–¹æ¡ˆ**
- âš ï¸ ä¸è¦å› ç‚ºã€Œçœ‹èµ·ä¾†å†—é•·ã€å°±é•åè¦ç¯„
- âš ï¸ ä¸è¦è‡ªå‰µè¦å‰‡ï¼Œ**ä»¥æ–‡ä»¶ç‚ºæº–**
- âœ… å„ªå…ˆæŸ¥è¡¨ï¼ˆé€ŸæŸ¥è¡¨ > FAQ > åŸå‰‡ 1-4ï¼‰
- âœ… å›å¾©æ™‚é™„ä¸Šåƒè€ƒä¾æ“šï¼ˆç« ç¯€é€£çµï¼‰
- âœ… å¦‚æœçœŸçš„ä¸ç¢ºå®šï¼Œæ˜ç¢ºå‘ŠçŸ¥ä½¿ç”¨è€…ã€Œé€™æ˜¯ä¿å®ˆåšæ³•ã€

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“š å¿«é€Ÿåƒè€ƒ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä¸€å¥è©±è¨˜æ†¶æ³•

```
æª”æ¡ˆç”¨ kebab-caseï¼Œè®Šæ•¸ç”¨ camelCaseï¼Œ
é¡åˆ¥ç”¨ PascalCaseï¼Œå¸¸æ•¸ç”¨ UPPER_CASEï¼Œ
Firebase è·¯å¾‘ camelCase + è¤‡æ•¸ï¼Œ
JSDoc å¿…å¯«ä¸å¯çœï¼ŒCommit ç”¨ Conventionalã€‚
```

<a id="å¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸è¦‹éŒ¯èª¤é€ŸæŸ¥è¡¨

| éŒ¯èª¤å¯«æ³•                               | æ­£ç¢ºå¯«æ³•                             | èªªæ˜                   |
| -------------------------------------- | ------------------------------------ | ---------------------- |
| `RoomManager.js`                       | `room-manager.js`                    | æª”æ¡ˆç”¨ kebab-case      |
| `room_code`                            | `roomCode`                           | è®Šæ•¸ç”¨ camelCase       |
| `generateCode` (ç„¡è¨»è§£)                | åŠ ä¸Š JSDoc                           | å‡½å¼å¿…é ˆæœ‰è¨»è§£         |
| `firebase.database().ref('Room')`      | `ref('rooms')`                       | è·¯å¾‘ç”¨å°å¯«è¤‡æ•¸         |
| `git commit -m "update"`               | `feat(scope): æè¿°`                  | ä½¿ç”¨ Conventional      |
| `MAX_PLAYERS = 10` (éå¸¸æ•¸)            | `let maxPlayers = 10`                | ä¾ç”¨é€”é¸æ“‡å‘½å         |
| `expiresAt = Date.now() + 3600000`     | `+ ROOM_EXPIRY_TIME`                 | v2.2: é­”æ³•å€¼æå–ç‚ºå¸¸æ•¸ |
| `let active = true`                    | `let isActive = true`                | v2.2: å¸ƒæ—å€¼å¼·åˆ¶å‰ç¶´   |
| `function getData() {}`ï¼ˆç„¡ @returnsï¼‰ | åŠ ä¸Š `@returns {Object}` æˆ– `{void}` | v2.2: @returns ç‚ºå¿…å¡«  |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

<!-- ============================================================ -->

**æ­¤æ–‡ä»¶ç‚ºå…©å€‹ AI æ¨¡å‹çš„å…±åŒå‘½åè¦ç¯„ï¼Œè«‹åš´æ ¼éµå®ˆï¼**

<!-- ============================================================ -->

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ğŸ“ˆ ç‰ˆæœ¬æ¼”é€²å°æ¯”

| è¦ç¯„é …ç›®         | v1.0<br/>(åŸºç¤ç‰ˆ) | v2.0<br/>(å®Œæ•´ç‰ˆ) | v2.1<br/>(åŠ å¼·ç‰ˆ) | v2.2<br/>(åš´æ ¼ç‰ˆ) | v2.3<br/>(çµæ§‹åŒ–ç‰ˆ) | v2.4<br/>(å°ˆæ¡ˆå°ˆç”¨ç‰ˆ) â­ |
| :--------------- | :---------------- | :---------------- | :---------------- | :---------------- | :------------------ | :----------------------- |
| ğŸ“ æª”æ¡ˆå‘½å      | âœ… kebab-case     | âœ…                | âœ…                | âœ…                | âœ…                  | âœ…                       |
| ğŸ”¤ è®Šæ•¸å‘½å      | âœ… camelCase      | âœ…                | âœ…                | âœ…                | âœ…                  | âœ…                       |
| âœ… å¸ƒæ—å‰ç¶´      | âŒ ç„¡è¦å®š         | âŒ                | âŒ                | â­ **å¼·åˆ¶**       | âœ…                  | âœ…                       |
| â›” é­”æ³•å€¼ç¦ç”¨    | âŒ ç„¡è¦å®š         | âŒ                | âŒ                | â­ **ç¦ç”¨**       | âœ…                  | âœ…                       |
| ğŸ“ @returns      | âš ï¸ å»ºè­°           | âœ… å¿…è¦           | âœ…                | â­ **å« void**    | âœ…                  | âœ…                       |
| ğŸ”¥ Firebase è·¯å¾‘ | âŒ                | â­ æ–°å¢           | âœ…                | âœ…                | âœ…                  | â­ **æ›´æ–° gameCombos**   |
| âš ï¸ éŒ¯èª¤è™•ç†      | âŒ                | âŒ                | â­ æ–°å¢           | âœ…                | âœ…                  | âœ…                       |
| ğŸ§ äº‹ä»¶å‘½å      | âŒ                | âŒ                | â­ æ–°å¢           | âœ…                | âœ…                  | âœ…                       |
| ğŸ“¦ Git Commit    | âŒ                | â­ æ–°å¢           | âœ…                | âœ…                | âœ…                  | âœ…                       |
| â›” ç¦ç”¨æ¸…å–®      | âŒ                | âŒ                | â­ æ–°å¢           | âœ…                | âœ…                  | âœ…                       |
| â“ FAQ           | âŒ                | âŒ                | âŒ                | â­ æ–°å¢           | âœ…                  | âœ…                       |
| ğŸ¤– AI å”ä½œ       | âŒ                | âŒ                | âŒ                | â­ æ–°å¢           | âœ…                  | âœ…                       |
| ğŸ¨ è³‡æºæª”æ¡ˆ      | âŒ                | âŒ                | âŒ                | âŒ                | â­ **æ–°å¢**         | â­ éŸ³è¨Šå‰ç¶´æ›´æ–°          |
| ğŸ§ª æ¸¬è©¦å±¬æ€§      | âŒ                | âŒ                | âŒ                | âŒ                | â­ **æ–°å¢**         | âœ…                       |
| ğŸ“ Z-Index       | âŒ                | âŒ                | âŒ                | âŒ                | â­ **æ–°å¢**         | âœ…                       |
| ğŸ“¦ Import é †åº   | âŒ                | âŒ                | âŒ                | âŒ                | â­ **æ–°å¢**         | âœ…                       |
| ğŸ’¾ localStorage  | âŒ                | âŒ                | âŒ                | âŒ                | âŒ                  | â­ **æ–°å¢**              |
| ğŸ¨ CSS è®Šæ•¸      | âŒ                | âŒ                | âŒ                | âŒ                | âŒ                  | â­ **æ–°å¢**              |
| âœ¨ CSS å‹•ç•«      | âŒ                | âŒ                | âŒ                | âŒ                | âŒ                  | â­ **æ–°å¢**              |
| ğŸ—ºï¸ æ¢éšªåœ°åœ–      | âŒ                | âŒ                | âŒ                | âŒ                | âŒ                  | â­ **æ–°å¢**              |
| ğŸ·ï¸ data-\* åŠŸèƒ½  | âŒ                | âŒ                | âŒ                | âŒ                | âŒ                  | â­ **æ–°å¢**              |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç‰ˆæœ¬æ­·å²è©³æƒ…

#### v1.0 (2026/02/09) - åŸºç¤ç‰ˆ

- ğŸ“ æª”æ¡ˆå‘½åï¼škebab-case
- ğŸ”¤ è®Šæ•¸å‘½åï¼šcamelCase
- ğŸ¯ å‡½å¼å‘½åï¼šå‹•è©é–‹é ­
- ğŸ—ï¸ é¡åˆ¥å‘½åï¼šPascalCase
- ğŸ”’ å¸¸æ•¸å‘½åï¼šUPPER_SNAKE_CASE

#### v2.0 (2026/02/09) - å®Œæ•´ç‰ˆ

- â­ æ–°å¢ Firebase è·¯å¾‘è¦ç¯„ï¼ˆcamelCase + è¤‡æ•¸ï¼‰
- â­ æ–°å¢ JSDoc è¨»è§£è¦ç¯„ï¼ˆ@param, @returnsï¼‰
- â­ æ–°å¢ Git Commit è¦ç¯„ï¼ˆConventional Commitsï¼‰
- è£œå……å®Œæ•´ç¯„ä¾‹å’Œèªªæ˜

#### v2.1 (2026/02/09) - åŠ å¼·ç‰ˆ

- â­ æ–°å¢éŒ¯èª¤è™•ç†è¦ç¯„ï¼ˆçµ±ä¸€ä½¿ç”¨ errorï¼‰
- â­ æ–°å¢äº‹ä»¶å‘½åè¦ç¯„ï¼ˆon + åè© + å‹•ä½œï¼‰
- â­ æ–°å¢ç¦ç”¨æ¸…å–®ï¼ˆåš´æ ¼ç¦æ­¢çš„å¯«æ³•ï¼‰
- æ–°å¢äº‹ä»¶åç¨±è¦ç¯„ï¼ˆåè©:éå»å¼ï¼‰

#### v2.2 (2026/02/09) - åš´æ ¼ç‰ˆ

- â­ **æ–°å¢é­”æ³•å€¼ç¦ç”¨è¦ç¯„**ï¼ˆæå–ç‚ºå…·åå¸¸æ•¸ï¼‰
- â­ **å¸ƒæ—å€¼å¼·åˆ¶å‰ç¶´**ï¼ˆis/has/can/shouldï¼‰
- â­ **@returns å¼·åˆ¶è¦ç¯„**ï¼ˆåŒ…å« voidï¼‰
- â­ æ–°å¢ v2.2 é·ç§»æŒ‡å—
- â­ æ–°å¢ FAQ å¸¸è¦‹å•é¡Œ
- â­ æ–°å¢ AI å”ä½œæŒ‡å—
- â­ æ–°å¢ä»£ç¢¼æ¨¡æ¿
- â­ æ–°å¢è‡ªå‹•æª¢æŸ¥å·¥å…·

#### v2.3 (2026/02/09) - çµæ§‹åŒ–ç‰ˆ

- â­ **æ–°å¢è³‡æºæª”æ¡ˆå‘½åè¦ç¯„**ï¼ˆåœ–ç‰‡/éŸ³è¨Š/å½±ç‰‡å¼·åˆ¶å‰ç¶´åˆ†é¡ï¼‰
- â­ **æ–°å¢æ¸¬è©¦å±¬æ€§å‘½åè¦ç¯„**ï¼ˆdata-testid / data-cyï¼‰
- â­ **æ–°å¢ Z-Index å±¤ç´šç®¡ç†**ï¼ˆå¸¸æ•¸åŒ–é¿å…é­”æ³•å€¼ï¼‰
- â­ **æ–°å¢ Import é †åºè¦ç¯„**ï¼ˆç¬¬ä¸‰æ–¹â†’å…§éƒ¨â†’æ¨£å¼ï¼‰
- å°ˆé …è¦ç¯„å¾ 28 é …æ“´å……è‡³ 32 é …
- æå‡å°ˆæ¡ˆçµæ§‹åŒ–èˆ‡å¯ç¶­è­·æ€§

#### v2.4 (2026/02/13) - å°ˆæ¡ˆå°ˆç”¨ç‰ˆï¼ˆç•¶å‰ï¼‰â­

- â­ **æ–°å¢ localStorage Key å‘½åè¦ç¯„**ï¼ˆé ‚å±¤ key + å·¢ç‹€æ¬„ä½ + ç‰ˆæœ¬é·ç§»ç­–ç•¥ï¼‰
- â­ **æ–°å¢ CSS Custom Property å‘½åè¦ç¯„**ï¼ˆ`--{category}-{descriptor}` + å‰ç¶´åˆ†é¡è¡¨ + ä¸»é¡Œè‰²åˆ†é›¢ï¼‰
- â­ **æ–°å¢ CSS å‹•ç•«å‘½åè¦ç¯„**ï¼ˆ@keyframes + class é…å° + JS å¸¸æ•¸åŒæ­¥ï¼‰
- â­ **æ–°å¢æ¢éšªåœ°åœ–å‘½åè¦ç¯„**ï¼ˆMap ID / Point ID / fieldRuleRecords / ç‹€æ…‹æšèˆ‰ / Combo IDï¼‰
- â­ **æ–°å¢åŠŸèƒ½æ€§ data-\* å±¬æ€§è¦ç¯„**ï¼ˆdata-theme / data-field / data-stateï¼Œå€åˆ†æ¸¬è©¦ç”¨ vs åŠŸèƒ½ç”¨ï¼‰
- â­ **æ›´æ–° Firebase è·¯å¾‘**ï¼ˆgameStages â†’ gameCombosï¼Œæ–°å¢ comboStatus / workingMemoryResult / liveLeaderboardsï¼‰
- â­ **æ›´æ–°éŸ³è¨Šå‰ç¶´**ï¼ˆç§»é™¤ bgm-ï¼Œæ–°å¢ badge- / level- / wm-ï¼‰
- å°ˆé …è¦ç¯„å¾ 32 é …æ“´å……è‡³ 38 é …
- å°é½Šå®Œæ•´éœ€æ±‚æ–‡ä»¶ v2.2 çš„å¯¦éš›æŠ€è¡“æ¶æ§‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‡ç´šå»ºè­°

| å‡ç´šè·¯å¾‘    | å·¥ä½œé‡ä¼°è¨ˆ | ä¸»è¦è®Šæ›´                        | å„ªå…ˆç´š |
| :---------- | :--------- | :------------------------------ | :----- |
| v1.0 â†’ v2.0 | 2-3 å°æ™‚   | è£œå…… Firebaseã€JSDocã€Git è¦ç¯„  | ğŸŸ¡ ä¸­  |
| v2.0 â†’ v2.1 | 30 åˆ†é˜    | æ–°å¢éŒ¯èª¤è™•ç†å’Œäº‹ä»¶å‘½å          | ğŸŸ¡ ä¸­  |
| v2.1 â†’ v2.2 | 4-6 å°æ™‚   | â­ é‡é»é·ç§»ï¼ˆé­”æ³•å€¼ã€å¸ƒæ—å‰ç¶´ï¼‰ | ğŸ”´ é«˜  |
| v2.2 â†’ v2.3 | 2-3 å°æ™‚   | â­ è³‡æºæª”æ¡ˆé‡å‘½åã€æ¸¬è©¦å±¬æ€§æ·»åŠ  | ğŸŸ¡ ä¸­  |
| v1.0 â†’ v2.3 | 1-2 å¤©     | å®Œæ•´å‡ç´šï¼Œå»ºè­°åˆ†éšæ®µé€²è¡Œ        | ğŸ”´ é«˜  |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å‘å¾Œç›¸å®¹æ€§

| ç‰ˆæœ¬ | èˆ‡ v2.2 ç›¸å®¹æ€§ | èªªæ˜                                  |
| ---- | -------------- | ------------------------------------- |
| v2.1 | âš ï¸ éƒ¨åˆ†ç›¸å®¹    | éœ€è£œå……é­”æ³•å€¼ã€å¸ƒæ—å‰ç¶´ã€@returns void |
| v2.0 | âš ï¸ éœ€å‡ç´š      | ç¼ºå°‘éŒ¯èª¤è™•ç†ã€äº‹ä»¶å‘½åã€v2.2 æ–°è¦ç¯„   |
| v1.0 | âŒ ä¸ç›¸å®¹      | ç¼ºå°‘å¤§éƒ¨åˆ†é€²éšè¦ç¯„ï¼Œå»ºè­°å®Œæ•´å‡ç´š      |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="part-3æ¶æ§‹è¨­è¨ˆåŸå‰‡"></a>

# Part 3ï¼šæ¶æ§‹è¨­è¨ˆåŸå‰‡ â­ v1.1 æ–°å¢

> ğŸ“Œ æ–°å¢æ–¼ v1.1ï¼ˆ2026/02/14ï¼‰ï¼Œè¨˜éŒ„å°ˆæ¡ˆçš„æ¶æ§‹è¨­è¨ˆæ±ºç­–èˆ‡ç´„æŸæ¢ä»¶

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## ç¶œè§€

æœ¬å°ˆæ¡ˆæ¡ç”¨ **Vanilla JavaScript + IIFE æ¨¡çµ„åŒ–**ï¼ˆç„¡ bundlerï¼‰ï¼Œ  
å› æ­¤æ¨¡çµ„é–“çš„è€¦åˆæ§åˆ¶å°¤å…¶é‡è¦â€”â€”æ²’æœ‰æ¨¡çµ„ç³»çµ±å¹«å¿™æª¢æŸ¥ä¾è³´ï¼Œå°±å¾—é è¦ç¯„ä¾†ç¢ºä¿ã€‚

éµå¾ªå…©å€‹æ ¸å¿ƒåŸå‰‡ï¼š

| åŸå‰‡                       | å®šç¾©                   | åœ¨æœ¬å°ˆæ¡ˆçš„æ„ç¾©                |
| -------------------------- | ---------------------- | ----------------------------- |
| **ä½è€¦åˆ** (Low Coupling)  | æ¨¡çµ„ä¹‹é–“çš„ä¾è³´è¶Šå°‘è¶Šå¥½ | ä¿®æ”¹ A æª”æ¡ˆä¸æ‡‰è¦æ”¹åˆ° Bã€Cã€D |
| **é«˜å…§èš** (High Cohesion) | æ¨¡çµ„å…§éƒ¨åŠŸèƒ½è¶Šèšç„¦è¶Šå¥½ | æ¯å€‹æª”æ¡ˆåªåšä¸€ä»¶äº‹ï¼Œåšå¾ˆå¥½    |

---

## 3.1 å¯è®Šå…§å®¹é›†ä¸­ç®¡ç†ï¼ˆSingle Source of Truthï¼‰

### åŸå‰‡

> ã€ŒåŒä¸€å€‹å¸¸æ•¸ï¼Œåªåœ¨ä¸€å€‹åœ°æ–¹å®šç¾©ï¼Œå…¶ä»–åœ°æ–¹åªèƒ½è®€å–ã€‚ã€

**ç‚ºä»€éº¼ï¼Ÿ**

- ç¡¬ç·¨ç¢¼é‡è¤‡å€¼æ˜¯ **bug çš„æº«åºŠ**â€”â€”ä¿®äº†ä¸€å€‹åœ°æ–¹å¿˜è¨˜ä¿®å¦ä¸€å€‹
- é›†ä¸­å®šç¾©å¾Œï¼Œä¿®æ”¹ä¸€å€‹åœ°æ–¹å°±èƒ½å…¨å±€ç”Ÿæ•ˆ

### æœ¬å°ˆæ¡ˆçš„å¯¦æ–½

**å¸¸æ•¸æä¾›è€…**ï¼š`js/game-config.js` å…§çš„ `window.GameConstants`

```javascript
// æä¾›è€…ï¼ˆgame-config.jsï¼‰
window.GameConstants = {
  // â‘  CSV æ¬„ä½å®šç¾©
  CSV_FIELDS: {
    rank: "æ’å",
    nickname: "æš±ç¨±",
    totalScore: "ç¸½åˆ†",
    stars: "æ˜Ÿæ˜Ÿæ•¸",
    accuracy: "ç­”å°ç‡",
    avgRT: "å¹³å‡åæ‡‰",
    // ...  å…¶é¤˜æ¬„ä½
  },
  CSV_FIELD_ORDER: [
    "rank",
    "nickname",
    "totalScore",
    "stars",
    "accuracy",
    "scoreA",
    "scoreB",
    "scoreC",
    "scoreD",
    "avgRT",
  ],

  // â‘¡ å›åˆè¨­å®š
  REGULAR_ROUND_IDS: ["A", "B", "C", "D"],
  WM_ROUND_IDS: ["WM_A", "WM_B", "WM_C", "WM_D"],
  WM_ROUND_PREFIX: "WM_",
  ROUND_DISPLAY_NAMES: {
    A: "ğŸ•ï¸ æ£®æ— A",
    B: "ğŸ–ï¸ æµ·ç£ B",
    C: "ğŸï¸ è‰åŸ C",
    D: "ğŸ›ï¸ åŸå¸‚ D",
  },
  ROUND_SHORT_LABELS: { A: "æ£®æ—A", B: "æµ·ç£B", C: "è‰åŸC", D: "åŸå¸‚D" },
  ROUND_CHART_COLORS: {
    A: "#4CAF50",
    B: "#2196F3",
    C: "#FF9800",
    D: "#E91E63",
  },

  // â‘¢ å ±å‘Š Metadata
  REPORT_META: {
    appName: "EFè¨“ç·´éŠæˆ²",
    subtitle: "åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ² - é€é¡Œåˆ†æå ±å‘Š",
    copyright: "Â© 2026 EFè¨“ç·´éŠæˆ²",
    autoGenerated: "æ­¤å ±å‘Šç”±ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ",
  },

  // â‘£ æª”åå‘½å
  CSV_FILE_NAMING: {
    prefix: "EFè¨“ç·´éŠæˆ²åˆ†æå ±å‘Š",
    defaultSuffix: ".csv",
    pdfSuffix: ".pdf",
    pngSuffix: ".png",
  },
  CSV_FILENAME_REGEX:
    /^(EFè¨“ç·´éŠæˆ²|\u591a\u4eba\u904a\u6232|\u904a\u6232\u6210\u7e3e).*\.csv$/i,
};
```

### æ¶ˆè²»è€…æ•´åˆè¡¨

| æ¶ˆè²»è€…æª”æ¡ˆ                    | è®€å–çš„å¸¸æ•¸çµ„                | ç”¨é€”                        |
| ----------------------------- | --------------------------- | --------------------------- |
| `js/shared/csv-report.js`     | å…¨éƒ¨ 6 çµ„                   | åœ–è¡¨ã€è¡¨æ ¼ã€PDFã€æª”å       |
| `js/shared/combo-selector.js` | FIELDS, RULES               | Stage è¨»å†Šè¡¨ SoT            |
| `js/shared/trial-renderer.js` | â€”                           | SP/MP å…±ç”¨åˆºæ¿€ç‰©æ¸²æŸ“        |
| `js/shared/result-upload.js`  | â€”                           | æ’è¡Œæ¦œä¸Šå‚³ï¼ˆç­ç´š+ä¸–ç•Œï¼‰     |
| `singleplayer/result.html`    | CSV_FIELDS, ROUND_IDS       | `_convertTrials()` æ¬„ä½å°æ‡‰ |
| `js/game-logic.js`            | CSV_FIELDS, CSV_FIELD_ORDER | `exportData()` è¼¸å‡º         |

---

## 3.2 é˜²ç¦¦æ€§ Fallback æ¨¡å¼

### åŸå‰‡

> ã€Œæ¶ˆè²»è€…æ°¸é ä¸èƒ½å› ç‚ºå¸¸æ•¸æª”æœªè¼‰å…¥è€Œå´©æ½°ã€‚ã€

### å¿…é ˆä½¿ç”¨çš„ `|| fallback` æ¨¡å¼

```javascript
// âœ… æ­£ç¢ºï¼šå¸¶ fallback çš„è®€å–æ–¹å¼
const C = window.GameConstants || {};
const fields = C.CSV_FIELDS || { rank: "æ’å", nickname: "æš±ç¨±" };
const rounds = C.REGULAR_ROUND_IDS || ["A", "B", "C", "D"];
const meta = C.REPORT_META || { appName: "EFè¨“ç·´éŠæˆ²" };

// âŒ éŒ¯èª¤ï¼šç›´æ¥å­˜å–ï¼Œè‹¥å¸¸æ•¸æª”æœªè¼‰å…¥æœƒæ‹‹éŒ¯
const fields = window.GameConstants.CSV_FIELDS; // ğŸ’¥ TypeError
```

### ç‚ºä»€éº¼éœ€è¦ fallbackï¼Ÿ

| æƒ…å¢ƒ                | èªªæ˜                                |
| ------------------- | ----------------------------------- |
| script è¼‰å…¥é †åºéŒ¯èª¤ | æ¶ˆè²»è€…åœ¨æä¾›è€…ä¹‹å‰åŸ·è¡Œ              |
| CDN å¤±æ•ˆ            | html2pdf.js æˆ– Chart.js æœªè¼‰å…¥      |
| å±€éƒ¨æ¸¬è©¦            | åªé–‹å–®ä¸€ HTML æª”æ¡ˆæ¸¬è©¦              |
| ç‰ˆæœ¬äº¤æ›¿            | A ç‰ˆæœ¬æ–°å¢äº†å¸¸æ•¸ï¼ŒB ç‰ˆæœ¬é‚„æ²’ deploy |

### Fallback å€¼çš„ç´„æŸ

1. Fallback å€¼å¿…é ˆèˆ‡ `GameConstants` å…§çš„é è¨­å€¼ **å®Œå…¨ä¸€è‡´**
2. å³ä½¿ä½¿ç”¨ fallbackï¼ŒåŠŸèƒ½å¿…é ˆæ­£å¸¸é‹ä½œï¼ˆåªæ˜¯å¤±å»å®¢è£½åŒ–èƒ½åŠ›ï¼‰
3. æ¯æ¬¡æ–°å¢å¸¸æ•¸çµ„æ™‚ï¼ŒåŒæ™‚åœ¨æ¶ˆè²»è€…åŠ ä¸Šå°æ‡‰çš„ fallback

---

## 3.3 è€¦åˆé»ç›¤é»æµç¨‹

ç•¶æ–°å¢æˆ–ä¿®æ”¹ã€Œå¯èƒ½è¢«å¤šå€‹æª”æ¡ˆä½¿ç”¨ã€çš„å…§å®¹æ™‚ï¼ŒåŸ·è¡Œä»¥ä¸‹æµç¨‹ï¼š

```
â‘  è­˜åˆ¥å¯è®Šå…§å®¹
   â””â”€ é€™å€‹å­—ä¸²/å€¼/åç¨±æ˜¯å¦å‡ºç¾åœ¨ â‰¥2 å€‹æª”æ¡ˆï¼Ÿ

â‘¡ æå–è‡³ GameConstants
   â””â”€ åœ¨ game-config.js æ–°å¢å¸¸æ•¸çµ„
   â””â”€ å‘½åæ¡ç”¨ SCREAMING_SNAKE_CASE

â‘¢ æ›´æ–°æ‰€æœ‰æ¶ˆè²»è€…
   â””â”€ æœå°‹æ‰€æœ‰ç¡¬ç·¨ç¢¼å‡ºç¾è™•
   â””â”€ æ›¿æ›ç‚º GameConstants.XXX || fallback

â‘£ æ›´æ–°æ–‡ä»¶
   â””â”€ æœ¬æ–‡ä»¶ Â§3.1 æ¶ˆè²»è€…æ•´åˆè¡¨
   â””â”€ éœ€æ±‚æ–‡ä»¶ Â§11.9 é‡æ§‹ç´€éŒ„
```

### å¯¦éš›æ¡ˆä¾‹ï¼šCSV æ¬„ä½åç¨±é›†ä¸­åŒ–

**å•é¡Œ**ï¼š`'æ’å'`ã€`'æš±ç¨±'`ã€`'EFè¨“ç·´éŠæˆ²'` ç­‰ä¸­æ–‡å­—ä¸²åˆ†æ•£åœ¨ 3 å€‹æª”æ¡ˆä¸­ï¼Œ
å°è‡´ä¿®æ”¹æ¬„ä½åç¨±æ™‚å¿…é ˆåŒæ™‚ä¿®æ”¹ 3 å€‹åœ°æ–¹ã€‚

**è§£æ±º**ï¼š

```
Before:                           After:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ csv-report.js  â”‚           â”‚ game-config.js â”‚ â† Single Source
â”‚  'æ’å'        â”‚           â”‚  CSV_FIELDS   â”‚
â”‚  'æš±ç¨±'        â”‚           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ result.html    â”‚       â”‚           â”‚           â”‚
â”‚  'æ’å'        â”‚   csv-report  result   game-logic
â”‚  'æš±ç¨±'        â”‚    || fallback  || fallback  || fallback
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ game-logic.js  â”‚
â”‚  'æ’å'        â”‚
â”‚  'æš±ç¨±'        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3.4 æ¨¡çµ„è¨­è¨ˆæº–å‰‡

| æº–å‰‡             | èªªæ˜                 | ç¯„ä¾‹                                                                            |
| ---------------- | -------------------- | ------------------------------------------------------------------------------- |
| **å–®ä¸€è·è²¬**     | ä¸€å€‹æª”æ¡ˆåªåšä¸€ä»¶äº‹   | `csv-report.js` åªè² è²¬å ±å‘Šç”Ÿæˆ                                                  |
| **ä»‹é¢åˆ†é›¢**     | ä¾è³´æŠ½è±¡è€Œéå¯¦ä½œ     | é€é `window.GameConstants` è€Œéç›´æ¥å¼•ç”¨å…¶ä»–æª”æ¡ˆçš„è®Šæ•¸                          |
| **é™åˆ¶ä¾è³´æ–¹å‘** | ä¸‹æ¸¸ä¸èƒ½åå‘ä¾è³´ä¸Šæ¸¸ | `csv-report.js` å¯è®€ `GameConstants`ï¼Œä½† `game-config.js` ä¸å¯å¼•ç”¨ `csv-report` |
| **é¿å…å¾ªç’°ä¾è³´** | Aâ†’Bâ†’A æ˜¯ç¦æ­¢çš„       | ç¢ºä¿ `<script>` è¼‰å…¥é †åºåæ˜ ä¾è³´æ–¹å‘                                            |

### æ–°å¢å…±ç”¨æ¨¡çµ„çš„ Checklist

```
â˜ æ¨¡çµ„æ˜¯å¦åªåšä¸€ä»¶äº‹ï¼Ÿ
â˜ æ˜¯å¦é€é GameConstants å–å¾—å…±ç”¨å¸¸æ•¸ï¼ˆè€Œéç¡¬ç·¨ç¢¼ï¼‰ï¼Ÿ
â˜ æ˜¯å¦åŠ äº† || fallbackï¼Ÿ
â˜ æ˜¯å¦æ›´æ–°äº†æœ¬æ–‡ä»¶ Â§3.1 æ¶ˆè²»è€…æ•´åˆè¡¨ï¼Ÿ
â˜ æ˜¯å¦æ›´æ–°äº†éœ€æ±‚æ–‡ä»¶ Â§11 æª”æ¡ˆæ¸…å–®ï¼Ÿ
â˜ æ˜¯å¦ç¢ºèªé HTML è¼‰å…¥é †åºï¼Ÿ
```

---

## 3.5 ç‰ˆæœ¬æ›´æ–°ç´€éŒ„

| æ—¥æœŸ       | ç‰ˆæœ¬ | è®Šæ›´å…§å®¹                                                                |
| ---------- | ---- | ----------------------------------------------------------------------- |
| 2026/02/13 | v1.0 | å»ºç«‹æ–‡ä»¶ï¼ˆåˆä½µ NAMING-CONVENTION.md + ç¨‹å¼é™¤éŒ¯å®Œæ•´æŒ‡å—.mdï¼‰             |
| 2026/02/14 | v1.1 | æ–°å¢ Part 3 æ¶æ§‹è¨­è¨ˆåŸå‰‡ï¼›æ›´æ–°é›†ä¸­ç®¡ç†å¸¸æ•¸ç¯„ä¾‹ç‚ºå¯¦éš› GameConstants æ¶æ§‹ |
| 2026/02/18 | v1.2 | æ–°å¢ Â§3.6 Phase 5 å…±ç”¨æ¨¡çµ„è¨­è¨ˆç´€éŒ„ï¼›æ›´æ–°æ¶ˆè²»è€…æ•´åˆè¡¨ï¼›å°æ‡‰éœ€æ±‚æ–‡ä»¶ v4.6 |

---

## 3.6 Phase 5 å…±ç”¨æ¨¡çµ„è¨­è¨ˆç´€éŒ„ â­ v1.2 æ–°å¢

> ğŸ“Œ Phase 5ï¼ˆP0-P4ï¼‰é‡æ§‹å¾Œæ–°å¢çš„ä¸‰å€‹æ ¸å¿ƒå…±ç”¨æ¨¡çµ„ï¼Œè®“ SP/MP å…±äº«åŒä¸€å¥—é‚è¼¯

### 3.6.1 combo-selector.jsï¼ˆå ´åœ°Ã—è¦å‰‡ Stage è¨»å†Šè¡¨ï¼‰

**è·¯å¾‘**ï¼š`js/shared/combo-selector.js`  
**è‹åˆè§’è‰²**ï¼šSingle Source of Truth â€” å°‡ã€Œå ´åœ° IDã€å°æ‡‰åˆ°ã€Œè¦å‰‡ã€ã€ã€ŒenableWmã€ã€ã€ŒstageIdã€çš„æ˜ å°„é›†ä¸­ç®¡ç†

```javascript
// æŸ¥è©¢ç”¨æ³•
// ComboSelector.getMapping(fieldId) â†’ { ruleId, enableWm, stageId }
// ComboSelector.getAllStageIds() â†’ ['A', 'B', 'C', 'D']
```

**æ¶ˆè²»è€…**ï¼šSP game-controller, MP game-controller, game-session-builder

### 3.6.2 trial-renderer.jsï¼ˆSP/MP å…±ç”¨è©¦é©—æ¸²æŸ“å™¨ï¼‰

**è·¯å¾‘**ï¼š`js/shared/trial-renderer.js`  
**è‹åˆè§’è‰²**ï¼šUI å±¤æŠ½è±¡ â€” å°‡ã€Œåˆºæ¿€ç‰©é¡¯ç¤ºã€ã€ã€Œè¦å‰‡æ¡†ã€ã€ã€Œé›£åº¦ badgeã€ç­‰ DOM æ“ä½œå°è£ï¼Œé¿å… SP/MP é‡è¤‡å¯«

```javascript
// æŸ¥è©¢ç”¨æ³•
// TrialRenderer.renderStimulus(container, svgKey, context)
// TrialRenderer.renderRuleBox(container, rule, mixed)
// TrialRenderer.renderDifficultyBadge(container, level)
```

**æ¶ˆè²»è€…**ï¼šSP game-controller, MP game-controller

### 3.6.3 result-upload.jsï¼ˆæ’è¡Œæ¦œä¸Šå‚³å…±ç”¨æ¨¡çµ„ï¼‰

**è·¯å¾‘**ï¼š`js/shared/result-upload.js`  
**è‹åˆè§’è‰²**ï¼šè³‡æ–™å±¤æŠ½è±¡ â€” å°‡ã€Œä¸Šå‚³ç­ç´šæ’è¡Œæ¦œã€ã€ã€Œä¸Šå‚³ä¸–ç•Œæ’è¡Œæ¦œã€å°è£ï¼Œéš±è— Firebase RTDB/Firestore å¯«å…¥ç´°ç¯€

```javascript
// æŸ¥è©¢ç”¨æ³•
// ResultUpload.uploadToClassLeaderboard(classId, resultData)
// ResultUpload.uploadToWorldLeaderboard(resultData)
```

**æ¶ˆè²»è€…**ï¼šSP result-controller, MP result-controller

### 3.6.4 è¨­è¨ˆæ±ºç­–æ‘˜è¦

| æ±ºç­–                                        | ç†ç”±                                                   |
| ------------------------------------------- | ------------------------------------------------------ |
| ä¸ä½¿ç”¨ ES Module import/export              | å°ˆæ¡ˆæ¡ Vanilla JS + IIFEï¼Œé€é `window` å…±äº«           |
| `window.XxxModule` å‘½åæ…£ä¾‹                 | PascalCase æ¨¡çµ„åï¼Œèˆ‡æª”å kebab-case å°æ‡‰              |
| combo-selector æŠ½å‡ºè€Œéå½±æ•´åˆåˆ° game-config | å ´åœ°æ˜ å°„å¯èƒ½éš¨ Stage E/F æ“´å……ï¼Œç¨ç«‹æ¨¡çµ„æ›´å¥½ç¶­è­·        |
| trial-renderer æŠ½å‡ºè€Œéç•™åœ¨ controller      | æ¸²æŸ“é‚è¼¯èˆ‡éŠæˆ²ç‹€æ…‹æ©Ÿç„¡é—œï¼Œå–®ä¸€è·è²¬åŸå‰‡                 |
| result-upload Firebase å¯«å…¥é›†ä¸­             | é¿å… SP/MP åˆ†åˆ¥å¯« Firebase APIï¼Œä¿®æ”¹å®‰å…¨è¦å‰‡æ™‚åªæ”¹ä¸€è™• |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="part-2ç¨‹å¼é™¤éŒ¯æŒ‡å—"></a>

# Part 2ï¼šç¨‹å¼é™¤éŒ¯æŒ‡å—

> ğŸ“Œ åŸå§‹æª”æ¡ˆï¼šç¨‹å¼é™¤éŒ¯å®Œæ•´æŒ‡å—.mdï¼ˆå·²æ¨™è¨˜æ£„ç”¨ï¼‰

---

> DCCS éŠæˆ²é–‹ç™¼å°ˆç”¨é™¤éŒ¯æ–‡ä»¶
> æœ€å¾Œæ›´æ–°ï¼š2026å¹´2æœˆ13æ—¥

<a id="ç›®éŒ„"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ç›®éŒ„

1. [ä»€éº¼æ˜¯ã€ŒåŸ‹æ¨ã€é™¤éŒ¯](#ä»€éº¼æ˜¯åŸ‹æ¨é™¤éŒ¯)
2. [Console å®¶æ—æ–¹æ³•](#console-å®¶æ—æ–¹æ³•)
3. [Debugger æ™‚é–“æš«åœå¤§æ³•](#debugger-æ™‚é–“æš«åœå¤§æ³•)
4. [Visual Debugging ç•«é¢é¡¯ç¤º](#visual-debugging-ç•«é¢é¡¯ç¤º)
5. [Network Tab ç¶²è·¯åµæ¢](#network-tab-ç¶²è·¯åµæ¢)
6. [éŒ¯èª¤è™•ç†æ©Ÿåˆ¶](#éŒ¯èª¤è™•ç†æ©Ÿåˆ¶)
7. [è‡ªè¨‚ DEBUG å·¥å…·ç³»çµ±](#è‡ªè¨‚-debug-å·¥å…·ç³»çµ±)
8. [æ•ˆèƒ½ç›£æ§å·¥å…·](#æ•ˆèƒ½ç›£æ§å·¥å…·)
9. [é€²éšé™¤éŒ¯æŠ€å·§](#é€²éšé™¤éŒ¯æŠ€å·§)
10. [VS Code æ•´åˆåµéŒ¯](#vs-code-æ•´åˆåµéŒ¯)
11. [Chrome DevTools é€²éšæ–·é»](#chrome-devtools-é€²éšæ–·é»)
12. [é™¤éŒ¯æ€ç¶­æ–¹æ³•è«–](#é™¤éŒ¯æ€ç¶­æ–¹æ³•è«–) ğŸ†•
13. [é™¤éŒ¯æ–¹æ³•æ¯”è¼ƒè¡¨](#é™¤éŒ¯æ–¹æ³•æ¯”è¼ƒè¡¨)
14. [DCCS éŠæˆ²å°ˆç”¨é™¤éŒ¯ç­–ç•¥](#dccs-éŠæˆ²å°ˆç”¨é™¤éŒ¯ç­–ç•¥)

---

<a id="ä»€éº¼æ˜¯åŸ‹æ¨é™¤éŒ¯"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## ä»€éº¼æ˜¯ã€ŒåŸ‹æ¨ã€é™¤éŒ¯

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

ã€ŒåŸ‹æ¨ã€å°±åƒåœ¨ç¨‹å¼ç¢¼çš„é—œéµä½ç½®æ’ä¸Šæ——å­ï¼Œç•¶ç¨‹å¼åŸ·è¡Œæ™‚å¯ä»¥è¿½è¹¤ï¼š

- **ç¨‹å¼åŸ·è¡Œåˆ°å“ªè£¡äº†**
- **è®Šæ•¸çš„å€¼æ˜¯ä»€éº¼**
- **æ˜¯å¦ç™¼ç”ŸéŒ¯èª¤**
- **åŸ·è¡ŒèŠ±äº†å¤šå°‘æ™‚é–“**

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç‚ºä»€éº¼éœ€è¦é™¤éŒ¯

```javascript
// æ²’æœ‰é™¤éŒ¯ï¼šç¨‹å¼å£äº†ï¼Œå®Œå…¨ä¸çŸ¥é“å“ªè£¡æœ‰å•é¡Œ
function calculateScore() {
  let score = playerCards.length * 10;
  return score;
}

// æœ‰é™¤éŒ¯ï¼šå¯ä»¥è¿½è¹¤æ¯ä¸€æ­¥
function calculateScore() {
  console.log("ğŸ” é–‹å§‹è¨ˆç®—åˆ†æ•¸");
  console.log("ç©å®¶å¡ç‰‡æ•¸é‡:", playerCards.length);
  let score = playerCards.length * 10;
  console.log("è¨ˆç®—çµæœ:", score);
  return score;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="console-å®¶æ—æ–¹æ³•"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## Console å®¶æ—æ–¹æ³•

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. console.log() - åŸºæœ¬è¼¸å‡º

**ç”¨é€”ï¼š** æœ€åŸºæœ¬çš„é™¤éŒ¯æ–¹æ³•ï¼Œè¼¸å‡ºè®Šæ•¸å€¼æˆ–è¨Šæ¯

```javascript
// åŸºæœ¬ç”¨æ³•
console.log("éŠæˆ²é–‹å§‹");
console.log("ç©å®¶åˆ†æ•¸:", playerScore);

// è¼¸å‡ºå¤šå€‹è®Šæ•¸
console.log("ç•¶å‰ç‹€æ…‹:", {
  round: currentRound,
  player: currentPlayer,
  score: playerScore,
});

// ä½¿ç”¨ç¯„æœ¬å­—ä¸²
console.log(`ç¬¬ ${currentRound} å›åˆï¼Œç©å®¶ ${currentPlayer} å¾—åˆ†`);
```

**å„ªé»ï¼š**

- âœ… é›¶å­¸ç¿’æˆæœ¬ï¼Œç«‹å³å¯ç”¨
- âœ… å¿«é€Ÿé©—è­‰è®Šæ•¸å€¼
- âœ… ä¸å½±éŸ¿ç¨‹å¼åŸ·è¡Œ

**ç¼ºé»ï¼š**

- âŒ å¤§é‡ log æœƒè®“ console å¾ˆäº‚
- âŒ æ­£å¼ç’°å¢ƒéœ€è¦æ‰‹å‹•ç§»é™¤
- âŒ æ²’æœ‰é¡è‰²å€åˆ†ï¼Œä¸å¥½è¾¨è­˜

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 2. console.error() - éŒ¯èª¤è¨Šæ¯ï¼ˆç´…è‰²ï¼‰

**ç”¨é€”ï¼š** é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼Œä»¥ç´…è‰²æ–‡å­—å‘ˆç¾ï¼Œå¼•èµ·æ³¨æ„

```javascript
// è³‡æ–™é©—è­‰å¤±æ•—
if (!playerId) {
  console.error("âŒ éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°ç©å®¶ ID");
}

// API è«‹æ±‚å¤±æ•—
fetch("/api/scores").catch((error) => {
  console.error("âŒ åˆ†æ•¸è¼‰å…¥å¤±æ•—:", error.message);
});

// Firebase é€£ç·šå•é¡Œ
firebase
  .auth()
  .signInAnonymously()
  .catch((error) => {
    console.error("âŒ Firebase é©—è­‰å¤±æ•—:", {
      code: error.code,
      message: error.message,
    });
  });
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- è³‡æ–™é©—è­‰å¤±æ•—
- API è«‹æ±‚éŒ¯èª¤
- æ‰¾ä¸åˆ°å¿…è¦çš„ DOM å…ƒç´ 
- Firebase é€£ç·šå•é¡Œ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 3. console.warn() - è­¦å‘Šè¨Šæ¯ï¼ˆé»ƒè‰²ï¼‰

**ç”¨é€”ï¼š** é¡¯ç¤ºè­¦å‘Šè¨Šæ¯ï¼Œä»¥é»ƒè‰²æ–‡å­—å‘ˆç¾

```javascript
// æ•ˆèƒ½è­¦å‘Š
if (cardDeck.length > 1000) {
  console.warn("âš ï¸ è­¦å‘Šï¼šå¡ç‰‡æ•¸é‡éå¤šï¼Œå¯èƒ½å½±éŸ¿æ•ˆèƒ½");
}

// éæ™‚çš„ API
function oldFunction() {
  console.warn("âš ï¸ æ­¤å‡½å¼å·²éæ™‚ï¼Œè«‹ä½¿ç”¨ newFunction()");
  // ... å‡½å¼å…§å®¹
}

// è³‡æ–™ä¸å®Œæ•´
if (!player.name) {
  console.warn("âš ï¸ ç©å®¶åç¨±æœªè¨­å®šï¼Œå°‡ä½¿ç”¨é è¨­å€¼");
  player.name = "è¨ªå®¢";
}
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- æ½›åœ¨çš„æ•ˆèƒ½å•é¡Œ
- ä½¿ç”¨éæ™‚çš„åŠŸèƒ½
- éè‡´å‘½æ€§çš„è³‡æ–™å•é¡Œ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 4. console.table() - è¡¨æ ¼é¡¯ç¤ºï¼ˆğŸ”¥ å¼·åŠ›æ¨è–¦ï¼‰

**ç”¨é€”ï¼š** å°‡é™£åˆ—æˆ–ç‰©ä»¶ä»¥è¡¨æ ¼å½¢å¼é¡¯ç¤ºï¼Œä¸€ç›®ç­ç„¶

```javascript
// é¡¯ç¤ºæ’è¡Œæ¦œè³‡æ–™
const leaderboard = [
  { rank: 1, name: "ç©å®¶A", score: 95 },
  { rank: 2, name: "ç©å®¶B", score: 87 },
  { rank: 3, name: "ç©å®¶C", score: 82 },
];
console.table(leaderboard);

// é¡¯ç¤ºå¡ç‰‡è³‡æ–™
const cardDeck = [
  { id: 1, type: "circle", color: "red" },
  { id: 2, type: "square", color: "blue" },
  { id: 3, type: "triangle", color: "green" },
];
console.table(cardDeck);

// é¡¯ç¤ºç©å®¶ç‹€æ…‹
const players = {
  player1: { score: 45, round: 3 },
  player2: { score: 38, round: 3 },
};
console.table(players);
```

**é¡¯ç¤ºæ•ˆæœï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ rank â”‚  name  â”‚ score â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    0    â”‚  1   â”‚ 'ç©å®¶A' â”‚  95   â”‚
â”‚    1    â”‚  2   â”‚ 'ç©å®¶B' â”‚  87   â”‚
â”‚    2    â”‚  3   â”‚ 'ç©å®¶C' â”‚  82   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- æª¢æŸ¥é™£åˆ—è³‡æ–™çµæ§‹
- æª¢è¦–æ’è¡Œæ¦œè³‡æ–™
- å°æ¯”å¤šç­†è³‡æ–™
- é©—è­‰è³‡æ–™æ ¼å¼

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 5. console.group() - ç¾¤çµ„é¡¯ç¤º

**ç”¨é€”ï¼š** å°‡ç›¸é—œçš„ log è¨Šæ¯åˆ†çµ„ï¼Œæ–¹ä¾¿é–±è®€

```javascript
// å¡ç‰‡ç¿»é–‹æµç¨‹
console.group("ğŸƒ å¡ç‰‡ç¿»é–‹æµç¨‹");
console.log("å¡ç‰‡ ID:", cardId);
console.log("å¡ç‰‡é¡å‹:", cardType);
console.log("æ˜¯å¦é…å°æˆåŠŸ:", isMatched);
console.groupEnd();

// å›åˆçµç®—
console.group(`ğŸ“Š ç¬¬ ${round} å›åˆçµç®—`);
console.log("ç©å®¶1åˆ†æ•¸:", player1Score);
console.log("ç©å®¶2åˆ†æ•¸:", player2Score);
console.log("å‹è€…:", winner);
console.groupEnd();

// å¯æŠ˜ç–Šç¾¤çµ„
console.groupCollapsed("ğŸ”§ è©³ç´°é™¤éŒ¯è³‡è¨Š"); // é è¨­æŠ˜ç–Š
console.log("è¨˜æ†¶é«”ä½¿ç”¨:", performance.memory);
console.log("åŸ·è¡Œæ™‚é–“:", executionTime);
console.groupEnd();
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- è¤‡é›œçš„å¤šæ­¥é©Ÿæµç¨‹
- ç›¸é—œçš„å¤šå€‹è®Šæ•¸
- è©³ç´°çš„é™¤éŒ¯è³‡è¨Š

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 6. console.time() / console.timeEnd() - è¨ˆæ™‚

**ç”¨é€”ï¼š** æ¸¬é‡ç¨‹å¼ç¢¼åŸ·è¡Œæ™‚é–“

```javascript
// æ¸¬é‡å‡½å¼åŸ·è¡Œæ™‚é–“
console.time("å¡ç‰‡æ´—ç‰Œæ™‚é–“");
shuffleCards(cardDeck);
console.timeEnd("å¡ç‰‡æ´—ç‰Œæ™‚é–“");
// è¼¸å‡ºï¼šå¡ç‰‡æ´—ç‰Œæ™‚é–“: 3.245ms

// æ¸¬é‡è³‡æ–™è¼‰å…¥æ™‚é–“
console.time("Firebase è³‡æ–™è¼‰å…¥");
await firebase.database().ref("scores").once("value");
console.timeEnd("Firebase è³‡æ–™è¼‰å…¥");
// è¼¸å‡ºï¼šFirebase è³‡æ–™è¼‰å…¥: 234.567ms

// æ¸¬é‡éŠæˆ²åˆå§‹åŒ–
console.time("éŠæˆ²åˆå§‹åŒ–");
initializeGame();
loadAssets();
setupEventListeners();
console.timeEnd("éŠæˆ²åˆå§‹åŒ–");
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- æ•ˆèƒ½å„ªåŒ–
- æ‰¾å‡ºæ…¢é€Ÿå‡½å¼
- æ¯”è¼ƒä¸åŒå¯¦ä½œæ–¹å¼

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 7. console.trace() - è¿½è¹¤å‘¼å«å †ç–Š

**ç”¨é€”ï¼š** é¡¯ç¤ºå‡½å¼è¢«å‘¼å«çš„å®Œæ•´è·¯å¾‘

```javascript
function updateScore(newScore) {
  console.trace("updateScore è¢«å‘¼å«");
  playerScore = newScore;
}

// è¼¸å‡ºï¼š
// updateScore è¢«å‘¼å«
//   at updateScore (game.js:123)
//   at handleCardMatch (game.js:89)
//   at checkMatch (game.js:45)
//   at onClick (game.js:12)
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- è¿½è¹¤å‡½å¼è¢«èª°å‘¼å«
- æ‰¾å‡ºæ„å¤–çš„å‡½å¼åŸ·è¡Œ
- ç†è§£è¤‡é›œçš„å‘¼å«é—œä¿‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 8. console.assert() - æ–·è¨€

**ç”¨é€”ï¼š** ç•¶æ¢ä»¶ç‚º false æ™‚æ‰è¼¸å‡ºéŒ¯èª¤

```javascript
// é©—è­‰ç©å®¶æ•¸é‡
console.assert(players.length === 2, "å¿…é ˆæœ‰ 2 ä½ç©å®¶");

// é©—è­‰å›åˆæ•¸
console.assert(currentRound <= totalRounds, "å›åˆæ•¸ä¸èƒ½è¶…éç¸½å›åˆæ•¸");

// é©—è­‰åˆ†æ•¸
console.assert(score >= 0, "åˆ†æ•¸ä¸èƒ½æ˜¯è² æ•¸", { score });
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- é–‹ç™¼éšæ®µçš„è³‡æ–™é©—è­‰
- ç¢ºä¿å‰ç½®æ¢ä»¶æ­£ç¢º
- å¿«é€Ÿç™¼ç¾é‚è¼¯éŒ¯èª¤

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 9. console.count() - è¨ˆç®—å‘¼å«æ¬¡æ•¸ ğŸ†•

**ç”¨é€”ï¼š** è¨ˆç®—æŸæ®µç¨‹å¼ç¢¼è¢«åŸ·è¡Œäº†å¹¾æ¬¡ï¼Œç‰¹åˆ¥é©åˆè¿½è¹¤ã€Œäº‹ä»¶æ˜¯å¦è¢«é‡è¤‡è§¸ç™¼ã€

```javascript
// è¿½è¹¤æŒ‰éˆ•é»æ“Šæ¬¡æ•¸
function handleCardClick(cardId) {
  console.count("å¡ç‰‡é»æ“Š"); // å¡ç‰‡é»æ“Š: 1, å¡ç‰‡é»æ“Š: 2, ...
  // ...è™•ç†é‚è¼¯
}

// è¿½è¹¤å‡½å¼è¢«å‘¼å«æ¬¡æ•¸
function render() {
  console.count("render å‘¼å«"); // ç™¼ç¾è¢«å‘¼å«å¤ªå¤šæ¬¡ï¼Ÿå¯èƒ½æœ‰æ•ˆèƒ½å•é¡Œ
  // ...æ¸²æŸ“é‚è¼¯
}

// åˆ†åˆ¥è¨ˆç®—ä¸åŒäº‹ä»¶
function handleEvent(type) {
  console.count(type); // ä¾ç…§ type åˆ†é–‹è¨ˆç®—
}
handleEvent("click"); // click: 1
handleEvent("click"); // click: 2
handleEvent("hover"); // hover: 1

// é‡ç½®è¨ˆæ•¸å™¨
console.countReset("å¡ç‰‡é»æ“Š"); // é‡æ–°å¾ 1 é–‹å§‹è¨ˆç®—
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- æ‡·ç–‘äº‹ä»¶è¢«é‡è¤‡ç¶å®šæˆ–é‡è¤‡è§¸ç™¼
- ç¢ºèªè¿´åœˆåŸ·è¡Œäº†æ­£ç¢ºçš„æ¬¡æ•¸
- è¿½è¹¤å‡½å¼å‘¼å«é »ç‡ï¼ˆæ•ˆèƒ½åˆ†æï¼‰
- æª¢æŸ¥ `requestAnimationFrame` æˆ– `setInterval` çš„è§¸ç™¼é »ç‡

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 10. console.dir() - ç‰©ä»¶å±¬æ€§æª¢è¦– ğŸ†•

**ç”¨é€”ï¼š** ä»¥ç‰©ä»¶çš„æ–¹å¼é¡¯ç¤º DOM å…ƒç´ çš„æ‰€æœ‰å±¬æ€§ï¼Œè€Œéé¡¯ç¤º HTML æ¨™ç±¤

```javascript
const btn = document.getElementById("start-button");

// console.log é¡¯ç¤º HTML çµæ§‹
console.log(btn);
// â†’ <button id="start-button" class="btn-primary">é–‹å§‹éŠæˆ²</button>

// console.dir é¡¯ç¤ºç‰©ä»¶å±¬æ€§
console.dir(btn);
// â†’ button#start-button {
//     id: "start-button",
//     className: "btn-primary",
//     disabled: false,
//     onclick: Æ’(),
//     textContent: "é–‹å§‹éŠæˆ²",
//     style: CSSStyleDeclaration {...},
//     ... å®Œæ•´çš„ DOM å±¬æ€§åˆ—è¡¨
//   }
```

**`console.log` vs `console.dir` å·®ç•°ï¼š**

| ç‰¹æ€§     | `console.log`      | `console.dir`            |
| -------- | ------------------ | ------------------------ |
| DOM å…ƒç´  | é¡¯ç¤º HTML æ¨™ç±¤çµæ§‹ | é¡¯ç¤º JavaScript ç‰©ä»¶å±¬æ€§ |
| ä¸€èˆ¬ç‰©ä»¶ | æ•ˆæœç›¸åŒ           | æ•ˆæœç›¸åŒ                 |
| é©åˆæª¢æŸ¥ | å…ƒç´ çš„è¦–è¦ºçµæ§‹     | å…ƒç´ çš„å±¬æ€§å’Œäº‹ä»¶ç¶å®š     |

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- æª¢æŸ¥ DOM å…ƒç´ ç¶å®šäº†å“ªäº›äº‹ä»¶è™•ç†å™¨
- æŸ¥çœ‹å…ƒç´ çš„ `disabled`ã€`hidden` ç­‰å±¬æ€§å€¼
- ç¢ºèªå…ƒç´ çš„è¨ˆç®—å¾Œæ¨£å¼
- é™¤éŒ¯ã€ŒæŒ‰éˆ•é»ä¸äº†ã€ç­‰ DOM å±¬æ€§å•é¡Œ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 11. è‡ªè¨‚æ¨£å¼çš„ console.log

**ç”¨é€”ï¼š** ä½¿ç”¨ CSS æ¨£å¼è®“ log æ›´é†’ç›®

```javascript
// å½©è‰²æ¨™é¡Œ
console.log(
  "%cğŸ® éŠæˆ²é–‹å§‹ï¼",
  "color: #00ff00; font-size: 24px; font-weight: bold;",
);

// å¤šè‰²è¨Šæ¯
console.log(
  "%cæˆåŠŸ %cç©å®¶å¾—åˆ†: %c95åˆ†",
  "color: green; font-weight: bold",
  "color: black",
  "color: orange; font-size: 16px",
);

// èƒŒæ™¯é¡è‰²
console.log(
  "%c éŒ¯èª¤ %c æ‰¾ä¸åˆ°ç©å®¶è³‡æ–™",
  "background: red; color: white; padding: 2px 5px; border-radius: 3px",
  "color: red; padding-left: 5px",
);

// å¯¦ç”¨çš„é™¤éŒ¯æ¨™è¨˜
const LOG_STYLES = {
  success: "color: #4CAF50; font-weight: bold",
  error: "color: #f44336; font-weight: bold",
  warning: "color: #FF9800; font-weight: bold",
  info: "color: #2196F3; font-weight: bold",
};

console.log("%câœ“ åˆå§‹åŒ–å®Œæˆ", LOG_STYLES.success);
console.log("%câœ— è¼‰å…¥å¤±æ•—", LOG_STYLES.error);
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="debugger-æ™‚é–“æš«åœå¤§æ³•"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## Debugger æ™‚é–“æš«åœå¤§æ³•

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

`debugger` æ˜¯æœ€å¼·å¤§çš„é™¤éŒ¯å·¥å…·ï¼Œå¯ä»¥è®“ç¨‹å¼åŸ·è¡Œã€Œå‡çµã€åœ¨ç‰¹å®šä½ç½®ï¼Œè®“ä½ å¯ä»¥ï¼š

- æª¢æŸ¥æ‰€æœ‰è®Šæ•¸çš„å³æ™‚å€¼
- é€è¡ŒåŸ·è¡Œç¨‹å¼ç¢¼
- è§€å¯Ÿç¨‹å¼åŸ·è¡Œæµç¨‹
- å‹•æ…‹ä¿®æ”¹è®Šæ•¸å€¼é€²è¡Œæ¸¬è©¦

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸºæœ¬ä½¿ç”¨æ–¹å¼

```javascript
function handleCardClick(cardId) {
  debugger; // ğŸš¨ ç¨‹å¼æœƒåœ¨é€™è£¡æš«åœ

  const card = findCard(cardId);
  const isMatched = checkMatch(card);
  updateScore(isMatched);
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä½¿ç”¨æ­¥é©Ÿ

1. åœ¨ç¨‹å¼ç¢¼ä¸­åŠ å…¥ `debugger;`
2. æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· (F12)
3. é‡æ–°æ•´ç†é é¢æˆ–è§¸ç™¼è©²å‡½å¼
4. ç¨‹å¼æœƒæš«åœåœ¨ `debugger` é‚£ä¸€è¡Œ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æš«åœå¾Œå¯ä»¥åšä»€éº¼

#### 1. æª¢æŸ¥è®Šæ•¸å€¼

```javascript
function calculateBonus(score, level) {
  debugger; // æš«åœåœ¨é€™è£¡
  // ğŸ‘† æ»‘é¼ ç§»åˆ° score æˆ– level ä¸Šï¼Œæœƒé¡¯ç¤ºç›®å‰çš„å€¼

  let bonus = score * level * 0.1;
  // ğŸ‘† ä¹Ÿå¯ä»¥çœ‹åˆ° bonus çš„è¨ˆç®—çµæœ

  return bonus;
}
```

#### 2. åœ¨ Console ä¸­åŸ·è¡Œç¨‹å¼ç¢¼

```javascript
// æš«åœæ™‚ï¼Œå¯ä»¥åœ¨ Console è¼¸å…¥ï¼š
score; // æŸ¥çœ‹ score çš„å€¼
score = 100; // ä¿®æ”¹ score çš„å€¼
playerCards.length; // æŸ¥çœ‹é™£åˆ—é•·åº¦
console.table(players); // é¡¯ç¤ºæ‰€æœ‰ç©å®¶è³‡æ–™
```

#### 3. é€æ­¥åŸ·è¡Œ (Step Controls)

- **Step Over (F10)**: åŸ·è¡Œä¸‹ä¸€è¡Œï¼ˆä¸é€²å…¥å‡½å¼å…§éƒ¨ï¼‰
- **Step Into (F11)**: åŸ·è¡Œä¸‹ä¸€è¡Œï¼ˆé€²å…¥å‡½å¼å…§éƒ¨ï¼‰
- **Step Out (Shift+F11)**: è·³å‡ºç›®å‰å‡½å¼
- **Continue (F8)**: ç¹¼çºŒåŸ·è¡Œåˆ°ä¸‹ä¸€å€‹ä¸­æ–·é»

```javascript
function gameLoop() {
  debugger; // æš«åœé» 1

  updateTimer(); // æŒ‰ F10 è·³éé€™å€‹å‡½å¼
  checkGameState(); // æŒ‰ F11 é€²å…¥é€™å€‹å‡½å¼å…§éƒ¨çœ‹ç´°ç¯€

  if (isGameOver) {
    endGame(); // æŒ‰ Shift+F11 è·³å‡º gameLoop
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¢ä»¶å¼ä¸­æ–·é»

åªåœ¨ç‰¹å®šæ¢ä»¶ä¸‹æ‰æš«åœ

```javascript
// åªåœ¨åˆ†æ•¸è¶…é 100 æ™‚æš«åœ
function updateScore(newScore) {
  if (newScore > 100) {
    debugger;
  }
  playerScore = newScore;
}

// åªåœ¨éŒ¯èª¤ç™¼ç”Ÿæ™‚æš«åœ
try {
  riskyOperation();
} catch (error) {
  debugger; // åªæœ‰ç™¼ç”ŸéŒ¯èª¤æ‰æœƒæš«åœ
  console.error(error);
}

// åªåœ¨ç‰¹å®šç©å®¶æ™‚æš«åœ
function handlePlayerAction(playerId) {
  if (playerId === "player2") {
    debugger; // åªæª¢æŸ¥ player2 çš„è¡Œç‚º
  }
  // ...
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Chrome DevTools ä¸­çš„ä¸­æ–·é»

#### 1. è¡Œè™Ÿä¸­æ–·é»

- ç›´æ¥é»æ“Š DevTools ä¸­çš„è¡Œè™Ÿ
- ç¨‹å¼åŸ·è¡Œåˆ°é‚£ä¸€è¡Œæœƒè‡ªå‹•æš«åœ
- ä¸éœ€è¦ä¿®æ”¹ç¨‹å¼ç¢¼

#### 2. æ¢ä»¶ä¸­æ–·é»

```javascript
// å³éµé»æ“Šè¡Œè™Ÿ â†’ "Add conditional breakpoint"
// è¼¸å…¥æ¢ä»¶ï¼šscore > 50
// åªæœ‰ç•¶ score > 50 æ™‚æ‰æœƒæš«åœ
```

#### 3. DOM ä¸­æ–·é»

- å³éµé»æ“Š HTML å…ƒç´ 
- Break on â†’ subtree modifications / attribute modifications / node removal
- ç•¶ DOM è¢«ä¿®æ”¹æ™‚è‡ªå‹•æš«åœ

#### 4. XHR/Fetch ä¸­æ–·é»

- åœ¨ DevTools çš„ Sources é¢æ¿
- XHR/fetch Breakpoints
- ç•¶ç™¼é€ç‰¹å®šçš„ AJAX è«‹æ±‚æ™‚æš«åœ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¯¦éš›ç¯„ä¾‹ï¼šé™¤éŒ¯å¡ç‰‡é…å°é‚è¼¯

```javascript
function checkCardMatch(card1, card2) {
  debugger; // ğŸš¨ æš«åœé»ï¼šé–‹å§‹æª¢æŸ¥é…å°

  console.log("æª¢æŸ¥é…å°:", { card1, card2 });

  // æ­¤æ™‚å¯ä»¥ï¼š
  // 1. æŸ¥çœ‹ card1 å’Œ card2 çš„å®Œæ•´å…§å®¹
  // 2. åœ¨ Console è¼¸å…¥ card1.type === card2.type æ¸¬è©¦æ¢ä»¶
  // 3. é€æ­¥åŸ·è¡Œçœ‹æ¯å€‹æ¢ä»¶çš„çµæœ

  const typeMatch = card1.type === card2.type;
  debugger; // ğŸš¨ æš«åœé»ï¼šæª¢æŸ¥é¡å‹é…å°çµæœ

  const colorMatch = card1.color === card2.color;
  debugger; // ğŸš¨ æš«åœé»ï¼šæª¢æŸ¥é¡è‰²é…å°çµæœ

  return typeMatch && colorMatch;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ³¨æ„äº‹é …

**å„ªé»ï¼š**

- âœ… æœ€å¼·å¤§ï¼šå¯ä»¥æª¢æŸ¥æ‰€æœ‰è®Šæ•¸ï¼Œä¸ç”¨äº‹å…ˆåŸ‹ log
- âœ… äº’å‹•å¼ï¼šå¯ä»¥å‹•æ…‹åŸ·è¡Œç¨‹å¼ç¢¼æ¸¬è©¦
- âœ… å®Œæ•´çš„åŸ·è¡Œæµç¨‹æ§åˆ¶

**ç¼ºé»ï¼š**

- âŒ æœƒæš«åœç¨‹å¼åŸ·è¡Œï¼ˆä¸é©åˆè¨ˆæ™‚å™¨ã€å‹•ç•«ï¼‰
- âŒ å­¸ç¿’æ›²ç·šè¼ƒé«˜
- âŒ ç™¼ä½ˆå‰å¿…é ˆç§»é™¤æ‰€æœ‰ `debugger`

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- è¤‡é›œçš„é‚è¼¯åˆ¤æ–·ï¼ˆå¦‚å¡ç‰‡é…å°è¦å‰‡ï¼‰
- ä¸ç¢ºå®šå•é¡Œåœ¨å“ªè£¡æ™‚
- éœ€è¦è¿½è¹¤è®Šæ•¸è®ŠåŒ–éç¨‹
- ç†è§£åˆ¥äººå¯«çš„ç¨‹å¼ç¢¼

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="visual-debugging-ç•«é¢é¡¯ç¤º"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## Visual Debugging ç•«é¢é¡¯ç¤º

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

åœ¨éŠæˆ²ç•«é¢ä¸Šç›´æ¥é¡¯ç¤ºé™¤éŒ¯è³‡è¨Šï¼Œä¸éœ€è¦åˆ‡æ›åˆ° Consoleï¼Œç‰¹åˆ¥é©åˆéŠæˆ²é–‹ç™¼ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### åŸºæœ¬å¯¦ä½œï¼šå»ºç«‹é™¤éŒ¯é¢æ¿

```html
<!-- HTML çµæ§‹ -->
<div id="debug-panel" class="debug-panel">
  <h3>ğŸ› é™¤éŒ¯é¢æ¿</h3>
  <div id="debug-content"></div>
</div>
```

```css
/* CSS æ¨£å¼ */
.debug-panel {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.85);
  color: #00ff00;
  padding: 15px;
  font-family: "Courier New", monospace;
  font-size: 12px;
  border-radius: 8px;
  border: 2px solid #00ff00;
  z-index: 99999;
  min-width: 250px;
  max-width: 400px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

.debug-panel h3 {
  margin: 0 0 10px 0;
  color: #00ff00;
  font-size: 14px;
  border-bottom: 1px solid #00ff00;
  padding-bottom: 5px;
}

.debug-item {
  display: flex;
  justify-content: space-between;
  margin: 5px 0;
  padding: 3px 0;
}

.debug-label {
  color: #00ffff;
}

.debug-value {
  color: #ffff00;
  font-weight: bold;
}

/* éš±è—é™¤éŒ¯é¢æ¿çš„æ§åˆ¶ */
.debug-panel.hidden {
  display: none;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### JavaScript å¯¦ä½œ

```javascript
// Visual Debug é¡åˆ¥
class VisualDebugger {
  constructor() {
    this.panel = document.getElementById("debug-panel");
    this.content = document.getElementById("debug-content");
    this.enabled = true; // æ§åˆ¶é–‹é—œ
    this.updateInterval = null;
    this.data = {};
  }

  // åˆå§‹åŒ–
  init() {
    if (!this.panel) {
      this.createPanel();
    }
    this.setupToggleKey(); // è¨­å®šå¿«æ·éµ
  }

  // å‹•æ…‹å»ºç«‹é¢æ¿
  createPanel() {
    const panel = document.createElement("div");
    panel.id = "debug-panel";
    panel.className = "debug-panel";
    panel.innerHTML = `
      <h3>ğŸ› é™¤éŒ¯é¢æ¿ <span style="float:right; cursor:pointer;" onclick="visualDebug.toggle()">âœ•</span></h3>
      <div id="debug-content"></div>
    `;
    document.body.appendChild(panel);
    this.panel = panel;
    this.content = document.getElementById("debug-content");
  }

  // æ›´æ–°å–®ä¸€è³‡æ–™
  set(key, value) {
    this.data[key] = value;
    this.render();
  }

  // æ‰¹æ¬¡æ›´æ–°è³‡æ–™
  update(dataObject) {
    Object.assign(this.data, dataObject);
    this.render();
  }

  // æ¸²æŸ“é¡¯ç¤º
  render() {
    if (!this.enabled || !this.content) return;

    let html = "";
    for (const [key, value] of Object.entries(this.data)) {
      const displayValue = this.formatValue(value);
      html += `
        <div class="debug-item">
          <span class="debug-label">${key}:</span>
          <span class="debug-value">${displayValue}</span>
        </div>
      `;
    }
    this.content.innerHTML = html;
  }

  // æ ¼å¼åŒ–é¡¯ç¤ºå€¼
  formatValue(value) {
    if (typeof value === "object") {
      return JSON.stringify(value);
    }
    return String(value);
  }

  // é–‹å§‹è‡ªå‹•æ›´æ–°
  startAutoUpdate(callback, interval = 100) {
    this.stopAutoUpdate();
    this.updateInterval = setInterval(() => {
      callback();
      this.render();
    }, interval);
  }

  // åœæ­¢è‡ªå‹•æ›´æ–°
  stopAutoUpdate() {
    if (this.updateInterval) {
      clearInterval(this.updateInterval);
      this.updateInterval = null;
    }
  }

  // åˆ‡æ›é¡¯ç¤º/éš±è—
  toggle() {
    this.enabled = !this.enabled;
    if (this.panel) {
      this.panel.classList.toggle("hidden");
    }
  }

  // è¨­å®šå¿«æ·éµï¼ˆæŒ‰ D éµåˆ‡æ›ï¼‰
  setupToggleKey() {
    document.addEventListener("keydown", (e) => {
      if (e.key === "d" || e.key === "D") {
        if (!e.target.matches("input, textarea")) {
          this.toggle();
        }
      }
    });
  }

  // æ¸…é™¤è³‡æ–™
  clear() {
    this.data = {};
    this.render();
  }
}

// å»ºç«‹å…¨åŸŸå¯¦ä¾‹
const visualDebug = new VisualDebugger();
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä½¿ç”¨ç¯„ä¾‹

#### 1. åŸºæœ¬ä½¿ç”¨

```javascript
// åˆå§‹åŒ–
visualDebug.init();

// é¡¯ç¤ºå–®ä¸€è³‡æ–™
visualDebug.set("å›åˆ", currentRound);
visualDebug.set("ç©å®¶", currentPlayer);
visualDebug.set("åˆ†æ•¸", playerScore);

// æ‰¹æ¬¡æ›´æ–°
visualDebug.update({
  å›åˆ: `${currentRound} / ${totalRounds}`,
  ç‹€æ…‹: gameState,
  ç©å®¶1: player1Score,
  ç©å®¶2: player2Score,
  è¨ˆæ™‚å™¨: `${timer}ç§’`,
});
```

#### 2. DCCS éŠæˆ²æ•´åˆ

```javascript
// åœ¨éŠæˆ²åˆå§‹åŒ–æ™‚
function initGame() {
  visualDebug.init();

  // è¨­å®šè‡ªå‹•æ›´æ–°
  visualDebug.startAutoUpdate(() => {
    visualDebug.update({
      éŠæˆ²ç‹€æ…‹: gameState,
      ç•¶å‰å›åˆ: `${currentRound} / ${totalRounds}`,
      ç•¶å‰ç©å®¶: currentPlayer,
      ç©å®¶1åˆ†æ•¸: scores.player1,
      ç©å®¶2åˆ†æ•¸: scores.player2,
      å·²ç¿»å¡ç‰‡: flippedCards.length,
      é…å°æˆåŠŸ: matchedPairs,
      å‰©é¤˜æ™‚é–“: `${remainingTime}ç§’`,
      FPS: Math.round(fps),
    });
  }, 100); // æ¯ 100ms æ›´æ–°ä¸€æ¬¡
}

// åœ¨ç‰¹å®šäº‹ä»¶ä¸­æ›´æ–°
function handleCardFlip(cardId) {
  const card = cards[cardId];
  visualDebug.set("æœ€å¾Œç¿»é–‹", `${card.type}-${card.color}`);

  // è™•ç†å¡ç‰‡é‚è¼¯...
}
```

#### 3. æ•ˆèƒ½ç›£æ§

```javascript
// ç›£æ§ FPS
let lastTime = performance.now();
let fps = 60;

function updateFPS() {
  const now = performance.now();
  const delta = now - lastTime;
  fps = 1000 / delta;
  lastTime = now;

  visualDebug.set("FPS", Math.round(fps));
  visualDebug.set("Frame Time", `${delta.toFixed(2)}ms`);
}

// åœ¨éŠæˆ²å¾ªç’°ä¸­å‘¼å«
function gameLoop() {
  updateFPS();
  // ...å…¶ä»–éŠæˆ²é‚è¼¯
  requestAnimationFrame(gameLoop);
}
```

#### 4. è¨˜æ†¶é«”ç›£æ§

```javascript
// ç›£æ§è¨˜æ†¶é«”ä½¿ç”¨ï¼ˆåƒ… Chromeï¼‰
function updateMemoryInfo() {
  if (performance.memory) {
    const used = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
    const total = (performance.memory.totalJSHeapSize / 1048576).toFixed(2);

    visualDebug.update({
      è¨˜æ†¶é«”ä½¿ç”¨: `${used} MB`,
      è¨˜æ†¶é«”ç¸½é‡: `${total} MB`,
    });
  }
}

setInterval(updateMemoryInfo, 1000);
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é€²éšåŠŸèƒ½

#### 1. åˆ†é¡é¡¯ç¤º

```javascript
class AdvancedVisualDebugger extends VisualDebugger {
  constructor() {
    super();
    this.categories = {};
  }

  // åˆ†é¡è¨­å®šè³‡æ–™
  setCategory(category, key, value) {
    if (!this.categories[category]) {
      this.categories[category] = {};
    }
    this.categories[category][key] = value;
    this.renderCategorized();
  }

  // åˆ†é¡æ¸²æŸ“
  renderCategorized() {
    if (!this.enabled || !this.content) return;

    let html = "";
    for (const [category, data] of Object.entries(this.categories)) {
      html += `<div style="margin-top: 10px; border-top: 1px solid #00ff00; padding-top: 5px;">`;
      html += `<div style="color: #ff00ff; font-weight: bold;">${category}</div>`;

      for (const [key, value] of Object.entries(data)) {
        html += `
          <div class="debug-item">
            <span class="debug-label">${key}:</span>
            <span class="debug-value">${this.formatValue(value)}</span>
          </div>
        `;
      }
      html += `</div>`;
    }
    this.content.innerHTML = html;
  }
}

// ä½¿ç”¨ç¯„ä¾‹
const advDebug = new AdvancedVisualDebugger();
advDebug.init();

advDebug.setCategory("éŠæˆ²ç‹€æ…‹", "å›åˆ", currentRound);
advDebug.setCategory("éŠæˆ²ç‹€æ…‹", "éšæ®µ", gamePhase);
advDebug.setCategory("ç©å®¶è³‡è¨Š", "ç©å®¶1", player1.name);
advDebug.setCategory("ç©å®¶è³‡è¨Š", "åˆ†æ•¸", player1.score);
advDebug.setCategory("æ•ˆèƒ½", "FPS", fps);
```

#### 2. åœ–è¡¨é¡¯ç¤º

```javascript
// ç°¡æ˜“æŠ˜ç·šåœ–ï¼ˆé¡¯ç¤ºåˆ†æ•¸è®ŠåŒ–ï¼‰
class ChartDebugger {
  constructor() {
    this.data = [];
    this.maxPoints = 50;
    this.canvas = null;
  }

  init(containerId) {
    this.canvas = document.createElement("canvas");
    this.canvas.width = 300;
    this.canvas.height = 100;
    this.canvas.style.background = "#000";
    document.getElementById(containerId).appendChild(this.canvas);
    this.ctx = this.canvas.getContext("2d");
  }

  addPoint(value) {
    this.data.push(value);
    if (this.data.length > this.maxPoints) {
      this.data.shift();
    }
    this.render();
  }

  render() {
    const ctx = this.ctx;
    const width = this.canvas.width;
    const height = this.canvas.height;

    ctx.clearRect(0, 0, width, height);

    if (this.data.length < 2) return;

    const max = Math.max(...this.data, 100);
    const step = width / (this.maxPoints - 1);

    ctx.strokeStyle = "#00ff00";
    ctx.lineWidth = 2;
    ctx.beginPath();

    this.data.forEach((value, index) => {
      const x = index * step;
      const y = height - (value / max) * height;

      if (index === 0) {
        ctx.moveTo(x, y);
      } else {
        ctx.lineTo(x, y);
      }
    });

    ctx.stroke();
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä½¿ç”¨æ™‚æ©Ÿ

**å„ªé»ï¼š**

- âœ… æœ€é©åˆéŠæˆ²é–‹ç™¼ï¼šçœ¼ç›ä¸ç”¨é›¢é–‹éŠæˆ²ç•«é¢
- âœ… å³æ™‚ç›£æ§ï¼šå¯ä»¥é‚Šç©é‚Šçœ‹æ•¸æ“šè®ŠåŒ–
- âœ… å°éæŠ€è¡“äººå“¡å‹å–„ï¼šæ¸¬è©¦å“¡å¯ä»¥çœ‹æ‡‚
- âœ… éŒ„å½±æ™‚å¯ä»¥è¨˜éŒ„ç‹€æ…‹

**ç¼ºé»ï¼š**

- âŒ éœ€è¦é¡å¤–å¯«é¡¯ç¤ºé‚è¼¯
- âŒ å¯èƒ½é®æ“‹éŠæˆ²ç•«é¢
- âŒ å¤§é‡æ›´æ–°æœƒå½±éŸ¿æ•ˆèƒ½
- âŒ æ­£å¼ç‰ˆéœ€è¦å®Œå…¨ç§»é™¤

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- éŠæˆ²ç‹€æ…‹ç›£æ§ï¼ˆå›åˆã€éšæ®µï¼‰
- ç©å®¶è³‡è¨Šè¿½è¹¤ï¼ˆåˆ†æ•¸ã€é€²åº¦ï¼‰
- æ•ˆèƒ½ç›£æ§ï¼ˆFPSã€è¨˜æ†¶é«”ï¼‰
- å¤šäººé€£ç·šé™¤éŒ¯ï¼ˆåŒæ­¥ç‹€æ…‹ï¼‰
- å±•ç¤ºæˆ–éŒ„å½±æ™‚éœ€è¦é¡¯ç¤ºè³‡è¨Š

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="network-tab-ç¶²è·¯åµæ¢"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## Network Tab ç¶²è·¯åµæ¢

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

Network Tab æ˜¯ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ä¸­å°ˆé–€ç”¨ä¾†ç›£æ§æ‰€æœ‰ç¶²è·¯è«‹æ±‚çš„é¢æ¿ï¼Œç‰¹åˆ¥é©åˆé™¤éŒ¯ï¼š

- Firebase é€£ç·šå•é¡Œ
- API è«‹æ±‚éŒ¯èª¤
- è³‡æºè¼‰å…¥å¤±æ•—ï¼ˆåœ–ç‰‡ã€éŸ³æ•ˆã€å­—å‹ï¼‰
- CORS è·¨åŸŸå•é¡Œ
- CSP (Content Security Policy) éŒ¯èª¤

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é–‹å•Ÿ Network Tab

1. æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
2. é»é¸ä¸Šæ–¹çš„ **Network** åˆ†é 
3. é‡æ–°æ•´ç†é é¢ (F5) é–‹å§‹è¨˜éŒ„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä»‹é¢èªªæ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Filter: All / XHR / JS / CSS / Img / Media / Font      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¤
â”‚ Name    â”‚ Status â”‚ Type   â”‚ Size â”‚ Time â”‚ ...    â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ index.html â”‚ 200 â”‚ documentâ”‚ 5KB  â”‚ 123msâ”‚        â”‚  âœ“ â”‚
â”‚ style.css  â”‚ 200 â”‚ css     â”‚ 2KB  â”‚ 45ms â”‚        â”‚  âœ“ â”‚
â”‚ game.js    â”‚ 200 â”‚ script  â”‚ 15KB â”‚ 67ms â”‚        â”‚  âœ“ â”‚
â”‚ card.png   â”‚ 404 â”‚ image   â”‚ -    â”‚ -    â”‚        â”‚  âœ— â”‚
â”‚ api/score  â”‚ 500 â”‚ xhr     â”‚ -    â”‚ -    â”‚        â”‚  âœ— â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç‹€æ…‹ç¢¼èªªæ˜

| ç‹€æ…‹ç¢¼   | æ„ç¾©          | å¸¸è¦‹åŸå›              |
| -------- | ------------- | -------------------- |
| **200**  | âœ… æˆåŠŸ       | è«‹æ±‚æˆåŠŸï¼Œä¸€åˆ‡æ­£å¸¸   |
| **304**  | âœ… æœªä¿®æ”¹     | ä½¿ç”¨å¿«å–ç‰ˆæœ¬ï¼ˆæ­£å¸¸ï¼‰ |
| **400**  | âŒ éŒ¯èª¤è«‹æ±‚   | å‚³é€çš„è³‡æ–™æ ¼å¼éŒ¯èª¤   |
| **401**  | âŒ æœªæˆæ¬Š     | éœ€è¦ç™»å…¥æˆ–æ¬Šé™ä¸è¶³   |
| **403**  | âŒ ç¦æ­¢è¨ªå•   | Firebase è¦å‰‡é˜»æ“‹    |
| **404**  | âŒ æ‰¾ä¸åˆ°     | æª”æ¡ˆè·¯å¾‘éŒ¯èª¤         |
| **500**  | âŒ ä¼ºæœå™¨éŒ¯èª¤ | å¾Œç«¯ç¨‹å¼å‡ºéŒ¯         |
| **CORS** | âŒ è·¨åŸŸéŒ¯èª¤   | è·¨åŸŸè³‡æºåˆ†äº«è¢«é˜»æ“‹   |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä½¿ç”¨æ–¹æ³•

#### 1. æª¢æŸ¥è¼‰å…¥å¤±æ•—çš„è³‡æº

```javascript
// å‡è¨­ç¨‹å¼ç¢¼
const img = new Image();
img.src = "/images/card.png"; // è·¯å¾‘éŒ¯èª¤

// Network Tab æœƒé¡¯ç¤ºï¼š
// âŒ GET /images/card.png â†’ 404 (Not Found)

// è§£æ±ºæ–¹æ³•ï¼šæª¢æŸ¥æª”æ¡ˆè·¯å¾‘æ˜¯å¦æ­£ç¢º
```

**æª¢æŸ¥æ­¥é©Ÿï¼š**

1. æ‰¾åˆ°ç´…è‰²çš„å¤±æ•—è«‹æ±‚
2. é»æ“Šè©²è«‹æ±‚æŸ¥çœ‹è©³ç´°è³‡è¨Š
3. æŸ¥çœ‹ **Headers** åˆ†é çš„ Request URL
4. ç¢ºèªè·¯å¾‘æ˜¯å¦æ­£ç¢º

#### 2. Firebase é€£ç·šå•é¡Œ

```javascript
// é€£æ¥ Firebase
firebase
  .database()
  .ref("scores")
  .once("value")
  .catch((error) => console.error(error));

// Network Tab æª¢æŸ¥ï¼š
// 1. æ‰¾åˆ° Firebase çš„ API è«‹æ±‚ (é¡ä¼¼ firebaseio.com)
// 2. æª¢æŸ¥ç‹€æ…‹ç¢¼
//    - 403: è³‡æ–™åº«è¦å‰‡é˜»æ“‹ â†’ æª¢æŸ¥ database.rules.json
//    - 401: æœªæˆæ¬Š â†’ éœ€è¦å…ˆç™»å…¥
//    - ç¶²è·¯éŒ¯èª¤: æª¢æŸ¥ firebase-config.js è¨­å®š
```

**Firebase å¸¸è¦‹éŒ¯èª¤ï¼š**

| éŒ¯èª¤è¨Šæ¯          | åŸå›                          | è§£æ±ºæ–¹æ³•                 |
| ----------------- | ---------------------------- | ------------------------ |
| PERMISSION_DENIED | è³‡æ–™åº«è¦å‰‡é˜»æ“‹               | ä¿®æ”¹ database.rules.json |
| INVALID_ORIGIN    | CSP è¨­å®šå•é¡Œ                 | æª¢æŸ¥ meta CSP æ¨™ç±¤       |
| Network Error     | ç¶²è·¯æ–·ç·šæˆ– Firebase è¨­å®šéŒ¯èª¤ | æª¢æŸ¥ç¶²è·¯å’Œ config        |

#### 3. æª¢æŸ¥ API è«‹æ±‚èˆ‡å›æ‡‰

```javascript
// ç™¼é€ API è«‹æ±‚
fetch("/api/leaderboard")
  .then((res) => res.json())
  .then((data) => console.log(data));

// Network Tab ä¸­ï¼š
// 1. é»æ“Š /api/leaderboard è«‹æ±‚
// 2. æŸ¥çœ‹åˆ†é è³‡è¨Šï¼š
```

**Headers åˆ†é ï¼š**

```
Request URL: https://example.com/api/leaderboard
Request Method: GET
Status Code: 200 OK
```

**Response åˆ†é ï¼š**

```json
{
  "success": true,
  "data": [
    { "name": "ç©å®¶A", "score": 95 },
    { "name": "ç©å®¶B", "score": 87 }
  ]
}
```

**Timing åˆ†é ï¼š**

```
DNS Lookup: 5ms
Initial Connection: 12ms
SSL: 45ms
Request Sent: 1ms
Waiting (TTFB): 234ms  â† ä¼ºæœå™¨å›æ‡‰æ™‚é–“
Content Download: 8ms
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total: 305ms
```

#### 4. CORS è·¨åŸŸå•é¡Œ

```javascript
// å˜—è©¦å¾å…¶ä»–ç¶²åŸŸè¼‰å…¥è³‡æ–™
fetch("https://api.example.com/data").catch((error) => console.error(error));

// Network Tab é¡¯ç¤ºï¼š
// âŒ CORS policy: No 'Access-Control-Allow-Origin' header

// è©³ç´°éŒ¯èª¤è¨Šæ¯ï¼š
// Access to fetch at 'https://api.example.com/data' from origin
// 'http://localhost:5000' has been blocked by CORS policy
```

**è§£æ±ºæ–¹æ³•ï¼š**

1. å¾Œç«¯åŠ ä¸Š CORS æ¨™é ­
2. ä½¿ç”¨ä»£ç†ä¼ºæœå™¨
3. ä½¿ç”¨ JSONPï¼ˆèˆŠæ–¹æ³•ï¼‰

#### 5. CSP (Content Security Policy) å•é¡Œ

```html
<!-- HTML ä¸­çš„ CSP è¨­å®š -->
<meta http-equiv="Content-Security-Policy" content="default-src 'self'" />
```

```javascript
// å˜—è©¦è¼‰å…¥å¤–éƒ¨è³‡æº
const script = document.createElement("script");
script.src = "https://cdn.example.com/library.js";
document.head.appendChild(script);

// Network Tab é¡¯ç¤ºï¼š
// âŒ Refused to load the script because it violates the following
//    Content Security Policy directive: "default-src 'self'"
```

**æª¢æŸ¥æ­¥é©Ÿï¼š**

1. æ‰¾åˆ°è¢«é˜»æ“‹çš„è«‹æ±‚ï¼ˆæœƒé¡¯ç¤º CSP éŒ¯èª¤ï¼‰
2. æŸ¥çœ‹ Console é¢æ¿çš„è©³ç´°éŒ¯èª¤è¨Šæ¯
3. ä¿®æ”¹ HTML ä¸­çš„ CSP meta æ¨™ç±¤ï¼ŒåŠ å…¥å…è¨±çš„ä¾†æº

```html
<!-- ä¿®æ­£å¾Œçš„ CSP -->
<meta
  http-equiv="Content-Security-Policy"
  content="default-src 'self'; 
               script-src 'self' https://cdn.example.com;
               style-src 'self' 'unsafe-inline';"
/>
```

#### 6. æª¢æŸ¥éŸ³æ•ˆ/åœ–ç‰‡è¼‰å…¥

```javascript
// è¼‰å…¥éŸ³æ•ˆæª”æ¡ˆ
const audio = new Audio("/audio/bgm/game-music.mp3");
audio.play();

// Network Tab æª¢æŸ¥ï¼š
// 1. Filter é¸æ“‡ "Media"
// 2. æŸ¥çœ‹éŸ³æ•ˆæª”æ¡ˆæ˜¯å¦æˆåŠŸè¼‰å…¥
//    - 200: æˆåŠŸ
//    - 404: æª”æ¡ˆè·¯å¾‘éŒ¯èª¤
//    - éƒ¨åˆ†è¼‰å…¥: æª”æ¡ˆæå£æˆ–æ ¼å¼ä¸æ”¯æ´
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é€²éšæŠ€å·§

#### 1. ä¿ç•™ Log (Preserve Log)

```
åœ¨ Network Tab ä¸­å‹¾é¸ "Preserve log"
â†’ é é¢é‡æ–°è¼‰å…¥æˆ–è·³è½‰å¾Œï¼Œä»ä¿ç•™ä¹‹å‰çš„è«‹æ±‚è¨˜éŒ„
â†’ é©åˆé™¤éŒ¯é é¢è·³è½‰å•é¡Œ
```

#### 2. åœç”¨å¿«å– (Disable Cache)

```
å‹¾é¸ "Disable cache"
â†’ æ¯æ¬¡éƒ½é‡æ–°è¼‰å…¥è³‡æºï¼Œä¸ä½¿ç”¨ç€è¦½å™¨å¿«å–
â†’ é©åˆæ¸¬è©¦è³‡æºæ›´æ–°
```

#### 3. æ¨¡æ“¬æ…¢é€Ÿç¶²è·¯ (Throttling)

```
Network é¢æ¿ä¸Šæ–¹é¸æ“‡ç¶²è·¯é€Ÿåº¦ï¼š
- Online: æ­£å¸¸ç¶²é€Ÿ
- Fast 3G: å¿«é€Ÿ 3G
- Slow 3G: æ…¢é€Ÿ 3G
- Offline: é›¢ç·š

â†’ æ¸¬è©¦åœ¨æ…¢é€Ÿç¶²è·¯ä¸‹çš„ä½¿ç”¨é«”é©—
```

#### 4. è¤‡è£½è«‹æ±‚ç‚ºç¨‹å¼ç¢¼

```
å³éµé»æ“Šè«‹æ±‚ â†’ Copy â†’ Copy as fetch

// æœƒè¤‡è£½æˆï¼š
fetch("https://api.example.com/data", {
  "headers": {
    "accept": "application/json",
  },
  "method": "GET"
});

// å¯ä»¥ç›´æ¥åœ¨ Console ä¸­æ¸¬è©¦
```

#### 5. é‡é€è«‹æ±‚ (Replay XHR)

```
å³éµé»æ“Š XHR/Fetch è«‹æ±‚ â†’ Replay XHR
â†’ é‡æ–°ç™¼é€åŒæ¨£çš„è«‹æ±‚ï¼Œä¸ç”¨é‡æ–°æ•´ç†é é¢
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### DCCS éŠæˆ²å°ˆç”¨æª¢æŸ¥æ¸…å–®

#### å•Ÿå‹•éŠæˆ²æ™‚æª¢æŸ¥ï¼š

```
âœ“ Firebase SDK è¼‰å…¥ (firebasejs.com)
âœ“ Firebase Config åˆå§‹åŒ–
âœ“ å¡ç‰‡åœ–ç‰‡è¼‰å…¥ (200 OK)
âœ“ éŸ³æ•ˆæª”æ¡ˆè¼‰å…¥ (200 OK)
âœ“ å­—å‹æª”æ¡ˆè¼‰å…¥ (200 OK)
```

#### éŠæˆ²é€²è¡Œä¸­æª¢æŸ¥ï¼š

```
âœ“ åˆ†æ•¸å„²å­˜è«‹æ±‚ (Firebase Realtime Database)
âœ“ æ’è¡Œæ¦œè®€å–è«‹æ±‚
âœ“ å¤šäººé€£ç·šåŒæ­¥è«‹æ±‚
âœ“ æ²’æœ‰ 4xx æˆ– 5xx éŒ¯èª¤
```

#### å¸¸è¦‹å•é¡Œé™¤éŒ¯æµç¨‹ï¼š

```
å•é¡Œï¼šèªéŸ³ç„¡æ³•æ’­æ”¾
â†’ Network Tab æœå°‹ .mp3 æˆ– .wav
â†’ æª¢æŸ¥ç‹€æ…‹ç¢¼æ˜¯å¦ 200
â†’ æª¢æŸ¥æª”æ¡ˆå¤§å°æ˜¯å¦æ­£ç¢º
â†’ é»æ“Šè«‹æ±‚ï¼ŒPreview åˆ†é å¯ä»¥è©¦è½

å•é¡Œï¼šFirebase é€£ç·šå¤±æ•—
â†’ Network Tab æœå°‹ firebaseio.com
â†’ æª¢æŸ¥ç‹€æ…‹ç¢¼
â†’ 403: æª¢æŸ¥ database.rules.json
â†’ 401: æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦å·²ç™»å…¥
â†’ Headers åˆ†é æŸ¥çœ‹éŒ¯èª¤è©³æƒ…

å•é¡Œï¼šå¡ç‰‡åœ–ç‰‡ç„¡æ³•é¡¯ç¤º
â†’ Network Tab æœå°‹ .png æˆ– .jpg
â†’ æª¢æŸ¥æ˜¯å¦ 404 Not Found
â†’ ç¢ºèªåœ–ç‰‡è·¯å¾‘æ˜¯å¦æ­£ç¢º
â†’ æª¢æŸ¥æª”æ¡ˆåç¨±å¤§å°å¯«
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä½¿ç”¨æ™‚æ©Ÿ

**å„ªé»ï¼š**

- âœ… å°ˆé–€è§£æ±ºç¶²è·¯ç›¸é—œå•é¡Œ
- âœ… å¯ä»¥çœ‹åˆ°å®Œæ•´çš„è«‹æ±‚/å›æ‡‰å…§å®¹
- âœ… å¯ä»¥æ¸¬è©¦ä¸åŒç¶²è·¯é€Ÿåº¦
- âœ… å¯ä»¥æ‰¾å‡ºæ•ˆèƒ½ç“¶é ¸

**ç¼ºé»ï¼š**

- âŒ åªèƒ½æª¢æŸ¥ç¶²è·¯è«‹æ±‚
- âŒ ç„¡æ³•æª¢æŸ¥ç¨‹å¼é‚è¼¯éŒ¯èª¤
- âŒ éœ€è¦äº†è§£ HTTP å”å®š

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- Firebase é€£ç·šå•é¡Œ
- è³‡æºè¼‰å…¥å¤±æ•—
- API è«‹æ±‚éŒ¯èª¤
- CORS/CSP å•é¡Œ
- æ•ˆèƒ½å„ªåŒ–ï¼ˆæ‰¾å‡ºæ…¢é€Ÿè«‹æ±‚ï¼‰

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## Elements Tab â€” CSS / æ¨£å¼é™¤éŒ¯ ğŸ†•

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

Elements é¢æ¿æ˜¯é™¤éŒ¯ CSSã€ä½ˆå±€ã€ä¸»é¡Œåˆ‡æ›çš„æ ¸å¿ƒå·¥å…·ã€‚åœ¨æœ¬å°ˆæ¡ˆä¸­ï¼ŒCSS è®Šæ•¸é©…å‹•æ•´å€‹é…è‰²ç³»çµ±ï¼Œ`data-theme` æ§åˆ¶ä¸»é¡Œåˆ‡æ›ï¼Œå‹•ç•«å›é¥‹å½±éŸ¿éŠæˆ²é«”é©—â€”â€”é€™äº›éƒ½éœ€è¦ Elements é¢æ¿ä¾†é™¤éŒ¯ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é–‹å•Ÿæ–¹å¼

```
1. F12 â†’ é»é¸ Elements åˆ†é 
2. æˆ–ç›´æ¥ Ctrl/Cmd + Shift + Cï¼ˆæª¢æŸ¥å…ƒç´ æ¨¡å¼ï¼‰
3. é»é¸ç•«é¢ä¸Šçš„ä»»ä½•å…ƒç´ ï¼Œå³å´æœƒé¡¯ç¤ºè©²å…ƒç´ çš„æ¨£å¼
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Styles é¢æ¿ï¼šæª¢æŸ¥èˆ‡ä¿®æ”¹æ¨£å¼

```
å³å´ Styles åˆ†é çš„çµæ§‹ï¼ˆç”±ä¸Šåˆ°ä¸‹ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ element.style { }              â”‚ â† è¡Œå…§æ¨£å¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ .correct-feedback {            â”‚ â† åŒ¹é…çš„ CSS è¦å‰‡
â”‚   animation: pulse-green 0.6s; â”‚   (å¯å³æ™‚ä¿®æ”¹æ¸¬è©¦)
â”‚ }                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [data-theme="field-primary"] { â”‚ â† ä¸»é¡Œ CSS è®Šæ•¸
â”‚   --primary-blue: #4A90D9;     â”‚
â”‚ }                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ :root {                        â”‚ â† åŸºç¤ CSS è®Šæ•¸
â”‚   --bg-dark: #1a2332;          â”‚
â”‚ }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å³æ™‚ä¿®æ”¹æ¸¬è©¦**ï¼šç›´æ¥åœ¨ Styles é¢æ¿é»æ“Šå€¼å°±èƒ½ä¿®æ”¹ï¼Œä¸éœ€è¦æ”¹ç¨‹å¼ç¢¼ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### CSS Custom Properties é™¤éŒ¯

æœ¬å°ˆæ¡ˆå¤§é‡ä½¿ç”¨ CSS è®Šæ•¸ï¼ˆ`--bg-dark`ã€`--primary-blue` ç­‰ï¼‰ã€‚è¿½è¹¤è®Šæ•¸å€¼ä¾†æºï¼š

```
æ­¥é©Ÿï¼š
1. é¸å–ç›®æ¨™å…ƒç´ 
2. åœ¨ Styles é¢æ¿ä¸­æ‰¾åˆ°ä½¿ç”¨ var() çš„å±¬æ€§
3. æ»‘é¼ ç§»åˆ° var(--variable) ä¸Š â†’ é¡¯ç¤ºã€Œè¨ˆç®—å¾Œçš„å€¼ã€
4. åœ¨ Computed åˆ†é å¯ä»¥çœ‹åˆ°æœ€çµ‚å¥—ç”¨çš„å€¼
5. å¦‚æœå€¼ä¸å°ï¼Œå¾€ä¸Šè¿½æº¯æ˜¯å“ªå€‹ CSS è¦å‰‡è¦†å¯«äº†

å¸¸è¦‹å•é¡Œï¼š
- ä¸»é¡Œè‰²æ²’è®Š â†’ æª¢æŸ¥ data-theme å±¬æ€§æ˜¯å¦æ­£ç¢ºåˆ‡æ›
- é¡è‰²ä¸å° â†’ è¿½è¹¤ var() çš„è§£æéˆï¼ˆåŸºç¤è‰² vs ä¸»é¡Œè‰²è¦†å¯«ï¼‰
```

**å¿«é€Ÿæª¢æŸ¥ data-theme**ï¼š

```javascript
// åœ¨ Console ä¸­æª¢æŸ¥ç›®å‰ä¸»é¡Œ
document.documentElement.getAttribute("data-theme");

// å³æ™‚åˆ‡æ›ä¸»é¡Œæ¸¬è©¦
document.documentElement.setAttribute("data-theme", "rule-independent");
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Force Element Stateï¼ˆå¼·åˆ¶ç‹€æ…‹ï¼‰

æª¢æŸ¥ `:hover`ã€`:active`ã€`:focus` æ¨£å¼æ˜¯å¦æ­£ç¢ºï¼š

```
æ­¥é©Ÿï¼š
1. é¸å–ç›®æ¨™å…ƒç´ 
2. Styles é¢æ¿ä¸Šæ–¹ï¼Œé»æ“Š :hov æŒ‰éˆ•
3. å‹¾é¸ :hoverã€:activeã€:focus ç­‰
4. å…ƒç´ æœƒä¿æŒåœ¨è©²ç‹€æ…‹ï¼Œæ–¹ä¾¿æª¢æŸ¥æ¨£å¼
```

**é©ç”¨å ´æ™¯**ï¼š

- æŒ‰éˆ• hover é¡è‰²ä¸å°
- æ¢ç´¢é» active ç‹€æ…‹æ¨£å¼å•é¡Œ
- è¼¸å…¥æ¡† focus å¤–æ¡†ä¸æ˜é¡¯

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Chrome Animation é¢æ¿

é™¤éŒ¯ `pulse-green`ã€`shake-red` ç­‰å‹•ç•«æ•ˆæœï¼š

```
æ­¥é©Ÿï¼š
1. F12 â†’ é»æ“Šå³ä¸Šè§’ â‹® â†’ More tools â†’ Animations
2. è§¸ç™¼å‹•ç•«ï¼ˆä¾‹å¦‚ç­”å°/ç­”éŒ¯ï¼‰
3. Animation é¢æ¿æœƒéŒ„è£½å‹•ç•«
4. å¯ä»¥ï¼š
   - èª¿æ•´æ’­æ”¾é€Ÿåº¦ï¼ˆ25% / 50% / 100%ï¼‰
   - æš«åœåœ¨ä»»æ„æ™‚é–“é»
   - æŸ¥çœ‹ timing function æ›²ç·š
   - ä¿®æ”¹ duration æ¸¬è©¦æ•ˆæœ
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Layout Inspectorï¼ˆFlexbox / Gridï¼‰

ç¢ºèªéŠæˆ²ä»‹é¢çš„ä½ˆå±€æ˜¯å¦æ­£ç¢ºï¼š

```
æ­¥é©Ÿï¼š
1. é¸å–ä½¿ç”¨ flex æˆ– grid çš„å®¹å™¨å…ƒç´ 
2. Layout åˆ†é ä¸­æœƒå‡ºç¾ Flexbox/Grid åœ–ç¤º
3. é»æ“Šå¯ä»¥é¡¯ç¤ºä½ˆå±€è¼”åŠ©ç·š
4. è¦–è¦ºåŒ–æª¢æŸ¥å°é½Šã€é–“è·ã€æ’åˆ—æ–¹å‘
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éŠæˆ²å°ˆç”¨ CSS é™¤éŒ¯é€ŸæŸ¥

| å•é¡Œ           | é™¤éŒ¯æ­¥é©Ÿ                                                    |
| -------------- | ----------------------------------------------------------- |
| ä¸»é¡Œè‰²æ²’æœ‰åˆ‡æ› | Console: `document.documentElement.dataset.theme` â†’ ç¢ºèªå€¼  |
| CSS è®Šæ•¸å€¼ä¸å° | Elements â†’ Computed â†’ æœå°‹è®Šæ•¸å â†’ è¿½æº¯è¦†å¯«éˆ               |
| å‹•ç•«ä¸æ’­æ”¾     | Elements â†’ Styles â†’ ç¢ºèª `animation` å±¬æ€§ â†’ Animations é¢æ¿ |
| æŒ‰éˆ•æ¨£å¼ç•°å¸¸   | Force State (`:hover` / `:active`) â†’ æª¢æŸ¥å„ªå…ˆç´šè¦†è“‹         |
| å¹³æ¿ä½ˆå±€è·‘æ‰   | Device Mode â†’ åˆ‡æ›è£ç½® â†’ Layout Inspector æª¢æŸ¥ flex         |
| è§¸æ§å€åŸŸå¤ªå°   | Elements â†’ è¨ˆç®— width/height â†’ éœ€ â‰¥ 48Ã—48px                 |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## Application Tab â€” å„²å­˜ç©ºé–“é™¤éŒ¯ ğŸ†•

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

Application Tab æ˜¯æª¢è¦–èˆ‡ç®¡ç†ç€è¦½å™¨å„²å­˜ç©ºé–“çš„å·¥å…·ã€‚æœ¬å°ˆæ¡ˆçš„å–®äººæ¨¡å¼ä»¥ localStorage ç‚ºæ ¸å¿ƒå„²å­˜å±¤ï¼ˆ`playerProfile`ã€`adventureProgress`ã€`classData`ï¼‰ï¼Œæ‰€æœ‰é€²åº¦å’Œè¨­å®šéƒ½å­˜åœ¨é€™è£¡ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é–‹å•Ÿæ–¹å¼

```
F12 â†’ é»é¸ Application åˆ†é 
å·¦å´é¢æ¿ï¼š
â”œâ”€â”€ Storage
â”‚   â”œâ”€â”€ Local Storage     â† ä¸»è¦ä½¿ç”¨
â”‚   â”œâ”€â”€ Session Storage
â”‚   â”œâ”€â”€ IndexedDB
â”‚   â””â”€â”€ Cookies
â”œâ”€â”€ Cache
â”‚   â””â”€â”€ Cache Storage
â””â”€â”€ Background Services
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æª¢è¦– localStorage

```
æ­¥é©Ÿï¼š
1. å±•é–‹ Local Storage â†’ é»æ“Šä½ çš„ç¶²ç«™åŸŸå
2. å³å´æœƒé¡¯ç¤ºæ‰€æœ‰ key-value å°
3. é»æ“ŠæŸå€‹ key å¯ä»¥æŸ¥çœ‹/ç·¨è¼¯å€¼

å°æŠ€å·§ï¼š
- ä¸Šæ–¹æœ‰æœå°‹æ¡†ï¼Œå¯ä»¥æœå°‹ key åç¨±
- é›™æ“Š value å¯ä»¥ç›´æ¥ç·¨è¼¯
- å³éµ â†’ Delete å¯ä»¥åˆªé™¤å–®ä¸€ key
- å³éµ â†’ Clear å¯ä»¥æ¸…é™¤æ‰€æœ‰ localStorage
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å°ˆæ¡ˆå¸¸ç”¨ Key é€ŸæŸ¥

| Key                 | ç”¨é€”           | æª¢æŸ¥é‡é»                                                   |
| ------------------- | -------------- | ---------------------------------------------------------- |
| `playerProfile`     | ç©å®¶èº«ä»½èˆ‡åå¥½ | `nickname`ã€`level`ã€`badges`ã€`soundSettings`             |
| `adventureProgress` | æ¢éšªåœ°åœ–é€²åº¦   | `currentMapIndex`ã€`currentPointIndex`ã€`fieldRuleRecords` |
| `classData`         | ç­ç´šæ’è¡Œè³‡æ–™   | CSV è³‡æ–™å®Œæ•´æ€§                                             |
| `storageVersion`    | çµæ§‹ç‰ˆæœ¬è™Ÿ     | é·ç§»æ˜¯å¦æˆåŠŸ                                               |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### JSON æ ¼å¼åŒ–æª¢è¦–

localStorage å­˜çš„æ˜¯ JSON å­—ä¸²ï¼Œç›´æ¥çœ‹å¾ˆé›£è®€ã€‚åœ¨ Console ä¸­æ ¼å¼åŒ–ï¼š

```javascript
// æ ¼å¼åŒ–æª¢è¦– playerProfile
console.table(JSON.parse(localStorage.getItem("playerProfile")));

// æ ¼å¼åŒ–æª¢è¦– adventureProgress
const progress = JSON.parse(localStorage.getItem("adventureProgress"));
console.log("ç•¶å‰åœ°åœ–:", progress.currentMapIndex);
console.log("ç•¶å‰æ¢ç´¢é»:", progress.currentPointIndex);
console.log("è‡ªç”±é¸æ“‡è§£é–:", progress.freeChoiceUnlocked);
console.table(progress.fieldRuleRecords);

// æª¢æŸ¥ç‰¹å®šæ¢ç´¢é»
console.table(progress.maps[0].points);
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¿«é€Ÿæ¸¬è©¦æ“ä½œ

```javascript
// é‡ç½®æ‰€æœ‰é€²åº¦ï¼ˆæ¸¬è©¦ç”¨ï¼‰
localStorage.removeItem("adventureProgress");
location.reload();

// å¿«é€Ÿè·³åˆ°ç‰¹å®šé€²åº¦
const progress = JSON.parse(localStorage.getItem("adventureProgress"));
progress.currentMapIndex = 1; // è·³åˆ°ç¬¬äºŒå¼µåœ°åœ–
progress.currentPointIndex = 4; // è·³åˆ°ç¬¬äº”å€‹æ¢ç´¢é»
localStorage.setItem("adventureProgress", JSON.stringify(progress));
location.reload();

// æ¨¡æ“¬å…¨é€šé—œ
progress.freeChoiceUnlocked = true;
progress.maps.forEach((map) =>
  map.points.forEach((p) => {
    p.passed = true;
    p.starsEarned = 3;
  }),
);
localStorage.setItem("adventureProgress", JSON.stringify(progress));

// å¿«é€Ÿåˆ‡æ›éŸ³æ•ˆè¨­å®š
const profile = JSON.parse(localStorage.getItem("playerProfile"));
profile.soundSettings = { sfx: false, voice: true };
localStorage.setItem("playerProfile", JSON.stringify(profile));
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸è¦‹å•é¡Œæ’æŸ¥

| å•é¡Œ         | æ’æŸ¥æ­¥é©Ÿ                                                              |
| ------------ | --------------------------------------------------------------------- |
| é€²åº¦æ¶ˆå¤±     | Application â†’ Local Storage â†’ ç¢ºèª `adventureProgress` æ˜¯å¦å­˜åœ¨       |
| è¨­å®šæ²’ç”Ÿæ•ˆ   | Console ä¸­ `JSON.parse(localStorage.getItem('playerProfile'))` ç¢ºèªå€¼ |
| è³‡æ–™çµæ§‹éŒ¯èª¤ | æ¯”å° `storageVersion` â†’ æ˜¯å¦éœ€è¦é·ç§»                                  |
| å„²å­˜å¤±æ•—     | try-catch åŒ…è£ `setItem` â†’ å¯èƒ½æ˜¯ QuotaExceededError                  |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## ğŸ”Š éŸ³è¨Šé™¤éŒ¯ ğŸ†•

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

æœ¬å°ˆæ¡ˆæœ‰è¤‡é›œçš„éŸ³æ•ˆç³»çµ±ï¼šç”·å¥³è²é›™è»Œåˆºæ¿€ç‰©èªéŸ³ã€å›é¥‹éŸ³æ•ˆã€å¾½ç« æ’­å ±ã€WM èªéŸ³ã€‚æœ€å¸¸è¦‹çš„ bug æ˜¯**åœ¨ iPad/æ‰‹æ©Ÿä¸ŠèªéŸ³ä¸æ’­æ”¾**ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Web Audio API ç‹€æ…‹æª¢æŸ¥

```javascript
// æª¢æŸ¥ AudioContext ç‹€æ…‹
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
console.log("AudioContext ç‹€æ…‹:", audioCtx.state);
// 'suspended' â†’ éœ€è¦ä½¿ç”¨è€…äº’å‹•æ‰èƒ½æ’­æ”¾
// 'running'   â†’ æ­£å¸¸å¯æ’­æ”¾
// 'closed'    â†’ å·²é—œé–‰

// å¼·åˆ¶æ¢å¾©ï¼ˆéœ€åœ¨ä½¿ç”¨è€…äº’å‹•äº‹ä»¶ä¸­ï¼‰
document.addEventListener(
  "click",
  () => {
    if (audioCtx.state === "suspended") {
      audioCtx.resume().then(() => {
        console.log("âœ… AudioContext å·²æ¢å¾©");
      });
    }
  },
  { once: true },
);
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è‡ªå‹•æ’­æ”¾æ”¿ç­–é™¤éŒ¯

**é€™æ˜¯ iPad/æ‰‹æ©Ÿä¸Šæœ€å¸¸è¦‹çš„éŸ³è¨Šå•é¡Œ**ï¼š

```javascript
// è¨ºæ–·ï¼šæ˜¯å¦è¢«è‡ªå‹•æ’­æ”¾æ”¿ç­–é˜»æ“‹
function testAutoplay() {
  const audio = new Audio("audio/sfx/sfx-correct.mp3");
  audio
    .play()
    .then(() => console.log("âœ… è‡ªå‹•æ’­æ”¾å…è¨±"))
    .catch((error) => {
      console.error("âŒ è‡ªå‹•æ’­æ”¾è¢«é˜»æ“‹:", error.message);
      console.warn("ğŸ’¡ è§£æ±ºæ–¹æ³•ï¼šç¢ºä¿åœ¨ä½¿ç”¨è€…äº’å‹•ï¼ˆclick/touchï¼‰å¾Œæ‰æ’­æ”¾");
    });
}

// æ­£ç¢ºåšæ³•ï¼šåœ¨ä½¿ç”¨è€…äº’å‹•äº‹ä»¶ä¸­åˆå§‹åŒ–éŸ³è¨Š
document.getElementById("startGameBtn").addEventListener("click", () => {
  // ç¬¬ä¸€æ¬¡äº’å‹•æ™‚æ’­æ”¾ä¸€å€‹éœéŸ³éŸ³æ•ˆä¾†ã€Œè§£é–ã€éŸ³è¨Š
  const silentAudio = new Audio();
  silentAudio.play().catch(() => {});
});
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ç”·å¥³è²è·¯å¾‘é™¤éŒ¯

```javascript
// æª¢æŸ¥èªéŸ³è·¯å¾‘æ˜¯å¦æ­£ç¢º
function debugVoicePath(stimulusType, gameField, ruleContext) {
  const pack = STIMULI_PACKS[currentPack];
  const field = pack[gameField];
  const stimulus = field.goStimulus; // æˆ– noGoStimulus

  console.group("ğŸ”Š èªéŸ³è·¯å¾‘é™¤éŒ¯");
  console.log("åˆºæ¿€ç‰©:", stimulusType);
  console.log("éŠæˆ²å ´:", gameField);
  console.log("è¦å‰‡è„ˆçµ¡:", ruleContext);

  // æ··åˆè¦å‰‡ä¸­ï¼šå¥³è² = è¦å‰‡Aï¼Œç”·è² = è¦å‰‡B
  const isFemale = ruleContext === "rule1" || ruleContext === "mixed-rule1";
  const voicePath = isFemale ? stimulus.voiceFemale : stimulus.voiceMale;

  console.log("æ€§åˆ¥:", isFemale ? "å¥³è²" : "ç”·è²");
  console.log("éŸ³æª”è·¯å¾‘:", voicePath);

  // æ¸¬è©¦æª”æ¡ˆæ˜¯å¦å­˜åœ¨
  fetch(voicePath)
    .then((res) =>
      console.log("æª”æ¡ˆç‹€æ…‹:", res.status === 200 ? "âœ… å­˜åœ¨" : "âŒ 404"),
    )
    .catch(() => console.error("âŒ ç„¡æ³•è¼‰å…¥"));

  console.groupEnd();
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¤šéŸ³æ•ˆä¸¦ç™¼æ’æŸ¥

```javascript
// åŒæ™‚æ’­æ”¾å¤šå€‹éŸ³æ•ˆæ™‚å¯èƒ½äº’ç›¸å¹²æ“¾
function debugAudioConcurrency() {
  console.group("ğŸ”Š éŸ³æ•ˆä¸¦ç™¼æª¢æŸ¥");

  // åˆ—å‡ºç›®å‰æ­£åœ¨æ’­æ”¾çš„éŸ³æ•ˆ
  const audioElements = document.querySelectorAll("audio");
  audioElements.forEach((audio, i) => {
    console.log(`éŸ³æ•ˆ ${i}:`, {
      src: audio.src,
      paused: audio.paused,
      currentTime: audio.currentTime,
      duration: audio.duration,
    });
  });

  console.groupEnd();
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### éŸ³è¨Šé™¤éŒ¯é€ŸæŸ¥

| å•é¡Œ           | æ’æŸ¥æ–¹æ³•                                                          |
| -------------- | ----------------------------------------------------------------- |
| iPad ä¸Šæ²’è²éŸ³  | æª¢æŸ¥ `AudioContext.state` â†’ æ˜¯å¦ `suspended`                      |
| ç‰¹å®šèªéŸ³ä¸æ’­æ”¾ | Network Tab æœ `.mp3` â†’ ç¢ºèªè·¯å¾‘å’Œ 200 OK                         |
| ç”·å¥³è²æå     | Console å°å‡º `ruleContext` + èªéŸ³è·¯å¾‘                             |
| éŸ³æ•ˆå¡é “/é‡ç–Š  | `debugAudioConcurrency()` æª¢æŸ¥ä¸¦ç™¼æ•¸é‡                            |
| éŸ³é‡è¨­å®šä¸ç”Ÿæ•ˆ | `JSON.parse(localStorage.getItem('playerProfile')).soundSettings` |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## ğŸ“± è¡Œå‹•è£ç½® / è§¸æ§é™¤éŒ¯ ğŸ†•

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ¦‚å¿µèªªæ˜

æœ¬å°ˆæ¡ˆçš„ä¸»è¦ä½¿ç”¨å ´æ™¯æ˜¯**å¹¼å…’åœ¨ iPad ä¸Šæ“ä½œ**ï¼Œæ‰€æœ‰æŒ‰éˆ•è§¸æ§å€åŸŸå¿…é ˆ â‰¥ 48Ã—48pxã€‚è¡Œå‹•è£ç½®é™¤éŒ¯æ˜¯å¿…å‚™æŠ€èƒ½ã€‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Chrome Device Modeï¼ˆè£ç½®æ¨¡æ“¬ï¼‰

```
æ­¥é©Ÿï¼š
1. F12 â†’ é»æ“Šå·¦ä¸Šè§’çš„ ğŸ“± è£ç½®åˆ‡æ›æŒ‰éˆ•ï¼ˆToggle Device Toolbarï¼‰
2. ä¸Šæ–¹é¸æ“‡è£ç½®ï¼šiPad / iPad Pro / iPhone / è‡ªè¨‚å°ºå¯¸
3. å¯ä»¥æ¨¡æ“¬è§¸æ§äº‹ä»¶ï¼ˆæ»‘é¼ æœƒè®Šæˆåœ“é»ï¼‰
4. å¯ä»¥æ—‹è½‰æ–¹å‘ï¼ˆç›´å‘/æ©«å‘ï¼‰

å¿«æ·éµï¼šCtrl/Cmd + Shift + M
```

**æ¨è–¦æ¸¬è©¦è£ç½®**ï¼š

| è£ç½®           | è§£æåº¦      | é‡é»æ¸¬è©¦     |
| -------------- | ----------- | ------------ |
| iPad (10th)    | 820 Ã— 1180  | ä¸»è¦ç›®æ¨™è£ç½® |
| iPad Pro 12.9" | 1024 Ã— 1366 | å¤§è¢å¹•ä½ˆå±€   |
| iPhone SE      | 375 Ã— 667   | æœ€å°è¢å¹•     |
| è‡ªè¨‚           | ä»»æ„        | é‚Šç•Œæƒ…æ³     |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### è§¸æ§äº‹ä»¶é™¤éŒ¯

```javascript
// ç›£è½æ‰€æœ‰è§¸æ§äº‹ä»¶ï¼ˆåœ¨ Console ä¸­åŸ·è¡Œï¼‰
["touchstart", "touchend", "touchmove", "click"].forEach((event) => {
  document.addEventListener(event, (e) => {
    console.log(`ğŸ“± ${event}:`, {
      target: e.target.tagName + "#" + e.target.id,
      x: e.touches ? e.touches[0]?.clientX : e.clientX,
      y: e.touches ? e.touches[0]?.clientY : e.clientY,
    });
  });
});

// æª¢æŸ¥è§¸æ§å€åŸŸå¤§å°
function checkTouchTargets() {
  const buttons = document.querySelectorAll('button, [role="button"], a');
  const tooSmall = [];

  buttons.forEach((btn) => {
    const rect = btn.getBoundingClientRect();
    if (rect.width < 48 || rect.height < 48) {
      tooSmall.push({
        element: btn.textContent.trim().substring(0, 20),
        width: Math.round(rect.width),
        height: Math.round(rect.height),
        id: btn.id || btn.className,
      });
    }
  });

  if (tooSmall.length > 0) {
    console.warn("âš ï¸ è§¸æ§å€åŸŸéå°çš„æŒ‰éˆ•ï¼ˆéœ€ â‰¥ 48Ã—48pxï¼‰ï¼š");
    console.table(tooSmall);
  } else {
    console.log("âœ… æ‰€æœ‰æŒ‰éˆ•è§¸æ§å€åŸŸ OK");
  }
}
checkTouchTargets();
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Safari Web Inspectorï¼ˆiPad å¯¦æ©Ÿé™¤éŒ¯ï¼‰

```
æ­¥é©Ÿï¼ˆéœ€è¦ Mac + iPad + Lightning/USB-C ç·šï¼‰ï¼š
1. iPad: è¨­å®š â†’ Safari â†’ é€²éš â†’ æ‰“é–‹ã€ŒWeb Inspectorã€
2. Mac: Safari â†’ åå¥½è¨­å®š â†’ é€²éš â†’ æ‰“é–‹ã€Œåœ¨é¸å–®åˆ—ä¸­é¡¯ç¤ºã€é–‹ç™¼ã€é¸å–®ã€
3. iPad ä¸Šç”¨ Safari é–‹å•ŸéŠæˆ²ç¶²é 
4. Mac Safari â†’ é–‹ç™¼ â†’ é¸æ“‡ä½ çš„ iPad â†’ é¸æ“‡é é¢
5. å‡ºç¾å®Œæ•´çš„ Inspectorï¼ˆConsoleã€Elementsã€Network...ï¼‰

é€™æ˜¯ iPad ä¸Šå”¯ä¸€å¯é çš„é™¤éŒ¯æ–¹å¼ï¼
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸è¦‹è¡Œå‹•è£ç½®å•é¡Œ

| å•é¡Œ            | åŸå›                 | è§£æ±ºæ–¹æ³•                           |
| --------------- | ------------------- | ---------------------------------- |
| iPad ä¸ŠéŸ³æ•ˆä¸æ’­ | è‡ªå‹•æ’­æ”¾æ”¿ç­–        | éœ€ä½¿ç”¨è€…äº’å‹•å¾Œæ‰æ’­æ”¾ï¼ˆè¦‹éŸ³è¨Šé™¤éŒ¯ï¼‰ |
| æŒ‰éˆ•é»ä¸åˆ°      | è§¸æ§å€åŸŸ < 48px     | åŠ å¤§æŒ‰éˆ•å°ºå¯¸æˆ– padding             |
| ç•«é¢å¯ä»¥ç¸®æ”¾    | viewport è¨­å®šå•é¡Œ   | ç¢ºèª `user-scalable=no`            |
| 300ms é»æ“Šå»¶é²  | èˆŠç‰ˆè¡Œå‹•ç€è¦½å™¨      | åŠ  `touch-action: manipulation`    |
| CSS hover å¡ä½  | è§¸æ§æ²’æœ‰ hover é›¢é–‹ | ç”¨ `@media (hover: hover)` é™åˆ¶    |
| è™›æ“¬éµç›¤æ“‹ä½    | è¼¸å…¥æ¡†è¢«é®è“‹        | `visualViewport` API èª¿æ•´          |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="éŒ¯èª¤è™•ç†æ©Ÿåˆ¶"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. Try-Catch éŒ¯èª¤æ•æ‰

#### åŸºæœ¬ç”¨æ³•

```javascript
// åŸºæœ¬çµæ§‹
try {
  // å¯èƒ½å‡ºéŒ¯çš„ç¨‹å¼ç¢¼
  riskyOperation();
} catch (error) {
  // éŒ¯èª¤è™•ç†
  console.error("ç™¼ç”ŸéŒ¯èª¤:", error);
} finally {
  // ç„¡è«–æ˜¯å¦å‡ºéŒ¯éƒ½æœƒåŸ·è¡Œ
  cleanup();
}
```

#### å¯¦éš›ç¯„ä¾‹

**ä¾‹1ï¼šJSON è§£æ**

```javascript
function loadGameConfig(jsonString) {
  try {
    const config = JSON.parse(jsonString);
    return config;
  } catch (error) {
    console.error("âŒ è¨­å®šæª”æ ¼å¼éŒ¯èª¤:", error.message);
    // å›å‚³é è¨­è¨­å®š
    return getDefaultConfig();
  }
}
```

**ä¾‹2ï¼šLocalStorage æ“ä½œ**

```javascript
function saveGameProgress(data) {
  try {
    const jsonData = JSON.stringify(data);
    localStorage.setItem("gameProgress", jsonData);
    console.log("âœ“ é€²åº¦å·²å„²å­˜");
    return true;
  } catch (error) {
    console.error("âŒ å„²å­˜å¤±æ•—:", error.message);

    if (error.name === "QuotaExceededError") {
      alert("å„²å­˜ç©ºé–“ä¸è¶³ï¼Œè«‹æ¸…ç†ç€è¦½å™¨è³‡æ–™");
    }

    return false;
  }
}

function loadGameProgress() {
  try {
    const jsonData = localStorage.getItem("gameProgress");
    if (!jsonData) return null;

    return JSON.parse(jsonData);
  } catch (error) {
    console.error("âŒ è®€å–é€²åº¦å¤±æ•—:", error.message);
    // æ¸…é™¤æå£çš„è³‡æ–™
    localStorage.removeItem("gameProgress");
    return null;
  }
}
```

**ä¾‹3ï¼šFirebase æ“ä½œ**

```javascript
async function saveScore(playerId, score) {
  try {
    await firebase.database().ref(`scores/${playerId}`).set({
      score: score,
      timestamp: Date.now(),
    });

    console.log("âœ“ åˆ†æ•¸å·²å„²å­˜");
    return true;
  } catch (error) {
    console.error("âŒ Firebase å„²å­˜å¤±æ•—:", {
      code: error.code,
      message: error.message,
    });

    // æ ¹æ“šéŒ¯èª¤é¡å‹çµ¦äºˆä¸åŒæç¤º
    if (error.code === "PERMISSION_DENIED") {
      alert("æ¬Šé™ä¸è¶³ï¼Œè«‹å…ˆç™»å…¥");
    } else if (error.code === "NETWORK_ERROR") {
      alert("ç¶²è·¯é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯");
    } else {
      alert("å„²å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
    }

    return false;
  }
}
```

**ä¾‹4ï¼šå¤šå±¤éŒ¯èª¤è™•ç†**

```javascript
async function initGame() {
  try {
    // ç¬¬ä¸€æ­¥ï¼šè¼‰å…¥è¨­å®š
    try {
      const config = await loadConfig();
      applyConfig(config);
    } catch (error) {
      console.warn("âš ï¸ ä½¿ç”¨é è¨­è¨­å®š", error);
      applyConfig(getDefaultConfig());
    }

    // ç¬¬äºŒæ­¥ï¼šé€£æ¥ Firebase
    try {
      await connectFirebase();
    } catch (error) {
      console.warn("âš ï¸ Firebase é€£ç·šå¤±æ•—ï¼Œä½¿ç”¨æœ¬åœ°æ¨¡å¼", error);
      useLocalMode();
    }

    // ç¬¬ä¸‰æ­¥ï¼šè¼‰å…¥è³‡æº
    await loadAssets();

    // ç¬¬å››æ­¥ï¼šå•Ÿå‹•éŠæˆ²
    startGame();
  } catch (error) {
    console.error("âŒ éŠæˆ²åˆå§‹åŒ–å¤±æ•—:", error);
    showErrorScreen("éŠæˆ²è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢");
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 2. å…¨åŸŸéŒ¯èª¤ç›£è½

#### window.onerror - æ•æ‰ JavaScript éŒ¯èª¤

```javascript
// æ•æ‰æ‰€æœ‰æœªè™•ç†çš„éŒ¯èª¤
window.addEventListener("error", (event) => {
  console.error("ğŸš¨ å…¨åŸŸéŒ¯èª¤:", {
    message: event.message, // éŒ¯èª¤è¨Šæ¯
    filename: event.filename, // ç™¼ç”ŸéŒ¯èª¤çš„æª”æ¡ˆ
    lineno: event.lineno, // è¡Œè™Ÿ
    colno: event.colno, // åˆ—è™Ÿ
    error: event.error, // Error ç‰©ä»¶
    stack: event.error?.stack, // å †ç–Šè¿½è¹¤
  });

  // è¨˜éŒ„åˆ°éŒ¯èª¤è¿½è¹¤æœå‹™
  logErrorToService({
    type: "JavaScript Error",
    message: event.message,
    location: `${event.filename}:${event.lineno}:${event.colno}`,
    stack: event.error?.stack,
    timestamp: new Date().toISOString(),
  });

  // é˜²æ­¢éŒ¯èª¤é¡¯ç¤ºåœ¨ Consoleï¼ˆé¸æ“‡æ€§ï¼‰
  // event.preventDefault();
});
```

#### window.onunhandledrejection - æ•æ‰ Promise éŒ¯èª¤

```javascript
// æ•æ‰æœªè™•ç†çš„ Promise æ‹’çµ•
window.addEventListener("unhandledrejection", (event) => {
  console.error("ğŸš¨ æœªè™•ç†çš„ Promise æ‹’çµ•:", {
    reason: event.reason, // æ‹’çµ•åŸå› 
    promise: event.promise, // è¢«æ‹’çµ•çš„ Promise
  });

  // è¨˜éŒ„éŒ¯èª¤
  logErrorToService({
    type: "Unhandled Promise Rejection",
    message: event.reason?.message || String(event.reason),
    stack: event.reason?.stack,
    timestamp: new Date().toISOString(),
  });

  // é˜²æ­¢é¡¯ç¤ºåœ¨ Console
  event.preventDefault();
});
```

#### å®Œæ•´çš„éŒ¯èª¤ç›£è½ç³»çµ±

```javascript
class ErrorHandler {
  constructor() {
    this.errors = [];
    this.maxErrors = 50; // æœ€å¤šä¿å­˜ 50 å€‹éŒ¯èª¤
    this.init();
  }

  init() {
    // JavaScript éŒ¯èª¤
    window.addEventListener("error", (e) => this.handleError(e));

    // Promise éŒ¯èª¤
    window.addEventListener("unhandledrejection", (e) =>
      this.handlePromiseError(e),
    );

    // è³‡æºè¼‰å…¥éŒ¯èª¤
    window.addEventListener(
      "error",
      (e) => {
        if (e.target !== window) {
          this.handleResourceError(e);
        }
      },
      true,
    ); // ä½¿ç”¨æ•ç²éšæ®µ
  }

  handleError(event) {
    const errorInfo = {
      type: "JavaScript Error",
      message: event.message,
      filename: event.filename,
      line: event.lineno,
      column: event.colno,
      stack: event.error?.stack,
      timestamp: new Date().toISOString(),
      userAgent: navigator.userAgent,
    };

    this.logError(errorInfo);
  }

  handlePromiseError(event) {
    const errorInfo = {
      type: "Promise Rejection",
      message: event.reason?.message || String(event.reason),
      stack: event.reason?.stack,
      timestamp: new Date().toISOString(),
    };

    this.logError(errorInfo);
    event.preventDefault();
  }

  handleResourceError(event) {
    const errorInfo = {
      type: "Resource Load Error",
      element: event.target.tagName,
      source: event.target.src || event.target.href,
      timestamp: new Date().toISOString(),
    };

    this.logError(errorInfo);
  }

  logError(errorInfo) {
    // å„²å­˜åˆ°é™£åˆ—
    this.errors.push(errorInfo);
    if (this.errors.length > this.maxErrors) {
      this.errors.shift();
    }

    // è¼¸å‡ºåˆ° Console
    console.error("ğŸš¨ éŒ¯èª¤è¨˜éŒ„:", errorInfo);

    // ç™¼é€åˆ°å¾Œç«¯ï¼ˆé¸æ“‡æ€§ï¼‰
    this.sendToServer(errorInfo);

    // é¡¯ç¤ºéŒ¯èª¤é€šçŸ¥ï¼ˆé–‹ç™¼æ¨¡å¼ï¼‰
    if (DEBUG_MODE) {
      this.showErrorNotification(errorInfo);
    }
  }

  sendToServer(errorInfo) {
    // ç™¼é€åˆ°éŒ¯èª¤è¿½è¹¤æœå‹™ï¼ˆå¦‚ Sentryï¼‰
    if (window.Sentry) {
      Sentry.captureException(new Error(errorInfo.message), {
        extra: errorInfo,
      });
    }

    // æˆ–ç™¼é€åˆ°è‡ªå·±çš„å¾Œç«¯
    fetch("/api/log-error", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(errorInfo),
    }).catch(() => {
      // å¿½ç•¥éŒ¯èª¤è¨˜éŒ„çš„éŒ¯èª¤
    });
  }

  showErrorNotification(errorInfo) {
    const notification = document.createElement("div");
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: #ff4444;
      color: white;
      padding: 15px;
      border-radius: 5px;
      z-index: 999999;
      max-width: 300px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    `;
    notification.innerHTML = `
      <strong>ğŸš¨ ${errorInfo.type}</strong><br>
      <small>${errorInfo.message}</small>
    `;
    document.body.appendChild(notification);

    setTimeout(() => notification.remove(), 5000);
  }

  getErrors() {
    return this.errors;
  }

  clearErrors() {
    this.errors = [];
  }

  exportErrors() {
    const blob = new Blob([JSON.stringify(this.errors, null, 2)], {
      type: "application/json",
    });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `errors_${Date.now()}.json`;
    a.click();
  }
}

// åˆå§‹åŒ–
const errorHandler = new ErrorHandler();

// ä½¿ç”¨æ–¹å¼
// errorHandler.getErrors() - æŸ¥çœ‹æ‰€æœ‰éŒ¯èª¤
// errorHandler.exportErrors() - åŒ¯å‡ºéŒ¯èª¤æ—¥èªŒ
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 3. è‡ªè¨‚éŒ¯èª¤é¡åˆ¥

```javascript
// éŠæˆ²ç›¸é—œçš„è‡ªè¨‚éŒ¯èª¤
class GameError extends Error {
  constructor(message, code) {
    super(message);
    this.name = "GameError";
    this.code = code;
    this.timestamp = new Date();
  }
}

class CardNotFoundError extends GameError {
  constructor(cardId) {
    super(`æ‰¾ä¸åˆ°å¡ç‰‡: ${cardId}`, "CARD_NOT_FOUND");
    this.cardId = cardId;
  }
}

class InvalidMoveError extends GameError {
  constructor(reason) {
    super(`ç„¡æ•ˆçš„ç§»å‹•: ${reason}`, "INVALID_MOVE");
    this.reason = reason;
  }
}

class NetworkError extends GameError {
  constructor(message, originalError) {
    super(message, "NETWORK_ERROR");
    this.originalError = originalError;
  }
}

// ä½¿ç”¨ç¯„ä¾‹
function flipCard(cardId) {
  const card = cards.find((c) => c.id === cardId);

  if (!card) {
    throw new CardNotFoundError(cardId);
  }

  if (card.isFlipped) {
    throw new InvalidMoveError("å¡ç‰‡å·²ç¶“ç¿»é–‹");
  }

  // ç¿»é–‹å¡ç‰‡...
}

// æ•æ‰ç‰¹å®šéŒ¯èª¤
try {
  flipCard(123);
} catch (error) {
  if (error instanceof CardNotFoundError) {
    console.error("å¡ç‰‡ä¸å­˜åœ¨:", error.cardId);
  } else if (error instanceof InvalidMoveError) {
    console.warn("ç„¡æ•ˆæ“ä½œ:", error.reason);
  } else {
    console.error("æœªçŸ¥éŒ¯èª¤:", error);
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="è‡ªè¨‚-debug-å·¥å…·ç³»çµ±"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## è‡ªè¨‚ DEBUG å·¥å…·ç³»çµ±

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å®Œæ•´çš„ DEBUG é¡åˆ¥å¯¦ä½œ

```javascript
/**
 * DEBUG å·¥å…·é¡åˆ¥
 * æä¾›çµ±ä¸€çš„é™¤éŒ¯ä»‹é¢ï¼Œæ”¯æ´é–‹é—œæ§åˆ¶ã€åˆ†é¡ã€æ™‚é–“æˆ³è¨˜ç­‰åŠŸèƒ½
 */
class DebugSystem {
  constructor(options = {}) {
    this.enabled = options.enabled !== false; // é è¨­å•Ÿç”¨
    this.level = options.level || "all"; // all, error, warn, info
    this.prefix = options.prefix || "ğŸ›";
    this.showTimestamp = options.showTimestamp !== false;
    this.showStackTrace = options.showStackTrace || false;
    this.categories = new Set();
    this.filters = new Set();
    this.logs = [];
    this.maxLogs = options.maxLogs || 1000;
  }

  /**
   * åŸºæœ¬ log
   */
  log(message, data = null, category = "general") {
    if (!this.shouldLog("log", category)) return;

    const logData = this.createLogData("log", message, data, category);
    this.output(logData, console.log);
  }

  /**
   * éŒ¯èª¤è¨Šæ¯
   */
  error(message, error = null, category = "general") {
    if (!this.shouldLog("error", category)) return;

    const logData = this.createLogData("error", message, error, category);
    this.output(logData, console.error);

    // å¦‚æœæ˜¯ Error ç‰©ä»¶ï¼Œé¡¯ç¤ºå †ç–Šè¿½è¹¤
    if (error instanceof Error) {
      console.error("Stack:", error.stack);
    }
  }

  /**
   * è­¦å‘Šè¨Šæ¯
   */
  warn(message, data = null, category = "general") {
    if (!this.shouldLog("warn", category)) return;

    const logData = this.createLogData("warn", message, data, category);
    this.output(logData, console.warn);
  }

  /**
   * è³‡è¨Šè¨Šæ¯
   */
  info(message, data = null, category = "general") {
    if (!this.shouldLog("info", category)) return;

    const logData = this.createLogData("info", message, data, category);
    this.output(logData, console.info);
  }

  /**
   * è¡¨æ ¼é¡¯ç¤º
   */
  table(data, category = "general") {
    if (!this.shouldLog("log", category)) return;

    console.log(`${this.prefix} [${category}]`, this.getTimestamp());
    console.table(data);
  }

  /**
   * è¿½è¹¤å †ç–Š
   */
  trace(label = "è¿½è¹¤", category = "general") {
    if (!this.shouldLog("log", category)) return;

    console.log(`${this.prefix} [${category}] ${label}`, this.getTimestamp());
    console.trace();
  }

  /**
   * ç¾¤çµ„é–‹å§‹
   */
  group(label, category = "general") {
    if (!this.shouldLog("log", category)) return;
    console.group(`${this.prefix} [${category}] ${label}`, this.getTimestamp());
  }

  /**
   * ç¾¤çµ„çµæŸ
   */
  groupEnd() {
    console.groupEnd();
  }

  /**
   * è¨ˆæ™‚é–‹å§‹
   */
  time(label, category = "general") {
    if (!this.shouldLog("log", category)) return;
    console.time(`${this.prefix} [${category}] ${label}`);
  }

  /**
   * è¨ˆæ™‚çµæŸ
   */
  timeEnd(label, category = "general") {
    if (!this.shouldLog("log", category)) return;
    console.timeEnd(`${this.prefix} [${category}] ${label}`);
  }

  /**
   * æ–·è¨€
   */
  assert(condition, message, data = null) {
    if (!this.enabled) return;

    if (!condition) {
      this.error(`æ–·è¨€å¤±æ•—: ${message}`, data, "assert");
    }
  }

  /**
   * å»ºç«‹ log è³‡æ–™
   */
  createLogData(level, message, data, category) {
    const logData = {
      level,
      message,
      data,
      category,
      timestamp: Date.now(),
      timestampStr: this.getTimestamp(),
    };

    // å„²å­˜ log
    this.logs.push(logData);
    if (this.logs.length > this.maxLogs) {
      this.logs.shift();
    }

    this.categories.add(category);

    return logData;
  }

  /**
   * è¼¸å‡º log
   */
  output(logData, consoleFn) {
    const parts = [this.prefix];

    if (this.showTimestamp) {
      parts.push(`[${logData.timestampStr}]`);
    }

    parts.push(`[${logData.category}]`);
    parts.push(logData.message);

    if (logData.data !== null) {
      consoleFn(parts.join(" "), logData.data);
    } else {
      consoleFn(parts.join(" "));
    }
  }

  /**
   * åˆ¤æ–·æ˜¯å¦æ‡‰è©² log
   */
  shouldLog(level, category) {
    if (!this.enabled) return false;

    // æª¢æŸ¥ level
    if (this.level !== "all") {
      const levels = ["error", "warn", "info", "log"];
      const currentLevelIndex = levels.indexOf(this.level);
      const logLevelIndex = levels.indexOf(level);
      if (logLevelIndex > currentLevelIndex) return false;
    }

    // æª¢æŸ¥ category filter
    if (this.filters.size > 0 && !this.filters.has(category)) {
      return false;
    }

    return true;
  }

  /**
   * å–å¾—æ™‚é–“æˆ³è¨˜
   */
  getTimestamp() {
    const now = new Date();
    return now.toTimeString().split(" ")[0] + "." + now.getMilliseconds();
  }

  /**
   * è¨­å®š level
   */
  setLevel(level) {
    this.level = level;
  }

  /**
   * å•Ÿç”¨/åœç”¨
   */
  enable() {
    this.enabled = true;
  }

  disable() {
    this.enabled = false;
  }

  toggle() {
    this.enabled = !this.enabled;
  }

  /**
   * è¨­å®š category filter
   */
  filterCategory(...categories) {
    this.filters = new Set(categories);
  }

  clearFilter() {
    this.filters.clear();
  }

  /**
   * å–å¾—æ‰€æœ‰ categories
   */
  getCategories() {
    return Array.from(this.categories);
  }

  /**
   * å–å¾— logs
   */
  getLogs(category = null, level = null) {
    let filtered = this.logs;

    if (category) {
      filtered = filtered.filter((log) => log.category === category);
    }

    if (level) {
      filtered = filtered.filter((log) => log.level === level);
    }

    return filtered;
  }

  /**
   * æ¸…é™¤ logs
   */
  clearLogs() {
    this.logs = [];
  }

  /**
   * åŒ¯å‡º logs
   */
  exportLogs(filename = null) {
    const data = JSON.stringify(this.logs, null, 2);
    const blob = new Blob([data], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename || `debug-logs-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
  }

  /**
   * é¡¯ç¤ºçµ±è¨ˆ
   */
  stats() {
    const stats = {
      total: this.logs.length,
      byLevel: {},
      byCategory: {},
    };

    this.logs.forEach((log) => {
      stats.byLevel[log.level] = (stats.byLevel[log.level] || 0) + 1;
      stats.byCategory[log.category] =
        (stats.byCategory[log.category] || 0) + 1;
    });

    console.log("ğŸ“Š Debug çµ±è¨ˆ:");
    console.table(stats.byLevel);
    console.table(stats.byCategory);
  }
}

// å»ºç«‹å…¨åŸŸå¯¦ä¾‹
const DEBUG = new DebugSystem({
  enabled: true,
  showTimestamp: true,
  prefix: "ğŸ®",
});

// æ–¹ä¾¿çš„å¿«æ·å‡½å¼
window.DEBUG = DEBUG;

// å¿«æ·éµåˆ‡æ›ï¼ˆæŒ‰ Shift+Dï¼‰
document.addEventListener("keydown", (e) => {
  if (e.shiftKey && e.key === "D") {
    DEBUG.toggle();
    console.log(`Debug ${DEBUG.enabled ? "å·²å•Ÿç”¨" : "å·²åœç”¨"}`);
  }
});
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### ä½¿ç”¨ç¯„ä¾‹

```javascript
// åŸºæœ¬ä½¿ç”¨
DEBUG.log("éŠæˆ²åˆå§‹åŒ–");
DEBUG.info("è¼‰å…¥è¨­å®š", config);
DEBUG.warn("è¨˜æ†¶é«”ä½¿ç”¨é‡åé«˜", { usage: memoryUsage });
DEBUG.error("Firebase é€£ç·šå¤±æ•—", error);

// åˆ†é¡ä½¿ç”¨
DEBUG.log("ç©å®¶åŠ å…¥", { playerId, name }, "multiplayer");
DEBUG.log("å¡ç‰‡ç¿»é–‹", { cardId, type }, "gameplay");
DEBUG.log("éŸ³æ•ˆæ’­æ”¾", { soundId }, "audio");

// è¡¨æ ¼é¡¯ç¤º
DEBUG.table(leaderboard, "scores");

// ç¾¤çµ„é¡¯ç¤º
DEBUG.group("å›åˆåˆå§‹åŒ–");
DEBUG.log("é‡ç½®å¡ç‰‡");
DEBUG.log("æ›´æ–°è¨ˆæ™‚å™¨");
DEBUG.log("åˆ‡æ›ç©å®¶");
DEBUG.groupEnd();

// è¨ˆæ™‚
DEBUG.time("è³‡æ–™è¼‰å…¥");
await loadData();
DEBUG.timeEnd("è³‡æ–™è¼‰å…¥");

// æ–·è¨€
DEBUG.assert(players.length === 2, "å¿…é ˆæœ‰2ä½ç©å®¶", { players });

// æ§åˆ¶
DEBUG.disable(); // åœç”¨æ‰€æœ‰ debug
DEBUG.enable(); // å•Ÿç”¨æ‰€æœ‰ debug
DEBUG.setLevel("error"); // åªé¡¯ç¤º error
DEBUG.filterCategory("multiplayer", "gameplay"); // åªé¡¯ç¤ºç‰¹å®šåˆ†é¡

// æŸ¥è©¢èˆ‡åŒ¯å‡º
DEBUG.stats(); // é¡¯ç¤ºçµ±è¨ˆ
DEBUG.exportLogs(); // åŒ¯å‡º log æª”æ¡ˆ
DEBUG.getLogs("gameplay"); // å–å¾—ç‰¹å®šåˆ†é¡çš„ logs
DEBUG.clearLogs(); // æ¸…é™¤æ‰€æœ‰ logs
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### DCCS éŠæˆ²æ•´åˆ

```javascript
// åœ¨ game-logic.js é–‹é ­
const DEBUG = new DebugSystem({
  enabled: true, // é–‹ç™¼æ™‚ trueï¼Œæ­£å¼ç‰ˆæ”¹ false
  prefix: "ğŸ® DCCS",
});

// éŠæˆ²åˆå§‹åŒ–
function initGame() {
  DEBUG.group("éŠæˆ²åˆå§‹åŒ–");
  DEBUG.log("è¼‰å…¥è¨­å®š", gameConfig, "init");
  DEBUG.log("å»ºç«‹å¡ç‰‡çµ„", { totalCards: cardDeck.length }, "init");
  DEBUG.log("è¨­å®šç©å®¶", players, "init");
  DEBUG.groupEnd();
}

// å¡ç‰‡æ“ä½œ
function handleCardClick(cardId) {
  DEBUG.log("å¡ç‰‡é»æ“Š", { cardId, player: currentPlayer }, "gameplay");

  const card = findCard(cardId);
  if (!card) {
    DEBUG.error("æ‰¾ä¸åˆ°å¡ç‰‡", { cardId }, "gameplay");
    return;
  }

  DEBUG.log("å¡ç‰‡è³‡è¨Š", card, "gameplay");
  flipCard(card);
}

// é…å°æª¢æŸ¥
function checkMatch(card1, card2) {
  DEBUG.group("æª¢æŸ¥é…å°");
  DEBUG.table([card1, card2], "gameplay");

  const isMatch = card1.type === card2.type;
  DEBUG.log("é…å°çµæœ", { isMatch }, "gameplay");
  DEBUG.groupEnd();

  return isMatch;
}

// æ•ˆèƒ½ç›£æ§
function gameLoop() {
  DEBUG.time("éŠæˆ²å¾ªç’°");

  updateGameState();
  renderFrame();

  DEBUG.timeEnd("éŠæˆ²å¾ªç’°");

  requestAnimationFrame(gameLoop);
}

// Firebase æ“ä½œ
async function saveScore(playerId, score) {
  DEBUG.log("å„²å­˜åˆ†æ•¸", { playerId, score }, "firebase");

  try {
    await firebase.database().ref(`scores/${playerId}`).set(score);
    DEBUG.log("å„²å­˜æˆåŠŸ", null, "firebase");
  } catch (error) {
    DEBUG.error("å„²å­˜å¤±æ•—", error, "firebase");
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="æ•ˆèƒ½ç›£æ§å·¥å…·"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## æ•ˆèƒ½ç›£æ§å·¥å…·

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. Performance API

```javascript
// æ¸¬é‡é é¢è¼‰å…¥æ™‚é–“
window.addEventListener("load", () => {
  const perfData = performance.timing;
  const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
  const connectTime = perfData.responseEnd - perfData.requestStart;
  const renderTime = perfData.domComplete - perfData.domLoading;

  console.log("ğŸ“Š é é¢æ•ˆèƒ½:");
  console.log("ç¸½è¼‰å…¥æ™‚é–“:", pageLoadTime, "ms");
  console.log("ä¼ºæœå™¨å›æ‡‰æ™‚é–“:", connectTime, "ms");
  console.log("DOM æ¸²æŸ“æ™‚é–“:", renderTime, "ms");
});

// ä½¿ç”¨ Performance Observer
const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    console.log("â±ï¸ æ•ˆèƒ½ç´€éŒ„:", {
      name: entry.name,
      type: entry.entryType,
      startTime: entry.startTime,
      duration: entry.duration,
    });
  }
});

observer.observe({ entryTypes: ["measure", "mark"] });

// æ¨™è¨˜èˆ‡æ¸¬é‡
performance.mark("gameStart");
// ...åŸ·è¡ŒéŠæˆ²é‚è¼¯
performance.mark("gameEnd");
performance.measure("gameDuration", "gameStart", "gameEnd");
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 2. FPS ç›£æ§

```javascript
class FPSMonitor {
  constructor() {
    this.fps = 60;
    this.lastTime = performance.now();
    this.frames = 0;
    this.fpsHistory = [];
    this.maxHistory = 60;
  }

  update() {
    const now = performance.now();
    this.frames++;

    if (now >= this.lastTime + 1000) {
      this.fps = Math.round((this.frames * 1000) / (now - this.lastTime));
      this.frames = 0;
      this.lastTime = now;

      // è¨˜éŒ„æ­·å²
      this.fpsHistory.push(this.fps);
      if (this.fpsHistory.length > this.maxHistory) {
        this.fpsHistory.shift();
      }
    }

    return this.fps;
  }

  getFPS() {
    return this.fps;
  }

  getAverage() {
    if (this.fpsHistory.length === 0) return 60;
    const sum = this.fpsHistory.reduce((a, b) => a + b, 0);
    return Math.round(sum / this.fpsHistory.length);
  }

  getMin() {
    return Math.min(...this.fpsHistory);
  }

  getMax() {
    return Math.max(...this.fpsHistory);
  }
}

// ä½¿ç”¨
const fpsMonitor = new FPSMonitor();

function gameLoop() {
  fpsMonitor.update();

  // é¡¯ç¤º FPS
  if (visualDebug) {
    visualDebug.set("FPS", fpsMonitor.getFPS());
    visualDebug.set("å¹³å‡ FPS", fpsMonitor.getAverage());
  }

  // éŠæˆ²é‚è¼¯...

  requestAnimationFrame(gameLoop);
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 3. è¨˜æ†¶é«”ç›£æ§

```javascript
class MemoryMonitor {
  constructor() {
    this.supported = "memory" in performance;
  }

  getInfo() {
    if (!this.supported) {
      return { supported: false };
    }

    const memory = performance.memory;
    return {
      supported: true,
      used: this.formatBytes(memory.usedJSHeapSize),
      total: this.formatBytes(memory.totalJSHeapSize),
      limit: this.formatBytes(memory.jsHeapSizeLimit),
      usedMB: (memory.usedJSHeapSize / 1048576).toFixed(2),
      totalMB: (memory.totalJSHeapSize / 1048576).toFixed(2),
      percentage: (
        (memory.usedJSHeapSize / memory.jsHeapSizeLimit) *
        100
      ).toFixed(1),
    };
  }

  formatBytes(bytes) {
    if (bytes < 1024) return bytes + " B";
    if (bytes < 1048576) return (bytes / 1024).toFixed(2) + " KB";
    return (bytes / 1048576).toFixed(2) + " MB";
  }

  startMonitoring(interval = 1000) {
    return setInterval(() => {
      const info = this.getInfo();
      if (info.supported) {
        console.log("ğŸ’¾ è¨˜æ†¶é«”ä½¿ç”¨:", info);

        // è­¦å‘Šè¨˜æ†¶é«”ä½¿ç”¨éé«˜
        if (parseFloat(info.percentage) > 90) {
          console.warn("âš ï¸ è¨˜æ†¶é«”ä½¿ç”¨è¶…é 90%ï¼");
        }
      }
    }, interval);
  }
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 4. æ•ˆèƒ½åˆ†æå™¨

```javascript
class PerformanceProfiler {
  constructor() {
    this.profiles = new Map();
  }

  start(name) {
    this.profiles.set(name, {
      startTime: performance.now(),
      calls: 0,
      totalTime: 0,
      minTime: Infinity,
      maxTime: 0,
    });
  }

  end(name) {
    const profile = this.profiles.get(name);
    if (!profile) {
      console.warn(`æ²’æœ‰æ‰¾åˆ° profile: ${name}`);
      return;
    }

    const duration = performance.now() - profile.startTime;
    profile.calls++;
    profile.totalTime += duration;
    profile.minTime = Math.min(profile.minTime, duration);
    profile.maxTime = Math.max(profile.maxTime, duration);
    profile.avgTime = profile.totalTime / profile.calls;

    return duration;
  }

  measure(name, fn) {
    this.start(name);
    const result = fn();
    this.end(name);
    return result;
  }

  async measureAsync(name, fn) {
    this.start(name);
    const result = await fn();
    this.end(name);
    return result;
  }

  getProfile(name) {
    return this.profiles.get(name);
  }

  getAllProfiles() {
    return Array.from(this.profiles.entries()).map(([name, data]) => ({
      name,
      ...data,
    }));
  }

  report() {
    console.log("ğŸ“Š æ•ˆèƒ½åˆ†æå ±å‘Š:");
    console.table(this.getAllProfiles());
  }

  clear() {
    this.profiles.clear();
  }
}

// ä½¿ç”¨ç¯„ä¾‹
const profiler = new PerformanceProfiler();

// åŒæ­¥å‡½å¼
profiler.measure("shuffleCards", () => {
  shuffleArray(cardDeck);
});

// éåŒæ­¥å‡½å¼
await profiler.measureAsync("loadData", async () => {
  return await firebase.database().ref("scores").once("value");
});

// æ‰‹å‹•æ§åˆ¶
profiler.start("complexOperation");
// ...è¤‡é›œæ“ä½œ
profiler.end("complexOperation");

// æŸ¥çœ‹å ±å‘Š
profiler.report();
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="vs-code-æ•´åˆåµéŒ¯"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## VS Code æ•´åˆåµéŒ¯

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. è¨­å®š launch.json

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.vscode/launch.json`:

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "chrome",
      "request": "launch",
      "name": "åœ¨ Chrome ä¸­å•Ÿå‹•éŠæˆ²",
      "url": "http://localhost:5000",
      "webRoot": "${workspaceFolder}",
      "sourceMaps": true,
      "userDataDir": true
    },
    {
      "type": "chrome",
      "request": "attach",
      "name": "é™„åŠ åˆ° Chrome",
      "port": 9222,
      "webRoot": "${workspaceFolder}"
    }
  ]
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 2. ä½¿ç”¨æ–¹å¼

1. åœ¨ VS Code ä¸­è¨­å®šä¸­æ–·é»ï¼ˆé»æ“Šè¡Œè™Ÿå·¦å´ï¼‰
2. æŒ‰ F5 æˆ–é»é¸ã€ŒåŸ·è¡Œå’ŒåµéŒ¯ã€
3. é¸æ“‡ã€Œåœ¨ Chrome ä¸­å•Ÿå‹•éŠæˆ²ã€
4. ç¨‹å¼æœƒåœ¨ä¸­æ–·é»æš«åœï¼Œå¯ä»¥ï¼š
   - æŸ¥çœ‹è®Šæ•¸å€¼
   - é€æ­¥åŸ·è¡Œ
   - åœ¨åµéŒ¯ä¸»æ§å°åŸ·è¡Œç¨‹å¼ç¢¼

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 3. åµéŒ¯ä¸»æ§å°æŠ€å·§

```javascript
// åœ¨åµéŒ¯ä¸»æ§å°ä¸­å¯ä»¥ï¼š

// 1. æŸ¥çœ‹è®Šæ•¸
players;
scores;
gameState;

// 2. åŸ·è¡Œå‡½å¼
flipCard(1);
checkGameState();

// 3. ä¿®æ”¹è®Šæ•¸
playerScore = 100;
currentRound = 5;

// 4. åŸ·è¡Œè¤‡é›œçš„ç¨‹å¼ç¢¼
for (let i = 0; i < players.length; i++) {
  console.log(players[i].name, players[i].score);
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="é€²éšé™¤éŒ¯æŠ€å·§"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## é€²éšé™¤éŒ¯æŠ€å·§

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. Proxy ç›£æ§ç‰©ä»¶è®ŠåŒ–

ç•¶ä½ ä¸çŸ¥é“ç‰©ä»¶ä»€éº¼æ™‚å€™è¢«èª°ä¿®æ”¹æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ Proxy ä¾†è¿½è¹¤ï¼š

```javascript
/**
 * ç›£æ§ç‰©ä»¶è®ŠåŒ–çš„åŒ…è£å‡½å¼
 * @param {Object} obj - è¦ç›£æ§çš„ç‰©ä»¶
 * @param {string} name - ç‰©ä»¶åç¨±ï¼ˆç”¨æ–¼è­˜åˆ¥ï¼‰
 * @returns {Proxy} - è¢«ç›£æ§çš„ç‰©ä»¶
 */
function watchObject(obj, name = "Object") {
  return new Proxy(obj, {
    set(target, property, value) {
      console.group(`ğŸ“ ${name}.${property} è¢«ä¿®æ”¹`);
      console.log("èˆŠå€¼:", target[property]);
      console.log("æ–°å€¼:", value);
      console.trace("ä¿®æ”¹ä¾†æº");
      console.groupEnd();

      target[property] = value;
      return true;
    },
    get(target, property) {
      // å¯é¸ï¼šè¿½è¹¤è®€å–æ“ä½œ
      // console.log(`ğŸ‘€ ${name}.${property} è¢«è®€å–`);
      return target[property];
    },
    deleteProperty(target, property) {
      console.warn(`ğŸ—‘ï¸ ${name}.${property} è¢«åˆªé™¤`);
      console.trace("åˆªé™¤ä¾†æº");
      delete target[property];
      return true;
    },
  });
}

// ä½¿ç”¨ç¯„ä¾‹
let gameState = watchObject(
  {
    score: 0,
    round: 1,
    currentPlayer: "player1",
  },
  "gameState",
);

gameState.score = 10; // è‡ªå‹•è¼¸å‡ºä¿®æ”¹è¨˜éŒ„
gameState.round++; // è‡ªå‹•è¿½è¹¤
```

#### DCCS éŠæˆ²æ‡‰ç”¨

```javascript
// ç›£æ§éŠæˆ²é—œéµç‹€æ…‹
let scores = watchObject({ player1: 0, player2: 0 }, "scores");
let gameConfig = watchObject(config, "gameConfig");

// é€™æ¨£ç•¶åˆ†æ•¸æ„å¤–è®ŠåŒ–æ™‚ï¼Œå¯ä»¥ç«‹å³çŸ¥é“æ˜¯å“ªæ®µç¨‹å¼ç¢¼ä¿®æ”¹çš„
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 2. æ—¥èªŒç­‰ç´šç³»çµ±

å»ºç«‹å¯æ§åˆ¶çš„æ—¥èªŒç³»çµ±ï¼Œæ­£å¼ç’°å¢ƒå¯ä»¥è¼•é¬†é—œé–‰æˆ–åªé¡¯ç¤ºéŒ¯èª¤ï¼š

```javascript
/**
 * æ—¥èªŒç­‰ç´šç³»çµ±
 * æ ¹æ“šè¨­å®šçš„ç­‰ç´šéæ¿¾æ—¥èªŒè¼¸å‡º
 */
const Logger = {
  // ç­‰ç´šè¨­å®šï¼š'debug' | 'info' | 'warn' | 'error' | 'off'
  level: "debug",

  // ç­‰ç´šå„ªå…ˆé †åº
  levels: {
    debug: 0,
    info: 1,
    warn: 2,
    error: 3,
    off: 4,
  },

  // æ¨£å¼è¨­å®š
  styles: {
    debug: "color: #9E9E9E",
    info: "color: #2196F3",
    warn: "color: #FF9800; font-weight: bold",
    error: "color: #f44336; font-weight: bold",
  },

  // åˆ¤æ–·æ˜¯å¦æ‡‰è©²è¼¸å‡º
  shouldLog(level) {
    return this.levels[level] >= this.levels[this.level];
  },

  debug(...args) {
    if (this.shouldLog("debug")) {
      console.log("%cğŸ” [DEBUG]", this.styles.debug, ...args);
    }
  },

  info(...args) {
    if (this.shouldLog("info")) {
      console.info("%câ„¹ï¸ [INFO]", this.styles.info, ...args);
    }
  },

  warn(...args) {
    if (this.shouldLog("warn")) {
      console.warn("%câš ï¸ [WARN]", this.styles.warn, ...args);
    }
  },

  error(...args) {
    if (this.shouldLog("error")) {
      console.error("%câŒ [ERROR]", this.styles.error, ...args);
    }
  },

  // è¨­å®šç­‰ç´š
  setLevel(level) {
    if (this.levels.hasOwnProperty(level)) {
      this.level = level;
      console.log(`Logger ç­‰ç´šè¨­å®šç‚º: ${level}`);
    }
  },
};

// é–‹ç™¼æ™‚ï¼šé¡¯ç¤ºæ‰€æœ‰
Logger.level = "debug";

// æ¸¬è©¦æ™‚ï¼šåªé¡¯ç¤ºè­¦å‘Šå’ŒéŒ¯èª¤
Logger.level = "warn";

// æ­£å¼ç’°å¢ƒï¼šåªé¡¯ç¤ºéŒ¯èª¤
Logger.level = "error";

// å®Œå…¨é—œé–‰
Logger.level = "off";
```

#### ä½¿ç”¨ç¯„ä¾‹

```javascript
Logger.debug("è¼‰å…¥éŠæˆ²è¨­å®š", config);
Logger.info("ç©å®¶åŠ å…¥éŠæˆ²", { playerId, name });
Logger.warn("è¨˜æ†¶é«”ä½¿ç”¨é‡åé«˜", { usage: memoryUsage });
Logger.error("Firebase é€£ç·šå¤±æ•—", error);
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 3. URL åƒæ•¸æ§åˆ¶é™¤éŒ¯æ¨¡å¼

é€é URL åƒæ•¸è¼•é¬†é–‹å•Ÿé™¤éŒ¯æ¨¡å¼ï¼Œç„¡éœ€ä¿®æ”¹ç¨‹å¼ç¢¼ï¼š

```javascript
/**
 * URL é™¤éŒ¯æ§åˆ¶
 * ä½¿ç”¨æ–¹å¼ï¼šhttps://yoursite.com?debug=true&level=info
 */
const DebugConfig = {
  init() {
    const params = new URLSearchParams(window.location.search);

    // æª¢æŸ¥é™¤éŒ¯æ¨¡å¼
    this.enabled = params.get("debug") === "true";

    // è¨­å®šæ—¥èªŒç­‰ç´š
    this.logLevel = params.get("level") || "debug";

    // é¡¯ç¤º Visual Debug é¢æ¿
    this.showPanel = params.get("panel") === "true";

    // é¡¯ç¤º FPS
    this.showFPS = params.get("fps") === "true";

    // é¡¯ç¤ºè©³ç´°éŒ¯èª¤
    this.verbose = params.get("verbose") === "true";

    if (this.enabled) {
      console.log(
        "%cğŸ› é™¤éŒ¯æ¨¡å¼å·²å•Ÿç”¨",
        "color: #4CAF50; font-size: 16px; font-weight: bold",
      );
      console.table({
        æ—¥èªŒç­‰ç´š: this.logLevel,
        é¡¯ç¤ºé¢æ¿: this.showPanel,
        "é¡¯ç¤º FPS": this.showFPS,
        è©³ç´°æ¨¡å¼: this.verbose,
      });
    }

    return this;
  },

  isEnabled() {
    return this.enabled;
  },
};

// åˆå§‹åŒ–
DebugConfig.init();

// ä½¿ç”¨
if (DebugConfig.isEnabled()) {
  visualDebug.init();
  Logger.setLevel(DebugConfig.logLevel);
}

if (DebugConfig.showFPS) {
  fpsMonitor.start();
}
```

#### å¸¸ç”¨ URL åƒæ•¸çµ„åˆ

```
# é–‹å•Ÿé™¤éŒ¯æ¨¡å¼
https://yoursite.com?debug=true

# é–‹å•Ÿé™¤éŒ¯ + åªé¡¯ç¤ºéŒ¯èª¤
https://yoursite.com?debug=true&level=error

# é–‹å•Ÿæ‰€æœ‰é™¤éŒ¯åŠŸèƒ½
https://yoursite.com?debug=true&level=debug&panel=true&fps=true&verbose=true

# æ­£å¼ç‰ˆå¿«é€Ÿé™¤éŒ¯
https://yoursite.com?debug=true&verbose=true
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 4. ç¶²è·¯è«‹æ±‚é™¤éŒ¯åŒ…è£å™¨

è‡ªå‹•è¨˜éŒ„æ‰€æœ‰ç¶²è·¯è«‹æ±‚ï¼Œæ–¹ä¾¿è¿½è¹¤ API å•é¡Œï¼š

```javascript
/**
 * Fetch è«‹æ±‚é™¤éŒ¯åŒ…è£å™¨
 * è‡ªå‹•è¨˜éŒ„æ‰€æœ‰è«‹æ±‚çš„ç‹€æ…‹ã€æ™‚é–“å’ŒéŒ¯èª¤
 */
class FetchDebugger {
  constructor() {
    this.requests = [];
    this.enabled = true;
  }

  // å•Ÿç”¨æ””æˆª
  enable() {
    const originalFetch = window.fetch;
    const self = this;

    window.fetch = async function (...args) {
      const url = args[0];
      const options = args[1] || {};
      const startTime = performance.now();
      const requestId = Date.now();

      if (self.enabled) {
        console.group(`ğŸŒ Fetch: ${url}`);
        console.log("æ–¹æ³•:", options.method || "GET");
        if (options.body) {
          console.log("è«‹æ±‚å…§å®¹:", options.body);
        }
      }

      try {
        const response = await originalFetch.apply(this, args);
        const duration = performance.now() - startTime;

        const requestLog = {
          id: requestId,
          url,
          method: options.method || "GET",
          status: response.status,
          duration: Math.round(duration),
          timestamp: new Date().toISOString(),
        };

        self.requests.push(requestLog);

        if (self.enabled) {
          if (response.ok) {
            console.log(
              `âœ… ç‹€æ…‹: ${response.status} (${duration.toFixed(0)}ms)`,
            );
          } else {
            console.warn(
              `âš ï¸ ç‹€æ…‹: ${response.status} (${duration.toFixed(0)}ms)`,
            );
          }
          console.groupEnd();
        }

        return response;
      } catch (error) {
        const duration = performance.now() - startTime;

        if (self.enabled) {
          console.error(
            `âŒ è«‹æ±‚å¤±æ•—: ${error.message} (${duration.toFixed(0)}ms)`,
          );
          console.groupEnd();
        }

        throw error;
      }
    };
  }

  // å–å¾—è«‹æ±‚è¨˜éŒ„
  getRequests() {
    return this.requests;
  }

  // é¡¯ç¤ºè«‹æ±‚çµ±è¨ˆ
  showStats() {
    console.table(this.requests);

    const avgDuration =
      this.requests.reduce((sum, r) => sum + r.duration, 0) /
      this.requests.length;
    const failedRequests = this.requests.filter((r) => r.status >= 400);

    console.log("ğŸ“Š è«‹æ±‚çµ±è¨ˆ:", {
      ç¸½è«‹æ±‚æ•¸: this.requests.length,
      å¹³å‡æ™‚é–“: Math.round(avgDuration) + "ms",
      å¤±æ•—è«‹æ±‚: failedRequests.length,
    });
  }
}

// åˆå§‹åŒ–
const fetchDebugger = new FetchDebugger();
fetchDebugger.enable();
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 5. å¿«é€Ÿæª¢æŸ¥ DOM å…ƒç´ å­˜åœ¨

åœ¨éŠæˆ²åˆå§‹åŒ–æ™‚å¿«é€Ÿé©—è­‰æ‰€æœ‰å¿…è¦çš„ DOM å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼š

```javascript
/**
 * DOM å…ƒç´ æª¢æŸ¥å·¥å…·
 */
const DOMChecker = {
  /**
   * æª¢æŸ¥å¤šå€‹å¿…è¦å…ƒç´ æ˜¯å¦å­˜åœ¨
   * @param {...string} selectors - CSS é¸æ“‡å™¨
   * @returns {boolean} - æ˜¯å¦å…¨éƒ¨å­˜åœ¨
   */
  checkRequired(...selectors) {
    const missing = [];
    const found = [];

    selectors.forEach((selector) => {
      const element = document.querySelector(selector);
      if (element) {
        found.push({ selector, element: element.tagName });
      } else {
        missing.push(selector);
      }
    });

    if (missing.length > 0) {
      console.error("âŒ æ‰¾ä¸åˆ°ä»¥ä¸‹å¿…è¦å…ƒç´ :", missing);
      console.table(missing.map((s) => ({ selector: s, status: "âŒ ç¼ºå¤±" })));
      return false;
    }

    console.log("âœ… æ‰€æœ‰å¿…è¦å…ƒç´ å·²å°±ç·’");
    console.table(found);
    return true;
  },

  /**
   * è©³ç´°æª¢æŸ¥å…ƒç´ 
   */
  inspect(selector) {
    const element = document.querySelector(selector);
    if (!element) {
      console.error(`âŒ æ‰¾ä¸åˆ°: ${selector}`);
      return null;
    }

    console.log(`ğŸ” å…ƒç´ æª¢æŸ¥: ${selector}`, {
      tagName: element.tagName,
      id: element.id,
      classes: [...element.classList],
      visible: element.offsetParent !== null,
      dimensions: {
        width: element.offsetWidth,
        height: element.offsetHeight,
      },
      styles: {
        display: getComputedStyle(element).display,
        visibility: getComputedStyle(element).visibility,
        opacity: getComputedStyle(element).opacity,
      },
    });

    return element;
  },
};

// ä½¿ç”¨ç¯„ä¾‹ - DCCS éŠæˆ²åˆå§‹åŒ–æ™‚
function initGame() {
  const elementsOK = DOMChecker.checkRequired(
    "#game-board",
    ".player-score",
    "#timer",
    "#start-button",
    ".card-container",
  );

  if (!elementsOK) {
    showError("éŠæˆ²å…ƒç´ è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢");
    return false;
  }

  // ç¹¼çºŒåˆå§‹åŒ–...
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 6. MutationObserver â€” ç¨‹å¼ç¢¼ç‰ˆ DOM ç›£æ§ ğŸ†•

æ¯” Chrome çš„ DOM æ–·é»æ›´å¼·å¤§ï¼Œå› ç‚ºå¯ä»¥**ç”¨ç¨‹å¼ç¢¼æ§åˆ¶ã€åŠ æ¢ä»¶ã€è¨˜éŒ„æ­·å²**ï¼Œä¸éœ€è¦æ‰‹å‹•åœ¨ DevTools è¨­å®šï¼š

```javascript
/**
 * ç›£æ§ DOM å…ƒç´ çš„è®ŠåŒ–
 * ç•¶å…ƒç´ è¢«æ„å¤–ä¿®æ”¹æ™‚ï¼Œè‡ªå‹•è¨˜éŒ„ä¿®æ”¹ä¾†æº
 */

// ç¯„ä¾‹ï¼šç›£æ§åˆ†æ•¸é¡¯ç¤ºæ˜¯å¦è¢«æ„å¤–ä¿®æ”¹
const scoreElement = document.querySelector(".player-score");

const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    console.warn("ğŸ” DOM è¢«ä¿®æ”¹ï¼", {
      ç›®æ¨™å…ƒç´ : mutation.target,
      ä¿®æ”¹é¡å‹: mutation.type,
      èˆŠå€¼: mutation.oldValue,
      æ–°å€¼: mutation.target.textContent,
    });
    console.trace("ä¿®æ”¹ä¾†æº"); // é¡¯ç¤ºæ˜¯ã€Œèª°ã€æ”¹çš„
  });
});

observer.observe(scoreElement, {
  childList: true, // å­å…ƒç´ è®ŠåŒ–
  characterData: true, // æ–‡å­—å…§å®¹è®ŠåŒ–
  attributes: true, // å±¬æ€§è®ŠåŒ–ï¼ˆå¦‚ classã€styleï¼‰
  attributeOldValue: true, // è¨˜éŒ„å±¬æ€§èˆŠå€¼
  characterDataOldValue: true, // è¨˜éŒ„æ–‡å­—èˆŠå€¼
  subtree: true, // ç›£æ§æ‰€æœ‰å¾Œä»£å…ƒç´ 
});

// ä¸éœ€è¦ç›£æ§æ™‚åœæ­¢
// observer.disconnect();
```

#### DCCS éŠæˆ²æ‡‰ç”¨

```javascript
// ç›£æ§éŠæˆ²é¢æ¿çš„æ„å¤–è®ŠåŒ–
function debugWatchGameBoard() {
  const gameBoard = document.getElementById("game-board");
  if (!gameBoard) return;

  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === "childList") {
        console.warn("ğŸ® éŠæˆ²é¢æ¿å­å…ƒç´ è®ŠåŒ–", {
          æ–°å¢: mutation.addedNodes.length,
          ç§»é™¤: mutation.removedNodes.length,
        });
      }
      if (mutation.type === "attributes") {
        console.warn(`ğŸ® å±¬æ€§ ${mutation.attributeName} è®ŠåŒ–`, {
          èˆŠå€¼: mutation.oldValue,
          æ–°å€¼: mutation.target.getAttribute(mutation.attributeName),
        });
      }
    });
  });

  observer.observe(gameBoard, {
    childList: true,
    attributes: true,
    attributeOldValue: true,
    subtree: true,
  });

  return observer; // å›å‚³ä»¥ä¾¿ä¹‹å¾Œ disconnect
}
```

**MutationObserver vs DOM æ–·é»æ¯”è¼ƒï¼š**

| ç‰¹æ€§         | MutationObserver  | Chrome DOM æ–·é»   |
| ------------ | ----------------- | ----------------- |
| éœ€è¦å¯«ç¨‹å¼ç¢¼ | âœ… æ˜¯             | âŒ ä¸ç”¨           |
| å¯åŠ è‡ªè¨‚æ¢ä»¶ | âœ… éå¸¸éˆæ´»       | âŒ åªèƒ½é¸ä¸‰ç¨®é¡å‹ |
| è¨˜éŒ„æ­·å²     | âœ… å¯è‡ªè¡Œå„²å­˜     | âŒ åªèƒ½æš«åœç•¶æ¬¡   |
| æ­£å¼ç‰ˆå¯ç”¨   | âœ… å¯ç”¨æ–¼éŒ¯èª¤ç›£æ§ | âŒ åƒ…é™ DevTools  |
| æœƒæš«åœç¨‹å¼   | âŒ ä¸æœƒ           | âœ… æœƒæš«åœ         |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 7. Async/Await é™¤éŒ¯æŠ€å·§ ğŸ†•

åœ¨ä½¿ç”¨ Firebaseï¼ˆéåŒæ­¥æ“ä½œï¼‰æ™‚ç‰¹åˆ¥é‡è¦ã€‚å¤§å¤šæ•¸ã€Œå€¼æ˜¯ undefinedã€çš„å•é¡Œéƒ½å‡ºåœ¨éåŒæ­¥è™•ç†ï¼š

#### å¸¸è¦‹é™·é˜±ï¼šå¿˜è¨˜ `await`

```javascript
// âŒ å¸¸è¦‹éŒ¯èª¤ï¼šå¿˜è¨˜ awaitï¼Œçµæœæ˜¯ Promise ç‰©ä»¶è€Œéå¯¦éš›è³‡æ–™
async function getScore() {
  const snapshot = firebase.database().ref("scores").once("value"); // å°‘äº† await!
  console.log(snapshot); // â†’ Promise {<pending>}  ä¸æ˜¯å¯¦éš›è³‡æ–™ï¼
  return snapshot; // å›å‚³çš„æ˜¯ Promiseï¼Œä¸æ˜¯å€¼
}

// âœ… æ­£ç¢ºå¯«æ³•
async function getScore() {
  const snapshot = await firebase.database().ref("scores").once("value");
  console.log(snapshot.val()); // â†’ { player1: 95, player2: 87 }
  return snapshot.val();
}
```

#### å¿«é€Ÿè¨ºæ–·æŠ€å·§

```javascript
// ğŸ’¡ åœ¨ Console çœ‹åˆ°ä»¥ä¸‹å…§å®¹ï¼Œå¹¾ä¹ 100% æ˜¯æ¼äº† awaitï¼š
// Promise {<pending>}
// [object Promise]
// undefinedï¼ˆå› ç‚º Promise é‚„æ²’ resolveï¼‰

// é™¤éŒ¯æ–¹æ³•ï¼šåœ¨å¯ç–‘çš„è®Šæ•¸å¾Œé¢åŠ é€™è¡Œ
console.log("å‹åˆ¥:", typeof result, "å€¼:", result);
// å¦‚æœé¡¯ç¤º "å‹åˆ¥: object å€¼: Promise {<pending>}" â†’ å°±æ˜¯å¿˜äº† await
```

#### éåŒæ­¥éŒ¯èª¤çš„æ­£ç¢ºæ•æ‰

```javascript
// âŒ try-catch ç„¡æ³•æ•æ‰æ²’æœ‰ await çš„ Promise éŒ¯èª¤
try {
  firebase.database().ref("scores").set({ score: 100 }); // æ²’æœ‰ await
  console.log("å„²å­˜æˆåŠŸ"); // é€™æœƒç«‹å³åŸ·è¡Œï¼Œä¸ç­‰ Firebase
} catch (error) {
  console.error(error); // æ°¸é ä¸æœƒè¢«è§¸ç™¼ï¼
}

// âœ… æ­£ç¢ºï¼šä¸€å®šè¦ await
try {
  await firebase.database().ref("scores").set({ score: 100 });
  console.log("å„²å­˜æˆåŠŸ"); // ç¢ºå¯¦ç­‰åˆ° Firebase å®Œæˆå¾Œæ‰åŸ·è¡Œ
} catch (error) {
  console.error("å„²å­˜å¤±æ•—:", error); // å¯ä»¥æ­£ç¢ºæ•æ‰éŒ¯èª¤
}
```

#### å¤šå€‹éåŒæ­¥æ“ä½œçš„é™¤éŒ¯

```javascript
// è¿½è¹¤å¤šå€‹éåŒæ­¥æ“ä½œ
async function initGame() {
  console.time("â±ï¸ ç¸½åˆå§‹åŒ–æ™‚é–“");

  console.time("â±ï¸ 1.è¼‰å…¥è¨­å®š");
  const config = await loadConfig();
  console.timeEnd("â±ï¸ 1.è¼‰å…¥è¨­å®š");

  console.time("â±ï¸ 2.Firebase é€£ç·š");
  await connectFirebase();
  console.timeEnd("â±ï¸ 2.Firebase é€£ç·š");

  console.time("â±ï¸ 3.è¼‰å…¥è³‡æº");
  await loadAssets();
  console.timeEnd("â±ï¸ 3.è¼‰å…¥è³‡æº");

  console.timeEnd("â±ï¸ ç¸½åˆå§‹åŒ–æ™‚é–“");
  // è¼¸å‡ºï¼š
  // â±ï¸ 1.è¼‰å…¥è¨­å®š: 45ms
  // â±ï¸ 2.Firebase é€£ç·š: 234ms  â† åŸä¾†æ˜¯é€™è£¡æœ€æ…¢ï¼
  // â±ï¸ 3.è¼‰å…¥è³‡æº: 89ms
  // â±ï¸ ç¸½åˆå§‹åŒ–æ™‚é–“: 368ms
}
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- Firebase æ“ä½œçµæœæ˜¯ `undefined`
- ç¨‹å¼ç¢¼ã€Œè·³éã€äº†æŸæ®µé‚è¼¯
- éŒ¯èª¤æ²’æœ‰è¢« `try-catch` æ•æ‰åˆ°
- Console çœ‹åˆ° `Promise {<pending>}`

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 8. JSON å¾ªç’°åƒè€ƒè™•ç† ğŸ†•

åœ¨ `console.log` æˆ– `JSON.stringify` è¤‡é›œç‰©ä»¶æ™‚ï¼Œæœ‰æ™‚æœƒé‡åˆ° `"Converting circular structure to JSON"` éŒ¯èª¤ï¼š

```javascript
// âŒ æœƒå‡ºéŒ¯çš„æƒ…æ³
const player = { name: "ç©å®¶A" };
const game = { player: player };
player.currentGame = game; // å¾ªç’°åƒè€ƒï¼player â†’ game â†’ player â†’ ...

JSON.stringify(player); // âŒ TypeError: Converting circular structure to JSON
```

#### è§£æ±ºæ–¹æ¡ˆï¼šå®‰å…¨çš„ JSON åºåˆ—åŒ–

```javascript
/**
 * å®‰å…¨çš„ JSON åºåˆ—åŒ–ï¼Œè‡ªå‹•è™•ç†å¾ªç’°åƒè€ƒ
 * @param {*} obj - è¦åºåˆ—åŒ–çš„ç‰©ä»¶
 * @param {number} indent - ç¸®æ’ç©ºæ ¼æ•¸
 * @returns {string} JSON å­—ä¸²
 */
function safeStringify(obj, indent = 2) {
  const seen = new WeakSet();
  return JSON.stringify(
    obj,
    (key, value) => {
      if (typeof value === "object" && value !== null) {
        if (seen.has(value)) return "[å¾ªç’°åƒè€ƒ]";
        seen.add(value);
      }
      return value;
    },
    indent,
  );
}

// ä½¿ç”¨
console.log(safeStringify(player));
// è¼¸å‡ºï¼š
// {
//   "name": "ç©å®¶A",
//   "currentGame": {
//     "player": "[å¾ªç’°åƒè€ƒ]"
//   }
// }
```

#### åœ¨é™¤éŒ¯ç³»çµ±ä¸­æ•´åˆ

```javascript
// åœ¨è‡ªè¨‚ DEBUG ç³»çµ±ä¸­ä½¿ç”¨
DEBUG.safeLog = function (label, obj) {
  try {
    console.log(label, JSON.parse(safeStringify(obj)));
  } catch (e) {
    console.log(label, obj); // é€€å›åˆ°ä¸€èˆ¬ log
  }
};

// ä½¿ç”¨
DEBUG.safeLog("éŠæˆ²ç‹€æ…‹:", complexGameState);
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- ç‰©ä»¶æœ‰äº’ç›¸åƒè€ƒçš„é—œä¿‚
- åŒ¯å‡ºæˆ–å‚³é€é™¤éŒ¯è³‡æ–™åˆ°å¾Œç«¯æ™‚
- ä½¿ç”¨ `localStorage` å„²å­˜è¤‡é›œç‰©ä»¶æ™‚

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="chrome-devtools-é€²éšæ–·é»"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## Chrome DevTools é€²éšæ–·é»

é™¤äº† `debugger` èªå¥ï¼ŒChrome DevTools æä¾›å¤šç¨®é€²éšæ–·é»åŠŸèƒ½ï¼š

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ–·é»é¡å‹ä¸€è¦½

| æ–·é»é¡å‹           | å¦‚ä½•è¨­å®š                              | æœ€ä½³ç”¨é€”           |
| ------------------ | ------------------------------------- | ------------------ |
| **è¡Œæ–·é»**         | é»æ“Š Sources é¢æ¿çš„è¡Œè™Ÿ               | åœåœ¨ç‰¹å®šç¨‹å¼ç¢¼è¡Œ   |
| **æ¢ä»¶æ–·é»**       | å³éµè¡Œè™Ÿ â†’ Add conditional breakpoint | åªåœ¨ç‰¹å®šæ¢ä»¶æš«åœ   |
| **Logpoint**       | å³éµè¡Œè™Ÿ â†’ Add logpoint               | ä¸æš«åœï¼Œåªè¼¸å‡º log |
| **DOM è®ŠåŒ–æ–·é»**   | å³éµå…ƒç´  â†’ Break on                   | è¿½è¹¤ DOM è¢«èª°ä¿®æ”¹  |
| **XHR/Fetch æ–·é»** | Sources â†’ XHR/fetch Breakpoints       | ç›£æ§ç‰¹å®š API è«‹æ±‚  |
| **äº‹ä»¶æ–·é»**       | Sources â†’ Event Listener Breakpoints  | ç›£æ§ç‰¹å®šäº‹ä»¶è§¸ç™¼   |
| **ç•°å¸¸æ–·é»**       | Sources â†’ â¸ æŒ‰éˆ•                      | åœ¨éŒ¯èª¤ç™¼ç”Ÿæ™‚æš«åœ   |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. æ¢ä»¶æ–·é»

åªåœ¨ç‰¹å®šæ¢ä»¶æ™‚æ‰æš«åœï¼š

```javascript
// å³éµè¡Œè™Ÿ â†’ Add conditional breakpoint
// è¼¸å…¥æ¢ä»¶ï¼šscore > 100
function updateScore(score) {
  playerScore = score; // <- è¨­å®šæ¢ä»¶æ–·é»ï¼šscore > 100
  updateDisplay();
}

// å…¶ä»–å¸¸ç”¨æ¢ä»¶
// playerId === 'player1'
// cardType === 'star'
// currentRound >= 5
// error !== null
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 2. Logpointï¼ˆä¸æš«åœçš„æ–·é»ï¼‰

åœ¨ä¸ä¿®æ”¹ç¨‹å¼ç¢¼çš„æƒ…æ³ä¸‹åŠ å…¥ logï¼š

```javascript
// å³éµè¡Œè™Ÿ â†’ Add logpoint
// è¼¸å…¥ï¼š'Score updated:', score, 'Player:', playerId

function updateScore(score, playerId) {
  // <- è¨­å®š logpointï¼Œæœƒè¼¸å‡ºä½†ä¸æš«åœ
  scores[playerId] = score;
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 3. DOM è®ŠåŒ–æ–·é»

è¿½è¹¤ DOM å…ƒç´ è¢«èª°ä¿®æ”¹ï¼š

```
æ­¥é©Ÿï¼š
1. åœ¨ Elements é¢æ¿æ‰¾åˆ°ç›®æ¨™å…ƒç´ 
2. å³éµ â†’ Break on
3. é¸æ“‡ï¼š
   - subtree modifications: å­å…ƒç´ è®ŠåŒ–æ™‚æš«åœ
   - attribute modifications: å±¬æ€§è®ŠåŒ–æ™‚æš«åœ
   - node removal: å…ƒç´ è¢«ç§»é™¤æ™‚æš«åœ
```

#### é©ç”¨å ´æ™¯

- å¡ç‰‡å…§å®¹æ„å¤–è¢«æ¸…ç©º
- åˆ†æ•¸é¡¯ç¤ºæ„å¤–è®ŠåŒ–
- æŒ‰éˆ•è«åè¢«ç¦ç”¨
- æ¨£å¼è¢«æ„å¤–è¦†è“‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 4. XHR/Fetch æ–·é»

ç›£æ§ç‰¹å®šçš„ç¶²è·¯è«‹æ±‚ï¼š

```
æ­¥é©Ÿï¼š
1. æ‰“é–‹ Sources é¢æ¿
2. æ‰¾åˆ° XHR/fetch Breakpoints
3. é»æ“Š + è™Ÿ
4. è¼¸å…¥ URL é—œéµå­—ï¼ˆå¦‚ 'scores' æˆ– 'firebase'ï¼‰
5. ç•¶è«‹æ±‚è©² URL æ™‚æœƒæš«åœ
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 5. äº‹ä»¶æ–·é»

åœ¨ç‰¹å®šäº‹ä»¶è§¸ç™¼æ™‚æš«åœï¼š

```
æ­¥é©Ÿï¼š
1. æ‰“é–‹ Sources é¢æ¿
2. å±•é–‹ Event Listener Breakpoints
3. å‹¾é¸è¦ç›£æ§çš„äº‹ä»¶ï¼š
   - Mouse â†’ click
   - Keyboard â†’ keydown
   - Touch â†’ touchstart
   - Animation â†’ animationstart
```

#### é©ç”¨å ´æ™¯

- æ‰¾å‡ºæ˜¯å“ªå€‹å…ƒç´ æ””æˆªäº†é»æ“Šäº‹ä»¶
- è¿½è¹¤éµç›¤äº‹ä»¶çš„è™•ç†æµç¨‹
- åµæ¸¬å‹•ç•«è§¸ç™¼æ™‚æ©Ÿ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 6. Console é¢æ¿å¯†æŠ€æŒ‡ä»¤ ğŸ†•

é€™äº›æ˜¯ Chrome Console ä¸­çš„**å…§å»ºæŒ‡ä»¤**ï¼Œåªèƒ½åœ¨ Console é¢æ¿ç›´æ¥è¼¸å…¥ï¼Œä¸èƒ½å¯«åœ¨ç¨‹å¼ç¢¼ä¸­ï¼š

#### å¸¸ç”¨å¯†æŠ€ä¸€è¦½

| æŒ‡ä»¤                        | åŠŸèƒ½                               | ä½¿ç”¨æƒ…å¢ƒ             |
| --------------------------- | ---------------------------------- | -------------------- |
| `$0`                        | å–å¾— Elements é¢æ¿ä¸­ç›®å‰é¸å–çš„å…ƒç´  | å¿«é€Ÿæ“ä½œé¸å–çš„ DOM   |
| `$_`                        | å–å¾—ä¸Šä¸€å€‹ Console åŸ·è¡Œçµæœ        | ä¸²æ¥æ“ä½œ             |
| `$$('selector')`            | ç­‰åŒ `document.querySelectorAll`   | å¿«é€ŸæŸ¥è©¢å¤šå€‹å…ƒç´      |
| `$x('xpath')`               | ç”¨ XPath æŸ¥è©¢å…ƒç´                   | è¤‡é›œçš„å…ƒç´ å®šä½       |
| `copy(object)`              | æŠŠç‰©ä»¶è¤‡è£½åˆ°å‰ªè²¼ç°¿                 | åŒ¯å‡ºè³‡æ–™åˆ°æ–‡å­—ç·¨è¼¯å™¨ |
| `monitor(fn)`               | ç›£æ§å‡½å¼è¢«å‘¼å«                     | è¿½è¹¤å‡½å¼è§¸ç™¼         |
| `unmonitor(fn)`             | åœæ­¢ç›£æ§å‡½å¼                       | çµæŸè¿½è¹¤             |
| `monitorEvents(el)`         | ç›£æ§å…ƒç´ ä¸Šçš„æ‰€æœ‰äº‹ä»¶               | æ‰¾å‡ºäº‹ä»¶å•é¡Œ         |
| `unmonitorEvents(el)`       | åœæ­¢ç›£æ§äº‹ä»¶                       | çµæŸäº‹ä»¶è¿½è¹¤         |
| `getEventListeners(el)`     | åˆ—å‡ºå…ƒç´ ä¸Šæ‰€æœ‰äº‹ä»¶ç›£è½å™¨           | æ‰¾äº‹ä»¶è¡çª           |
| `keys(obj)` / `values(obj)` | åˆ—å‡ºç‰©ä»¶çš„éµ/å€¼                    | å¿«é€Ÿæª¢è¦–ç‰©ä»¶çµæ§‹     |
| `clear()`                   | æ¸…é™¤ Console                       | æ¸…ç†ç•«é¢             |

#### å¯¦éš›ä½¿ç”¨ç¯„ä¾‹

```javascript
// --- ä»¥ä¸‹éƒ½æ˜¯åœ¨ Chrome Console é¢æ¿ä¸­ç›´æ¥è¼¸å…¥ ---

// 1. $0ï¼šæ“ä½œ Elements é¢æ¿é¸å–çš„å…ƒç´ 
//    å…ˆåœ¨ Elements é¢æ¿é»é¸ä¸€å€‹å…ƒç´ ï¼Œç„¶å¾Œåˆ° Console è¼¸å…¥ï¼š
$0.style.border = "3px solid red"; // å¹«é¸å–çš„å…ƒç´ åŠ ç´…æ¡†
$0.textContent; // æŸ¥çœ‹æ–‡å­—å…§å®¹
$0.click(); // æ¨¡æ“¬é»æ“Š

// 2. $_ï¼šä½¿ç”¨ä¸Šä¸€å€‹çµæœ
2 + 3; // â†’ 5
$_ * 10; // â†’ 50ï¼ˆä½¿ç”¨ä¸Šä¸€å€‹çµæœ 5ï¼‰

// 3. $$ï¼šå¿«é€ŸæŸ¥å…ƒç´ 
$$(".card"); // å–å¾—æ‰€æœ‰å¡ç‰‡å…ƒç´ 
$$(".card").length; // æŸ¥çœ‹æœ‰å¹¾å¼µå¡ç‰‡
$$(".card.flipped").length; // æŸ¥çœ‹å·²ç¿»é–‹å¹¾å¼µ

// 4. copyï¼šè¤‡è£½åˆ°å‰ªè²¼ç°¿
copy(GameLogic.state); // æŠŠéŠæˆ²ç‹€æ…‹è¤‡è£½å‡ºä¾†
copy($$(".card").map((c) => c.id)); // è¤‡è£½æ‰€æœ‰å¡ç‰‡ ID

// 5. monitorï¼šç›£æ§å‡½å¼å‘¼å«
monitor(GameLogic.handleResponse); // ç›£æ§å›æ‡‰è™•ç†å‡½å¼
// æ¯æ¬¡è¢«å‘¼å«æ™‚æœƒè‡ªå‹•è¼¸å‡ºï¼š
// â†’ function handleResponse called with arguments: [...]

unmonitor(GameLogic.handleResponse); // åœæ­¢ç›£æ§

// 6. monitorEventsï¼šç›£æ§å…ƒç´ äº‹ä»¶
monitorEvents(document.getElementById("start-button"), "click");
// é»æ“ŠæŒ‰éˆ•æ™‚æœƒè‡ªå‹•è¼¸å‡ºäº‹ä»¶ç‰©ä»¶

// ç›£æ§å¤šç¨®äº‹ä»¶
monitorEvents($0, ["click", "mouseenter", "mouseleave"]);

unmonitorEvents($0); // åœæ­¢ç›£æ§

// 7. getEventListenersï¼šæŸ¥çœ‹äº‹ä»¶ç¶å®š
getEventListeners(document.getElementById("start-button"));
// â†’ { click: [{listener: Æ’, type: 'click', ...}] }
// å¯ä»¥çœ‹åˆ°ç¶äº†å¹¾å€‹äº‹ä»¶ã€æ˜¯å“ªå€‹å‡½å¼
```

**æœ€ä½³ä½¿ç”¨æ™‚æ©Ÿï¼š**

- æƒ³å¿«é€Ÿæ¸¬è©¦ DOM æ“ä½œä½†ä¸æƒ³æ”¹ç¨‹å¼ç¢¼
- æƒ³åŒ¯å‡ºè¤‡é›œè³‡æ–™çµæ§‹åˆ°å…¶ä»–å·¥å…·åˆ†æ
- æƒ³è¿½è¹¤ã€Œåˆ°åº•æ˜¯èª°è§¸ç™¼äº†é€™å€‹å‡½å¼ï¼Ÿã€
- æƒ³çŸ¥é“æŸå€‹å…ƒç´ ç¶äº†å“ªäº›äº‹ä»¶ç›£è½å™¨

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 7. Live Expressionsï¼ˆå³æ™‚é‹ç®—å¼ï¼‰ğŸ†•

**ä¸éœ€è¦å¯«ä»»ä½•ç¨‹å¼ç¢¼**å°±èƒ½å³æ™‚ç›£æ§è®Šæ•¸ï¼Œæ¯” Visual Debug é¢æ¿æ›´è¼•é‡ï¼š

#### ä½¿ç”¨æ–¹å¼

```
æ­¥é©Ÿï¼š
1. æ‰“é–‹ Console é¢æ¿
2. é»æ“Šä¸Šæ–¹çš„ ğŸ‘ï¸ åœ–ç¤ºï¼ˆCreate live expressionï¼‰
3. è¼¸å…¥è¦ç›£æ§çš„ JavaScript è¡¨é”å¼
4. è©²è¡¨é”å¼çš„å€¼æœƒæŒçºŒå³æ™‚æ›´æ–°
```

#### æ¨è–¦ç›£æ§çš„è¡¨é”å¼

```javascript
// ğŸ® éŠæˆ²ç‹€æ…‹ç›£æ§
GameLogic.state.currentRound; // å³æ™‚çœ‹åˆ°ç›®å‰å›åˆ
GameLogic.state.score; // å³æ™‚çœ‹åˆ°åˆ†æ•¸
GameLogic.state.isPlaying; // æ˜¯å¦éŠæˆ²ä¸­
GameLogic.state.currentStimulus; // ç›®å‰åˆºæ¿€ç‰©

// ğŸ“ DOM ç‹€æ…‹ç›£æ§
document.activeElement; // ç›®å‰ç„¦é»åœ¨å“ªå€‹å…ƒç´ 
document
  .querySelectorAll(".card")
  .length(
    // å¡ç‰‡æ•¸é‡

    // ğŸ’¾ è¨˜æ†¶é«”ç›£æ§
    performance.memory.usedJSHeapSize / 1048576,
  )
  .toFixed(1) + " MB";

// â±ï¸ æ™‚é–“ç›£æ§
new Date().toLocaleTimeString(); // å³æ™‚æ™‚é˜
```

**Live Expressions vs Visual Debug é¢æ¿æ¯”è¼ƒï¼š**

| ç‰¹æ€§         | Live Expressions        | Visual Debug é¢æ¿         |
| ------------ | ----------------------- | ------------------------- |
| éœ€è¦å¯«ç¨‹å¼ç¢¼ | âŒ å®Œå…¨ä¸ç”¨             | âœ… éœ€è¦å»ºç«‹é¢æ¿å’Œæ›´æ–°é‚è¼¯ |
| é®æ“‹éŠæˆ²ç•«é¢ | âŒ åªåœ¨ DevTools ä¸­é¡¯ç¤º | âœ… æœƒæµ®åœ¨ç•«é¢ä¸Š           |
| å¯è‡ªè¨‚æ¨£å¼   | âŒ ä¸è¡Œ                 | âœ… å®Œå…¨å¯è‡ªè¨‚             |
| é—œé–‰å¾Œä¿ç•™   | âŒ é‡é–‹ DevTools éœ€é‡è¨­ | âœ… å¯«åœ¨ç¨‹å¼ç¢¼ä¸­æœƒä¿ç•™     |
| é©åˆå°è±¡     | é–‹ç™¼è€…è‡ªå·±é™¤éŒ¯          | é–‹ç™¼è€… + æ¸¬è©¦å“¡           |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="é™¤éŒ¯æ€ç¶­æ–¹æ³•è«–"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## é™¤éŒ¯æ€ç¶­æ–¹æ³•è«– ğŸ†•

é™¤äº†å·¥å…·ä¹‹å¤–ï¼Œ**æ€è€ƒç­–ç•¥**å¾€å¾€æ¯”ä»»ä½•å·¥å…·éƒ½æ›´å¿«æ‰¾åˆ°å•é¡Œï¼š

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### 1. ğŸ¦† æ©¡çš®é´¨é™¤éŒ¯æ³•ï¼ˆRubber Duck Debuggingï¼‰

æŠŠå•é¡Œ**ä¸€æ­¥ä¸€æ­¥èªªå‡ºä¾†**ï¼ˆå°æ©¡çš®é´¨ã€å°åŒå­¸ã€å° AIï¼‰ï¼Œåœ¨è§£é‡‹çš„éç¨‹ä¸­ä½ ç¶“å¸¸æœƒçªç„¶ç™¼ç¾å•é¡Œåœ¨å“ªã€‚

```
ä½¿ç”¨æ–¹å¼ï¼š
1. æº–å‚™ä¸€éš»æ©¡çš®é´¨ï¼ˆæˆ–ä»»ä½•ç‰©å“ï¼Œç”šè‡³æƒ³åƒçš„ä¹Ÿè¡Œï¼‰
2. å‘å®ƒè§£é‡‹ä½ çš„ç¨‹å¼ç¢¼ã€Œæ‡‰è©²ã€è¦åšä»€éº¼
3. é€è¡Œè§£é‡‹ä½ çš„ç¨‹å¼ç¢¼ã€Œå¯¦éš›ä¸Šã€åœ¨åšä»€éº¼
4. ç•¶è§£é‡‹å’Œå¯¦éš›æœ‰å·®ç•°æ™‚ â†’ é‚£å°±æ˜¯ bug æ‰€åœ¨ï¼
```

**ç‚ºä»€éº¼æœ‰æ•ˆï¼š**

- å¯«ç¨‹å¼æ™‚å¤§è…¦å¸¸èµ°ã€Œæ·å¾‘ã€è·³éé‚è¼¯
- ç”¨èªè¨€è§£é‡‹æœƒå¼·è¿«ä½ ã€Œæ…¢ä¸‹ä¾†ã€é€æ­¥æ€è€ƒ
- å¾ˆå¤šæ™‚å€™å•é¡Œåœ¨ä½ èªªå‡ºä¾†çš„é‚£ä¸€åˆ»å°±è‡ªå·±æ‰¾åˆ°äº†

**å¯¦éš›ç¯„ä¾‹ï¼š**

```
ï¼ˆä½ å°æ©¡çš®é´¨èªªï¼‰
ã€Œé€™å€‹ handleResponse å‡½å¼ï¼Œç•¶ç©å®¶æŒ‰ä¸‹æŒ‰éˆ•æ™‚...
  é¦–å…ˆæˆ‘æª¢æŸ¥ isPlaying æ˜¯å¦ç‚º true...
  ç„¶å¾Œæˆ‘ç”¨ Date.now() æ¸›å» startTime ç®—åæ‡‰æ™‚é–“...
  ç­‰ç­‰ï¼ŒstartTime æ˜¯ä»€éº¼æ™‚å€™è¨­å®šçš„ï¼Ÿ
  å®ƒæ˜¯åœ¨ showStimulus è£¡è¨­å®šçš„...
  ä½†å¦‚æœç©å®¶æŒ‰å¤ªå¿«ï¼ŒshowStimulus é‚„æ²’åŸ·è¡Œå®Œ...
  å•Šï¼æ‰¾åˆ°äº†ï¼startTime å¯èƒ½æ˜¯ 0ï¼ã€
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 2. ğŸ” äºŒåˆ†æ³•é™¤éŒ¯ï¼ˆBinary Search Debuggingï¼‰

ç•¶ä½ **å®Œå…¨ä¸çŸ¥é“å•é¡Œåœ¨å“ª**æ™‚ï¼Œé€™æ˜¯æœ€æœ‰æ•ˆç‡çš„ç³»çµ±åŒ–æ–¹æ³•ã€‚ç‰¹åˆ¥é©åˆå¤§å‹æª”æ¡ˆï¼ˆå¦‚ 2000+ è¡Œçš„ç¨‹å¼ç¢¼ï¼‰ï¼š

```
åŸç†ï¼š
å°±åƒåœ¨å­—å…¸è£¡æŸ¥å­—ä¸€æ¨£ï¼Œä¸è¦å¾ç¬¬ä¸€é ç¿»åˆ°æœ€å¾Œä¸€é ï¼Œ
è€Œæ˜¯æ¯æ¬¡ç¿»åˆ°ã€Œä¸­é–“ã€ï¼Œåˆ¤æ–·ç›®æ¨™åœ¨å‰åŠé‚„æ˜¯å¾ŒåŠã€‚

æ­¥é©Ÿï¼š
1. åœ¨ç¨‹å¼ç¢¼ã€Œä¸­é–“ã€ä½ç½®åŠ  console.log('===== ä¸­é–“é» =====');
2. åŸ·è¡Œç¨‹å¼ï¼Œçœ‹éŒ¯èª¤æ˜¯åœ¨ä¸­é–“é»ä¹‹å‰é‚„æ˜¯ä¹‹å¾Œ
3. åœ¨ç¢ºèªæœ‰å•é¡Œçš„é‚£ä¸€åŠçš„ã€Œä¸­é–“ã€å†åŠ  console.log
4. é‡è¤‡æ­¥é©Ÿ 2-3ï¼Œç›´åˆ°ç¸®å°åˆ°å¹¾è¡Œ

æ•ˆç‡åˆ†æï¼š
- 2000 è¡Œçš„ç¨‹å¼ç¢¼
- ç¬¬ 1 æ¬¡ï¼šç¸®å°åˆ° 1000 è¡Œ
- ç¬¬ 2 æ¬¡ï¼šç¸®å°åˆ° 500 è¡Œ
- ç¬¬ 3 æ¬¡ï¼šç¸®å°åˆ° 250 è¡Œ
- ...
- ç¬¬ 11 æ¬¡ï¼šç¸®å°åˆ° 1 è¡Œï¼
- åªéœ€è¦ 11 æ¬¡å°±èƒ½åœ¨ 2000 è¡Œä¸­æ‰¾åˆ°å•é¡Œè¡Œ
```

#### å¯¦éš›æ“ä½œç¯„ä¾‹

```javascript
// game-logic.js æœ‰ 2460 è¡Œï¼ŒéŠæˆ²å•Ÿå‹•æ™‚å‡ºéŒ¯ä½†ä¸çŸ¥é“åœ¨å“ª

// ç¬¬ 1 æ­¥ï¼šåœ¨ç¬¬ 1230 è¡Œé™„è¿‘åŠ 
console.log("===== åˆ°é”ä¸­é–“é» =====");

// åŸ·è¡Œ â†’ Console æœ‰é¡¯ç¤ºã€Œåˆ°é”ä¸­é–“é»ã€â†’ å•é¡Œåœ¨å¾ŒåŠéƒ¨ï¼ˆ1230-2460 è¡Œï¼‰

// ç¬¬ 2 æ­¥ï¼šåœ¨ç¬¬ 1845 è¡Œé™„è¿‘åŠ 
console.log("===== åˆ°é” 3/4 é» =====");

// åŸ·è¡Œ â†’ Console æ²’æœ‰é¡¯ç¤º â†’ å•é¡Œåœ¨ 1230-1845 è¡Œä¹‹é–“

// ç¬¬ 3 æ­¥ï¼šåœ¨ç¬¬ 1538 è¡Œé™„è¿‘åŠ 
console.log("===== åˆ°é” 5/8 é» =====");

// ... é‡è¤‡ç›´åˆ°æ‰¾åˆ°å‡ºéŒ¯çš„é‚£ä¸€è¡Œ
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 3. ğŸ”™ git bisect â€” æ‰¾å‡ºã€Œæ˜¯å“ªæ¬¡ä¿®æ”¹å¼„å£çš„ã€

ç•¶ç¨‹å¼çªç„¶å£äº†ï¼Œä½†ä½ ä¸ç¢ºå®šæ˜¯å“ªæ¬¡ä¿®æ”¹é€ æˆçš„ã€‚`git bisect` æœƒç”¨äºŒåˆ†æ³•è‡ªå‹•å¹«ä½ æ‰¾åˆ°æœ‰å•é¡Œçš„ commitï¼š

```bash
# é–‹å§‹ bisect
git bisect start

# æ¨™è¨˜ç›®å‰ç‰ˆæœ¬æœ‰å•é¡Œ
git bisect bad

# æ¨™è¨˜ä½ è¨˜å¾—æ­£å¸¸çš„èˆŠç‰ˆæœ¬ï¼ˆç”¨ commit hash æˆ– tagï¼‰
git bisect good abc123

# Git æœƒè‡ªå‹•åˆ‡æ›åˆ°ä¸­é–“çš„ commit
# ä½ æ¸¬è©¦ä¸€ä¸‹é€™å€‹ç‰ˆæœ¬æ˜¯å¦æ­£å¸¸ï¼Œç„¶å¾Œå›ç­”ï¼š
git bisect good   # é€™å€‹ç‰ˆæœ¬æ˜¯å¥½çš„
# æˆ–
git bisect bad    # é€™å€‹ç‰ˆæœ¬ä¹Ÿæœ‰å•é¡Œ

# Git ç¹¼çºŒäºŒåˆ†æœå°‹ï¼Œæ¯æ¬¡å•ä½ ...
# æœ€å¾Œæœƒå‘Šè¨´ä½ ï¼š
# "abc456 is the first bad commit"
# æ‰¾åˆ°äº†ï¼å°±æ˜¯é€™æ¬¡ commit å¼„å£çš„

# çµæŸ bisectï¼Œå›åˆ°åŸæœ¬çš„åˆ†æ”¯
git bisect reset
```

#### ä½¿ç”¨æ™‚æ©Ÿ

```
âœ… é©åˆï¼š
- ã€Œæ˜¨å¤©é‚„å¥½å¥½çš„ï¼Œä»Šå¤©çªç„¶å£äº†ã€
- ã€Œä¸çŸ¥é“æ˜¯å“ªå€‹æ”¹å‹•é€ æˆçš„ã€
- æœ‰å¤šæ¬¡ commit çš„å°ˆæ¡ˆ

âŒ ä¸é©åˆï¼š
- å…¨æ–°çš„ç¨‹å¼ç¢¼ï¼ˆæ²’æœ‰èˆŠç‰ˆæœ¬å¯æ¯”è¼ƒï¼‰
- å•é¡Œå¾ä¸€é–‹å§‹å°±å­˜åœ¨
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

### 4. ğŸ”„ æœ€å°é‡ç¾æ³•ï¼ˆMinimal Reproductionï¼‰

ç•¶ bug å¾ˆè¤‡é›œï¼Œç‰½æ¶‰å¾ˆå¤šæª”æ¡ˆæ™‚ï¼Œå˜—è©¦ç”¨**æœ€å°‘çš„ç¨‹å¼ç¢¼**é‡ç¾å•é¡Œï¼š

```
æ­¥é©Ÿï¼š
1. å»ºç«‹ä¸€å€‹ä¹¾æ·¨çš„ HTML æª”æ¡ˆ
2. åªè¤‡è£½ä½ æ‡·ç–‘æœ‰å•é¡Œçš„é‚£éƒ¨åˆ†ç¨‹å¼ç¢¼
3. ç”¨æœ€ç°¡å–®çš„å‡è³‡æ–™æ¸¬è©¦
4. å¦‚æœèƒ½é‡ç¾ â†’ å•é¡Œå°±åœ¨é€™æ®µç¨‹å¼ç¢¼
5. å¦‚æœä¸èƒ½é‡ç¾ â†’ å•é¡Œåœ¨å…¶ä»–åœ°æ–¹ï¼ˆç’°å¢ƒã€è³‡æ–™ã€ç›¸ä¾æ€§ï¼‰
```

```html
<!-- æœ€å°é‡ç¾ç¯„ä¾‹ -->
<!DOCTYPE html>
<html>
  <body>
    <div id="test">æ¸¬è©¦</div>
    <script>
      // åªæ”¾ä½ æ‡·ç–‘æœ‰å•é¡Œçš„ç¨‹å¼ç¢¼
      // ç”¨æœ€ç°¡å–®çš„å‡è³‡æ–™
      const fakeData = { score: 100, round: 3 };

      // æ¸¬è©¦æœ‰å•é¡Œçš„å‡½å¼
      function suspectFunction(data) {
        // ... å¾å°ˆæ¡ˆä¸­è¤‡è£½éä¾†
      }

      suspectFunction(fakeData);
    </script>
  </body>
</html>
```

**ç‚ºä»€éº¼æœ‰æ•ˆï¼š**

- æ’é™¤ä¸ç›¸é—œçš„ç¨‹å¼ç¢¼å¹²æ“¾
- æ›´å®¹æ˜“èšç„¦åœ¨æ ¸å¿ƒå•é¡Œ
- æ–¹ä¾¿æ‹¿å»å•åˆ¥äººæˆ–æŸ¥è³‡æ–™

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="é™¤éŒ¯æ–¹æ³•æ¯”è¼ƒè¡¨"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## é™¤éŒ¯æ–¹æ³•æ¯”è¼ƒè¡¨

| æ–¹æ³•                    | å­¸ç¿’æˆæœ¬ | é™¤éŒ¯æ•ˆç‡   | é©ç”¨å ´æ™¯        | å½±éŸ¿åŸ·è¡Œ | æ­£å¼ç‰ˆè™•ç†   |
| ----------------------- | -------- | ---------- | --------------- | -------- | ------------ |
| **console.log**         | â­       | â­â­       | å¿«é€Ÿé©—è­‰è®Šæ•¸    | âŒ       | éœ€æ‰‹å‹•ç§»é™¤   |
| **console.error/warn**  | â­       | â­â­â­     | éŒ¯èª¤/è­¦å‘Š       | âŒ       | éœ€æ‰‹å‹•ç§»é™¤   |
| **console.table**       | â­       | â­â­â­â­   | é™£åˆ—/ç‰©ä»¶è³‡æ–™   | âŒ       | éœ€æ‰‹å‹•ç§»é™¤   |
| **debugger**            | â­â­     | â­â­â­â­â­ | è¤‡é›œé‚è¼¯        | âœ… æš«åœ  | å¿…é ˆç§»é™¤     |
| **Visual Debug**        | â­â­     | â­â­â­â­   | éŠæˆ²ç‹€æ…‹ç›£æ§    | âŒ       | éœ€ç§»é™¤ç¨‹å¼ç¢¼ |
| **Network Tab**         | â­â­     | â­â­â­â­   | ç¶²è·¯å•é¡Œ        | âŒ       | ç„¡éœ€è™•ç†     |
| **Try-Catch**           | â­â­     | â­â­â­     | éŒ¯èª¤è™•ç†        | âŒ       | æ‡‰ä¿ç•™       |
| **å…¨åŸŸéŒ¯èª¤ç›£è½**        | â­â­â­   | â­â­â­â­   | æ•æ‰æ‰€æœ‰éŒ¯èª¤    | âŒ       | æ‡‰ä¿ç•™       |
| **è‡ªè¨‚ DEBUG**          | â­â­â­   | â­â­â­â­â­ | ç³»çµ±åŒ–é™¤éŒ¯      | âŒ       | ä¸€éµé—œé–‰     |
| **Performance API**     | â­â­â­   | â­â­â­â­   | æ•ˆèƒ½å„ªåŒ–        | âŒ       | å¯ä¿ç•™       |
| **VS Code Debug**       | â­â­â­   | â­â­â­â­â­ | é–‹ç™¼éšæ®µ        | âœ… æš«åœ  | ç„¡éœ€è™•ç†     |
| **Proxy ç›£æ§** ğŸ†•       | â­â­â­   | â­â­â­â­   | è¿½è¹¤ç‰©ä»¶è®ŠåŒ–    | âŒ       | éœ€ç§»é™¤       |
| **æ—¥èªŒç­‰ç´šç³»çµ±** ğŸ†•     | â­â­     | â­â­â­â­   | å¯æ§åˆ¶æ—¥èªŒ      | âŒ       | èª¿æ•´ç­‰ç´šå³å¯ |
| **URL åƒæ•¸æ§åˆ¶** ğŸ†•     | â­       | â­â­â­â­   | å¿«é€Ÿé–‹é—œé™¤éŒ¯    | âŒ       | ç„¡éœ€è™•ç†     |
| **æ¢ä»¶æ–·é»** ğŸ†•         | â­â­     | â­â­â­â­â­ | ç‰¹å®šæ¢ä»¶é™¤éŒ¯    | âœ… æš«åœ  | ç„¡éœ€è™•ç†     |
| **DOM æ–·é»** ğŸ†•         | â­â­     | â­â­â­â­   | è¿½è¹¤ DOM è®ŠåŒ–   | âœ… æš«åœ  | ç„¡éœ€è™•ç†     |
| **Fetch åŒ…è£å™¨** ğŸ†•     | â­â­â­   | â­â­â­â­   | API è«‹æ±‚è¿½è¹¤    | âŒ       | éœ€ç§»é™¤       |
| **console.count** ğŸ†•    | â­       | â­â­â­     | è¨ˆç®—å‘¼å«æ¬¡æ•¸    | âŒ       | éœ€æ‰‹å‹•ç§»é™¤   |
| **console.dir** ğŸ†•      | â­       | â­â­â­     | DOM å±¬æ€§æª¢è¦–    | âŒ       | éœ€æ‰‹å‹•ç§»é™¤   |
| **Console å¯†æŠ€** ğŸ†•     | â­       | â­â­â­â­â­ | å¿«é€Ÿ DOM/äº‹ä»¶   | âŒ       | ç„¡éœ€è™•ç†     |
| **Live Expressions** ğŸ†• | â­       | â­â­â­â­   | å³æ™‚è®Šæ•¸ç›£æ§    | âŒ       | ç„¡éœ€è™•ç†     |
| **MutationObserver** ğŸ†• | â­â­â­   | â­â­â­â­   | ç¨‹å¼åŒ– DOM ç›£æ§ | âŒ       | éœ€ç§»é™¤       |
| **Async/Await é™¤éŒ¯** ğŸ†• | â­â­     | â­â­â­â­â­ | Firebase éåŒæ­¥ | âŒ       | èª¿æ•´å³å¯     |
| **äºŒåˆ†æ³•é™¤éŒ¯** ğŸ†•       | â­       | â­â­â­â­â­ | å¿«é€Ÿå®šä½å•é¡Œè¡Œ  | âŒ       | éœ€ç§»é™¤ log   |
| **git bisect** ğŸ†•       | â­â­     | â­â­â­â­â­ | æ‰¾å•é¡Œ commit   | âŒ       | ç„¡éœ€è™•ç†     |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å•é¡Œé¡å‹å°æ‡‰é™¤éŒ¯æ–¹æ³•é€ŸæŸ¥è¡¨ ğŸ†•

| é‡åˆ°çš„å•é¡Œ              | å„ªå…ˆä½¿ç”¨æ–¹æ³•                          | å‚™ç”¨æ–¹æ³•           |
| ----------------------- | ------------------------------------- | ------------------ | --- |
| ä¸çŸ¥é“éŒ¯èª¤åœ¨å“ª          | å…¨åŸŸéŒ¯èª¤ç›£è½                          | Console éŒ¯èª¤è¨Šæ¯   |
| è®Šæ•¸å€¼ä¸å°              | `console.table` + `debugger`          | Proxy ç›£æ§         |
| ä¸çŸ¥é“èª°å‘¼å«å‡½å¼        | `console.trace()`                     | äº‹ä»¶æ–·é»           |
| ç‰©ä»¶è¢«æ„å¤–ä¿®æ”¹          | Proxy ç›£æ§                            | DOM æ–·é»           |
| DOM è¢«æ„å¤–æ”¹è®Š          | DOM è®ŠåŒ–æ–·é»                          | `MutationObserver` |
| API è«‹æ±‚å•é¡Œ            | Network Tab + Fetch åŒ…è£å™¨            | XHR æ–·é»           |
| æ•ˆèƒ½å¤ªæ…¢                | `console.time()` + Performance API    | FPS ç›£æ§           |
| åªåœ¨ç‰¹å®šæƒ…æ³å‡ºéŒ¯        | æ¢ä»¶æ–·é»                              | Logpoint           |
| æ­£å¼ç’°å¢ƒå‡ºéŒ¯            | URL åƒæ•¸æ§åˆ¶ + æ—¥èªŒç­‰ç´šç³»çµ±           | å…¨åŸŸéŒ¯èª¤ç›£è½       |
| äº‹ä»¶è¢«é‡è¤‡è§¸ç™¼          | `console.count()` + `monitor(fn)`     | äº‹ä»¶æ–·é»           |
| ä¸çŸ¥é“å…ƒç´ ç¶äº†ä»€éº¼äº‹ä»¶  | `getEventListeners($0)`               | Chrome äº‹ä»¶æ–·é»    |
| Firebase å›å‚³ undefined | Async/Await é™¤éŒ¯æŠ€å·§                  | `console.log` å‹åˆ¥ |
| æ˜¨å¤©æ­£å¸¸ä»Šå¤©å£äº†        | `git bisect`                          | äºŒåˆ†æ³•é™¤éŒ¯         |
| å®Œå…¨æ‰¾ä¸åˆ°æ–¹å‘          | æ©¡çš®é´¨é™¤éŒ¯æ³• + äºŒåˆ†æ³•                 | æœ€å°é‡ç¾æ³•         |
| JSON åºåˆ—åŒ–å‡ºéŒ¯         | `safeStringify` å¾ªç’°åƒè€ƒè™•ç†          | `console.dir()`    |
| CSS è®Šæ•¸/ä¸»é¡Œä¸å°       | Elements â†’ Computed + data-theme æª¢æŸ¥ | Force State        | ğŸ†•  |
| localStorage è³‡æ–™ç•°å¸¸   | Application Tab + Console JSON.parse  | é‡ç½®æ¸¬è©¦           | ğŸ†•  |
| iPad ä¸ŠéŸ³æ•ˆä¸æ’­         | AudioContext.state æª¢æŸ¥               | Safari Inspector   | ğŸ†•  |
| è§¸æ§å€åŸŸå¤ªå°            | checkTouchTargets() å‡½å¼              | Device Mode        | ğŸ†•  |
| å¤šäººåŒæ­¥ä¸ä¸€è‡´          | firebase.database.enableLogging(true) | å¤š Tab æ¸¬è©¦        | ğŸ†•  |
| å‹•ç•«ä¸æ’­æ”¾              | Animations é¢æ¿ + Styles æª¢æŸ¥         | Force State        | ğŸ†•  |
| CSS è®Šæ•¸/ä¸»é¡Œä¸å°       | Elements â†’ Computed + data-theme æª¢æŸ¥ | Force State        | ğŸ†•  |
| localStorage è³‡æ–™ç•°å¸¸   | Application Tab + Console JSON.parse  | é‡ç½®æ¸¬è©¦           | ğŸ†•  |
| iPad ä¸ŠéŸ³æ•ˆä¸æ’­         | AudioContext.state æª¢æŸ¥               | Safari Inspector   | ğŸ†•  |
| è§¸æ§å€åŸŸå¤ªå°            | checkTouchTargets() å‡½å¼              | Device Mode        | ğŸ†•  |
| å¤šäººåŒæ­¥ä¸ä¸€è‡´          | firebase.database.enableLogging(true) | å¤š Tab æ¸¬è©¦        | ğŸ†•  |
| å‹•ç•«ä¸æ’­æ”¾              | Animations é¢æ¿ + Styles æª¢æŸ¥         | Force State        | ğŸ†•  |

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

<a id="dccs-éŠæˆ²å°ˆç”¨é™¤éŒ¯ç­–ç•¥"></a>

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

## DCCS éŠæˆ²å°ˆç”¨é™¤éŒ¯ç­–ç•¥

> âš ï¸ v2.0 é‡å¯«ï¼ˆ2026/02/13ï¼‰ï¼šä½¿ç”¨æ­£ç¢ºçš„éŠæˆ²æ¦‚å¿µï¼ˆcombo/stimuli/æ¢ç´¢é»/WMï¼‰ï¼Œå–ä»£èˆŠç‰ˆå¡ç‰‡é…å°ç¯„ä¾‹

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é–‹ç™¼éšæ®µé…ç½®

```javascript
// åœ¨ game-config.js ä¸­åŠ å…¥
const DEV_MODE = window.location.hostname === "localhost";

// è¨­å®š DEBUG
const DEBUG = new DebugSystem({
  enabled: DEV_MODE,
  showTimestamp: true,
  prefix: "ğŸ® EFGame",
});

// è¨­å®š Visual Debug
const visualDebug = new VisualDebugger();
if (DEV_MODE) {
  visualDebug.init();
  visualDebug.startAutoUpdate(() => {
    visualDebug.update({
      æ¨¡å¼: DEV_MODE ? "é–‹ç™¼" : "æ­£å¼",
      éŠæˆ²å ´: gameState.currentField,
      è¦å‰‡: gameState.currentRule,
      "ç•¶å‰ Combo": `${gameState.currentComboIndex + 1} / ${gameState.totalCombos}`,
      ç•¶å‰é¡Œç›®: `${gameState.currentQuestion + 1} / ${gameState.questionsInCombo}`,
      å¾—åˆ†: gameState.score,
      æ­£ç¢ºç‡: `${(gameState.accuracy * 100).toFixed(0)}%`,
      "WM æ¨¡å¼": gameState.enableWM ? "é–‹å•Ÿ" : "é—œé–‰",
      åœ°åœ–é€²åº¦: `Map ${gameState.currentMapIndex + 1} / Point ${gameState.currentPointIndex + 1}`,
      FPS: Math.round(fpsMonitor.getFPS()),
    });
  }, 100);
}

// è¨­å®šå…¨åŸŸéŒ¯èª¤è™•ç†
const errorHandler = new ErrorHandler();
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### é™¤éŒ¯æª¢æŸ¥æ¸…å–®

#### ğŸš€ éŠæˆ²å•Ÿå‹•æª¢æŸ¥

```
â–¡ Console ç„¡ç´…è‰²éŒ¯èª¤
â–¡ Network Tab æ‰€æœ‰è³‡æºè¼‰å…¥æˆåŠŸ (200)
â–¡ Firebase åŒ¿åç™»å…¥æˆåŠŸï¼ˆAuth Tab é¡¯ç¤º uidï¼‰
â–¡ stimuli-config.js è¼‰å…¥ï¼ˆåˆºæ¿€ç‰©è¨­å®šå¯ç”¨ï¼‰
â–¡ adventure-maps-config.js è¼‰å…¥ï¼ˆåœ°åœ–è¨­å®šå¯ç”¨ï¼‰
â–¡ éŸ³æ•ˆæª”æ¡ˆè¼‰å…¥ï¼ˆNetwork â†’ Media filterï¼‰
â–¡ CSS ä¸»é¡Œè¼‰å…¥ï¼ˆdata-theme æ­£ç¢ºï¼‰
â–¡ localStorage æœ‰ playerProfile å’Œ adventureProgress
```

#### ğŸ® æ ¸å¿ƒéŠæˆ²é‚è¼¯æª¢æŸ¥

```
â–¡ åˆºæ¿€ç‰©æ¸²æŸ“æ­£ç¢ºï¼ˆSVG å„ªå…ˆã€emoji fallbackï¼‰
â–¡ æ¢ä»¶æç¤ºæ­£ç¢ºï¼ˆæœ‰äºº/æ²’äºº æˆ– ç™½å¤©/æ™šä¸Šï¼‰
â–¡ Go/No-Go åˆ¤æ–·æ­£ç¢ºï¼ˆcorrectAction æ¨å°ï¼‰
â–¡ åæ‡‰æ™‚é–“è¨ˆç®—æ­£ç¢ºï¼ˆstartTime è¨­å®šæ™‚æ©Ÿï¼‰
â–¡ èªéŸ³åŒæ­¥è§¸ç™¼ï¼ˆä¸å½±éŸ¿éŠæˆ²è¨ˆæ™‚ï¼‰
â–¡ å›é¥‹å‹•ç•«æ’­æ”¾ï¼ˆpulse-green / shake-redï¼‰
â–¡ Combo æ¨é€²æ­£å¸¸ï¼ˆcurrentComboIndex éå¢ï¼‰
â–¡ WM æ¸¬é©—è§¸ç™¼æ­£ç¢ºï¼ˆå¶æ•¸æ¢ç´¢é»æ‰æœ‰ï¼‰
â–¡ åˆ†æ•¸è¨ˆç®—èˆ‡æ˜Ÿæ˜Ÿç­‰ç´šæ­£ç¢º
```

#### ğŸ—ºï¸ æ¢éšªåœ°åœ–æª¢æŸ¥

```
â–¡ æ¢ç´¢é»ç‹€æ…‹æ­£ç¢ºï¼ˆğŸ”’ / ğŸŸ¡ / âœ…ï¼‰
â–¡ é€šé—œå¾Œè§£é–ä¸‹ä¸€å€‹æ¢ç´¢é»
â–¡ fieldRuleRecords æ­£ç¢ºè¨˜éŒ„
â–¡ å…¨éƒ¨é€šé—œå¾Œè§£é–è‡ªç”±é¸æ“‡
â–¡ adventureProgress æ­£ç¢ºå„²å­˜åˆ° localStorage
```

#### ğŸ”¥ Firebase åŠŸèƒ½æª¢æŸ¥

```
â–¡ åŒ¿åç™»å…¥æˆåŠŸ
â–¡ æˆ¿é–“å»ºç«‹/åŠ å…¥æ­£å¸¸ï¼ˆRTDB rooms/ï¼‰
â–¡ gameCombos åŒæ­¥æ­£ç¢º
â–¡ comboStatus å³æ™‚æ›´æ–°
â–¡ onDisconnect æ¸…ç†ç”Ÿæ•ˆ
â–¡ allCompleted å»£æ’­è§¸ç™¼
â–¡ liveLeaderboards ä¸Šå‚³æˆåŠŸï¼ˆFirestoreï¼‰
```

#### âš¡ æ•ˆèƒ½èˆ‡è£ç½®æª¢æŸ¥

```
â–¡ FPS ç¶­æŒåœ¨ 60ï¼ˆiPad Safari æ¸¬è©¦ï¼‰
â–¡ è¨˜æ†¶é«”ä½¿ç”¨åˆç† (< 100MB)
â–¡ é é¢è¼‰å…¥ < 3 ç§’
â–¡ è§¸æ§å€åŸŸ â‰¥ 48Ã—48px
â–¡ å‹•ç•«æµæš¢ï¼ˆAnimation é¢æ¿æª¢æŸ¥ï¼‰
â–¡ éŸ¿æ‡‰å¼ä½ˆå±€æ­£å¸¸ï¼ˆDevice Mode æ¸¬è©¦ï¼‰
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸è¦‹å•é¡Œé™¤éŒ¯æµç¨‹

#### å•é¡Œ 1ï¼šåˆºæ¿€ç‰©æ²’æœ‰å‡ºç¾

```javascript
// é™¤éŒ¯æ­¥é©Ÿï¼š
// 1. ç¢ºèª stimuli-config.js å·²è¼‰å…¥
// 2. æª¢æŸ¥ currentPack å’Œ gameField æ˜¯å¦æ­£ç¢º
// 3. è¿½è¹¤ renderStimulus çš„å‘¼å«

function renderStimulus(stimulusType, gameField) {
  DEBUG.group("ğŸ¯ æ¸²æŸ“åˆºæ¿€ç‰©");
  DEBUG.log("åˆºæ¿€ç‰©é¡å‹", stimulusType, "gameplay");
  DEBUG.log("éŠæˆ²å ´", gameField, "gameplay");

  const pack = STIMULI_PACKS[currentPack];
  DEBUG.log("åˆºæ¿€ç‰©åŒ…", pack ? "âœ… æ‰¾åˆ°" : "âŒ æœªæ‰¾åˆ°", "gameplay");

  if (!pack) {
    DEBUG.error("STIMULI_PACKS ä¸­æ‰¾ä¸åˆ°åŒ…", { currentPack }, "gameplay");
    return;
  }

  const field = pack[gameField];
  DEBUG.log("éŠæˆ²å ´è³‡æ–™", field ? "âœ… æ‰¾åˆ°" : "âŒ æœªæ‰¾åˆ°", "gameplay");

  const stimulus = field?.goStimulus;
  DEBUG.log("SVG è·¯å¾‘", stimulus?.svgFile, "gameplay");
  DEBUG.log("Emoji fallback", stimulus?.emoji, "gameplay");
  DEBUG.groupEnd();
}
```

#### å•é¡Œ 2ï¼šGo/No-Go åˆ¤æ–·éŒ¯èª¤

```javascript
// é™¤éŒ¯æ­¥é©Ÿï¼š
// 1. å°å‡º context + stimulus çš„çµ„åˆ
// 2. ç¢ºèª correctAction çš„æ¨å°é‚è¼¯
// 3. æª¢æŸ¥ ruleType æ˜¯å¦æ­£ç¢º

function checkCorrectAction(context, stimulusType, ruleType) {
  DEBUG.group("ğŸ¯ åˆ¤æ–·æ­£ç¢ºå‹•ä½œ");
  DEBUG.log("æ¢ä»¶æç¤º", context, "gameplay"); // æœ‰äºº/æ²’äºº æˆ– ç™½å¤©/æ™šä¸Š
  DEBUG.log("åˆºæ¿€ç‰©", stimulusType, "gameplay"); // cheese/cat æˆ– fish/shark
  DEBUG.log("è¦å‰‡é¡å‹", ruleType, "gameplay"); // rule1/rule2/mixed

  // æ¨å°æ­£ç¢ºå‹•ä½œ
  const isGo = determineGoOrNoGo(context, stimulusType, ruleType);
  DEBUG.log("æ­£ç¢ºå‹•ä½œ", isGo ? "GOï¼ˆæŒ‰ï¼‰" : "NO-GOï¼ˆä¸æŒ‰ï¼‰", "gameplay");

  // Go:No-Go æ¯”ä¾‹æª¢æŸ¥
  // å°è€é¼ å ´ï¼š75:25ï¼ˆGo è¼ƒå¤šï¼‰
  // é‡£é­šå ´ï¼š80:20ï¼ˆGo è¼ƒå¤šï¼‰
  DEBUG.groupEnd();
  return isGo;
}
```

#### å•é¡Œ 3ï¼šCombo æ¨é€²ç•°å¸¸

```javascript
// é™¤éŒ¯æ­¥é©Ÿï¼š
// 1. è¿½è¹¤ currentComboIndex çš„è®ŠåŒ–
// 2. ç¢ºèª combo å®Œæˆæ¢ä»¶
// 3. æª¢æŸ¥ WM æ¸¬é©—æ˜¯å¦å½±éŸ¿æ¨é€²

function onComboComplete(comboIndex) {
  DEBUG.group(`ğŸ“¦ Combo ${comboIndex} å®Œæˆ`);
  DEBUG.log("combo çµæ§‹", gameCombos[comboIndex], "gameplay");
  DEBUG.log("åˆ†æ•¸", comboStatus[`combo_${comboIndex}`].score, "gameplay");
  DEBUG.log(
    "æ­£ç¢ºæ•¸",
    comboStatus[`combo_${comboIndex}`].correctCount,
    "gameplay",
  );

  // æ˜¯å¦æœ‰ WM æ¸¬é©—
  const hasWM = gameCombos[comboIndex].enableWM;
  DEBUG.log("éœ€è¦ WM æ¸¬é©—", hasWM, "gameplay");

  if (hasWM) {
    DEBUG.log(
      "WM æ–¹å‘",
      gameCombos[comboIndex].workingMemoryTest.direction,
      "gameplay",
    );
    DEBUG.log(
      "WM é¡Œæ•¸",
      gameCombos[comboIndex].workingMemoryTest.testCount,
      "gameplay",
    );
  }

  // ä¸‹ä¸€æ­¥
  const nextIndex = comboIndex + 1;
  const isAllDone = nextIndex >= gameCombos.length;
  DEBUG.log("ä¸‹ä¸€å€‹ combo", isAllDone ? "å…¨éƒ¨å®Œæˆï¼" : nextIndex, "gameplay");
  DEBUG.groupEnd();
}
```

#### å•é¡Œ 4ï¼šFirebase å¤šäººåŒæ­¥ç•°å¸¸

```javascript
// é™¤éŒ¯æ­¥é©Ÿï¼š
// 1. é–‹å•Ÿ Firebase Console â†’ Realtime Database â†’ å³æ™‚æª¢è¦–
// 2. é–‹ 2-3 å€‹ Tab æ¨¡æ“¬å¤šç©å®¶
// 3. ç”¨ firebase.database.enableLogging(true) è¿½è¹¤

// å•Ÿç”¨ Firebase å…§å»º debug log
firebase.database.enableLogging(true);

// è¿½è¹¤æˆ¿é–“ç‹€æ…‹è®ŠåŒ–
function debugRoomSync(roomCode) {
  const roomRef = firebase.database().ref(`rooms/${roomCode}`);

  // ç›£è½ç‹€æ…‹è®ŠåŒ–
  roomRef.child("status").on("value", (snap) => {
    DEBUG.log("æˆ¿é–“ç‹€æ…‹", snap.val(), "firebase");
    // waiting â†’ playing â†’ finished
  });

  // ç›£è½ç©å®¶è®ŠåŒ–
  roomRef.child("players").on("child_changed", (snap) => {
    DEBUG.log(`ç©å®¶ ${snap.key} æ›´æ–°`, snap.val(), "firebase");
  });

  // ç›£è½å…¨å“¡å®Œæˆ
  roomRef.child("allCompleted").on("value", (snap) => {
    if (snap.val()) {
      DEBUG.log("ğŸ å…¨å“¡å®Œæˆï¼", null, "firebase");
    }
  });
}

// å¤š Tab æ¸¬è©¦æ­¥é©Ÿï¼š
// Tab 1ï¼šå»ºç«‹æˆ¿é–“ï¼ˆæˆ¿ä¸»ï¼‰
// Tab 2ï¼šåŠ å…¥æˆ¿é–“ï¼ˆç©å®¶ Aï¼‰
// Tab 3ï¼šåŠ å…¥æˆ¿é–“ï¼ˆç©å®¶ Bï¼‰
// â†’ è§€å¯Ÿ RTDB ä¸­çš„å³æ™‚è®ŠåŒ–

// æ–·ç·šæ¸¬è©¦ï¼š
// 1. é—œé–‰æˆ¿ä¸» Tab â†’ è§€å¯Ÿ onDisconnect æ˜¯å¦è§¸ç™¼æˆ¿ä¸»è½‰ç§»
// 2. Network â†’ Offline â†’ è§€å¯Ÿæ–·ç·šé‡é€£ï¼ˆ5ç§’ Ã— 6æ¬¡ï¼‰
```

#### å•é¡Œ 5ï¼šWM å·¥ä½œè¨˜æ†¶æ¸¬é©—å‡ºéŒ¯

```javascript
function debugWMTest(direction, sequence) {
  DEBUG.group("ğŸ§  WM æ¸¬é©—é™¤éŒ¯");
  DEBUG.log("æ–¹å‘", direction, "wm"); // 'forward' æˆ– 'reverse'
  DEBUG.log("åŸå§‹åºåˆ—", sequence, "wm");

  const expectedAnswer =
    direction === "reverse" ? [...sequence].reverse() : sequence;

  DEBUG.log("é æœŸç­”æ¡ˆ", expectedAnswer, "wm");
  DEBUG.log("åºåˆ—é•·åº¦", sequence.length, "wm");
  DEBUG.groupEnd();
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### æ­£å¼ç‰ˆéƒ¨ç½²å‰æª¢æŸ¥

```javascript
// ç¢ºä¿æ­£å¼ç‰ˆé—œé–‰æ‰€æœ‰é™¤éŒ¯åŠŸèƒ½
const RELEASE_CHECKLIST = {
  "ç§»é™¤æ‰€æœ‰ debugger": false,
  "ç§»é™¤æ‰€æœ‰ console.log": false,
  "é—œé–‰ DEBUG ç³»çµ±": false,
  "ç§»é™¤ Visual Debug é¢æ¿": false,
  ç§»é™¤æ¸¬è©¦ç”¨ç¨‹å¼ç¢¼: false,
  "é©—è­‰ Firebase è¦å‰‡ï¼ˆRTDB + Firestoreï¼‰": false,
  "é©—è­‰ CSP è¨­å®š": false,
  "æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½ï¼ˆChrome + Safari + iPadï¼‰": false,
  æ•ˆèƒ½æ¸¬è©¦é€šé: false,
  è§¸æ§æ“ä½œå…¨æµç¨‹æ¸¬è©¦: false,
};

// è‡ªå‹•åŒ–æª¢æŸ¥è…³æœ¬
function checkRelease() {
  const errors = [];

  // æª¢æŸ¥ç¨‹å¼ç¢¼ä¸­æ˜¯å¦æœ‰ debugger
  if (document.body.innerHTML.includes("debugger")) {
    errors.push("ç™¼ç¾ debugger èªå¥");
  }

  // æª¢æŸ¥ DEBUG æ˜¯å¦é—œé–‰
  if (typeof DEBUG !== "undefined" && DEBUG.enabled) {
    errors.push("DEBUG ç³»çµ±æœªé—œé–‰");
  }

  // æª¢æŸ¥ Visual Debug æ˜¯å¦å­˜åœ¨
  if (document.getElementById("debug-panel")) {
    errors.push("Visual Debug é¢æ¿æœªç§»é™¤");
  }

  // æª¢æŸ¥ Firebase logging
  if (firebase.database.INTERNAL?.logger_?.logLevel === "DEBUG") {
    errors.push("Firebase debug logging æœªé—œé–‰");
  }

  if (errors.length > 0) {
    console.error("âŒ ç™¼å¸ƒå‰æª¢æŸ¥å¤±æ•—:", errors);
    return false;
  }

  console.log("âœ“ ç™¼å¸ƒå‰æª¢æŸ¥é€šé");
  return true;
}

// ESLint å»ºè­°è¨­å®šï¼ˆé–‹ç™¼æ™‚ï¼‰ï¼š
// åœ¨ .eslintrc ä¸­åŠ å…¥ï¼š
// "rules": {
//   "no-console": ["warn", { "allow": ["warn", "error"] }],
//   "no-debugger": "warn"
// }
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## é™„éŒ„ï¼šå¿«é€Ÿåƒè€ƒ

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Console API é€ŸæŸ¥è¡¨

```javascript
console.log(message, data); // ä¸€èˆ¬è¨Šæ¯
console.error(message, error); // éŒ¯èª¤è¨Šæ¯ï¼ˆç´…è‰²ï¼‰
console.warn(message, data); // è­¦å‘Šè¨Šæ¯ï¼ˆé»ƒè‰²ï¼‰
console.info(message, data); // è³‡è¨Šè¨Šæ¯ï¼ˆè—è‰²ï¼‰
console.table(array); // è¡¨æ ¼é¡¯ç¤º
console.group(label); // ç¾¤çµ„é–‹å§‹
console.groupEnd(); // ç¾¤çµ„çµæŸ
console.time(label); // è¨ˆæ™‚é–‹å§‹
console.timeEnd(label); // è¨ˆæ™‚çµæŸ
console.trace(); // å †ç–Šè¿½è¹¤
console.assert(condition, msg); // æ–·è¨€
console.count(label); // è¨ˆç®—å‘¼å«æ¬¡æ•¸ ğŸ†•
console.countReset(label); // é‡ç½®è¨ˆæ•¸å™¨ ğŸ†•
console.dir(element); // ä»¥ç‰©ä»¶æ–¹å¼é¡¯ç¤º DOM ğŸ†•
console.clear(); // æ¸…é™¤ console
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### Chrome Console å¯†æŠ€é€ŸæŸ¥è¡¨ ğŸ†•

```javascript
$0; // Elements é¢æ¿é¸å–çš„å…ƒç´ 
$_; // ä¸Šä¸€å€‹ Console åŸ·è¡Œçµæœ
$$("selector"); // querySelectorAll çš„ç°¡å¯«
copy(object); // è¤‡è£½ç‰©ä»¶åˆ°å‰ªè²¼ç°¿
monitor(fn); // ç›£æ§å‡½å¼å‘¼å«
unmonitor(fn); // åœæ­¢ç›£æ§å‡½å¼
monitorEvents(el, type); // ç›£æ§å…ƒç´ äº‹ä»¶
unmonitorEvents(el); // åœæ­¢ç›£æ§äº‹ä»¶
getEventListeners(el); // åˆ—å‡ºå…ƒç´ çš„äº‹ä»¶ç›£è½å™¨
keys(obj) / values(obj); // åˆ—å‡ºç‰©ä»¶çš„éµ/å€¼
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¿«æ·éµé€ŸæŸ¥è¡¨

```
F12                 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
Ctrl/Cmd + Shift + C  æª¢æŸ¥å…ƒç´ 
Ctrl/Cmd + Shift + J  æ‰“é–‹ Console
F5                  é‡æ–°æ•´ç†é é¢
Ctrl/Cmd + Shift + R  å¼·åˆ¶é‡æ–°æ•´ç†ï¼ˆæ¸…é™¤å¿«å–ï¼‰
F8                  ç¹¼çºŒåŸ·è¡Œï¼ˆdebugger æš«åœæ™‚ï¼‰
F10                 Step Over
F11                 Step Into
Shift + F11         Step Out
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### å¸¸ç”¨é™¤éŒ¯æ¨¡å¼

```javascript
// 1. å¿«é€Ÿé©—è­‰
console.log("è®Šæ•¸å€¼:", variable);

// 2. è©³ç´°æª¢æŸ¥
console.group("åŠŸèƒ½åç¨±");
console.log("æ­¥é©Ÿ1", data1);
console.log("æ­¥é©Ÿ2", data2);
console.groupEnd();

// 3. æ•ˆèƒ½æ¸¬é‡
console.time("æ“ä½œ");
operation();
console.timeEnd("æ“ä½œ");

// 4. äº’å‹•å¼é™¤éŒ¯
debugger;

// 5. éŒ¯èª¤æ•æ‰
try {
  riskyOperation();
} catch (error) {
  console.error("éŒ¯èª¤:", error);
}
```

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

---

## ç¸½çµ

é™¤éŒ¯æ˜¯é–‹ç™¼éç¨‹ä¸­æœ€é‡è¦çš„æŠ€èƒ½ä¹‹ä¸€ã€‚é¸æ“‡é©åˆçš„é™¤éŒ¯æ–¹æ³•å¯ä»¥å¤§å¹…æå‡é–‹ç™¼æ•ˆç‡ï¼š

- **å¿«é€Ÿé©—è­‰**ï¼šä½¿ç”¨ `console.log`ã€`console.table`ã€`console.count`
- **è¤‡é›œé‚è¼¯**ï¼šä½¿ç”¨ `debugger` å’Œ VS Code åµéŒ¯
- **éŠæˆ²é–‹ç™¼**ï¼šä½¿ç”¨ Visual Debug é¢æ¿
- **ç¶²è·¯å•é¡Œ**ï¼šä½¿ç”¨ Network Tab
- **ç³»çµ±åŒ–**ï¼šä½¿ç”¨è‡ªè¨‚ DEBUG å·¥å…·ç³»çµ±
- **æ­£å¼ç‰ˆ**ï¼šä½¿ç”¨å…¨åŸŸéŒ¯èª¤ç›£è½å’ŒéŒ¯èª¤å›å ±æœå‹™
- **DOM ç›£æ§**ï¼šä½¿ç”¨ MutationObserver å’Œ Chrome DOM æ–·é»
- **éåŒæ­¥å•é¡Œ**ï¼šæ³¨æ„ Async/Await é™·é˜±ï¼Œæª¢æŸ¥æ˜¯å¦æ¼äº† `await`
- **å¿«é€Ÿå®šä½**ï¼šä½¿ç”¨äºŒåˆ†æ³•é™¤éŒ¯å’Œ `git bisect`
- **æ€è€ƒç­–ç•¥**ï¼šç”¨æ©¡çš®é´¨é™¤éŒ¯æ³•å’Œæœ€å°é‡ç¾æ³•é‡æ¸…æ€è·¯
- **Chrome å¯†æŠ€**ï¼šå–„ç”¨ `$0`ã€`monitor()`ã€`getEventListeners()` ç­‰æŒ‡ä»¤
- **CSS / ä¸»é¡Œ**ï¼šä½¿ç”¨ Elements Tabï¼ˆStyles + Computed + Animation é¢æ¿ï¼‰ğŸ†•
- **å„²å­˜ç©ºé–“**ï¼šä½¿ç”¨ Application Tabï¼ˆlocalStorage æª¢è¦–/ç·¨è¼¯ï¼‰ğŸ†•
- **éŸ³è¨Šå•é¡Œ**ï¼šæª¢æŸ¥ AudioContext ç‹€æ…‹ + è‡ªå‹•æ’­æ”¾æ”¿ç­– ğŸ†•
- **è¡Œå‹•è£ç½®**ï¼šä½¿ç”¨ Device Mode + Safari Web Inspector ğŸ†•
- **å¤šäººåŒæ­¥**ï¼šä½¿ç”¨ `firebase.database.enableLogging(true)` + å¤š Tab æ¸¬è©¦ ğŸ†•

è¨˜ä½ï¼š**é™¤éŒ¯ä¸æ˜¯æ‰¾éŒ¯èª¤ï¼Œè€Œæ˜¯ç†è§£ç¨‹å¼å¦‚ä½•é‹ä½œ**ã€‚å–„ç”¨é€™äº›å·¥å…·å’Œç­–ç•¥ï¼Œå¯ä»¥è®“ä½ æ›´å¿«é€Ÿåœ°ç™¼ç¾å•é¡Œä¸¦è§£æ±ºå®ƒå€‘ã€‚

---

# æ–‡ä»¶ç‰ˆæœ¬ç´€éŒ„

[ğŸ” å›åˆ°é ‚éƒ¨](#top) Â· [ğŸ“„ éœ€æ±‚æ–‡ä»¶ v4.6](å®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md#top)

### v1.2ï¼ˆ2026/02/18ï¼‰

- ğŸ†• æ–°å¢ Â§3.6 Phase 5 å…±ç”¨æ¨¡çµ„è¨­è¨ˆç´€éŒ„ï¼ˆcombo-selector / trial-renderer / result-uploadï¼‰
- ğŸ”„ æ›´æ–° Â§3.1 æ¶ˆè²»è€…æ•´åˆè¡¨ï¼ˆæ–°å¢ 3 å€‹å…±ç”¨æ¨¡çµ„ï¼‰
- ğŸ”„ å°æ‡‰éœ€æ±‚æ–‡ä»¶ç‰ˆæœ¬å‡ç´šè‡³ v4.6
- ğŸ”„ æ‰€æœ‰äº¤å‰é€£çµæŒ‡å‘æ›´æ–°ç‚ºå®Œæ•´éœ€æ±‚æ–‡ä»¶v4.5.md

### v1.1ï¼ˆ2026/02/14ï¼‰

- ğŸ†• æ–°å¢ Part 3 æ¶æ§‹è¨­è¨ˆåŸå‰‡ï¼ˆä½è€¦åˆ/é«˜å…§èš/å¸¸æ•¸é›†ä¸­ç®¡ç†ï¼‰
- ğŸ”„ æ›´æ–°é›†ä¸­ç®¡ç†å¸¸æ•¸ç¯„ä¾‹ç‚ºå¯¦éš› GameConstants æ¶æ§‹

### v1.0ï¼ˆ2026/02/13ï¼‰

- ğŸ†• åˆä½µ NAMING-CONVENTION.mdï¼ˆv2.4ï¼‰èˆ‡ ç¨‹å¼é™¤éŒ¯å®Œæ•´æŒ‡å—.md ç‚ºçµ±ä¸€é–‹ç™¼åƒè€ƒæ‰‹å†Š
- ğŸ†• æ–°å¢æ–‡ä»¶ç¸½è¦½ç´¢å¼•
- ğŸ”„ åŸå§‹ç¨ç«‹æª”æ¡ˆå·²æ¨™è¨˜æ£„ç”¨ï¼Œå…§å®¹å®Œæ•´ä¿ç•™
